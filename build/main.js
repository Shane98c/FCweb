webpackJsonp([0],{117:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return l});var i=function(){return function(t,e,n){this.requestSuccess=t,this.renderSuccess=e,this.id=n}}(),r=function(){return function(t,e){this.success=t,this.data=e}}(),a=function(){return function(t,e,n,i){this.success=t,this.id=e,this.format=n,this.data=i}}(),o=function(){return function(t,e,n,i){this.success=t,this.id=e,this.url=n,this.data=i}}(),l=function(){return function(t,e,n,i,r){this.success=t,this.types=e,this.index=n,this.format=i,this.data=r}}()},118:function(t,e,n){"use strict";var i=function(){function t(t,e,n){this.id=t,this.filter=e,this.clickable=n,this.clickable=0!=this.clickable}return t.prototype.getId=function(){return this.id},t.prototype.setType=function(t){this.type=t},t.prototype.getType=function(){return this.type},t.prototype.setStyle=function(t){t&&(this.style=t)},t.prototype.getStyle=function(){return this.style},t.prototype.getFilter=function(){return this.filter},t.prototype.isClickable=function(){return this.clickable},t}(),r=function(){return function(t,e,n,i,r){this.image="",this.offset=[0,0],this.text="",this.opacity=1,this.textSize=12,t&&(this.image=t),e&&(this.offset=e),n&&(this.text=n),i&&(this.textSize=i),r&&(this.opacity=r)}}(),a=function(){return function(t,e,n,i,r,a){this.isCluster=!1,this.color="#005ead",this.size=12,this.opacity=1,this.strokeColor="#005ead",this.strokeWidth=0,t&&(this.isCluster=t),this.isCluster&&(this.size={property:"point_count",type:"interval",stops:[[0,18],[100,20],[750,22]]}),n&&(this.size=n),a&&(this.opacity=a),e&&(this.color=e),i&&(this.strokeColor=i),r&&(this.strokeWidth=r)}}(),o=function(){return function(t,e,n){this.color="#005ead",this.width=1,this.opacity=.8,null!=t&&(this.color=t),null!=e&&(this.width=e),null!=n&&(this.opacity=n)}}(),l=function(){return function(t,e,n,i){this.fillColor="#ffffff",this.borderColor="#005ead",this.borderWidth=0,this.opacity=.5,null!=t&&(this.fillColor=t),null!=e&&(this.borderColor=e),null!=n&&(this.borderWidth=n),null!=i&&(this.opacity=i)}}(),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=function(t){function e(e,n,i,r,a){var l=t.call(this,e,r,a)||this;return l.type=n,i||(i={}),l.style=new o(i.color,i.width,i.opacity),l}return s(e,t),e.prototype.setStyle=function(t){t&&(this.style=t)},e}(i),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=function(t){function e(e,n,i,r,a){var o=t.call(this,e,r,a)||this;return o.type=n,i||(i={}),o.style=new l(i.fillColor,i.borderColor,i.borderWidth,i.opacity),o}return c(e,t),e.prototype.setStyle=function(t){t&&(this.style=t)},e}(i),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=function(t){function e(e,n,i,a,o){var l=t.call(this,e,a,o)||this;return l.type=n,i||(i={}),l.style=new r(i.image,i.offset,i.text,i.textSize,i.opacity),l}return h(e,t),e.prototype.setStyle=function(t){t&&(this.style=t)},e}(i),f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(t){function e(e,n,i,r,o){var l=t.call(this,e,r,o)||this;return l.type=n,i||(i={}),l.style=new a(i.isCluster,i.color,i.size,i.strokeColor,i.strokeWidth,i.opacity),l}return f(e,t),e.prototype.setStyle=function(t){t&&(this.style=t)},e}(i);n.d(e,"a",function(){return g});var g=function(){function t(t,e,n,i){this.shapeData=[],this.layers=[],this.id=t,this.zIndex=e,this.visible=!1,this.rendered=!1,null!=i&&(this.visible=i),this.isCluster=!1,null!=n&&(this.isCluster=n)}return t.prototype.setRendered=function(t){this.rendered=t},t.prototype.isRendered=function(){return 1==this.rendered},t.prototype.getBottomLayer=function(){return 0==this.layers.length?null:this.layers[0].getId()},t.prototype.getId=function(){return this.id},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){return this.visible},t.prototype.getIsCluster=function(){return this.isCluster},t.prototype.addLayer=function(t,e,n,i,r){for(var a=0;a<this.layers.length;a++)if(this.layers[a].getId()==t)return void console.log("already has a layer with this id");"circlepoint"!=e.toLowerCase()?"imagepoint"!=e.toLowerCase()?1!=this.isCluster?"polygon"!=e.toLowerCase()?"linestring"!=e.toLowerCase()?console.log("Invalid layer type"):this.layers.push(new u(t,e,n,i,r)):this.layers.push(new p(t,e,n,i,r)):console.log("layer type should be circlepoint or imagepoint in cluster feature"):this.layers.push(new d(t,e,n,i,r)):this.layers.push(new m(t,e,n,i,r))},t.prototype.getLayers=function(){return this.layers},t.prototype.setVisible=function(t){this.visible=t},t.prototype.addShapeData=function(t){t&&this.shapeData.push(t)},t.prototype.setShapeData=function(t){t&&(this.shapeData=t)},t.prototype.resetShapeData=function(){delete this.shapeData,this.shapeData=null,this.setShapeData([])},t.prototype.getShapeData=function(){return this.shapeData},t}()},168:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=168},189:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=189},213:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DataLayer});var __WEBPACK_IMPORTED_MODULE_0__dataLayerProperty__=__webpack_require__(274),__WEBPACK_IMPORTED_MODULE_1__dataLayerFeature__=__webpack_require__(275),__WEBPACK_IMPORTED_MODULE_2__support__=__webpack_require__(117),DataLayer=function(){function DataLayer(t,e,n){this.id=t,this.dataLayerConfigObj=e,this.geoJSONServ=n,this.dataLayerFeatures={},this.dataLayerProperties={},this.datasets=[],this.name=e.name,this.sourceName=e.sourceName,e.color&&(this.color=e.color),e.icon&&(this.icon=e.icon),e.event&&(this.event=e.event),this.download=!0,this.enabled=!1,this.visible=!1,this.initDataLayerFeature(e),this.initDataLayerProperty(e)}return DataLayer.prototype.initDataLayerFeature=function(t){for(var e in t.features){var n=new __WEBPACK_IMPORTED_MODULE_1__dataLayerFeature__.a,i=t.features[e];n.initFeature(e,i.zIndex,i.isCluster);for(var r=0;r<i.layers.length;r++){var a=i.layers[r];n.initFeatureLayers(a.id,a.type,a.style,a.filter,a.clickable)}n.setFilter(i.filter),this.dataLayerFeatures[e]=n}},DataLayer.prototype.initDataLayerProperty=function(t){for(var e in t.properties){var n=new __WEBPACK_IMPORTED_MODULE_0__dataLayerProperty__.a;n.setFilter(t.properties[e].filter),this.dataLayerProperties[e]=n}},DataLayer.prototype.getId=function(){return this.id},DataLayer.prototype.getName=function(){return this.name},DataLayer.prototype.getSourceName=function(){return this.sourceName},DataLayer.prototype.getIcon=function(){return this.icon},DataLayer.prototype.getColor=function(){return this.color},DataLayer.prototype.setDownload=function(t){this.download=t},DataLayer.prototype.getDownload=function(){return this.download},DataLayer.prototype.isEnabled=function(t){return this.enabled==t},DataLayer.prototype.getEnabled=function(){return this.enabled},DataLayer.prototype.setEnabled=function(t){this.enabled=t},DataLayer.prototype.isVisible=function(t){return this.visible==t},DataLayer.prototype.getVisible=function(){return this.visible},DataLayer.prototype.setVisible=function(t){this.visible=t;for(var e in this.dataLayerFeatures){this.dataLayerFeatures[e].getFeature().setVisible(t)}},DataLayer.prototype.getEvent=function(){return this.event},DataLayer.prototype.getFeatures=function(){var t=[];for(var e in this.dataLayerFeatures)t.push(this.dataLayerFeatures[e].getFeature());return t},DataLayer.prototype.getFeatureById=function(t){for(var e in this.dataLayerFeatures)if(t==e)return this.dataLayerFeatures[e].getFeature();return null},DataLayer.prototype.getProperties=function(){return this.dataLayerProperties},DataLayer.prototype.getDatasets=function(){return this.datasets},DataLayer.prototype.clear=function(){for(var t in this.dataLayerFeatures){var e=this.dataLayerFeatures[t];e.getFeature().resetShapeData(),e.getFeature().setVisible(!1)}this.dataLayerFeatures={},this.dataLayerProperties={},this.datasets=[],this.enabled=!1,this.download=!0,this.visible=!1},DataLayer.prototype.bindDataset=function(t){this.datasets.push(t)},DataLayer.prototype.buildFeature=function(t,e){if(!e||0==e.length)throw new Error("No shape data for rendering");try{for(var n=0;n<e.length;n++){var i=e[n];if(i=this.geoJSONServ.toGeoJSONArray(i))for(var r=0;r<i.length;r++)t.addShapeData(i[r])}}catch(t){throw new Error("Error happens when rendering shape data")}},DataLayer.prototype.buildProperty=function(t,e){if(!e||0==e.length)throw new Error("no valid data array after filter");for(var n=0;n<e.length;n++)t.push(e[n])},DataLayer.prototype.queryDatasets=function(){var t=this;return new Promise(function(e,n){for(var i=[],r=0;r<t.datasets.length;r++)i.push(t.datasets[r].fetch());Promise.all(i).then(function(t){for(var n=[],i=0;i<t.length;i++)t[i]&&(Array.isArray(t[i])?n=n.concat(t[i]):n.push(t[i]));e(new __WEBPACK_IMPORTED_MODULE_2__support__.b(!0,n))},function(t){e(new __WEBPACK_IMPORTED_MODULE_2__support__.b(!1,null))})})},DataLayer.prototype.processDatasets=function(rawArray){try{for(var key in this.dataLayerFeatures){var value=this.dataLayerFeatures[key],dataArray=[];value.getFilter()?((dataArray=eval(value.getFilter())(rawArray))||console.log(this.id,"Requested data is undefined after filter"),0==dataArray.length&&console.log(this.id,"Requested data is empty after filter")):dataArray=rawArray,this.buildFeature(value.getFeature(),dataArray),this.setEnabled(!0),this.setVisible(!0)}}catch(t){console.log(this.id,t),this.clear()}try{for(var key in this.dataLayerProperties){var value=this.dataLayerProperties[key],dataArray=[];value.getFilter()?((dataArray=eval(value.getFilter())(rawArray))||console.log(this.id,"Requested data is undefined after filter"),0==dataArray.length&&console.log(this.id,"Requested data is empty after filter")):dataArray=rawArray,this.buildProperty(value.getProperty(),dataArray)}}catch(t){console.log(this.id,t),this.clear()}},DataLayer}()},220:function(t,e,n){"use strict";function i(t){return ui._20(0,[ui._17(402653184,1,{nav:0}),ui._17(402653184,2,{tabRef:0}),(t()(),ui.Z(2,0,null,null,3,"ion-nav",[["swipebackenabled","false"]],null,null,null,ro.b,ro.a)),ui._15(6144,null,ao.a,null,[oo.a]),ui.Y(4,4374528,[[1,4],["content",4]],0,oo.a,[[2,lo.a],[2,so.a],uo.a,co.a,po.a,ui.j,ui.u,ui.z,ui.i,ho.l,fo.a,[2,mo.a],go.a,ui.k],{root:[0,"root"]},null),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,4,0,e.component.rootPage)},null)}function r(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","tooltip"],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.stopTooltipClick(n)&&i}return i},null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),ui._19(3,null,["\n    ","\n  "])),(t()(),ui._19(-1,null,["\n"]))],null,function(t,e){t(e,3,0,e.component.tooltipText)})}function a(t){return ui._20(0,[(t()(),ui.U(16777216,null,null,1,null,r)),ui.Y(1,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(3,0,null,null,20,"ion-fab",[["bottom",""],["center",""]],[[8,"hidden",0]],null,null,To.b,To.a)),ui.Y(4,1228800,null,2,ko.a,[po.a],null,null),ui._17(335544320,1,{_mainButton:0}),ui._17(603979776,2,{_fabLists:1}),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(8,0,null,0,14,"button",[["class","tabFab"],["ion-fab",""]],null,null,null,Io.b,Io.a)),ui.Y(9,49152,[[1,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(11,0,null,0,1,"ion-icon",[["class","tab-fab-icon"],["name","md-add"],["role","img"],["style","opacity: 0;"]],[[24,"@showAnimation",0],[2,"hide",null]],null,null,null,null)),ui.Y(12,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(14,0,null,0,1,"ion-icon",[["class","tab-fab-icon"],["name","md-cloud-download"],["role","img"],["style","opacity: 0;"]],[[24,"@showAnimation",0],[2,"hide",null]],null,null,null,null)),ui.Y(15,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(17,0,null,0,1,"ion-spinner",[["class","tab-fab-icon"],["style","opacity: 0;"]],[[24,"@showAnimation",0],[2,"spinner-paused",null]],null,null,Co.b,Co.a)),ui.Y(18,114688,null,0,Lo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(20,0,null,0,1,"ion-icon",[["class","tab-fab-icon"],["name","icon-cust-saveDrive"],["role","img"],["style","opacity: 0;"]],[[24,"@showAnimation",0],[2,"hide",null]],null,null,null,null)),ui.Y(21,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0,n.tooltipText&&n.stateServ.getTooltipsOn());t(e,12,0,"md-add");t(e,15,0,"md-cloud-download"),t(e,18,0);t(e,21,0,"icon-cust-saveDrive")},function(t,e){var n=e.component;t(e,3,0,!n.isHideFab());t(e,11,0,n.showState("add"),ui._11(e,12)._hidden);t(e,14,0,n.showState("load"),ui._11(e,15)._hidden);t(e,17,0,n.showState("spinner"),ui._11(e,18)._paused);t(e,20,0,n.showState("save"),ui._11(e,21)._hidden)})}function o(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"ion-tab",[["role","tabpanel"],["tabBadgeStyle","danger"]],[[1,"id",0],[1,"aria-labelledby",0]],[[null,"ionSelect"]],function(t,e,n){var i=!0;if("ionSelect"===e){i=!1!==t.component.tabClick(t.context.$implicit.name)&&i}return i},bo.b,bo.a)),ui.Y(1,245760,[[2,4],["fcTab",4]],0,xo.a,[wo.a,uo.a,co.a,po.a,ui.j,ui.u,ui.z,ui.i,ui.g,ho.l,fo.a,[2,mo.a],go.a,ui.k],{root:[0,"root"],tabTitle:[1,"tabTitle"],tabIcon:[2,"tabIcon"],tabBadge:[3,"tabBadge"],tabBadgeStyle:[4,"tabBadgeStyle"]},{ionSelect:"ionSelect"}),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,1,0,e.context.$implicit.root,e.context.$implicit.title,e.context.$implicit.icon,e.component.getBadge(e.context.$implicit.name),"danger")},function(t,e){t(e,0,0,ui._11(e,1)._tabId,ui._11(e,1)._btnId)})}function l(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-tab-fab",[["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.tabFabClicked()&&i}return i},a,zo)),ui.Y(1,49152,null,0,ba,[rr,Oi],{show:[0,"show"]},null)],function(t,e){t(e,1,0,e.component.showIcon)},null)}function s(t){return ui._20(0,[ui._17(402653184,1,{fcTabs:0}),ui._17(671088640,2,{fcTab:1}),(t()(),ui.Z(2,0,null,null,6,"ion-tabs",[["color","light"],["mode","md"],["tabsHighlight","true"],["tabsLayout","title-hide"]],null,null,null,Do.b,Do.a)),ui._15(6144,null,ao.a,null,[wo.a]),ui.Y(4,4374528,[[1,4],["fcTabs",4]],0,wo.a,[[2,so.a],[2,lo.a],uo.a,co.a,ui.j,po.a,ui.z,mo.a,Mo.a],{color:[0,"color"],mode:[1,"mode"],selectedIndex:[2,"selectedIndex"],tabsLayout:[3,"tabsLayout"],tabsHighlight:[4,"tabsHighlight"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,o)),ui.Y(7,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.U(16777216,null,null,1,null,l)),ui.Y(11,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,4,0,"light","md",n.selected,"title-hide","true");t(e,7,0,n.tabs);t(e,11,0,n.isShowTabFab())},null)}function u(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,174,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(1,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(3,0,null,1,42,"ion-list",[],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(12,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(14,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(15,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,4,{contentLabel:0}),ui._17(603979776,5,{_buttons:1}),ui._17(603979776,6,{_icons:1}),ui.Y(19,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(21,0,null,4,2,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null]],[[null,"ionChange"],[null,"keyup"]],function(t,e,n){var i=!0,r=t.component;if("keyup"===e){i=!1!==ui._11(t,23)._keyup(n)&&i}if("ionChange"===e){i=!1!==r.changeGpsOn()&&i}return i},Wo.b,Wo.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[$o.a]),ui.Y(23,1228800,null,0,$o.a,[Yo.a,co.a,po.a,ui.j,ui.z,Xo.a,[2,Zo.a],ho.l,go.a,ui.u],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(25,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(26,16384,[[4,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(27,null,["",""])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(30,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(31,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,7,{contentLabel:0}),ui._17(603979776,8,{_buttons:1}),ui._17(603979776,9,{_icons:1}),ui.Y(35,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(37,0,null,4,2,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null]],[[null,"ionChange"],[null,"keyup"]],function(t,e,n){var i=!0,r=t.component;if("keyup"===e){i=!1!==ui._11(t,39)._keyup(n)&&i}if("ionChange"===e){i=!1!==r.changeSpeedAltOn()&&i}return i},Wo.b,Wo.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[$o.a]),ui.Y(39,1228800,null,0,$o.a,[Yo.a,co.a,po.a,ui.j,ui.z,Xo.a,[2,Zo.a],ho.l,go.a,ui.u],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(41,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(42,16384,[[7,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(43,null,["",""])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(47,0,null,1,26,"ion-list",[],null,null,null,null,null)),ui.Y(48,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(50,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(51,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,10,{contentLabel:0}),ui._17(603979776,11,{_buttons:1}),ui._17(603979776,12,{_icons:1}),ui.Y(55,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(56,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(58,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(59,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,13,{contentLabel:0}),ui._17(603979776,14,{_buttons:1}),ui._17(603979776,15,{_icons:1}),ui.Y(63,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(65,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(66,16384,[[13,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(67,null,["",""])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(69,0,null,4,2,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null]],[[null,"ionChange"],[null,"keyup"]],function(t,e,n){var i=!0,r=t.component;if("keyup"===e){i=!1!==ui._11(t,71)._keyup(n)&&i}if("ionChange"===e){i=!1!==r.changeTootipsOn()&&i}return i},Wo.b,Wo.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[$o.a]),ui.Y(71,1228800,null,0,$o.a,[Yo.a,co.a,po.a,ui.j,ui.z,Xo.a,[2,Zo.a],ho.l,go.a,ui.u],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(75,0,null,1,34,"ion-list",[["style","margin: 0px;"]],null,null,null,null,null)),ui.Y(76,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(78,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(79,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,16,{contentLabel:0}),ui._17(603979776,17,{_buttons:1}),ui._17(603979776,18,{_icons:1}),ui.Y(83,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(84,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(86,0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(87,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,19,{contentLabel:0}),ui._17(603979776,20,{_buttons:1}),ui._17(603979776,21,{_icons:1}),ui.Y(91,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(93,0,null,2,14,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"],[null,"ionChange"]],function(t,e,n){var i=!0,r=t.component;if("ngModelChange"===e){i=!1!==(r.units=n)&&i}if("ionChange"===e){i=!1!==r.changedUnits()&&i}return i},null,null)),ui.Y(94,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(96,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(97,1196032,null,1,Jo.a,[co.a,ui.j,ui.z,[2,Ho.f]],null,{ionChange:"ionChange"}),ui._17(603979776,22,{_buttons:1}),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(100,0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","metric"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==ui._11(t,101).onClick()&&i}return i},Qo.b,Qo.a)),ui.Y(101,114688,[[22,4]],0,tl.a,[],{value:[0,"value"]},null),(t()(),ui._19(102,0,["\n          ","\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(104,0,null,null,2,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","imperial"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==ui._11(t,105).onClick()&&i}return i},Qo.b,Qo.a)),ui.Y(105,114688,[[22,4]],0,tl.a,[],{value:[0,"value"]},null),(t()(),ui._19(106,0,["\n          ","\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(111,0,null,1,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,No.b,No.a)),ui.Y(112,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,23,{contentLabel:0}),ui._17(603979776,24,{_buttons:1}),ui._17(603979776,25,{_icons:1}),ui.Y(116,16384,null,0,el.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,2,[" "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(119,0,null,1,54,"ion-list",[],null,null,null,null,null)),ui.Y(120,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(122,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(123,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,26,{contentLabel:0}),ui._17(603979776,27,{_buttons:1}),ui._17(603979776,28,{_icons:1}),ui.Y(127,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(128,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(130,0,null,null,9,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.goToAbout()&&i}return i},No.b,No.a)),ui.Y(131,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,29,{contentLabel:0}),ui._17(603979776,30,{_buttons:1}),ui._17(603979776,31,{_icons:1}),ui.Y(135,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(137,0,null,0,1,"ion-icon",[["color","primary"],["item-start",""],["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(138,147456,[[31,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null),(t()(),ui._19(139,2,["\n       ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(141,0,null,null,9,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.goToFAQ()&&i}return i},No.b,No.a)),ui.Y(142,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,32,{contentLabel:0}),ui._17(603979776,33,{_buttons:1}),ui._17(603979776,34,{_icons:1}),ui.Y(146,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(148,0,null,0,1,"ion-icon",[["color","primary"],["item-start",""],["name","help-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(149,147456,[[34,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null),(t()(),ui._19(-1,2,["\n       FAQ/Help\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(152,0,null,null,9,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.provideFeedback()&&i}return i},No.b,No.a)),ui.Y(153,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,35,{contentLabel:0}),ui._17(603979776,36,{_buttons:1}),ui._17(603979776,37,{_icons:1}),ui.Y(157,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(159,0,null,0,1,"ion-icon",[["color","primary"],["item-start",""],["name","md-send"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(160,147456,[[37,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null),(t()(),ui._19(161,2,["\n       ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(163,0,null,null,9,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.suggestFieldGuide()&&i}return i},No.b,No.a)),ui.Y(164,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,38,{contentLabel:0}),ui._17(603979776,39,{_buttons:1}),ui._17(603979776,40,{_icons:1}),ui.Y(168,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(170,0,null,0,1,"ion-icon",[["color","primary"],["item-start",""],["name","icon-cust-rockHammer"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(171,147456,[[40,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null),(t()(),ui._19(-1,2,["\n       Suggest new field guide\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,23,0,ui._2(1,"",n.gpsOn,""));t(e,39,0,ui._2(1,"",n.gpsOn,""));t(e,71,0,ui._2(1,"",n.tooltipsOn,""));t(e,94,0,n.units);t(e,101,0,"metric");t(e,105,0,"imperial");t(e,138,0,"primary","information-circle");t(e,149,0,"primary","help-circle");t(e,160,0,"primary","md-send");t(e,171,0,"primary","icon-cust-rockHammer")},function(t,e){var n=e.component;t(e,0,0,ui._11(e,1).statusbarPadding,ui._11(e,1)._hasRefresher);t(e,12,0,n.gpsTitle);t(e,21,0,ui._11(e,23)._disabled,ui._11(e,23)._value,ui._11(e,23)._activated);t(e,27,0,n.gpsLocation);t(e,37,0,ui._11(e,39)._disabled,ui._11(e,39)._value,ui._11(e,39)._activated);t(e,43,0,n.gpsSpeed);t(e,56,0,n.helpTitle);t(e,67,0,n.helpTooltip);t(e,69,0,ui._11(e,71)._disabled,ui._11(e,71)._value,ui._11(e,71)._activated);t(e,84,0,n.unitTitle);t(e,93,0,ui._11(e,96).ngClassUntouched,ui._11(e,96).ngClassTouched,ui._11(e,96).ngClassPristine,ui._11(e,96).ngClassDirty,ui._11(e,96).ngClassValid,ui._11(e,96).ngClassInvalid,ui._11(e,96).ngClassPending,ui._11(e,97)._disabled);t(e,100,0,ui._11(e,101)._disabled,ui._11(e,101).isActive,ui._11(e,101).isActive);t(e,102,0,n.unitMetric);t(e,104,0,ui._11(e,105)._disabled,ui._11(e,105).isActive,ui._11(e,105).isActive);t(e,106,0,n.unitImperial);t(e,128,0,n.aboutTitle);t(e,137,0,ui._11(e,138)._hidden);t(e,139,0,n.aboutFC);t(e,148,0,ui._11(e,149)._hidden);t(e,159,0,ui._11(e,160)._hidden);t(e,161,0,n.aboutFeedback);t(e,170,0,ui._11(e,171)._hidden)})}function c(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n    "," ","\n  "]))],null,function(t,e){var n=e.component;t(e,1,0,n.altText,n.altitude)})}function p(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(2,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(3,null,["\n    "," ","\n  "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,c)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,6,0,0!==e.component.currentAlt)},function(t,e){var n=e.component;t(e,3,0,n.speedText,n.speed)})}function h(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(2,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(3,null,["\n    ","\n  "])),(t()(),ui._19(-1,null,["\n"]))],null,function(t,e){t(e,3,0,e.component.searchGPSText)})}function d(t){return ui._20(0,[(t()(),ui.U(16777216,null,null,1,null,p)),ui.Y(1,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.U(16777216,null,null,1,null,h)),ui.Y(4,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0,n.goodLocation);t(e,4,0,!n.goodLocation)},null)}function f(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"button",[["class","closeButton"],["ion-fab",""],["mini",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.fabClicked("mapClear")&&i}return i},Io.b,Io.a)),ui.Y(1,49152,[[1,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(3,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(4,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n  "]))],function(t,e){t(e,4,0,"close")},function(t,e){t(e,3,0,ui._11(e,4)._hidden)})}function m(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,14,"ion-fab",[["class","mapFabButton"],["light",""],["right",""],["top",""]],null,null,null,To.b,To.a)),ui.Y(1,1228800,null,2,ko.a,[po.a],null,null),ui._17(603979776,1,{_mainButton:0}),ui._17(603979776,2,{_fabLists:1}),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(5,0,null,0,5,"button",[["ion-fab",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.layerButtonClicked(n)&&i}return i},Io.b,Io.a)),ui.Y(6,49152,[[1,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(8,0,null,0,1,"ion-icon",[["name","logo-buffer"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(9,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,f)),ui.Y(13,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,9,0,"logo-buffer");t(e,13,0,n.showDeleteButton())},function(t,e){t(e,8,0,ui._11(e,9)._hidden)})}function g(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"button",[["ion-fab",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.buttonClicked("GPSLocate")&&i}return i},Io.b,Io.a)),ui.Y(1,49152,[[1,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(3,0,null,0,1,"ion-icon",[["name","md-locate"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(4,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n  "]))],function(t,e){t(e,4,0,"md-locate")},function(t,e){t(e,3,0,ui._11(e,4)._hidden)})}function y(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"ion-fab",[["bottom",""],["class","gps"],["right",""]],null,null,null,To.b,To.a)),ui.Y(1,1228800,null,2,ko.a,[po.a],null,null),ui._17(603979776,1,{_mainButton:0}),ui._17(603979776,2,{_fabLists:1}),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,g)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(8,0,null,0,7,"button",[["ion-fab",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.buttonClicked("GPSTrack")&&i}return i},Io.b,Io.a)),ui.Y(9,278528,null,0,So.g,[ui.p,ui.q,ui.j,ui.A],{ngClass:[0,"ngClass"]},null),ui._14(10,{"fc-map-button-active":0}),ui.Y(11,49152,[[1,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(13,0,null,0,1,"ion-icon",[["name","md-navigate"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(14,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n"]))],function(t,e){var n=e.component;t(e,6,0,!n.getTrackButtonActive());t(e,9,0,t(e,10,0,n.getTrackButtonActive()));t(e,14,0,"md-navigate")},function(t,e){t(e,13,0,ui._11(e,14)._hidden)})}function _(t){return ui._20(0,[(t()(),ui.U(16777216,null,null,1,null,y)),ui.Y(1,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,1,0,e.component.stateServ.getGpsEnabled())},null)}function v(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"a",[["target","_blank"]],[[1,"class",0]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openUrl(t.context.$implicit.link,n,!1)&&i}return i},null,null)),(t()(),ui._19(1,null,[""," "]))],null,function(t,e){t(e,0,0,e.context.$implicit.class);t(e,1,0,e.context.$implicit.content)})}function b(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,6,"div",[["class","fc-map-bottom-left"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(2,0,null,null,3,"div",[["class","ctrl"],["style","display: block;"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(4,0,null,null,0,"a",[["aria-label","Mapbox logo"],["class","ctrl-logo"],["target","_blank"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openUrl("https://www.mapbox.com/",n,!1)&&i}return i},null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(8,0,null,null,8,"div",[["class","fc-map-bottom-right"]],null,[[null,"click"]],function(t,e,n){var i=!0,r=t.component;if("click"===e){i=!1!=(r.hideAttr=!r.hideAttr)&&i}return i},null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(10,0,null,null,5,"div",[["class","ctrl ctrl-attrib attrib-compact"]],null,null,null,null,null)),ui.Y(11,278528,null,0,So.g,[ui.p,ui.q,ui.j,ui.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,v)),ui.Y(14,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,11,0,"ctrl ctrl-attrib attrib-compact",!0===n.hideAttr?"hide-me":"show-me");t(e,14,0,n.attributions)},null)}function x(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[6,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-down")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function w(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[6,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-up")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function S(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,12,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0,r=t.component;if("click"===e){i=!1!=(r.toggle=!r.toggle)&&i}return i},No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,4,{contentLabel:0}),ui._17(603979776,5,{_buttons:1}),ui._17(603979776,6,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,4,1,null,x)),ui.Y(8,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,4,1,null,w)),ui.Y(11,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        Abstract\n      "]))],function(t,e){var n=e.component;t(e,8,0,!n.toggle);t(e,11,0,n.toggle)},null)}function T(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,8,"ion-item",[["class","pullUpContent item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,7,{contentLabel:0}),ui._17(603979776,8,{_buttons:1}),ui._17(603979776,9,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(7,0,null,2,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),ui._19(-1,2,["\n      "]))],null,function(t,e){t(e,7,0,e.component.getAbstract())})}function k(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[12,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-down")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function I(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[12,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-up")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function E(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,3,"div",[["class","figure"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(3,null,[" ","\n          "]))],null,function(t,e){t(e,2,0,e.component.getImage(e.context.$implicit));t(e,3,0,e.context.$implicit.caption)})}function A(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,11,"ion-item",[["class","pullUpContent item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,13,{contentLabel:0}),ui._17(603979776,14,{_buttons:1}),ui._17(603979776,15,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(7,0,null,2,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,2,1,null,E)),ui.Y(10,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,2,["\n        "]))],function(t,e){t(e,10,0,e.parent.context.$implicit.figures)},function(t,e){t(e,7,0,e.parent.context.$implicit.text)})}function C(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,18,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(2,0,null,null,12,"ion-item",[["class","itemTitle item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.toggleText(t.context.$implicit,n)&&i}return i},No.b,No.a)),ui.Y(3,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,10,{contentLabel:0}),ui._17(603979776,11,{_buttons:1}),ui._17(603979776,12,{_icons:1}),ui.Y(7,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,4,1,null,k)),ui.Y(10,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,4,1,null,I)),ui.Y(13,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(14,2,["\n          ","\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,A)),ui.Y(17,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "]))],function(t,e){t(e,10,0,!e.context.$implicit.show);t(e,13,0,e.context.$implicit.show);t(e,17,0,e.context.$implicit.show)},function(t,e){t(e,14,0,e.context.$implicit.title)})}function L(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[21,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-down")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function z(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[21,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-up")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function P(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,3,"div",[["class","figure"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(3,null,[" ","\n          "]))],null,function(t,e){t(e,2,0,e.component.getImage(e.context.$implicit));t(e,3,0,e.context.$implicit.caption)})}function D(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,11,"ion-item",[["class","pullUpContent item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,22,{contentLabel:0}),ui._17(603979776,23,{_buttons:1}),ui._17(603979776,24,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(7,0,null,2,0,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,2,1,null,P)),ui.Y(10,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,2,["\n        "]))],function(t,e){t(e,10,0,e.parent.context.$implicit.properties.figures)},function(t,e){t(e,7,0,e.parent.context.$implicit.properties.text)})}function M(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,25,"div",[],[[8,"id",0]],null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(2,0,null,null,19,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.toggleText(t.context.$implicit,n)&&i}return i},No.b,No.a)),ui.Y(3,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,19,{contentLabel:0}),ui._17(603979776,20,{_buttons:1}),ui._17(603979776,21,{_icons:1}),ui.Y(7,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(9,0,null,0,5,"button",[["ion-button",""],["item-start",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.focusStop(t.context.$implicit,n)&&i}return i},hl.b,hl.a)),ui.Y(10,1097728,[[20,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n            "])),(t()(),ui.Z(12,0,null,0,1,"ion-icon",[["name","md-locate"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(13,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,4,1,null,L)),ui.Y(17,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,4,1,null,z)),ui.Y(20,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(21,2,["\n          ","\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,D)),ui.Y(24,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "]))],function(t,e){t(e,13,0,"md-locate");t(e,17,0,!e.context.$implicit.show);t(e,20,0,e.context.$implicit.show);t(e,24,0,e.context.$implicit.show)},function(t,e){t(e,0,0,ui._2(1,"",e.context.$implicit.properties.id,""));t(e,12,0,ui._11(e,13)._hidden);t(e,21,0,e.context.$implicit.properties.title)})}function F(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,56,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,24,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,20,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(13,0,null,2,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(14,null,["",""])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(16,0,null,2,9,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(18,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Authors:"])),(t()(),ui._19(20,null,[" ","\n        "])),(t()(),ui.Z(21,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(23,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Publisher:"])),(t()(),ui._19(25,null,[" "," (",")\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(29,0,null,null,26,"ion-card-content",[["class","cardContent"]],null,null,null,null,null)),ui.Y(30,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(32,0,null,null,22,"ion-list",[],null,null,null,null,null)),ui.Y(33,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,S)),ui.Y(36,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,T)),ui.Y(39,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n\n      "])),(t()(),ui.U(16777216,null,null,1,null,C)),ui.Y(42,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(44,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["mode","md"]],null,null,null,No.b,No.a)),ui.Y(45,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],{mode:[0,"mode"]},null),ui._17(335544320,16,{contentLabel:0}),ui._17(603979776,17,{_buttons:1}),ui._17(603979776,18,{_icons:1}),ui.Y(49,16384,null,0,el.a,[co.a,ui.j,ui.z],{mode:[0,"mode"]},null),(t()(),ui._19(-1,2,["Field guide stops"])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,M)),ui.Y(53,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,4,0,"md");t(e,36,0,n.getAbstract());t(e,39,0,n.toggle);t(e,42,0,n.getSections());t(e,45,0,"md");t(e,49,0,"md");t(e,53,0,n.getStops())},function(t,e){var n=e.component;t(e,14,0,n.getTitle());t(e,20,0,n.getAuthors());t(e,25,0,n.getPublisher(),n.getYear())})}function O(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.getType())})}function R(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.getName())})}function j(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.getDescription())})}function B(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,26,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,22,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,2,1,null,O)),ui.Y(14,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(16,0,null,2,7,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,R)),ui.Y(19,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,j)),ui.Y(22,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,4,0,"md");t(e,14,0,n.getType());t(e,19,0,n.getName());t(e,22,0,n.getDescription())},null)}function U(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(2,0,null,null,2,"div",[["class","pullUpContentImg"]],null,null,null,null,null)),ui.Y(3,278528,null,0,So.l,[ui.q,ui.j,ui.A],{ngStyle:[0,"ngStyle"]},null),ui._14(4,{"background-color":0}),(t()(),ui._19(-1,null,["\n        "]))],function(t,e){t(e,3,0,t(e,4,0,e.component.getColor()))},null)}function N(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n              ","\n            "]))],null,function(t,e){t(e,1,0,e.component.getRocktype())})}function Z(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.getComments())})}function Y(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.getDescription())})}function V(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),ui.Z(1,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Source: "])),(t()(),ui._19(3,null,["",", "]))],null,function(t,e){t(e,3,0,e.component.getRefAuthors())})}function q(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",", "]))],null,function(t,e){t(e,1,0,e.component.getRefYear())})}function G(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"span",[["class","refTitle"]],null,null,null,null,null)),(t()(),ui._19(1,null,["",": "]))],null,function(t,e){t(e,1,0,e.component.getRefTitle())})}function W(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.getRefSource())})}function H(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,55,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,51,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,47,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(13,0,null,2,39,"div",[["style","display:flex;"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,U)),ui.Y(16,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(18,0,null,null,33,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(20,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(21,null,["",""])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(23,0,null,null,27,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,N)),ui.Y(26,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(28,0,null,null,1,"div",[["class","age"]],null,null,null,null,null)),(t()(),ui._19(29,null,[""," - "," million years ago"])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Z)),ui.Y(32,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Y)),ui.Y(35,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(37,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(39,0,null,null,10,"div",[["class","reference"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              "])),(t()(),ui.U(16777216,null,null,1,null,V)),ui.Y(42,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui.U(16777216,null,null,1,null,q)),ui.Y(44,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui.U(16777216,null,null,1,null,G)),ui.Y(46,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui.U(16777216,null,null,1,null,W)),ui.Y(48,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,4,0,"md");t(e,16,0,n.getColor());t(e,26,0,n.getRocktype());t(e,32,0,n.getComments());t(e,35,0,n.getDescription());t(e,42,0,n.getRefAuthors());t(e,44,0,n.getRefYear());t(e,46,0,n.getRefTitle());t(e,48,0,n.getRefSource())},function(t,e){var n=e.component;t(e,21,0,n.getTitle());t(e,29,0,n.clipAgePrecisionBot(),n.clipAgePrecisionTop())})}function $(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,0,"img",[],[[8,"src",4]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.presentCaption(n,t.context.$implicit)&&i}return i},null,null))],null,function(t,e){t(e,0,0,e.component.getImage(e.context.$implicit))})}function X(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","images"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,$)),ui.Y(3,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,3,0,e.component.images)},null)}function K(t){return ui._20(0,[(t()(),ui.U(16777216,null,null,1,null,X)),ui.Y(1,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0,n.images&&n.images.length)},null)}function J(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[3,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-down")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function Q(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-spinner",[["color","primary"],["item-end",""],["style","width: 2rem; height: 2rem;"]],[[2,"spinner-paused",null]],null,null,Co.b,Co.a)),ui.Y(1,114688,null,0,Lo.a,[co.a,ui.j,ui.z],{color:[0,"color"]},null)],function(t,e){t(e,1,0,"primary")},function(t,e){t(e,0,0,ui._11(e,1)._paused)})}function tt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[3,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-up")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function et(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.noArticle)})}function nt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","imageContainer"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(2,0,null,null,1,"fc-pullup-article-card-images",[],null,null,null,K,Sl)),ui.Y(3,49152,null,0,Aa,[wl.a,rr,qr],{images:[0,"images"]},null),(t()(),ui._19(-1,null,["\n        "]))],function(t,e){t(e,3,0,e.component.images)},null)}function it(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,18,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(2,0,null,null,1,"div",[["class","pullUpContent"]],null,null,null,null,null)),(t()(),ui._19(3,null,["",""])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,nt)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(8,0,null,null,1,"div",[["class","wikiCredit"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["(Wikipedia.org)"])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(11,0,null,null,6,"button",[["class","chevron"],["clear",""],["icon-only",""],["ion-button",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openFullArticle(n)&&i}return i},hl.b,hl.a)),ui.Y(12,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{clear:[0,"clear"]},null),(t()(),ui._19(13,0,["\n          ","\n          "])),(t()(),ui.Z(14,0,null,0,2,"ion-icon",[["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(15,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,null,[" "])),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui._19(-1,null,["\n      "]))],function(t,e){var n=e.component;t(e,6,0,n.images&&n.images.length);t(e,12,0,"");t(e,15,0,"ios-arrow-forward")},function(t,e){var n=e.component;t(e,3,0,n.article.shortText);t(e,13,0,n.fullArticle);t(e,14,0,ui._11(e,15)._hidden)})}function rt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,11,"ion-card-content",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,et)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,it)),ui.Y(9,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){var n=e.component;t(e,6,0,!n.articleValid);t(e,9,0,n.articleValid)},null)}function at(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,28,"ion-card",[["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.click()&&i}return i},null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,21,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),ui._10(2,0),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,4,1,null,J)),ui.Y(16,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,4,1,null,Q)),ui.Y(19,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,4,1,null,tt)),ui.Y(22,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,rt)),ui.Y(27,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,4,0,"md");t(e,16,0,n.collapsed&&!n.showSpinner);t(e,19,0,n.showSpinner);t(e,22,0,!n.collapsed);t(e,27,0,!n.collapsed)},null)}function ot(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(t,e,n){var i=!0;if("ionInfinite"===e){i=!1!==t.component.doInfinite(n)&&i}return i},null,null)),ui.Y(1,1196032,null,0,El.a,[Bo.a,ui.u,ui.j,go.a],null,{ionInfinite:"ionInfinite"}),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,Al.b,Al.a)),ui.Y(4,114688,null,0,Cl.a,[El.a,co.a],null,null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,4,0)},function(t,e){t(e,3,0,ui._11(e,4).inf.state)})}function lt(t){return ui._20(0,[ui._10(null,0),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.U(16777216,null,null,1,null,ot)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,3,0,e.component.hasMore())},null)}function st(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,5,"fc-pullup-article-card",[],null,null,null,at,kl)),ui.Y(3,573440,null,0,Ia,[rr,qr,_r,so.a,gi.a,Vr,Mi],{pageTitle:[0,"pageTitle"],images:[1,"images"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.Z(5,0,null,0,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(6,null,["",""])),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.context.$implicit.pageTitle,e.context.$implicit.images)},function(t,e){t(e,6,0,e.context.$implicit.pageTitleProper)})}function ut(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,st)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function ct(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n              ","\n            "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.jdt)})}function pt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,28,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,25,"fc-pullup-article-card",[],null,null,null,at,kl)),ui.Y(3,573440,null,0,Ia,[rr,qr,_r,so.a,gi.a,Vr,Mi],{pageTitle:[0,"pageTitle"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.Z(5,0,null,0,21,"div",[["style","display:flex;"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(7,0,null,null,3,"div",[["class","pullUpContentImg"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(9,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(12,0,null,null,13,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(14,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(15,null,["\n            ","\n          "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(17,0,null,null,7,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(19,0,null,null,1,"div",[["class","age"]],null,null,null,null,null)),(t()(),ui._19(20,null,["\n              "," - "," million years ago\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,ct)),ui.Y(23,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.context.$implicit.tna);t(e,23,0,e.context.$implicit.jdt)},function(t,e){t(e,9,0,e.component.getImage(e.context.$implicit));t(e,15,0,e.context.$implicit.tna);t(e,20,0,e.context.$implicit.eag,e.context.$implicit.lag)})}function ht(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,pt)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function dt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n              ","\n            "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.SiteName)})}function ft(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,31,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,28,"fc-pullup-article-card",[],null,null,null,at,kl)),ui.Y(3,573440,null,0,Ia,[rr,qr,_r,so.a,gi.a,Vr,Mi],{pageTitle:[0,"pageTitle"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.Z(5,0,null,0,24,"div",[["style","display:flex;"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(7,0,null,null,3,"div",[["class","pullUpContentImg"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(9,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(12,0,null,null,16,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(14,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(15,null,["\n            ","\n          "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(17,0,null,null,10,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(19,0,null,null,1,"div",[["class","sciName"]],null,null,null,null,null)),(t()(),ui._19(20,null,["\n              ","\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(22,0,null,null,1,"div",[["class","age"]],null,null,null,null,null)),(t()(),ui._19(23,null,["\n              "," - "," years ago\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,dt)),ui.Y(26,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.context.$implicit.TaxonName);t(e,26,0,e.context.$implicit.SiteName)},function(t,e){t(e,9,0,e.component.getImage(e.context.$implicit));t(e,15,0,e.context.$implicit.commonName);t(e,20,0,e.context.$implicit.TaxonName);t(e,23,0,e.context.$implicit.AgeOlder,e.context.$implicit.AgeYounger)})}function mt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,ft)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function gt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Water Depth:"])),(t()(),ui._19(4,null,[" "," meters\n          "]))],null,function(t,e){t(e,4,0,e.parent.parent.context.$implicit["Water Depth"])})}function yt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,19,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(1,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(3,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(4,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(8,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(10,0,null,2,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(11,null,["\n          Drilling Program: ","\n        "])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(13,0,null,2,4,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,gt)),ui.Y(16,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,"md");t(e,16,0,e.parent.context.$implicit["Water Depth"])},function(t,e){t(e,11,0,e.parent.context.$implicit.Program)})}function _t(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[6,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-down")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function vt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["color","primary"],["item-end",""],["name","ios-arrow-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,[[6,4]],0,Ao.a,[co.a,ui.j,ui.z],{color:[0,"color"],name:[1,"name"]},null)],function(t,e){t(e,1,0,"primary","ios-arrow-up")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function bt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,6,"ion-item",[["class","pullUpContent item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,7,{contentLabel:0}),ui._17(603979776,8,{_buttons:1}),ui._17(603979776,9,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(6,2,["\n          ","\n        "]))],null,function(t,e){t(e,6,0,e.parent.parent.context.$implicit.Abstracts)})}function xt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,23,"ion-card-content",[["class","cardContent"]],null,null,null,null,null)),ui.Y(1,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(3,0,null,null,19,"ion-list",[],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(6,0,null,null,12,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.switchToggle(t.parent.context.$implicit)&&i}return i},No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,4,{contentLabel:0}),ui._17(603979776,5,{_buttons:1}),ui._17(603979776,6,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,4,1,null,_t)),ui.Y(14,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.U(16777216,null,4,1,null,vt)),ui.Y(17,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n          Science Abstract\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,bt)),ui.Y(21,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,14,0,!e.parent.context.$implicit.toggle);t(e,17,0,e.parent.context.$implicit.toggle);t(e,21,0,e.parent.context.$implicit.toggle)},null)}function wt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,8,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,yt)),ui.Y(4,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,xt)),ui.Y(7,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,4,0,e.context.$implicit.Program);t(e,7,0,e.context.$implicit.Abstracts)},null)}function St(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,wt)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function Tt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n          ","\n        "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.lake)})}function kt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Water Depth:"])),(t()(),ui._19(4,null,[" "," m\n          "]))],null,function(t,e){t(e,4,0,e.parent.context.$implicit.waterDepth)})}function It(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Core Length:"])),(t()(),ui._19(4,null,[" "," cm\n          "]))],null,function(t,e){t(e,4,0,e.parent.context.$implicit.coreLength)})}function Et(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Principal Investigator(s):"])),(t()(),ui._19(4,null,[" ","\n          "]))],null,function(t,e){t(e,4,0,e.parent.context.$implicit.pi)})}function At(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Expedition Name:"])),(t()(),ui._19(4,null,[" ","\n          "]))],null,function(t,e){t(e,4,0,e.parent.context.$implicit.cruise)})}function Ct(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Expedition Year:"])),(t()(),ui._19(4,null,[" ","\n          "]))],null,function(t,e){t(e,4,0,e.parent.context.$implicit.begin_date.substring(0,4))})}function Lt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,35,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,31,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(6,0,null,null,27,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,Tt)),ui.Y(14,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(16,0,null,2,16,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,kt)),ui.Y(19,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,It)),ui.Y(22,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,Et)),ui.Y(25,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,At)),ui.Y(28,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,Ct)),ui.Y(31,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,4,0,"md");t(e,14,0,e.context.$implicit.lake);t(e,19,0,e.context.$implicit.waterDepth);t(e,22,0,e.context.$implicit.coreLength);t(e,25,0,e.context.$implicit.pi);t(e,28,0,e.context.$implicit.cruise);t(e,31,0,e.context.$implicit.begin_date)},null)}function zt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,Lt)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function Pt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n          ","\n        "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.title)})}function Dt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","location"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n          "," (",")\n        "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.location,e.parent.context.$implicit.duration)})}function Mt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","imageCredit"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n            Image credit: ","\n          "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.featured_credit)})}function Ft(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.context.$implicit.summary_body)})}function Ot(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","imageCredit"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n                  Image credit: ","\n                "]))],null,function(t,e){t(e,1,0,e.parent.parent.context.$implicit.image_credit)})}function Rt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-slide",[["class","slidess"]],null,null,null,Zl.b,Zl.a)),ui.Y(1,180224,null,0,Yl.a,[ui.j,ui.z,Vl.a],null,null),(t()(),ui._19(-1,0,["\n                "])),(t()(),ui.Z(3,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,0,["\n                "])),(t()(),ui.U(16777216,null,0,1,null,Ot)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,0,["\n                "])),(t()(),ui.Z(8,0,null,0,1,"div",[["class","caption"]],null,null,null,null,null)),(t()(),ui._19(9,null,["\n                  ","\n                "])),(t()(),ui._19(-1,0,["\n              "]))],function(t,e){t(e,6,0,e.parent.context.$implicit.image_credit.length)},function(t,e){t(e,3,0,e.component.getImage(e.parent.context.$implicit.image_link));t(e,9,0,e.parent.context.$implicit.image_caption)})}function jt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              "])),(t()(),ui.U(16777216,null,null,1,null,Rt)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "]))],function(t,e){t(e,3,0,e.context.$implicit.image_link.length>0)},null)}function Bt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"ion-slides",[["centeredSlides","true"],["pager",""],["zoom",""]],null,null,null,ql.b,ql.a)),ui.Y(1,1228800,null,0,Vl.a,[co.a,po.a,ui.u,[2,lo.a],ui.j,ui.z],{pager:[0,"pager"],zoom:[1,"zoom"],centeredSlides:[2,"centeredSlides"]},null),(t()(),ui._19(-1,0,["\n            "])),(t()(),ui.U(16777216,null,0,1,null,jt)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n          "]))],function(t,e){t(e,1,0,"","","true");t(e,4,0,e.parent.context.$implicit.slideshow)},null)}function Ut(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n              ","\n            "]))],null,function(t,e){t(e,1,0,e.context.$implicit)})}function Nt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,7,"div",[["class","references"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"div",[["class","subTitles"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              Researchers:\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Ut)),ui.Y(6,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n          "]))],function(t,e){t(e,6,0,e.parent.context.$implicit.researchers)},null)}function Zt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,7,"span",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n                doi:\n                "])),(t()(),ui.Z(2,0,null,null,4,"span",[["class","refLink"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openRefLink(t.parent.context.$implicit.link)&&i}return i},null,null)),(t()(),ui._19(3,null,["\n                  ","\n                  "])),(t()(),ui.Z(4,0,null,null,1,"ion-icon",[["name","md-exit"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(5,147456,[[3,4]],0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,null,["\n                "])),(t()(),ui._19(-1,null,["\n              "]))],function(t,e){t(e,5,0,"md-exit")},function(t,e){t(e,3,0,e.parent.context.$implicit.doi);t(e,4,0,ui._11(e,5)._hidden)})}function Yt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"span",[["class","refLink"]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openRefLink(t.parent.context.$implicit.link)&&i}return i},null,null)),(t()(),ui._19(-1,null,["\n                Link\n                "])),(t()(),ui.Z(2,0,null,null,1,"ion-icon",[["name","md-exit"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(3,147456,[[3,4]],0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,null,["\n              "]))],function(t,e){t(e,3,0,"md-exit")},function(t,e){t(e,2,0,ui._11(e,3)._hidden)})}function Vt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n              ",".\n              "])),(t()(),ui.U(16777216,null,null,1,null,Zt)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n              "])),(t()(),ui.U(16777216,null,null,1,null,Yt)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "]))],function(t,e){t(e,3,0,e.context.$implicit.doi&&e.context.$implicit.link);t(e,6,0,!e.context.$implicit.doi&&e.context.$implicit.link)},function(t,e){t(e,1,0,e.context.$implicit.title)})}function qt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,7,"div",[["class","references"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(2,0,null,null,1,"div",[["class","subTitles"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              References:\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Vt)),ui.Y(6,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n          "]))],function(t,e){t(e,6,0,e.parent.context.$implicit.references)},null)}function Gt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,46,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,42,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(6,0,null,null,38,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,Pt)),ui.Y(14,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,Dt)),ui.Y(17,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(19,0,null,2,9,"div",[["class","featuredImage"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(21,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,Mt)),ui.Y(24,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(26,0,null,null,1,"div",[["class","caption"]],null,null,null,null,null)),(t()(),ui._19(27,null,["\n            ","\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(30,0,null,2,13,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,Ft)),ui.Y(33,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n\n          "])),(t()(),ui.U(16777216,null,null,1,null,Bt)),ui.Y(36,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n\n          "])),(t()(),ui.U(16777216,null,null,1,null,Nt)),ui.Y(39,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n\n          "])),(t()(),ui.U(16777216,null,null,1,null,qt)),ui.Y(42,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n\n        "])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,4,0,"md");t(e,14,0,e.context.$implicit.title);t(e,17,0,e.context.$implicit.location.length);t(e,24,0,e.context.$implicit.featured_credit.length);t(e,33,0,e.context.$implicit.summary_body);t(e,36,0,e.context.$implicit.slideshow&&e.context.$implicit.slideshow.length>0);t(e,39,0,e.context.$implicit.researchers.length>0);t(e,42,0,e.context.$implicit.references.length>0)},function(t,e){t(e,21,0,e.component.getImage(e.context.$implicit.featured_image));t(e,27,0,e.context.$implicit.featured_caption)})}function Wt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,Gt)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function Ht(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n          ","\n        "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.Volcano_Name)})}function $t(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","volcType"]],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.Primary_Volcano_Type)})}function Xt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","subTitles"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              Last eruption year: "])),(t()(),ui.Z(2,0,null,null,1,"span",[["class","attribute"]],null,null,null,null,null)),(t()(),ui._19(3,null,["",""])),(t()(),ui._19(-1,null,["\n            "]))],null,function(t,e){t(e,3,0,e.component.formatYear(e.parent.parent.context.$implicit.Last_Eruption_Year))})}function Kt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","subTitles"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              Tectonic setting: "])),(t()(),ui.Z(2,0,null,null,1,"span",[["class","attribute"]],null,null,null,null,null)),(t()(),ui._19(3,null,["",""])),(t()(),ui._19(-1,null,["\n            "]))],null,function(t,e){t(e,3,0,e.parent.parent.context.$implicit.Tectonic_Setting)})}function Jt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","subTitles"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              Major rock type: "])),(t()(),ui.Z(2,0,null,null,1,"span",[["class","attribute"]],null,null,null,null,null)),(t()(),ui._19(3,null,["",""])),(t()(),ui._19(-1,null,["\n            "]))],null,function(t,e){t(e,3,0,e.parent.parent.context.$implicit.Major_Rock_Type)})}function Qt(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[["class","subTitles"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              Elevation: "])),(t()(),ui.Z(2,0,null,null,1,"span",[["class","attribute"]],null,null,null,null,null)),(t()(),ui._19(3,null,["",""])),(t()(),ui._19(-1,null,["\n            "]))],null,function(t,e){t(e,3,0,e.component.formatElevation(e.parent.parent.context.$implicit.Elevation))})}function te(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(2,0,null,null,13,"div",[["class","attributes"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Xt)),ui.Y(5,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Kt)),ui.Y(8,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Jt)),ui.Y(11,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,Qt)),ui.Y(14,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(16,null,["\n          ","\n        "]))],function(t,e){t(e,5,0,e.parent.context.$implicit.Last_Eruption_Year);t(e,8,0,e.parent.context.$implicit.Tectonic_Setting);t(e,11,0,e.parent.context.$implicit.Major_Rock_Type);t(e,14,0,e.parent.context.$implicit.Elevation)},function(t,e){t(e,16,0,e.parent.context.$implicit.Geological_Summary)})}function ee(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","imageCredit"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n            ","\n          "]))],null,function(t,e){t(e,1,0,e.parent.parent.context.$implicit.Primary_Photo_Credit)})}function ne(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","caption"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n            ","\n          "]))],null,function(t,e){t(e,1,0,e.parent.parent.context.$implicit.Primary_Photo_Caption)})}function ie(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,9,"div",[["class","featuredImage"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,ee)),ui.Y(5,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.U(16777216,null,null,1,null,ne)),ui.Y(8,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "]))],function(t,e){t(e,5,0,e.parent.context.$implicit.Primary_Photo_Credit);t(e,8,0,e.parent.context.$implicit.Primary_Photo_Caption)},function(t,e){t(e,2,0,e.component.getImage(e.parent.context.$implicit.Primary_Photo_Link))})}function re(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,26,"ion-card",[],null,null,null,null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,22,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(6,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,Ht)),ui.Y(14,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,$t)),ui.Y(17,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,te)),ui.Y(20,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.U(16777216,null,2,1,null,ie)),ui.Y(23,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,4,0,"md");t(e,14,0,e.context.$implicit.Volcano_Name);t(e,17,0,e.context.$implicit.Primary_Volcano_Type);t(e,20,0,e.context.$implicit.Geological_Summary);t(e,23,0,e.context.$implicit.Primary_Photo_Link)},null)}function ae(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,re)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function oe(t){return ui._20(2,[ui._17(402653184,1,{childFooter:0}),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,[[1,0],["footer",1]],null,4,"ion-footer",[],null,null,null,null,null)),ui.Y(3,16384,null,0,Xl.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n        "])),ui._10(null,0),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n    "]))],null,null)}function le(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","source"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n        (",")\n      "]))],null,function(t,e){t(e,1,0,e.component.source)})}function se(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-fieldtrip-card",[],null,null,null,F,gl)),ui.Y(1,8437760,null,0,Va,["MapEngine",qr,rr,cr],{newData:[0,"newData"],stopId:[1,"stopId"],parent:[2,"parent"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){var n=e.component;t(e,1,0,n.featureData.fieldTripContent,n.id,ui._11(e.parent,22))},null)}function ue(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.faults)},null)}function ce(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.dikes)},null)}function pe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.moraines)},null)}function he(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.eskers)},null)}function de(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.lineaments)},null)}function fe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.synclines)},null)}function me(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.monoclines)},null)}function ge(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.folds)},null)}function ye(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.anticlines)},null)}function _e(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.flows)},null)}function ve(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.sills)},null)}function be(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.veins)},null)}function xe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.marker_beds)},null)}function we(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.craters)},null)}function Se(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-fill-card",[],null,null,null,H,bl)),ui.Y(1,49152,null,0,Fa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.burwell_fill)},null)}function Te(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-fill-card",[],null,null,null,H,bl)),ui.Y(1,49152,null,0,Fa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.burwell_stroke)},null)}function ke(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-fill-card",[],null,null,null,H,bl)),ui.Y(1,49152,null,0,Fa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.burwell_water_fill)},null)}function Ie(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-fill-card",[],null,null,null,H,bl)),ui.Y(1,49152,null,0,Fa,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.burwell_water_line)},null)}function Ee(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-wiki-card",[],null,null,null,ut,Pl)),ui.Y(1,573440,null,0,ja,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.wikiClusters)},null)}function Ae(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-wiki-card",[],null,null,null,ut,Pl)),ui.Y(1,573440,null,0,ja,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.wikiUnclustered)},null)}function Ce(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-pbdb-card",[],null,null,null,ht,Ml)),ui.Y(1,573440,null,0,Ra,[qr,rr],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.pbdbClusters)},null)}function Le(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-pbdb-card",[],null,null,null,ht,Ml)),ui.Y(1,573440,null,0,Ra,[qr,rr],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.pbdbUnclustered)},null)}function ze(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-neotoma-card",[],null,null,null,mt,Ol)),ui.Y(1,573440,null,0,Ba,[qr,rr],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.neotomaClusters)},null)}function Pe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-neotoma-card",[],null,null,null,mt,Ol)),ui.Y(1,573440,null,0,Ba,[qr,rr],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.neotomaUnclustered)},null)}function De(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-ocd-card",[],null,null,null,St,jl)),ui.Y(1,49152,null,0,Ua,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.ocdClusters)},null)}function Me(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"fc-ocd-card",[],null,null,null,St,jl)),ui.Y(1,49152,null,0,Ua,[],{data:[0,"data"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,1,0,e.component.featureData.ocdUnclustered)},null)}function Fe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-laccore-card",[],null,null,null,zt,Ul)),ui.Y(1,49152,null,0,Na,[],{data:[0,"data"]},null)],function(t,e){t(e,1,0,e.component.featureData.lacClusters)},null)}function Oe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-laccore-card",[],null,null,null,zt,Ul)),ui.Y(1,49152,null,0,Na,[],{data:[0,"data"]},null)],function(t,e){t(e,1,0,e.component.featureData.lacUnclustered)},null)}function Re(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-earthscope-card",[],null,null,null,Wt,Gl)),ui.Y(1,573440,null,0,Za,[qr,rr,ki,yi.a],{data:[0,"data"]},null)],function(t,e){t(e,1,0,e.component.featureData.earthScopeClusters)},null)}function je(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-earthscope-card",[],null,null,null,Wt,Gl)),ui.Y(1,573440,null,0,Za,[qr,rr,ki,yi.a],{data:[0,"data"]},null)],function(t,e){t(e,1,0,e.component.featureData.earthScopeUnclustered)},null)}function Be(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-smithsonian-card",[],null,null,null,ae,Hl)),ui.Y(1,49152,null,0,Ya,[qr,rr,ki],{data:[0,"data"]},null)],function(t,e){t(e,1,0,e.component.featureData.smithsonianClusters)},null)}function Ue(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-smithsonian-card",[],null,null,null,ae,Hl)),ui.Y(1,49152,null,0,Ya,[qr,rr,ki],{data:[0,"data"]},null)],function(t,e){t(e,1,0,e.component.featureData.smithsonianUnclustered)},null)}function Ne(t){return ui._20(0,[ui._17(402653184,1,{ionPullUp:0}),ui._17(402653184,2,{content:0}),(t()(),ui.Z(2,0,null,null,123,"ion-pullup",[],[[8,"hidden",0]],null,null,oe,Kl)),ui.Y(3,1163264,[[1,4],["ionPullUp",4]],1,wa,[po.a,ui.j,ui.z],null,null),ui._17(335544320,3,{childBody:0}),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(6,0,null,0,13,"ion-toolbar",[["class","toolbar"],["draggable",""],["mode","md"]],[[2,"statusbar-padding",null]],[[null,"drag"],[null,"tap"]],function(t,e,n){var i=!0,r=t.component;if("drag"===e){i=!1!==r.drag(n)&&i}if("tap"===e){i=!1!==r.tap(n)&&i}return i},Ql.b,Ql.a)),ui.Y(7,49152,null,0,ts.a,[co.a,ui.j,ui.z],{mode:[0,"mode"]},null),ui.Y(8,212992,null,0,$r,[ui.j],null,{drag:"drag"}),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(10,0,null,3,8,"ion-title",[["class","title"],["mode","md"]],null,null,null,es.b,es.a)),ui.Y(11,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],{mode:[0,"mode"]},null),(t()(),ui._19(12,0,["\n      ","\n      "])),(t()(),ui.Z(13,0,null,0,1,"ion-icon",[["class","updownChev"],["name","md-reorder"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(14,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.U(16777216,null,0,1,null,le)),ui.Y(17,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(21,0,null,0,103,"ion-content",[["overflow-scroll","true"],["scroll","true"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(22,4374528,[[2,4],[3,4],["pullUpContent",4]],0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,se)),ui.Y(25,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,ue)),ui.Y(29,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,ce)),ui.Y(32,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,pe)),ui.Y(35,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,he)),ui.Y(38,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,de)),ui.Y(41,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,fe)),ui.Y(44,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,me)),ui.Y(47,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,ge)),ui.Y(50,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,ye)),ui.Y(53,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,_e)),ui.Y(56,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,ve)),ui.Y(59,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,be)),ui.Y(62,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,xe)),ui.Y(65,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,we)),ui.Y(68,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n\n\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,Se)),ui.Y(71,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Te)),ui.Y(74,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,ke)),ui.Y(77,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Ie)),ui.Y(80,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,Ee)),ui.Y(83,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Ae)),ui.Y(86,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,Ce)),ui.Y(89,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Le)),ui.Y(92,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,ze)),ui.Y(95,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Pe)),ui.Y(98,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,De)),ui.Y(101,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Me)),ui.Y(104,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,Fe)),ui.Y(107,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Oe)),ui.Y(110,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Re)),ui.Y(114,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,je)),ui.Y(117,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n    "])),(t()(),ui.U(16777216,null,1,1,null,Be)),ui.Y(120,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n    "])),(t()(),ui.U(16777216,null,1,1,null,Ue)),ui.Y(123,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui._19(-1,0,["\n"]))],function(t,e){var n=e.component;t(e,3,0);t(e,7,0,"md"),t(e,8,0);t(e,11,0,"md");t(e,14,0,"md-reorder");t(e,17,0,n.source);t(e,25,0,n.featureData.fieldTripContent);t(e,29,0,n.featureData.faults);t(e,32,0,n.featureData.dikes);t(e,35,0,n.featureData.moraines);t(e,38,0,n.featureData.eskers);t(e,41,0,n.featureData.lineaments);t(e,44,0,n.featureData.synclines);t(e,47,0,n.featureData.monoclines);t(e,50,0,n.featureData.folds);t(e,53,0,n.featureData.anticlines);t(e,56,0,n.featureData.flows);t(e,59,0,n.featureData.sills);t(e,62,0,n.featureData.veins);t(e,65,0,n.featureData.marker_beds);t(e,68,0,n.featureData.craters);t(e,71,0,n.featureData.burwell_fill);t(e,74,0,!n.featureData.burwell_fill&&n.featureData.burwell_stroke);t(e,77,0,!n.featureData.burwell_fill&&!n.featureData.burwell_stroke&&n.featureData.burwell_water_fill);t(e,80,0,!n.featureData.burwell_fill&&!n.featureData.burwell_stroke&&!n.featureData.burwell_water_fill&&n.featureData.burwell_water_line);t(e,83,0,n.featureData.wikiClusters);t(e,86,0,n.featureData.wikiUnclustered);t(e,89,0,n.featureData.pbdbClusters);t(e,92,0,n.featureData.pbdbUnclustered);t(e,95,0,n.featureData.neotomaClusters);t(e,98,0,n.featureData.neotomaUnclustered);t(e,101,0,n.featureData.ocdClusters);t(e,104,0,n.featureData.ocdUnclustered);t(e,107,0,n.featureData.lacClusters);t(e,110,0,n.featureData.lacUnclustered);t(e,114,0,n.featureData.earthScopeClusters);t(e,117,0,n.featureData.earthScopeUnclustered);t(e,120,0,n.featureData.smithsonianClusters);t(e,123,0,n.featureData.smithsonianUnclustered)},function(t,e){var n=e.component;t(e,2,0,n.hidden);t(e,6,0,ui._11(e,7)._sbPadding);t(e,12,0,n.title);t(e,13,0,ui._11(e,14)._hidden);t(e,21,0,ui._11(e,22).statusbarPadding,ui._11(e,22)._hasRefresher)})}function Ze(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-speed-alt",[],null,null,null,d,rl)),ui.Y(1,49152,null,0,za,[Vr,rr,Mi],null,null)],null,null)}function Ye(t){return ui._20(0,[ui._17(402653184,1,{fcPullUp:0}),ui._17(402653184,2,{fcMapGpsButton:0}),(t()(),ui.Z(2,0,null,null,16,"ion-content",[["no-bounce",""],["overflow-scroll","false"],["scroll","false"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(3,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,Ze)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(8,0,null,1,1,"fc-map-fab",[],null,null,null,m,ol)),ui.Y(9,49152,[["fcMapFab",4]],0,va,[Oi,Yr,rr],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(11,0,null,1,0,"div",[["id","map"],["style","width: 100%; height: 100%;"]],null,null,null,null,null)),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(13,0,null,1,1,"fc-map-gps-button",[],null,null,null,_,sl)),ui.Y(14,49152,[[2,4],["fcMapGpsButton",4]],0,Ca,[rr,Fo.a,Oi],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(16,0,null,1,1,"fc-map-attribution",[],null,null,null,b,cl)),ui.Y(17,49152,null,0,Pa,[ar,Oi,yi.a],null,null),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(20,0,null,null,1,"fc-pull-up",[],null,null,null,Ne,rs)),ui.Y(21,49152,[[1,4],["fcPullUp",4]],0,Ta,[ui.g],null,null),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,6,0,e.component.stateServ.getSpeedAltEnabled())},function(t,e){t(e,2,0,ui._11(e,3).statusbarPadding,ui._11(e,3)._hasRefresher)})}function Ve(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[["class","fc-info"]],null,null,null,null,null)),(t()(),ui._19(1,null,["\n    ","\n  "]))],null,function(t,e){t(e,1,0,e.component.returnFailMessage)})}function qe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.publisher)})}function Ge(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.loadFieldtrip(t.context.$implicit)&&i}return i},No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,4,{contentLabel:0}),ui._17(603979776,5,{_buttons:1}),ui._17(603979776,6,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(7,0,null,2,1,"h2",[["class","content-wrap"]],null,null,null,null,null)),(t()(),ui._19(8,null,["",""])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,2,1,null,qe)),ui.Y(11,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n    "]))],function(t,e){t(e,11,0,e.context.$implicit.publisher)},function(t,e){t(e,8,0,e.context.$implicit.title)})}function We(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"ion-list",[],null,null,null,null,null)),ui.Y(1,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,9,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(4,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(8,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(10,0,null,2,1,"ion-icon",[["name","icon-cust-fieldGuide"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(11,147456,[[3,4]],0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(12,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Ge)),ui.Y(15,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){var n=e.component;t(e,11,0,"icon-cust-fieldGuide");t(e,15,0,n.getInPathFilterList())},function(t,e){var n=e.component;t(e,10,0,ui._11(e,11)._hidden);t(e,12,0,n.inPathMessage)})}function He(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),ui._19(1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.publisher)})}function $e(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.loadFieldtrip(t.context.$implicit)&&i}return i},No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,10,{contentLabel:0}),ui._17(603979776,11,{_buttons:1}),ui._17(603979776,12,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(7,0,null,2,1,"h2",[["class","content-wrap"]],null,null,null,null,null)),(t()(),ui._19(8,null,["",""])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,2,1,null,He)),ui.Y(11,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n    "]))],function(t,e){t(e,11,0,e.context.$implicit.publisher)},function(t,e){t(e,8,0,e.context.$implicit.title)})}function Xe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"ion-list",[],null,null,null,null,null)),ui.Y(1,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,9,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(4,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,7,{contentLabel:0}),ui._17(603979776,8,{_buttons:1}),ui._17(603979776,9,{_icons:1}),ui.Y(8,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(10,0,null,2,1,"ion-icon",[["name","icon-cust-fieldGuide"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(11,147456,[[9,4]],0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(12,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,$e)),ui.Y(15,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){var n=e.component;t(e,11,0,"icon-cust-fieldGuide");t(e,15,0,n.getOutPathFilterList())},function(t,e){var n=e.component;t(e,10,0,ui._11(e,11)._hidden);t(e,12,0,n.outPathMessage)})}function Ke(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,12,"ion-header",[["no-border",""]],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,8,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,Ql.b,Ql.a)),ui.Y(4,49152,null,0,ts.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,4,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ionInput"],[null,"ngModelChange"]],function(t,e,n){var i=!0,r=t.component;if("ionInput"===e){i=!1!==r.getItems(n)&&i}if("ngModelChange"===e){i=!1!==(r.searchKey=n)&&i}return i},us.b,us.a)),ui.Y(7,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(9,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(10,1294336,null,0,cs.a,[co.a,po.a,ui.j,ui.z,[2,Ho.f]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput"}),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(14,0,null,null,11,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(15,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,Ve)),ui.Y(18,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,We)),ui.Y(21,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,Xe)),ui.Y(24,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,7,0,n.searchKey);t(e,10,0,ui._2(1,"",n.searchText,""));t(e,18,0,n.returnFail);t(e,21,0,n.getInPathFilterList().length>0);t(e,24,0,n.getOutPathFilterList().length>0)},function(t,e){t(e,3,0,ui._11(e,4)._sbPadding);t(e,6,1,[ui._11(e,9).ngClassUntouched,ui._11(e,9).ngClassTouched,ui._11(e,9).ngClassPristine,ui._11(e,9).ngClassDirty,ui._11(e,9).ngClassValid,ui._11(e,9).ngClassInvalid,ui._11(e,9).ngClassPending,ui._11(e,10)._animated,ui._11(e,10)._value,ui._11(e,10)._isActive,ui._11(e,10)._showCancelButton,ui._11(e,10)._shouldAlignLeft,ui._11(e,10)._isFocus]);t(e,14,0,ui._11(e,15).statusbarPadding,ui._11(e,15)._hasRefresher)})}function Je(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(1,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(3,0,null,1,5,"ion-card",[["class","clouds"],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openWITSection("clouds")&&i}return i},null,null)),ui.Y(4,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,1,"div",[["class","card-title"]],null,null,null,null,null)),(t()(),ui._19(7,null,["",""])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(10,0,null,1,5,"ion-card",[["class","landscapes"],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openWITSection("landscape")&&i}return i},null,null)),ui.Y(11,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(13,0,null,null,1,"div",[["class","card-title"]],null,null,null,null,null)),(t()(),ui._19(14,null,["",""])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],null,function(t,e){var n=e.component;t(e,0,0,ui._11(e,1).statusbarPadding,ui._11(e,1)._hasRefresher);t(e,7,0,n.cloudTitle);t(e,14,0,n.landTitle)})}function Qe(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,36,"ion-item-sliding",[],null,null,null,ms.b,ms.a)),ui.Y(1,49152,[["savedSlidingItem",4]],2,gs.a,[[2,Uo.a],po.a,ui.z,ui.j,ui.u],null,null),ui._17(335544320,4,{item:0}),ui._17(603979776,5,{_itemOptions:1}),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(5,0,null,0,18,"ion-item",[["class","item item-block"],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openOptions(ui._11(t,1),ui._11(t,6))&&i}return i},No.b,No.a)),ui.Y(6,1097728,[[4,4],["savedItem",4]],3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,6,{contentLabel:0}),ui._17(603979776,7,{_buttons:1}),ui._17(603979776,8,{_icons:1}),ui.Y(10,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(12,0,null,0,4,"ion-avatar",[["item-left",""]],null,null,null,null,null)),ui.Y(13,16384,null,0,ys.a,[],null,null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(15,0,null,null,0,"img",[["src","assets/img/maptile.jpg"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(18,0,null,2,1,"h2",[],null,null,null,null,null)),(t()(),ui._19(19,null,["",""])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(21,0,null,2,1,"p",[],null,null,null,null,null)),(t()(),ui._19(22,null,["",""])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(25,0,null,1,10,"ion-item-options",[["side","right"]],null,null,null,null,null)),ui.Y(26,16384,[[5,4]],0,_s.a,[ui.j,po.a],{side:[0,"side"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(28,0,null,null,2,"button",[["color","primary"],["ion-button",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.load(t.context.$implicit)&&i}return i},hl.b,hl.a)),ui.Y(29,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{color:[0,"color"]},null),(t()(),ui._19(-1,0,["\n            Load  \n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(32,0,null,null,2,"button",[["color","danger"],["ion-button",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.delete(t.context.$implicit,t.context.index)&&i}return i},hl.b,hl.a)),ui.Y(33,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{color:[0,"color"]},null),(t()(),ui._19(-1,0,["\n            Delete  \n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,26,0,"right");t(e,29,0,"primary");t(e,33,0,"danger")},function(t,e){t(e,19,0,e.context.$implicit.name);t(e,22,0,e.context.$implicit.description)})}function tn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(1,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(3,0,null,1,16,"ion-list",[],null,null,null,null,null)),ui.Y(4,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(6,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(7,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(11,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(12,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(14,0,null,null,1,"div",[["class","fc-info"]],null,null,null,null,null)),(t()(),ui._19(15,null,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Qe)),ui.Y(18,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,18,0,e.component.getList())},function(t,e){var n=e.component;t(e,0,0,ui._11(e,1).statusbarPadding,ui._11(e,1)._hasRefresher);t(e,12,0,n.title);t(e,15,0,n.contentMessage)})}function en(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,14,"ion-col",[["class","col"]],[[4,"opacity",null]],null,null,null,null)),ui.Y(1,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(3,0,null,null,3,"button",[["class","image-button"],["ion-button",""],["tappable",""]],[[2,"selected",null],[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.changeBaseTile(t.context.$implicit)&&i}return i},hl.b,hl.a)),ui.Y(4,278528,null,0,So.l,[ui.q,ui.j,ui.A],{ngStyle:[0,"ngStyle"]},null),ui._14(5,{"background-image":0,"background-size":1}),ui.Y(6,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(10,0,null,null,3,"div",[["class","imageButtonText"]],null,null,null,null,null)),ui.Y(11,278528,null,0,So.g,[ui.p,ui.q,ui.j,ui.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ui._14(12,{selected:0}),(t()(),ui._19(13,null,["",""])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){var n=e.component;t(e,4,0,t(e,5,0,"url("+e.context.$implicit.getIcon()+")","cover"));t(e,11,0,"imageButtonText",t(e,12,0,n.isBaseTileSelected(e.context.$implicit)))},function(t,e){var n=e.component;t(e,0,0,e.context.$implicit.getEnabled()?1:.5);t(e,3,0,n.isBaseTileSelected(e.context.$implicit),!e.context.$implicit.getEnabled());t(e,13,0,e.context.$implicit.getName())})}function nn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,4,{contentLabel:0}),ui._17(603979776,5,{_buttons:1}),ui._17(603979776,6,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(7,0,null,4,2,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null]],[[null,"ionChange"],[null,"keyup"]],function(t,e,n){var i=!0,r=t.component;if("keyup"===e){i=!1!==ui._11(t,9)._keyup(n)&&i}if("ionChange"===e){i=!1!==r.changeDatasetTile(t.parent.context.$implicit)&&i}return i},Wo.b,Wo.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[$o.a]),ui.Y(9,1228800,null,0,$o.a,[Yo.a,co.a,po.a,ui.j,ui.z,Xo.a,[2,Zo.a],ho.l,go.a,ui.u],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(11,0,null,1,7,"ion-label",[],null,null,null,null,null)),ui.Y(12,16384,[[4,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(14,0,null,null,0,"img",[["class","sourceKey"]],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(15,null,[" ","\n          "])),(t()(),ui.Z(16,0,null,null,1,"div",[["class","sourceName"]],null,null,null,null,null)),(t()(),ui._19(17,null,["\n            ","\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,2,["\n      "]))],function(t,e){t(e,9,0,ui._2(1,"",e.parent.context.$implicit.getVisible(),""))},function(t,e){t(e,7,0,ui._11(e,9)._disabled,ui._11(e,9)._value,ui._11(e,9)._activated);t(e,14,0,e.parent.context.$implicit.getIcon());t(e,15,0,e.parent.context.$implicit.name);t(e,17,0,e.parent.context.$implicit.sourceName)})}function rn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,nn)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,3,0,e.context.$implicit.getEnabled())},null)}function an(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,rn)),ui.Y(3,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.component.getDatasetTiles())},null)}function on(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"div",[["class","sourceKey"]],null,null,null,null,null)),ui.Y(1,278528,null,0,So.l,[ui.q,ui.j,ui.A],{ngStyle:[0,"ngStyle"]},null),ui._14(2,{"background-color":0})],function(t,e){t(e,1,0,t(e,2,0,e.parent.parent.context.$implicit.color))},null)}function ln(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,0,"img",[["class","sourceKey"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.parent.context.$implicit.icon)})}function sn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,7,{contentLabel:0}),ui._17(603979776,8,{_buttons:1}),ui._17(603979776,9,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(7,0,null,4,2,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null]],[[null,"ionChange"],[null,"keyup"]],function(t,e,n){var i=!0,r=t.component;if("keyup"===e){i=!1!==ui._11(t,9)._keyup(n)&&i}if("ionChange"===e){i=!1!==r.changeDataLayer(t.parent.context.$implicit)&&i}return i},Wo.b,Wo.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[$o.a]),ui.Y(9,1228800,null,0,$o.a,[Yo.a,co.a,po.a,ui.j,ui.z,Xo.a,[2,Zo.a],ho.l,go.a,ui.u],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(11,0,null,1,11,"ion-label",[],null,null,null,null,null)),ui.Y(12,16384,[[7,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,on)),ui.Y(15,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,ln)),ui.Y(18,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(19,null,[" ","\n        "])),(t()(),ui.Z(20,0,null,null,1,"div",[["class","sourceName"]],null,null,null,null,null)),(t()(),ui._19(21,null,["\n          ","\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "]))],function(t,e){t(e,9,0,ui._2(1,"",e.parent.context.$implicit.getVisible(),""));t(e,15,0,!e.parent.context.$implicit.icon&&e.parent.context.$implicit.color);t(e,18,0,e.parent.context.$implicit.icon)},function(t,e){t(e,7,0,ui._11(e,9)._disabled,ui._11(e,9)._value,ui._11(e,9)._activated);t(e,19,0,e.parent.context.$implicit.name);t(e,21,0,e.parent.context.$implicit.sourceName)})}function un(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,sn)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.context.$implicit.getEnabled())},null)}function cn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,21,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,10,{contentLabel:0}),ui._17(603979776,11,{_buttons:1}),ui._17(603979776,12,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(7,0,null,4,2,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null]],[[null,"ionChange"],[null,"keyup"]],function(t,e,n){var i=!0,r=t.component;if("keyup"===e){i=!1!==ui._11(t,9)._keyup(n)&&i}if("ionChange"===e){i=!1!==r.changeFieldtripLayer()&&i}return i},Wo.b,Wo.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[$o.a]),ui.Y(9,1228800,null,0,$o.a,[Yo.a,co.a,po.a,ui.j,ui.z,Xo.a,[2,Zo.a],ho.l,go.a,ui.u],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(11,0,null,1,9,"ion-label",[],null,null,null,null,null)),ui.Y(12,16384,[[10,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(14,0,null,null,2,"div",[["class","sourceKey"]],null,null,null,null,null)),ui.Y(15,278528,null,0,So.l,[ui.q,ui.j,ui.A],{ngStyle:[0,"ngStyle"]},null),ui._14(16,{"background-color":0}),(t()(),ui._19(17,null,["\n        ","\n        "])),(t()(),ui.Z(18,0,null,null,1,"div",[["class","sourceName"]],null,null,null,null,null)),(t()(),ui._19(19,null,["\n          ","\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "]))],function(t,e){var n=e.component;t(e,9,0,ui._2(1,"",n.getFieldtripLayer().getFeatureById("fieldTripStops").getVisible(),""));t(e,15,0,t(e,16,0,n.getFieldtripLayer().color))},function(t,e){var n=e.component;t(e,7,0,ui._11(e,9)._disabled,ui._11(e,9)._value,ui._11(e,9)._activated);t(e,17,0,n.getFieldtripLayer().name);t(e,19,0,n.getFieldtripLayer().sourceName)})}function pn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,36,"ion-list",[],null,null,null,null,null)),ui.Y(1,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,13,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(4,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(8,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(9,2,["\n    ","\n    "])),(t()(),ui.Z(10,0,null,4,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.closePopover()&&i}return i},hl.b,hl.a)),ui.Y(11,1097728,[[2,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],{clear:[0,"clear"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.Z(13,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(14,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,2,["\n  "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(18,0,null,null,5,"ion-row",[["class","row-content-center row"]],null,null,null,null,null)),ui.Y(19,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,en)),ui.Y(22,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n\n  "])),(t()(),ui.U(16777216,null,null,1,null,an)),ui.Y(26,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n\n  "])),(t()(),ui.U(16777216,null,null,1,null,un)),ui.Y(29,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(31,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,cn)),ui.Y(34,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,11,0,"");t(e,14,0,"close");t(e,22,0,n.getBaseTiles());t(e,26,0,n.isDataLoaded());t(e,29,0,n.getDataLayers());t(e,34,0,n.getFieldtripLayer()&&n.getFieldtripLayer().getEnabled())},function(t,e){t(e,9,0,e.component.title);t(e,13,0,ui._11(e,14)._hidden)})}function hn(t){return ui._20(0,[(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(1,0,null,null,13,"div",[["class","imagePopover"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.closePopover()&&i}return i},hl.b,hl.a)),ui.Y(4,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{clear:[0,"clear"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.Z(6,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(7,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(10,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(12,0,null,null,1,"div",[["class","captionText"]],null,null,null,null,null)),(t()(),ui._19(13,null,["\n        ","\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,4,0,"");t(e,7,0,"close")},function(t,e){var n=e.component;t(e,6,0,ui._11(e,7)._hidden);t(e,10,0,n.getImage(n.img));t(e,13,0,n.caption)})}function dn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n              ","\n            "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.SiteName)})}function fn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,31,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,28,"fc-pullup-article-card",[],null,null,null,at,kl)),ui.Y(3,573440,null,0,Ia,[rr,qr,_r,so.a,gi.a,Vr,Mi],{pageTitle:[0,"pageTitle"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui.Z(5,0,null,0,24,"div",[["style","display:flex;"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(7,0,null,null,3,"div",[["class","pullUpContentImg"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(9,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(12,0,null,null,16,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(14,0,null,null,1,"div",[["class","pullUpTitle"]],null,null,null,null,null)),(t()(),ui._19(15,null,["\n            ","\n          "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(17,0,null,null,10,"div",[["class","pullUpInfo"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(19,0,null,null,1,"div",[["class","sciName"]],null,null,null,null,null)),(t()(),ui._19(20,null,["\n              ","\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(22,0,null,null,1,"div",[["class","age"]],null,null,null,null,null)),(t()(),ui._19(23,null,["\n              "," - "," years ago\n            "])),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.U(16777216,null,null,1,null,dn)),ui.Y(26,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.context.$implicit.TaxonName);t(e,26,0,e.context.$implicit.SiteName)},function(t,e){t(e,9,0,e.component.getImage(e.context.$implicit));t(e,15,0,e.context.$implicit.commonName);t(e,20,0,e.context.$implicit.TaxonName);t(e,23,0,e.context.$implicit.AgeOlder,e.context.$implicit.AgeYounger)})}function mn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,[["pullUpScroll",4]],0,ka,[],{data:[0,"data"]},null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.U(16777216,null,0,1,null,fn)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,1,0,e.component.data);t(e,4,0,ui._11(e,1).dataArray)},null)}function gn(t){return ui._20(0,[ui._10(null,0)],null,null)}function yn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,[""," ",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.nowSaving,n.currentlySaving)})}function _n(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,[""," ",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.baseTileDownload,n.tileSizeLeft())})}function vn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ui._19(1,null,[""," ",""]))],null,function(t,e){var n=e.component;t(e,1,0,n.articleDownload,n.articleLeft())})}function bn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"div",[["class","progress-bar"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,yn)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,_n)),ui.Y(6,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,vn)),ui.Y(9,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(11,0,null,null,4,"div",[["class","progress-outer"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(13,0,null,null,1,"div",[["class","progress-inner"]],[[4,"width",null]],null,null,null,null)),(t()(),ui._19(14,null,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,3,0,n.showText());t(e,6,0,n.showTileProgress());t(e,9,0,n.showArticleProgress())},function(t,e){var n=e.component;t(e,13,0,n.getPercentage());t(e,14,0,n.getPercentage())})}function xn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,14,"ion-col",[["class","col"]],null,null,null,null,null)),ui.Y(1,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(3,0,null,null,3,"button",[["class","image-button"],["ion-button",""],["tappable",""]],[[2,"selected",null]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.changeBaseTile(t.context.$implicit)&&i}return i},hl.b,hl.a)),ui.Y(4,278528,null,0,So.l,[ui.q,ui.j,ui.A],{ngStyle:[0,"ngStyle"]},null),ui._14(5,{"background-image":0,"background-size":1}),ui.Y(6,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(10,0,null,null,3,"div",[["class","imageButtonText"]],null,null,null,null,null)),ui.Y(11,278528,null,0,So.g,[ui.p,ui.q,ui.j,ui.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ui._14(12,{selected:0}),(t()(),ui._19(13,null,["",""])),(t()(),ui._19(-1,null,["\n      "]))],function(t,e){t(e,4,0,t(e,5,0,"url("+e.context.$implicit.getIcon()+")","cover"));t(e,11,0,"imageButtonText",t(e,12,0,e.context.$implicit.getDownload()))},function(t,e){t(e,3,0,e.context.$implicit.getDownload());t(e,13,0,e.context.$implicit.getName())})}function wn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,17,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(2,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(3,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,19,{contentLabel:0}),ui._17(603979776,20,{_buttons:1}),ui._17(603979776,21,{_icons:1}),ui.Y(7,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(9,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(10,16384,[[19,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(11,null,["",""])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(13,0,null,0,2,"ion-checkbox",[],[[2,"checkbox-disabled",null]],[[null,"ionChange"],[null,"click"]],function(t,e,n){var i=!0,r=t.component;if("click"===e){i=!1!==ui._11(t,15)._click(n)&&i}if("ionChange"===e){i=!1!==r.changeDatasetTile(t.context.$implicit)&&i}return i},Ps.b,Ps.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[Ds.a]),ui.Y(15,1228800,null,0,Ds.a,[co.a,Yo.a,[2,Zo.a],ui.j,ui.z],{disabled:[0,"disabled"],checked:[1,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,15,0,e.component.showProgressBar,ui._2(1,"",e.context.$implicit.checked,""))},function(t,e){t(e,11,0,e.context.$implicit.name);t(e,13,0,ui._11(e,15)._disabled)})}function Sn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,22,{contentLabel:0}),ui._17(603979776,23,{_buttons:1}),ui._17(603979776,24,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(7,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(8,16384,[[22,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(9,null,["",""])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(11,0,null,0,2,"ion-checkbox",[],[[2,"checkbox-disabled",null]],[[null,"ionChange"],[null,"click"]],function(t,e,n){var i=!0,r=t.component;if("click"===e){i=!1!==ui._11(t,13)._click(n)&&i}if("ionChange"===e){i=!1!==r.changeDataLayer(t.parent.context.$implicit)&&i}return i},Ps.b,Ps.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[Ds.a]),ui.Y(13,1228800,null,0,Ds.a,[co.a,Yo.a,[2,Zo.a],ui.j,ui.z],{disabled:[0,"disabled"],checked:[1,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "]))],function(t,e){t(e,13,0,e.component.showProgressBar,ui._2(1,"",e.parent.context.$implicit.checked,""))},function(t,e){t(e,9,0,e.parent.context.$implicit.name);t(e,11,0,ui._11(e,13)._disabled)})}function Tn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,Sn)),ui.Y(3,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,3,0,e.context.$implicit.enabled)},null)}function kn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"button",[["block",""],["ion-button",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.saveButtonClick()&&i}return i},hl.b,hl.a)),ui.Y(1,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{block:[0,"block"]},null),(t()(),ui._19(2,0,["",""]))],function(t,e){t(e,1,0,"")},function(t,e){t(e,2,0,e.component.saveText)})}function In(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,22,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,18,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,Ql.b,Ql.a)),ui.Y(4,49152,null,0,ts.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,["\n      ","\n    "])),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(10,0,null,2,10,"ion-buttons",[["end",""],["right",""]],null,null,null,null,null)),ui.Y(11,16384,null,1,Ms.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),ui._17(603979776,1,{_buttons:1}),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(14,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.cancel()&&i}return i},hl.b,hl.a)),ui.Y(15,1097728,[[1,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui.Z(17,0,null,0,1,"ion-icon",[["name","md-close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(18,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(24,0,null,null,102,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(25,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(27,0,null,1,39,"ion-list",[],null,null,null,null,null)),ui.Y(28,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(30,0,null,null,6,"ion-list-header",[["class","listHeaders item"]],null,null,null,No.b,No.a)),ui.Y(31,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,2,{contentLabel:0}),ui._17(603979776,3,{_buttons:1}),ui._17(603979776,4,{_icons:1}),ui.Y(35,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(36,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(38,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(39,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,5,{contentLabel:0}),ui._17(603979776,6,{_buttons:1}),ui._17(603979776,7,{_icons:1}),ui.Y(43,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(45,0,null,3,4,"ion-input",[["placeholder","Path name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionFocus"],[null,"ionBlur"]],function(t,e,n){var i=!0,r=t.component;if("ngModelChange"===e){i=!1!==(r.pathName=n)&&i}if("ionFocus"===e){i=!1!==r.clearPathName()&&i}if("ionBlur"===e){i=!1!==r.updatePathName()&&i}return i},Fs.b,Fs.a)),ui.Y(46,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(48,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(49,5423104,null,0,Os.a,[co.a,po.a,Yo.a,uo.a,ui.j,ui.z,[2,Bo.a],[2,Zo.a],[2,Ho.f],go.a],{type:[0,"type"],placeholder:[1,"placeholder"]},{ionFocus:"ionFocus",ionBlur:"ionBlur"}),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n\n    "])),(t()(),ui.Z(52,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(53,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,8,{contentLabel:0}),ui._17(603979776,9,{_buttons:1}),ui._17(603979776,10,{_icons:1}),ui.Y(57,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(59,0,null,3,5,"ion-textarea",[["placeholder","Enter a description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,e,n){var i=!0;if("ngModelChange"===e){i=!1!==(t.component.pathDescription=n)&&i}return i},Fs.b,Fs.a)),ui.Y(60,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(62,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(63,5423104,null,0,Os.a,[co.a,po.a,Yo.a,uo.a,ui.j,ui.z,[2,Bo.a],[2,Zo.a],[2,Ho.f],go.a],{placeholder:[0,"placeholder"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(68,0,null,1,28,"ion-list",[["radio-group",""],["role","radiogroup"]],null,null,null,null,null)),ui._15(5120,null,Ho.e,function(t){return[t]},[Rs.a]),ui.Y(70,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),ui.Y(71,1064960,null,1,Rs.a,[ui.z,ui.j,ui.g],null,null),ui._17(335544320,11,{_header:0}),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(74,0,null,null,6,"ion-list-header",[["class","listHeaders item"]],null,null,null,No.b,No.a)),ui.Y(75,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,12,{contentLabel:0}),ui._17(603979776,13,{_buttons:1}),ui._17(603979776,14,{_icons:1}),ui.Y(79,16384,[[11,4]],0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(80,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(82,0,null,null,5,"ion-row",[["class","tile-box row"]],null,null,null,null,null)),ui.Y(83,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,xn)),ui.Y(86,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(89,0,null,null,6,"ion-row",[["class","row"]],null,null,null,null,null)),ui.Y(90,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(92,0,null,null,2,"ion-col",[["class","col"],["style","padding: 0 20px;"]],null,null,null,null,null)),ui.Y(93,16384,null,0,xs.a,[],null,null),(t()(),ui._19(94,null,[""," "," MB"])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(98,0,null,1,27,"ion-list",[["radio-group",""],["role","radiogroup"]],null,null,null,null,null)),ui._15(5120,null,Ho.e,function(t){return[t]},[Rs.a]),ui.Y(100,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),ui.Y(101,1064960,null,1,Rs.a,[ui.z,ui.j,ui.g],null,null),ui._17(335544320,15,{_header:0}),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(104,0,null,null,6,"ion-list-header",[["class","listHeaders item"]],null,null,null,No.b,No.a)),ui.Y(105,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,16,{contentLabel:0}),ui._17(603979776,17,{_buttons:1}),ui._17(603979776,18,{_icons:1}),ui.Y(109,16384,[[15,4]],0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(110,2,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,wn)),ui.Y(113,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Tn)),ui.Y(116,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(118,0,null,null,6,"ion-row",[["class","row"]],null,null,null,null,null)),ui.Y(119,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(121,0,null,null,2,"ion-col",[["class","col"],["style","padding: 0 20px;"]],null,null,null,null,null)),ui.Y(122,16384,null,0,xs.a,[],null,null),(t()(),ui._19(123,null,[""," "," MB"])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(128,0,null,null,8,"ion-footer",[["padding",""]],null,null,null,null,null)),ui.Y(129,16384,null,0,Xl.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(131,0,null,null,1,"fc-progress-bar",[],[[8,"hidden",0]],null,null,bn,js)),ui.Y(132,49152,[["fcDownloadProgress",4]],0,Ga,[Oi,Mi],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.U(16777216,null,null,1,null,kn)),ui.Y(135,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,18,0,"md-close");t(e,46,0,n.pathName);t(e,49,0,"text","Path name");t(e,60,0,n.pathDescription);t(e,63,0,"Enter a description");t(e,86,0,n.getBaseTiles());t(e,113,0,n.getDatasetTiles());t(e,116,0,n.getDataLayers());t(e,135,0,!n.showProgressBar)},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,17,0,ui._11(e,18)._hidden);t(e,24,0,ui._11(e,25).statusbarPadding,ui._11(e,25)._hasRefresher);t(e,36,0,n.namePathText);t(e,45,0,ui._11(e,48).ngClassUntouched,ui._11(e,48).ngClassTouched,ui._11(e,48).ngClassPristine,ui._11(e,48).ngClassDirty,ui._11(e,48).ngClassValid,ui._11(e,48).ngClassInvalid,ui._11(e,48).ngClassPending);t(e,59,0,ui._11(e,62).ngClassUntouched,ui._11(e,62).ngClassTouched,ui._11(e,62).ngClassPristine,ui._11(e,62).ngClassDirty,ui._11(e,62).ngClassValid,ui._11(e,62).ngClassInvalid,ui._11(e,62).ngClassPending);t(e,80,0,n.chooseTileText);t(e,94,0,n.estimatedTileText,n.getDownloadTileSize());t(e,110,0,n.chooseDataText);t(e,123,0,n.estimatedStorageText,n.getDownloadArticleSize());t(e,131,0,!n.showProgressBar)})}function En(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,13,"ion-card",[],null,null,null,null,null)),ui.Y(3,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(5,0,null,null,2,"ion-card-header",[["class","articleTitle"]],null,null,null,null,null)),ui.Y(6,16384,null,0,Zs.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(7,null,["\n        ","\n      "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(9,0,null,null,1,"fc-pullup-article-card-images",[],null,null,null,K,Sl)),ui.Y(10,49152,null,0,Aa,[wl.a,rr,qr],{images:[0,"images"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(12,0,null,null,2,"ion-card-content",[],[[8,"innerHTML",1]],null,null,null,null)),ui.Y(13,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,[" "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,10,0,e.component.images)},function(t,e){var n=e.component;t(e,7,0,n.article.title);t(e,12,0,null==n.article?null:n.article.articleText)})}function An(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,[" "," "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n\n"])),(t()(),ui.Z(12,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,En)),ui.Y(16,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,16,0,e.component.article)},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher)})}function Cn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,13,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),ui.Y(1,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(3,0,null,null,9,"ion-card",[["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.goToSection(t.context.$implicit)&&i}return i},null,null)),ui.Y(4,278528,null,0,So.g,[ui.p,ui.q,ui.j,ui.A],{ngClass:[0,"ngClass"]},null),ui._13(5,1),ui.Y(6,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(8,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(10,0,null,null,1,"div",[["class","card-title"]],null,null,null,null,null)),(t()(),ui._19(11,null,["\n            ","\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n      "]))],function(t,e){t(e,4,0,t(e,5,0,"card-column"+e.context.index))},function(t,e){t(e,8,0,e.context.$implicit.img);t(e,11,0,e.context.$implicit.title)})}function Ln(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"ion-row",[["class","card-row row"]],null,null,null,null,null)),ui.Y(1,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,Cn)),ui.Y(4,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,4,0,e.context.$implicit)},null)}function zn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,["\n      ","\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n\n"])),(t()(),ui.Z(12,0,null,null,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(15,0,null,1,5,"ion-grid",[["class","grid"]],null,null,null,null,null)),ui.Y(16,16384,null,0,Gs.a,[],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Ln)),ui.Y(19,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(22,0,null,1,20,"ion-list",[],null,null,null,null,null)),ui.Y(23,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(25,0,null,null,16,"ion-item",[["class","item item-block"],["text-center",""],["text-wrap",""]],null,null,null,No.b,No.a)),ui.Y(26,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(30,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(32,0,null,2,0,"img",[["src","assets/img/wit/landscape/attribution.jpg"]],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(34,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(36,0,null,2,4,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Content by\n        "])),(t()(),ui.Z(38,0,null,null,1,"a",[["href","http://rocksfromabove.blogspot.com/"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["Selby Hearth"])),(t()(),ui._19(-1,null,[" (Bryn Mawr College)"])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,19,0,e.component.grid)},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher)})}function Pn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,4,"ion-col",[["class","sectionImages col"]],null,null,null,null,null)),ui.Y(1,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(3,0,null,null,0,"img",[["width","100%"]],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n        "]))],null,function(t,e){t(e,3,0,e.context.$implicit)})}function Dn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"button",[["class","chevron"],["clear",""],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.goToWiki(t.parent.context.$implicit)&&i}return i},hl.b,hl.a)),ui.Y(1,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{clear:[0,"clear"]},null),(t()(),ui._19(-1,0,["\n          Wikipedia Article\n          "])),(t()(),ui.Z(3,0,null,0,1,"ion-icon",[["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(4,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n        "]))],function(t,e){t(e,1,0,"");t(e,4,0,"ios-arrow-forward")},function(t,e){t(e,3,0,ui._11(e,4)._hidden)})}function Mn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,26,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,23,"ion-card",[],null,null,null,null,null)),ui.Y(3,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(5,0,null,null,2,"ion-card-header",[],null,null,null,null,null)),ui.Y(6,16384,null,0,Zs.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(7,null,["\n        ","\n      "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(9,0,null,null,5,"ion-row",[["class","row"]],null,null,null,null,null)),ui.Y(10,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,Pn)),ui.Y(13,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(16,0,null,null,8,"ion-card-content",[],null,null,null,null,null)),ui.Y(17,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(19,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),ui._19(20,null,["",""])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,Dn)),ui.Y(23,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,13,0,e.context.$implicit.imgs);t(e,23,0,e.context.$implicit.wiki)},function(t,e){t(e,7,0,e.context.$implicit.title);t(e,20,0,e.context.$implicit.text)})}function Fn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,["\n      ","\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n\n"])),(t()(),ui.Z(12,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,Mn)),ui.Y(16,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,16,0,e.component.content)},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher)})}function On(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"ion-card",[["style","background-size: cover;"],["tappable",""]],[[4,"backgroundImage",null]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.goToSection(t.context.$implicit)&&i}return i},null,null)),ui.Y(1,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(3,0,null,null,1,"div",[["class","card-title"]],null,null,null,null,null)),(t()(),ui._19(4,null,["\n      ","\n    "])),(t()(),ui._19(-1,null,["\n  "]))],null,function(t,e){t(e,0,0,"url("+e.context.$implicit.img+")");t(e,4,0,e.context.$implicit.title)})}function Rn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,["\n      ","\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(12,0,null,null,35,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,On)),ui.Y(16,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(18,0,null,1,28,"ion-list",[],null,null,null,null,null)),ui.Y(19,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(21,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,No.b,No.a)),ui.Y(22,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(26,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(28,0,null,2,1,"strong",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Who wrote this stuff?"])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(31,0,null,2,1,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Kenny Blumenfeld spent a few weeks trying to talk the app team out of it, but ultimately he agreed\n        to write every single word you have read in this section. Kenny is a Ph.D. climatologist who\n        has loved the weather as long as he has been alive, and who has spent far too many hours gazing\n        at the clouds, undoubtedly to the considerable neglect of other important aspects of his own\n        development. He works full-time in public-service climatology in Minnesota, but you also might\n        occasionally find him by clicking the banner below."])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(34,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(36,0,null,2,8,"div",[["text-center",""]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(38,0,null,null,3,"a",[["href","http://www.kennyblumenfeld.com/"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(40,0,null,null,0,"img",[["src","assets/img/wit/cloud/wab.png"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(43,0,null,null,0,"img",[["src","assets/img/wit/cloud/kenny.jpg"],["style","width:100%; height:auto;"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,16,0,e.component.sections)},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher)})}function jn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,8,"div",[["class","sectionImages"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(2,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(4,0,null,null,3,"div",[["class","caption"]],null,null,null,null,null)),(t()(),ui._19(5,null,["\n          ","\n          "])),(t()(),ui.Z(6,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(7,null,[" (Image credit: ",")\n        "])),(t()(),ui._19(-1,null,["\n      "]))],null,function(t,e){t(e,2,0,e.context.$implicit);t(e,5,0,e.parent.context.$implicit.caption[e.context.index]);t(e,7,0,e.parent.context.$implicit.imgsCredit[e.context.index])})}function Bn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),ui._19(1,null,["\n          ","\n        "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.secondaryText)})}function Un(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["name","ios-arrow-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null)],function(t,e){t(e,1,0,"ios-arrow-down")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function Nn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-icon",[["name","ios-arrow-up"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(1,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null)],function(t,e){t(e,1,0,"ios-arrow-up")},function(t,e){t(e,0,0,ui._11(e,1)._hidden)})}function Zn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,32,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,29,"ion-card",[],null,null,null,null,null)),ui.Y(3,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(5,0,null,null,2,"ion-card-header",[],null,null,null,null,null)),ui.Y(6,16384,null,0,Zs.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(7,null,["\n        ","\n      "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,jn)),ui.Y(10,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(12,0,null,null,18,"ion-card-content",[],null,null,null,null,null)),ui.Y(13,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),ui._19(16,null,["",""])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,Bn)),ui.Y(19,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(21,0,null,null,8,"button",[["block",""],["clear",""],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!=(t.context.$implicit.show=!t.context.$implicit.show)&&i}return i},hl.b,hl.a)),ui.Y(22,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{clear:[0,"clear"],block:[1,"block"]},null),(t()(),ui._19(-1,0,["\n          "])),(t()(),ui.U(16777216,null,0,1,null,Un)),ui.Y(25,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,0,["\n          "])),(t()(),ui.U(16777216,null,0,1,null,Nn)),ui.Y(28,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,10,0,e.context.$implicit.imgs);t(e,19,0,e.context.$implicit.show);t(e,22,0,"","");t(e,25,0,!e.context.$implicit.show);t(e,28,0,e.context.$implicit.show)},function(t,e){t(e,7,0,e.context.$implicit.title);t(e,16,0,e.context.$implicit.primaryText)})}function Yn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,["\n      ","\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(12,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,Zn)),ui.Y(16,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,16,0,e.component.content)},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher)})}function Vn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,12,"ion-fab",[["middle",""],["right",""]],null,null,null,To.b,To.a)),ui.Y(1,1228800,null,2,ko.a,[po.a],null,null),ui._17(335544320,1,{_mainButton:0}),ui._17(603979776,2,{_fabLists:1}),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(5,0,null,0,6,"button",[["ion-fab",""],["mini",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.rotateRight()&&i}return i},Io.b,Io.a)),ui.Y(6,49152,[[1,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(8,0,null,0,2,"ion-icon",[["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(9,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(14,0,null,null,12,"ion-fab",[["left",""],["middle",""]],null,null,null,To.b,To.a)),ui.Y(15,1228800,null,2,ko.a,[po.a],null,null),ui._17(335544320,3,{_mainButton:0}),ui._17(603979776,4,{_fabLists:1}),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(19,0,null,0,6,"button",[["ion-fab",""],["mini",""],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.rotateLeft()&&i}return i},Io.b,Io.a)),ui.Y(20,49152,[[3,4]],0,Eo.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(22,0,null,0,2,"ion-icon",[["name","ios-arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(23,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,9,0,"ios-arrow-forward");t(e,23,0,"ios-arrow-back")},function(t,e){t(e,8,0,ui._11(e,9)._hidden);t(e,22,0,ui._11(e,23)._hidden)})}function qn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(-1,0,["\n      About Flyover Country®\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(12,0,null,null,134,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(15,0,null,1,130,"ion-card",[],null,null,null,null,null)),ui.Y(16,16384,null,0,fl.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(18,0,null,null,0,"img",[["src","assets/img/banner.jpg"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(20,0,null,null,124,"ion-card-content",[],null,null,null,null,null)),ui.Y(21,16384,null,0,ml.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(23,0,null,null,2,"ion-card-title",[],null,null,null,null,null)),ui.Y(24,16384,null,0,iu.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,null,["\n        Follow us on social media!\n      "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(27,0,null,null,116,"ion-list",[["mode","md"]],null,null,null,null,null)),ui.Y(28,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(30,0,null,null,35,"ion-row",[["class","row"],["text-center",""]],null,null,null,null,null)),ui.Y(31,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(33,0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),ui.Y(34,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(36,0,null,null,5,"button",[["class","iconButton"],["clear",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openUrl("https://www.facebook.com/flyovercountryapp/",!1)&&i}return i},hl.b,hl.a)),ui.Y(37,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{small:[0,"small"],clear:[1,"clear"]},null),(t()(),ui._19(-1,0,["\n              "])),(t()(),ui.Z(39,0,null,0,1,"ion-icon",[["name","logo-facebook"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(40,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n               Facebook\n            "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(44,0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),ui.Y(45,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(47,0,null,null,5,"button",[["class","iconButton"],["clear",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openUrl("https://twitter.com/flyovergeo",!1)&&i}return i},hl.b,hl.a)),ui.Y(48,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{small:[0,"small"],clear:[1,"clear"]},null),(t()(),ui._19(-1,0,["\n              "])),(t()(),ui.Z(50,0,null,0,1,"ion-icon",[["name","logo-twitter"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(51,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n               Twitter\n            "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui.Z(55,0,null,null,9,"ion-col",[["class","col"]],null,null,null,null,null)),ui.Y(56,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(58,0,null,null,5,"button",[["class","iconButton"],["clear",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.openUrl("https://www.instagram.com/flyovergeo/",!1)&&i}return i},hl.b,hl.a)),ui.Y(59,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{small:[0,"small"],clear:[1,"clear"]},null),(t()(),ui._19(-1,0,["\n              "])),(t()(),ui.Z(61,0,null,0,1,"ion-icon",[["name","logo-instagram"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(62,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n               Instagram\n            "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(67,0,null,null,75,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,No.b,No.a)),ui.Y(68,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(72,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(74,0,null,2,1,"strong",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["A plane ride could be to geoscience outreach what a planetarium is to astronomical outreach: the\n            perfect\n            venue for sharing big, awe inspiring ideas, with a view to match."])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(77,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(79,0,null,2,1,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            Flyover Country® is a National Science Foundation funded mobile app for geoscience outreach and data\n            discovery. The app\n            analyzes a given path and caches relevant map data and points of interest (POI), saving them for offline\n            use.\n            By downloading only the data relevant to a particular path, cache sizes remain reasonable, allowing for a\n            robust\n            experience without an internet connection. Flyover Country® exposes geologic maps, fossil localities,\n            basic\n            geographic information, georeferenced Wikipedia articles, and the user’s current location, speed, and\n            altitude.\n            More data sources are planned for the future. The Flyover Country® concept is ideal for road trips,\n            hiking,\n            and other outdoor activities, functioning much as an electronic version of the Roadside Geology books. It\n            can\n            also act as a data discovery tool for researchers in the field.\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(82,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(84,0,null,2,20,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["This material is based upon work supported by the National Science Foundation under grant numbers:\n            "])),(t()(),ui.Z(86,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            "])),(t()(),ui.Z(88,0,null,null,15,"strong",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n              EAR-1541800\n              "])),(t()(),ui.Z(90,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" EAR-1550913\n              "])),(t()(),ui.Z(92,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" ICER-1643277\n              "])),(t()(),ui.Z(94,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" EAR-1338322\n              "])),(t()(),ui.Z(96,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" EAR-1462297\n              "])),(t()(),ui.Z(98,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" EAR-1405030\n              "])),(t()(),ui.Z(100,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" EAR-1551429\n              "])),(t()(),ui.Z(102,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" ICER-1740697\n            "])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(106,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(108,0,null,2,4,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Flyover Country® is developed at the University of Minnesota by:\n            "])),(t()(),ui.Z(110,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Shane Loeffler, Sijia Ai, Alex Stone, Reed McEwan, Amy Myrbo"])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(114,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(116,0,null,2,4,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Version number:\n            "])),(t()(),ui.Z(118,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),ui._19(119,null,["",""])),(t()(),ui._19(-1,null,["\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(122,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(124,0,null,2,1,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            Flyover Country® collects anonymized usage data in order to analyze which features are being used. This\n            data will only\n            be used for development of Flyover Country® and will not be shared with any other groups.\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(127,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(129,0,null,2,1,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n            Any opinions, findings, and conclusions or recommendations expressed in Flyover Country® are those of\n            the authors and\n            do not necessarily reflect the views of the National Science Foundation.\n          "])),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(132,0,null,2,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,2,["\n          "])),(t()(),ui.Z(134,0,null,2,7,"p",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["Application framework provided by Ionic under MIT license\n            "])),(t()(),ui.Z(136,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" Mapping framework by Mapbox\n            "])),(t()(),ui.Z(138,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" Base maps generously provided by Mapbox\n            "])),(t()(),ui.Z(140,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ui._19(-1,null,[" Geologic and POI data provided by NSF funded repositories and Wikipedia\n          "])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"]))],function(t,e){t(e,28,0,"md");t(e,37,0,"","");t(e,40,0,"logo-facebook");t(e,48,0,"","");t(e,51,0,"logo-twitter");t(e,59,0,"","");t(e,62,0,"logo-instagram")},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher);t(e,39,0,ui._11(e,40)._hidden);t(e,50,0,ui._11(e,51)._hidden);t(e,61,0,ui._11(e,62)._hidden);t(e,119,0,n.getVersion())})}function Gn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,5,"ion-content",[["no-bounce",""],["overflow-scroll","false"],["scroll","false"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(1,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n\t"])),(t()(),ui.Z(3,0,null,1,1,"div",[["class","background"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n\t"])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],null,function(t,e){t(e,0,0,ui._11(e,1).statusbarPadding,ui._11(e,1)._hasRefresher)})}function Wn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.context.$implicit.answer)})}function Hn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!=(t.context.$implicit.showContent=!t.context.$implicit.showContent)&&i}return i},No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,1,{contentLabel:0}),ui._17(603979776,2,{_buttons:1}),ui._17(603979776,3,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(7,0,null,2,1,"h2",[["class","content-wrap"]],null,null,null,null,null)),(t()(),ui._19(8,null,["",""])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.U(16777216,null,2,1,null,Wn)),ui.Y(11,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,2,["\n    "]))],function(t,e){t(e,11,0,e.context.$implicit.showContent)},function(t,e){t(e,8,0,e.context.$implicit.question)})}function $n(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ys.b,Ys.a)),ui.Y(4,49152,null,0,is.a,[uo.a,[2,lo.a],[2,so.a],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(-1,0,["\n      FAQ/Help\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(12,0,null,null,9,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(13,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(15,0,null,1,5,"ion-list",[],null,null,null,null,null)),ui.Y(16,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Hn)),ui.Y(19,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){t(e,19,0,e.component.faqs)},function(t,e){t(e,3,0,ui._11(e,4)._hidden,ui._11(e,4)._sbPadding);t(e,12,0,ui._11(e,13).statusbarPadding,ui._11(e,13)._hasRefresher)})}function Xn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,17,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(2,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(3,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,12,{contentLabel:0}),ui._17(603979776,13,{_buttons:1}),ui._17(603979776,14,{_icons:1}),ui.Y(7,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(9,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(10,16384,[[12,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(11,null,["",""])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(13,0,null,0,2,"ion-checkbox",[],[[2,"checkbox-disabled",null]],[[null,"ionChange"],[null,"click"]],function(t,e,n){var i=!0,r=t.component;if("click"===e){i=!1!==ui._11(t,15)._click(n)&&i}if("ionChange"===e){i=!1!==r.changeDatasetTile(t.context.$implicit)&&i}return i},Ps.b,Ps.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[Ds.a]),ui.Y(15,1228800,null,0,Ds.a,[co.a,Yo.a,[2,Zo.a],ui.j,ui.z],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,15,0,ui._2(1,"",e.context.$implicit.enabled,""))},function(t,e){t(e,11,0,e.context.$implicit.name);t(e,13,0,ui._11(e,15)._disabled)})}function Kn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,17,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(2,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(3,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,15,{contentLabel:0}),ui._17(603979776,16,{_buttons:1}),ui._17(603979776,17,{_icons:1}),ui.Y(7,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(9,0,null,1,2,"ion-label",[],null,null,null,null,null)),ui.Y(10,16384,[[15,4]],0,Ko.a,[co.a,ui.j,ui.z,[8,null],[8,null],[8,null],[8,null]],null,null),(t()(),ui._19(11,null,["",""])),(t()(),ui._19(-1,2,["\n        "])),(t()(),ui.Z(13,0,null,0,2,"ion-checkbox",[],[[2,"checkbox-disabled",null]],[[null,"ionChange"],[null,"click"]],function(t,e,n){var i=!0,r=t.component;if("click"===e){i=!1!==ui._11(t,15)._click(n)&&i}if("ionChange"===e){i=!1!==r.changeDataLayer(t.context.$implicit)&&i}return i},Ps.b,Ps.a)),ui._15(5120,null,Ho.e,function(t){return[t]},[Ds.a]),ui.Y(15,1228800,null,0,Ds.a,[co.a,Yo.a,[2,Zo.a],ui.j,ui.z],{checked:[0,"checked"]},{ionChange:"ionChange"}),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,15,0,ui._2(1,"",e.context.$implicit.enabled,""))},function(t,e){t(e,11,0,e.context.$implicit.name);t(e,13,0,ui._11(e,15)._disabled)})}function Jn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,22,"ion-header",[],null,null,null,null,null)),ui.Y(1,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(3,0,null,null,18,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,Ql.b,Ql.a)),ui.Y(4,49152,null,0,ts.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(6,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(7,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(8,0,[" "," "])),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(10,0,null,2,10,"ion-buttons",[["end",""],["right",""]],null,null,null,null,null)),ui.Y(11,16384,null,1,Ms.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),ui._17(603979776,1,{_buttons:1}),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(14,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.cancel()&&i}return i},hl.b,hl.a)),ui.Y(15,1097728,[[1,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui.Z(17,0,null,0,1,"ion-icon",[["name","md-close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(18,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(24,0,null,null,62,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(25,4374528,null,0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.Z(27,0,null,1,40,"ion-list",[],null,null,null,null,null)),ui.Y(28,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(30,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(31,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,2,{contentLabel:0}),ui._17(603979776,3,{_buttons:1}),ui._17(603979776,4,{_icons:1}),ui.Y(35,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(36,2,[" "," "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(38,0,null,null,28,"ion-item",[["class","item item-block"]],null,null,null,No.b,No.a)),ui.Y(39,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,5,{contentLabel:0}),ui._17(603979776,6,{_buttons:1}),ui._17(603979776,7,{_icons:1}),ui.Y(43,16384,null,0,Go.a,[],null,null),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui.Z(45,0,null,2,20,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"segment-disabled",null]],[[null,"ngModelChange"],[null,"ionChange"]],function(t,e,n){var i=!0,r=t.component;if("ngModelChange"===e){i=!1!==(r.tripMode=n)&&i}if("ionChange"===e){i=!1!==r.changeTripMode()&&i}return i},null,null)),ui.Y(46,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(48,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(49,1196032,null,1,Jo.a,[co.a,ui.j,ui.z,[2,Ho.f]],null,{ionChange:"ionChange"}),ui._17(603979776,8,{_buttons:1}),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(52,0,null,null,5,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","car"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==ui._11(t,53).onClick()&&i}return i},Qo.b,Qo.a)),ui.Y(53,114688,[[8,4]],0,tl.a,[],{value:[0,"value"]},null),(t()(),ui._19(-1,0,["\n          "])),(t()(),ui.Z(55,0,null,0,1,"ion-icon",[["name","car"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(56,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.Z(59,0,null,null,5,"ion-segment-button",[["class","segment-button"],["role","button"],["tappable",""],["value","plane"]],[[2,"segment-button-disabled",null],[2,"segment-activated",null],[1,"aria-pressed",0]],[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==ui._11(t,60).onClick()&&i}return i},Qo.b,Qo.a)),ui.Y(60,114688,[[8,4]],0,tl.a,[],{value:[0,"value"]},null),(t()(),ui._19(-1,0,["\n          "])),(t()(),ui.Z(62,0,null,0,1,"ion-icon",[["name","plane"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(63,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,2,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n\n  "])),(t()(),ui.Z(69,0,null,1,16,"ion-list",[],null,null,null,null,null)),ui.Y(70,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(72,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(73,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,9,{contentLabel:0}),ui._17(603979776,10,{_buttons:1}),ui._17(603979776,11,{_icons:1}),ui.Y(77,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(78,2,[" "," "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Xn)),ui.Y(81,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,Kn)),ui.Y(84,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,1,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(88,0,null,null,30,"ion-footer",[],null,null,null,null,null)),ui.Y(89,16384,null,0,Xl.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(91,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,No.b,No.a)),ui.Y(92,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,18,{contentLabel:0}),ui._17(603979776,19,{_buttons:1}),ui._17(603979776,20,{_icons:1}),ui.Y(96,16384,null,0,qo.a,[co.a,ui.z,ui.j,[8,null]],null,null),(t()(),ui._19(97,2,[" "," "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(99,0,null,null,18,"ion-row",[["class","row"],["style","text-align: center;"]],null,null,null,null,null)),ui.Y(100,16384,null,0,ws.a,[],null,null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(102,0,null,null,6,"ion-col",[["class","col"],["width-50",""]],null,null,null,null,null)),ui.Y(103,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(105,0,null,null,2,"button",[["block",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.tap()&&i}return i},hl.b,hl.a)),ui.Y(106,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{outline:[0,"outline"],block:[1,"block"]},null),(t()(),ui._19(107,0,["",""])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(110,0,null,null,6,"ion-col",[["class","col"],["width-50",""]],null,null,null,null,null)),ui.Y(111,16384,null,0,xs.a,[],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(113,0,null,null,2,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.search()&&i}return i},hl.b,hl.a)),ui.Y(114,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{block:[0,"block"]},null),(t()(),ui._19(115,0,["",""])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,18,0,"md-close");t(e,46,0,n.tripMode);t(e,53,0,"car");t(e,56,0,"car");t(e,60,0,"plane");t(e,63,0,"plane");t(e,81,0,n.datasetTiles);t(e,84,0,n.dataLayers);t(e,106,0,"","");t(e,114,0,"")},function(t,e){var n=e.component;t(e,3,0,ui._11(e,4)._sbPadding);t(e,8,0,n.title);t(e,17,0,ui._11(e,18)._hidden);t(e,24,0,ui._11(e,25).statusbarPadding,ui._11(e,25)._hasRefresher);t(e,36,0,n.tripModeText);t(e,45,0,ui._11(e,48).ngClassUntouched,ui._11(e,48).ngClassTouched,ui._11(e,48).ngClassPristine,ui._11(e,48).ngClassDirty,ui._11(e,48).ngClassValid,ui._11(e,48).ngClassInvalid,ui._11(e,48).ngClassPending,ui._11(e,49)._disabled);t(e,52,0,ui._11(e,53)._disabled,ui._11(e,53).isActive,ui._11(e,53).isActive);t(e,55,0,ui._11(e,56)._hidden);t(e,59,0,ui._11(e,60)._disabled,ui._11(e,60).isActive,ui._11(e,60).isActive);t(e,62,0,ui._11(e,63)._hidden);t(e,78,0,n.datasetText);t(e,97,0,n.pathModeText);t(e,107,0,n.tapText);t(e,115,0,n.searchText)})}function Qn(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,6,"ion-item",[["class","item item-block"],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.selectPlace(t.context.$implicit,n)&&i}return i},No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,4,{contentLabel:0}),ui._17(603979776,5,{_buttons:1}),ui._17(603979776,6,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(6,2,["\n          ","\n        "]))],null,function(t,e){t(e,6,0,e.context.$implicit.place_name)})}function ti(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,8,"div",[["class","search-list"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(2,0,null,null,5,"ion-list",[],null,null,null,null,null)),ui.Y(3,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n        "])),(t()(),ui.U(16777216,null,null,1,null,Qn)),ui.Y(6,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,6,0,e.component.currentSearch1)},null)}function ei(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,10,"div",[],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,4,"ion-searchbar",[["autocomplete","true"],["class","chosen"],["id","search1"],["mode","md"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ionInput"],[null,"ngModelChange"]],function(t,e,n){var i=!0,r=t.component;if("ionInput"===e){i=!1!==r.searchFirst(r.searchKey1,n)&&i}if("ngModelChange"===e){i=!1!==(r.searchKey1=n)&&i}return i},us.b,us.a)),ui.Y(3,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(5,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(6,1294336,null,0,cs.a,[co.a,po.a,ui.j,ui.z,[2,Ho.f]],{mode:[0,"mode"],placeholder:[1,"placeholder"],autocomplete:[2,"autocomplete"]},{ionInput:"ionInput"}),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,ti)),ui.Y(9,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){var n=e.component;t(e,3,0,n.searchKey1);t(e,6,0,"md",ui._2(1,"",n.searchBox1Text,""),"true");t(e,9,0,0!=n.currentSearch1.length)},function(t,e){t(e,2,1,[ui._11(e,5).ngClassUntouched,ui._11(e,5).ngClassTouched,ui._11(e,5).ngClassPristine,ui._11(e,5).ngClassDirty,ui._11(e,5).ngClassValid,ui._11(e,5).ngClassInvalid,ui._11(e,5).ngClassPending,ui._11(e,6)._animated,ui._11(e,6)._value,ui._11(e,6)._isActive,ui._11(e,6)._showCancelButton,ui._11(e,6)._shouldAlignLeft,ui._11(e,6)._isFocus])})}function ni(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,16,"div",[["class","chosen destination-box"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(2,0,null,null,13,"ion-item",[["class","item item-block"],["mode","md"]],null,null,null,No.b,No.a)),ui.Y(3,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],{mode:[0,"mode"]},null),ui._17(335544320,7,{contentLabel:0}),ui._17(603979776,8,{_buttons:1}),ui._17(603979776,9,{_icons:1}),ui.Y(7,16384,null,0,Go.a,[],null,null),(t()(),ui._19(8,2,["\n        ","\n        "])),(t()(),ui.Z(9,0,null,4,5,"button",[["clear",""],["color","primary"],["icon-only",""],["ion-button",""],["item-end",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.deleteChosen(t.context.index)&&i}return i},hl.b,hl.a)),ui.Y(10,1097728,[[8,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],{color:[0,"color"],clear:[1,"clear"]},null),(t()(),ui._19(-1,0,["\n          "])),(t()(),ui.Z(12,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(13,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui._19(-1,2,["\n      "])),(t()(),ui._19(-1,null,["\n    "]))],function(t,e){t(e,3,0,"md");t(e,10,0,"primary","");t(e,13,0,"close")},function(t,e){t(e,8,0,e.context.$implicit.place_name);t(e,12,0,ui._11(e,13)._hidden)})}function ii(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,6,"ion-list",[["mode","md"],["reorder","true"],["side","start"]],[[2,"reorder-enabled",null],[2,"reorder-visible",null],[2,"reorder-side-start",null]],[[null,"ionItemReorder"]],function(t,e,n){var i=!0;if("ionItemReorder"===e){i=!1!==t.component.reorderItems(n)&&i}return i},null,null)),ui.Y(1,147456,null,0,Vo.a,[po.a,go.a,ui.j,ui.z,ui.u,[2,Bo.a]],{side:[0,"side"],reorder:[1,"reorder"]},{ionItemReorder:"ionItemReorder"}),ui.Y(2,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],{mode:[0,"mode"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.U(16777216,null,null,1,null,ni)),ui.Y(5,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){var n=e.component;t(e,1,0,"start","true");t(e,2,0,"md");t(e,5,0,n.chosen)},function(t,e){t(e,0,0,ui._11(e,1)._enableReorder,ui._11(e,1)._visibleReorder,ui._11(e,1)._isStart)})}function ri(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,6,"ion-item",[["class","item item-block"],["tappable",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.selectPlace(t.context.$implicit,n)&&i}return i},No.b,No.a)),ui.Y(1,1097728,null,3,Zo.a,[Yo.a,co.a,ui.j,ui.z,[2,Vo.a]],null,null),ui._17(335544320,10,{contentLabel:0}),ui._17(603979776,11,{_buttons:1}),ui._17(603979776,12,{_icons:1}),ui.Y(5,16384,null,0,Go.a,[],null,null),(t()(),ui._19(6,2,["\n        ","\n      "]))],null,function(t,e){t(e,6,0,e.context.$implicit.place_name)})}function ai(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,8,"div",[["class","search-list"]],null,null,null,null,null)),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui.Z(2,0,null,null,5,"ion-list",[],null,null,null,null,null)),ui.Y(3,16384,null,0,Uo.a,[co.a,ui.j,ui.z,po.a,ho.l,go.a],null,null),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.U(16777216,null,null,1,null,ri)),ui.Y(6,802816,null,0,So.h,[ui.I,ui.F,ui.p],{ngForOf:[0,"ngForOf"]},null),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,null,["\n  "]))],function(t,e){t(e,6,0,e.component.currentSearch2)},null)}function oi(t){return ui._20(0,[ui._17(402653184,1,{content:0}),(t()(),ui.Z(1,0,null,null,34,"ion-header",[],null,null,null,null,null)),ui.Y(2,16384,null,0,ss.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(4,0,null,null,30,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,Ql.b,Ql.a)),ui.Y(5,49152,null,0,ts.a,[co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(7,0,null,3,2,"ion-title",[],null,null,null,es.b,es.a)),ui.Y(8,49152,null,0,ns.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),(t()(),ui._19(9,0,["",""])),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(11,0,null,0,10,"ion-buttons",[["left",""],["start",""]],null,null,null,null,null)),ui.Y(12,16384,null,1,Ms.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),ui._17(603979776,2,{_buttons:1}),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(15,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.back()&&i}return i},hl.b,hl.a)),ui.Y(16,1097728,[[2,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui.Z(18,0,null,0,1,"ion-icon",[["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(19,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,3,["\n    "])),(t()(),ui.Z(23,0,null,2,10,"ion-buttons",[["end",""],["right",""]],null,null,null,null,null)),ui.Y(24,16384,null,1,Ms.a,[co.a,ui.j,ui.z,[2,ts.a],[2,is.a]],null,null),ui._17(603979776,3,{_buttons:1}),(t()(),ui._19(-1,null,["\n      "])),(t()(),ui.Z(27,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.cancel()&&i}return i},hl.b,hl.a)),ui.Y(28,1097728,[[3,4]],0,dl.a,[[8,""],co.a,ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n        "])),(t()(),ui.Z(30,0,null,0,1,"ion-icon",[["name","md-close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),ui.Y(31,147456,null,0,Ao.a,[co.a,ui.j,ui.z],{name:[0,"name"]},null),(t()(),ui._19(-1,0,["\n      "])),(t()(),ui._19(-1,null,["\n    "])),(t()(),ui._19(-1,3,["\n  "])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(37,0,null,null,17,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,jo.b,jo.a)),ui.Y(38,4374528,[[1,4]],0,Bo.a,[co.a,po.a,go.a,ui.j,ui.z,uo.a,Mo.a,ui.u,[2,lo.a],[2,so.a]],null,null),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,ei)),ui.Y(41,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n  "])),(t()(),ui.U(16777216,null,1,1,null,ii)),ui.Y(44,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n  "])),(t()(),ui.Z(46,0,null,1,4,"ion-searchbar",[["autocomplete","true"],["class","search-box"],["id","search2"],["mode","md"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ionInput"],[null,"ngModelChange"]],function(t,e,n){var i=!0,r=t.component;if("ionInput"===e){i=!1!==r.searchSecond(r.searchKey2,n)&&i}if("ngModelChange"===e){i=!1!==(r.searchKey2=n)&&i}return i},us.b,us.a)),ui.Y(47,671744,null,0,Ho.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),ui._15(2048,null,Ho.f,null,[Ho.h]),ui.Y(49,16384,null,0,Ho.g,[Ho.f],null,null),ui.Y(50,1294336,null,0,cs.a,[co.a,po.a,ui.j,ui.z,[2,Ho.f]],{mode:[0,"mode"],placeholder:[1,"placeholder"],autocomplete:[2,"autocomplete"]},{ionInput:"ionInput"}),(t()(),ui._19(-1,1,["\n  "])),(t()(),ui.U(16777216,null,1,1,null,ai)),ui.Y(53,16384,null,0,So.i,[ui.I,ui.F],{ngIf:[0,"ngIf"]},null),(t()(),ui._19(-1,1,["\n\n"])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui.Z(56,0,null,null,6,"ion-footer",[["padding",""]],null,null,null,null,null)),ui.Y(57,16384,null,0,Xl.a,[co.a,ui.j,ui.z,[2,lo.a]],null,null),(t()(),ui._19(-1,null,["\n  "])),(t()(),ui.Z(59,0,null,null,2,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var i=!0;if("click"===e){i=!1!==t.component.createPath()&&i}return i},hl.b,hl.a)),ui.Y(60,1097728,null,0,dl.a,[[8,""],co.a,ui.j,ui.z],{block:[0,"block"]},null),(t()(),ui._19(61,0,["",""])),(t()(),ui._19(-1,null,["\n"])),(t()(),ui._19(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,19,0,"arrow-back");t(e,31,0,"md-close");t(e,41,0,0==n.chosen.length);t(e,44,0,0!=n.chosen.length);t(e,47,0,n.searchKey2);t(e,50,0,"md",ui._2(1,"",n.searchBox2Text,""),"true");t(e,53,0,0!=n.currentSearch2.length);t(e,60,0,"")},function(t,e){var n=e.component;t(e,4,0,ui._11(e,5)._sbPadding);t(e,9,0,n.title);t(e,18,0,ui._11(e,19)._hidden);t(e,30,0,ui._11(e,31)._hidden);t(e,37,0,ui._11(e,38).statusbarPadding,ui._11(e,38)._hasRefresher);t(e,46,1,[ui._11(e,49).ngClassUntouched,ui._11(e,49).ngClassTouched,ui._11(e,49).ngClassPristine,ui._11(e,49).ngClassDirty,ui._11(e,49).ngClassValid,ui._11(e,49).ngClassInvalid,ui._11(e,49).ngClassPending,ui._11(e,50)._animated,ui._11(e,50)._value,ui._11(e,50)._isActive,ui._11(e,50)._showCancelButton,ui._11(e,50)._shouldAlignLeft,ui._11(e,50)._isFocus]);t(e,61,0,n.createPathText)})}function li(t){return ui._20(0,[ui._17(402653184,1,{slides:0}),(t()(),ui.Z(1,0,null,null,16,"ion-slides",[["class","swiper-no-swiping"]],null,null,null,ql.b,ql.a)),ui.Y(2,1228800,[[1,4],["startSlides",4]],0,Vl.a,[co.a,po.a,ui.u,[2,lo.a],ui.j,ui.z],null,null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(4,0,null,0,5,"ion-slide",[],null,null,null,Zl.b,Zl.a)),ui.Y(5,180224,null,0,Yl.a,[ui.j,ui.z,Vl.a],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(7,0,null,0,1,"setting-slide",[],null,null,null,Jn,cu)),ui.Y(8,49152,null,0,Ma,[rr,Yr,Ki,ar,gi.a,Oi,lo.a,Mi],null,null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui.Z(11,0,null,0,5,"ion-slide",[],null,null,null,Zl.b,Zl.a)),ui.Y(12,180224,null,0,Yl.a,[ui.j,ui.z,Vl.a],null,null),(t()(),ui._19(-1,0,["\n    "])),(t()(),ui.Z(14,0,null,0,1,"input-dest-slide",[],null,null,null,oi,pu)),ui.Y(15,49152,null,0,Da,[rr,_r,Yr,Nr,lo.a,Oi,Mi],null,null),(t()(),ui._19(-1,0,["\n  "])),(t()(),ui._19(-1,0,["\n"])),(t()(),ui._19(-1,null,["\n"]))],null,null)}Object.defineProperty(e,"__esModule",{value:!0});var si=n(42),ui=n(0),ci=n(1),pi=n(74),hi=n(16),di=n(208),fi=n(210),mi=n(155),gi=n(14),yi=n(36),_i=n(110),vi=n(111),bi=n(112),xi=n(113),wi=n(114),Si=n(115),Ti=n(116),ki=function(){function t(){}return t.prototype.createGUID=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.prototype.checkType=function(t,e,n){if(n||(n=0),n<0)return console.log("Dimension cannot be negative"),!1;for(;n>=1;){if(!Array.isArray(t))return!1;t=t[0],n--}switch((typeof t).toLowerCase()){case"string":return"string"==e.toLowerCase()||"any"==e.toLowerCase();case"number":return"number"==e.toLowerCase()||"any"==e.toLowerCase();case"function":return"function"==e.toLowerCase()||"any"==e.toLowerCase();case"object":return("object"==e.toLowerCase()||"any"==e.toLowerCase())&&!Array.isArray(t);default:return console.log("unknown type"),!1}},t.prototype.normalizePath=function(t){return t.replace(/\/$/,"")},t.prototype.normalizeFileName=function(t){return t?(t=t.toString(),t=this.replaceSpecialCharacter(t),t=this.replaceSpace(t)):(console.log("Invalid file name"),t)},t.prototype.replaceSpace=function(t,e){return e||(e="_"),this.hasSpace(t)&&(t=t.replace(/\s+/g,e)),t},t.prototype.replaceSpecialCharacter=function(t,e){return e||(e=""),this.hasSpecialCharacter(t)&&(t=t.replace(/[~`!#$%\^&*+=\-\[\]\\';,./{}|\\":<>\?]/g,e)),t},t.prototype.hasSpace=function(t){return/\s/g.test(t)},t.prototype.hasSpecialCharacter=function(t){return!!new RegExp(/[~`!#$%\^&*+=\-\[\]\\';,./{}|\\":<>\?]/).test(t)},t.prototype.mathMod=function(t){return(t%(2*Math.PI)+2*Math.PI)%(2*Math.PI)},t}(),Ii=function(){return function(){this.ANDROID_APP_ROOT="file:///android_asset/www",this.ANDROID_FILESYSTEM_ROOT="dataDirectory",this.IOS_APP_ROOT="cdvfile://localhost/bundle/www",this.IOS_FILESYSTEM_ROOT="dataDirectory",this.BROWSER_APP_ROOT=window.location.href,this.BROWSER_FILESYSTEM_ROOT="filesystem:"+this.BROWSER_APP_ROOT+"persistent",this.CAR_MODE_RADIUS=20,this.PLANE_MODE_RADIUS=200,this.DATASOURCE=["wiki","neotoma","pbdb","smithsonian","ocd","laccore","earthscope"],this.OTHERDATASOURCE=["fieldtriplist"],this.DATATILE=["macrostrat"],this.VERSION="2.2.4"}}(),Ei=0,Ai=1,Ci=2,Li=3,zi=4,Pi=5,Di={navCtrls:new Array(Pi),tabIndex:0,tabs:{}},Mi=function(){return function(){this.FC={INIT_PLATFORM_FAIL:"Cannot recognize platform",ALERT_INIT_APP_TITLE:"Error",ALERT_INIT_FS_TITLE:"Error",ALERT_INIT_FS_CONTENT:"Cannot initialize filesystem"},this.FIELDGUIDE={ALERT_REQUEST_TITLE:"Error",ALERT_REQUEST_CONTENT:"Field trip request failed. Please check your internet connection",ALERT_RENDER_TITLE:"Error",ALERT_RENDER_CONTENT:"Cannot render field trip guides",REQUEST_LIST_FAIL:"Sorry, field guide search is only available online",ALERT_NODATA_TITLE:"Warning",ALERT_NODATA_CONTENT:"No data in this area",TITLE_IN_PATH:"Field trip guides in path",TITLE_OUT_PATH:"Field trip guides outside path",SEARCH_TEXT:"Search field trip guides"},this.FULLARTICLE={TITLE:"Full Article"},this.MAP={ALERT_CREATE_PATH_TITLE:"Error",ALERT_CREATE_PATH_CONTENT:"Cannot create a path because something is wrong",ALERT_REQUEST_TITLE:"Error",ALERT_REQUEST_CONTENT:"Requests failed. Please check your internet connection",ALERT_NODATA_TITLE:"Warning",ALERT_NODATA_CONTENT:"No data in this area",DIALOG_NETWORK_TITLE:"Looks like you're offline",DIALOG_NETWORK_CONTENT:"Want to load a saved path?",DIALOG_NETWORK_OK:"Load Saved Path",DIALOG_NETWORK_NO:"Cancel"},this.SAVE={TITLE:"Saved paths",CONTENT_MESSAGE:"Paths saved for offline use can be loaded or deleted here",DIALOG_DELETE_TITLE:"Delete?",DIALOG_DELETE_CONTENT:"This will permanently remove this path",DIALOG_DELETE_OK:"Yes",DIALOG_DELETE_NO:"No, go back",ALERT_DELETE_TITLE:"Error",ALERT_DELETE_CONTENT:"Delete fails",ALERT_LOAD_TITLE:"Error",ALERT_LOAD_CONTENT:"Cannot load data from filesystem"},this.DOWNLOAD={DIALOG_CANCEL_TITLE:"Cancel download",DIALOG_CANCEL_CONTENT:"Do you want to cancel downloading?",DIALOG_CANCEL_OK:"Yes",DIALOG_CANCEL_NO:"No, go back",TOAST_ENTER_NAME:"Please enter a path name",TOAST_INVALID_NAME:"Path name cannot have special characters",TOAST_CHOOSE_TILE:"Please select at least one type of tile",ALERT_PRESAVE_FAIL_TITLE:"Error",ALERT_SAVE_TITLE:"Error",ALERT_SAVE_CONTENT:"Cannot create save object",ALERT_SAVE_SUCCESS_TITLE:"Map Saved",ALERT_SAVE_SUCCESS_CONTENT:"Your path was successfully saved for offline use",ALERT_SAVE_FAIL_TITLE:"Error",TITLE:"Save for offline",TITLE_NAME_PATH:"Name your path",TITLE_CHOOSE_TILE:"Base map types to save",TITLE_CHOOSE_DATA:"Data sources to save",ESTIMATED_STORAGE:"Estimated storage space required for articles:",ESTIMATED_TILES:"Estimated storage space required for tiles:",SAVE_BUTTON:"Save"},this.SETTING={GPS_TITLE:"GPS",GPS_LOCATION:"Show location",GPS_SPEED:"Show speed/altitude",HELP_TITLE:"Help",HELP_TOOLTIP:"Show tooltips",UNIT_TITLE:"Units",UNIT_METRIC:"metric",UNIT_IMPERIAL:"imperial",ABOUT_TITLE:"About",ABOUT_FC:"About Flyover Country",ABOUT_FEEDBACK:"Provide feedback"},this.TAB={TOAST_MESSAGE:"There are field trip guides in your path!"},this.WIT={TITLE_LANDSCAPE:"Landscapes",TITLE_CLOUD:"Clouds",TITLE_RAF_ENTRY:"is the feature related to...",TITLE_CLOUD_ENTRY:"Clouds"},this.STARTPATH={ENTER_DEST:"Enter Places",CREATE_PATH:"Create Path",DEST_BOX_SEARCH1:"From",DEST_BOX_SEARCH2:"To",SETTING_TITLE:"Create Path",CHOOSE_TRIPMODE:"Will you be in the sky or on the ground?",CHOOSE_DATASET:"What are you interested in?",CHOOSE_PATHMODE:"Enter your path by:",TAP:"Tap the Map",SEARCH:"Search for Places",TOAST_TAP_MAP:"Tap the map where you're traveling from/to",ALERT_NO_RESULT_TITLE:"Error",ALERT_NO_RESULT_CONTENT:"Failure to find any search results",ALERT_NO_INPUT_TITLE:"Error",ALERT_NO_INPUT_CONTENT:"Please search for a location",ALERT_INVALID_PATH_TITLE:"Error",ALERT_INVALID_PATH_CONTENT:"Cannot find a valid road trip path",ALERT_CREATE_PATH_FAIL_TITLE:"Error"},this.MAPLAYERBOX={TITLE:"Base Maps and Data Layers"},this.PROGRESSBAR={NOW_SAVING:"Now saving",BASE_TILE_DOWNLOAD:"Base map tiles downloaded:",ARTICLE_DOWNLOAD:"Articles downloaded:"},this.PULLUPARTICLE={NO_ARTICLE:"Sorry, no article found.",FULL_ARTICLE:"Full Article"},this.SPEEDALT={SPEED:"Speed:",ALT:"Altitude:",SEARCH_GPS:"Searching for GPS"},this.SHAPE={NO_COORDS:"No coordinates in array",NO_CROSS_TWICE:"Cannot cross the dateline twice"},this.STORAGE={INIT_APPDIR_FAIL:"Initialize app directory fails",INIT_FSDIR_FAIL:"Invalid filesystem directory fails",INVALID_CONFIG:"Invalid config",UNKNOWN:"Unknown platform",INVALID_CORDOVA:"Invalid cordova object"},this.SAVESERV={FILESYSTEM_FAIL:"Save failed, something is wrong with the filesystem",FILESYSTEM_CREATE_FAIL:"Save failed, cannot create file or directory in filesystem",DUPLICATE_NAME:"Path name already exists, please choose a different name",SUCCESS:"Save success",DOWNLOAD_FAIL:"Save failed. Please check your internet connection"},this.LOAD={LOAD_FAIL_INVALID_DATA:"Invalid path data",LOAD_FAIL_OUTDATED_DATA:"Data associated with this path is outdated. Please download a new path",LOAD_SUCCESS_OUTDATED_DATA:"Data associated with this path is outdated, the system will only render compatible layers"},this.LOCATION={ALERT_GPS_ACCESS_TITLE:"GPS Access Needed",ALERT_GPS_ACCESS_CONTENT:"Geolocation permission is not granted. Please change this in your device's settings",ALERT_GPS_ACCESS_BUTTON:"Dismiss"}}}();window.resolveLocalFileSystemURL=window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var Fi=function(){function t(t,e,n){this.fcConfig=t,this.utilServ=e,this.messageServ=n,this.msg=n.STORAGE}return t.prototype.setRootDirectory=function(t){this.rootDirectory=t},t.prototype.getRootDirectory=function(){return this.rootDirectory},t.prototype.setApplicationRootDirectory=function(t){this.applicationRootDirectory=t},t.prototype.getApplicationRootDirectory=function(){return this.applicationRootDirectory},t.prototype.initAppDirectory=function(t){var e=t.toUpperCase()+"_APP_ROOT";if(!this.fcConfig[e])throw new Error(this.msg.INIT_APPDIR_FAIL);this.setApplicationRootDirectory(this.utilServ.normalizePath(this.fcConfig[e]))},t.prototype.initFileSystemDirectory=function(t){try{var e=t.toUpperCase()+"_FILESYSTEM_ROOT";if(!this.fcConfig[e])throw new Error(this.msg.INVALID_CONFIG);if("browser"==t.toLowerCase())this.setRootDirectory(this.fcConfig[e]);else{if("android"!=t.toLowerCase()&&"ios"!=t.toLowerCase())throw new Error(this.msg.UNKNOWN);if(!window.cordova)throw new Error(this.msg.INVALID_CORDOVA);this.setRootDirectory(this.utilServ.normalizePath(window.cordova.file[this.fcConfig[e]]))}console.log("filesystem root ",this.getRootDirectory())}catch(t){throw t.message&&t.message.length>0?new Error(this.msg.INIT_FSDIR_FAIL+": "+t.message):new Error(this.msg.INIT_FSDIR_FAIL)}},t.prototype.initFileSystem=function(t){return"browser"==t.toLowerCase()?this.initBrowser():this.initDevice()},t.prototype.initBrowser=function(){var t=this;return new Promise(function(e,n){navigator.webkitPersistentStorage.requestQuota(3221225472,function(i){window.requestFileSystem(window.PERSISTENT,i,function(i){t.getEntry("fc/index").then(function(t){e()},function(r){t.createFile(i.root,"fc","index",JSON.stringify({}),{type:"text/plain"}).then(function(t){e()},function(t){n()})})},function(t){n()})},function(t){n()})})},t.prototype.initDevice=function(){var t=this;return new Promise(function(e,n){t.getEntry("fc/index").then(function(t){e()},function(i){t.getEntry("fc").then(function(i){t.createFile(i,null,"index","{}",{type:"text/plain"}).then(function(t){console.log("init filesystem successed"),e()},function(t){console.log("create index fails"),n()})},function(i){t.getEntry().then(function(i){t.createFile(i,"fc","index","{}",{type:"text/plain"}).then(function(t){console.log("init filesystem successed"),e()},function(t){console.log("create 'fc/index' fails"),n()})},function(t){console.log("fails to get root"),n()})})})})},t.prototype.getEntry=function(t){var e=this;return new Promise(function(n,i){var r=e.rootDirectory;t&&(r+="/"+t),window.resolveLocalFileSystemURL(r,function(e){console.log("Get entry success",t),n(e)},function(e){console.log("Get Entry fails",t),i()})})},t.prototype.createFile=function(t,e,n,i,r){var a=this,o=function(t,e,n,i,r,o){e&&0!=e.length?n?a.utilServ.hasSpecialCharacter(e)?(console.log("File name has special characters",e),r()):t.getFile(e,{create:!0,exclusive:!1},function(t){a.writeFile(t,n,i).then(function(t){r()},function(t){console.log("Cannot write file",e),o()})},function(t){console.log("Cannot create file",e),o()}):(console.log("Empty file data"),r()):(console.log("Invalid file name",e),r())};return new Promise(function(l,s){e?a.createDirectory(t,e).then(function(t){o(t,n,i,r,l,s)},function(t){s()}):o(t,n,i,r,l,s)})},t.prototype.createDirectory=function(t,e){var n=e.split("/"),i=0,r=n[i],a=function(t,e,r,o){e&&0!=e.length?t.getDirectory(e,{create:!0,exclusive:!1},function(t){a(t,e=n[++i],r,o)},function(t){console.log("Cannot create directory",e),o()}):r(t)};return new Promise(function(e,n){a(t,r,e,n)})},t.prototype.deleteDirectory=function(t,e){return new Promise(function(n,i){t.getDirectory(e,{},function(t){t.removeRecursively(function(){console.log("Delete directory success",e),n()},function(t){console.log("Cannot delete directory",e),i()})},function(t){console.log("Cannot get directory entry",e),i()})})},t.prototype.writeFile=function(t,e,n){return new Promise(function(i,r){t.createWriter(function(a){a.truncate(0),t.createWriter(function(t){var r=new Blob([e],n);t.write(r),i()},function(t){r()})},function(t){r()})})},t.prototype.readFile=function(t){return new Promise(function(e,n){t.file(function(t){if("index"===t.name&&0===t.size)e("{}");else{var n=new FileReader;n.onloadend=function(t){e(this.result)},n.readAsText(t)}},function(t){n()})})},t}(),Oi=function(){function t(t){t&&(e.events=t)}return e=t,t.prototype.createEventListener=function(t,n){e.events.subscribe("event:"+t,n)},t.prototype.publishEvent=function(t,n){e.events.publish("event:"+t,n)},t;var e}(),Ri=function(){function t(t,e,n,i,r,a,o,l,s){if(this.id=t,this.name=e,this.layerType=n,this.icon=i,this.zIndex=r,this.download=a,this.source=o,this.layers=l,this.enabled=!0,this.visible=!1,this.format="application/octet-stream",this.minZoom=0,this.maxZoom=22,["base","label","dataset"].indexOf(this.layerType.toLowerCase())<0)throw new Error("invalid tile type");s&&(s.visible&&(this.visible=s.visible),s.sourceName&&(this.sourceName=s.sourceName),s.url&&(this.url=s.url),s.format&&(this.format=s.format),s.attribution&&(this.attribution=s.attribution),s.minZoom&&(this.minZoom=s.minZoom),s.manZoom&&(this.maxZoom=s.manZoom))}return t.prototype.getLayers=function(){return this.layers},t.prototype.getSource=function(){return this.source},t.prototype.getBottomLayer=function(){return this.layers.length>0?this.layers[0].id:null},t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getIcon=function(){return this.icon},t.prototype.getEnabled=function(){return this.enabled},t.prototype.setEnabled=function(t){this.enabled=t},t.prototype.getLayerType=function(){return this.layerType},t.prototype.setDownload=function(t){this.download=t},t.prototype.getDownload=function(){return this.download},t.prototype.setUrl=function(t){this.url=t},t.prototype.getUrl=function(){return this.url},t.prototype.setFormat=function(t){this.format=t},t.prototype.getFormat=function(){return this.format},t.prototype.setVisible=function(t){this.visible=t},t.prototype.getVisible=function(){return this.visible},t.prototype.setZIndex=function(t){this.zIndex=t},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.setAttribution=function(t){this.attribution=t},t.prototype.getAttribution=function(){return this.attribution},t.prototype.setMaxZoom=function(t){this.maxZoom=t},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMinZoom=function(t){this.minZoom=t},t.prototype.getMinZoom=function(){return this.minZoom},t}(),ji=n(253),Bi=n(59),Ui={id:"wiki",name:"Landscape Features",color:"#000000",proxy:!0,defaultDataset:!0,sourceName:"Wikipedia.org",features:{wiki:{zIndex:11,isCluster:!0,layers:[{id:"wikiClusters",type:"circlePoint",style:{color:"#000000",isCluster:!0},filter:["has","point_count"]},{id:"wikiClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"wikiCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"wikiUnclustered",type:"circlePoint",style:{color:"#000000"},filter:["!has","point_count"]},{id:"wikiUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","id",""],clickable:!1},{id:"wikiLabel",type:"imagePoint",style:{text:"W"},filter:["!has","point_count"],clickable:!1}],filter:function(t){var e=[];if(t&&t.length)for(var n=0;n<t.length;n++){var i={type:"Feature",geometry:{type:"Point",coordinates:[t[n].lon,t[n].lat]},properties:t[n]};i.properties.id=t[n].pageId,e.push(i)}return e}}},properties:{article:{filter:function(t){var e=[];if(t&&t.length)for(var n=0;n<t.length;n++)-1==e.indexOf(t[n].pageTitle)&&e.push(t[n].pageTitle);return e}},image:{filter:function(t){var e=[],n={};if(t&&t.length)for(var i=0,r=t;i<r.length;i++)for(var a=0,o=r[i].images;a<o.length;a++){var l=o[a],s=l.fileId,u=l.thumbnailUrl;n[s]||(n[s]=!0,e.push({id:s,url:u}))}return e}}},providers:[{id:"wiki",attribution:"",url:"https://api.flyover.umn.edu/wiki",body:{guid:localStorage.getItem("guid"),types:["waterbody","mountain","earthquake","isle","river","glacier","forest","pass","park","bay","monument","reserve","mine","lava","cave"],dim:[100,1e5],shape:"{$wkt}"},httpMethod:"post",timeout:2e4,description:"",formatter:"(function(data){\n        if( data && data.success){\n          for (var page of data.data) {\n            page['pageTitleProper'] = page.pageTitle.replace(/_/g, \" \");\n          }\n          return data.data;\n        }\n      })"}]},Ni={id:"pbdb",name:"Fossils",sourceName:"PaleobioDB.org",color:"#00a0a0",proxy:!1,defaultDataset:!0,features:{pbdb:{zIndex:12,isCluster:!0,layers:[{id:"pbdbClusters",type:"circlePoint",style:{color:"#00a0a0",isCluster:!0}},{id:"pbdbClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"pbdbCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"pbdbUnclustered",type:"circlePoint",style:{color:"#00a0a0"},filter:["!has","point_count"]},{id:"pbdbUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","id",""],clickable:!1},{id:"pbdbLabel",type:"imagePoint",style:{text:"P"},filter:["!has","point_count"],clickable:!1}],filter:"(function(data){\n        var array = [];\n        if(data && data.length){\n          for(var i=0; i<data.length; i++){\n            data[i][\"fcImageId\"] = data[i].img;\n            data[i][\"fcImageUrl\"] = 'https://paleobiodb.org/data1.2/taxa/thumb.png?id=' + data[i].fcImageId;\n            \n            var feature = {\n              type: 'Feature',\n              geometry: {\n                type: 'Point',\n                coordinates: [data[i].lng, data[i].lat]\n              },\n              properties: data[i]\n            };\n            feature.properties.id = data[i].oid;\n            array.push(feature);\n          }\n        }\n        return array;\n      })"}},properties:{article:{filter:"(function(data){\n        var array = [];\n        if(data && data.length){\n          for(var i=0; i<data.length; i++){\n            if(array.indexOf(data[i].tna)==-1) array.push(data[i].tna);\n          }\n        }\n        return array;\n      })"},image:{filter:"(function(data){\n        var array = [];\n        let obj = {};\n        if(data && data.length){\n          for(var i=0; i<data.length; i++){            \n            var id = data[i].img;\n            var url = 'https://paleobiodb.org/data1.2/taxa/thumb.png?id=' + data[i].img;\n            if(!obj[id]){\n              obj[id] = true;\n              array.push({id: id, url: url});\n            }\n          }\n        }\n        return array;\n      })"}},providers:[{id:"pbdb",attribution:"",url:"https://paleobiodb.org/data1.2/occs/list.json",body:{base_name:"dinosauria^aves,synapsida^mammalia,chalicotheriinae,cetacea,andrewsarchus,brontotheriidae,indricotheriinae,dunkleosteus,megalodon,helicoprion,stethacanthus,Echinochimaera,falcatus,ischyodus,carcharodon,phorusrhacidae,gastornithidae,argentavis,dinornis,eohippus,Protoceratidae,Rhinocerotidae,Megacerops,Moeritherium,Ceratogaulus,Gomphotherium,Deinotherium,Condylarthra,Paraceratherium,Mesonychia,Pantodonta,Hyaenodon,Thylacosmilus,Glyptodon,Castoroides,Toxodon,Megatherium,Arctodus,Smilodon,Mammuthus,Mammut,Coelodonta,Megaloceros,Gigantopithecus,Phlegethontia,Temnospondyli^anura,Ichthyosauria,Sauropterygia,Mosasauroidea,Pterosauromorpha,Titanoboa,Megalania,Placodus,Tanystropheidae,Hyperodapedon,Stagonolepis,Scutosaurus,Pareiasauria,Archelon,Stupendemys,Protostega,Placodermi,Leedsichthys,Onychodontiformes,Acanthostega,Ichthyostega,Crassigyrinus,Ornithosuchus,Erpetosuchidae,Protosuchus,Dakosaurus,Geosaurus,Deinosuchus",show:"img,coords,ecospace",loc:"{$wkt}"},httpMethod:"get",timeout:2e4,description:"",formatter:"(function(data){\n        if(data && data.records){\n          return data.records;\n        }\n      })"}]},Zi={id:"laccore",name:"Lake Core Samples",sourceName:"LacCore.org",color:"#0281e2",proxy:!1,defaultDataset:!1,features:{laccore:{zIndex:8,isCluster:!0,layers:[{id:"lacClusters",type:"circlePoint",style:{color:"#0281e2",isCluster:!0}},{id:"lacClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"lacCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"lacUnclustered",type:"circlePoint",style:{color:"#0281e2"},filter:["!has","point_count"]},{id:"lacUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","id",""],clickable:!1},{id:"lacLabel",type:"imagePoint",style:{text:"L"},filter:["!has","point_count"],clickable:!1}],filter:"(function(data){\n        var array = [];\n        if(data && data.length){\n          for(var i=0; i<data.length; i++){\n            var feature = {\n              type: 'Feature',\n              geometry: {\n                type: 'Point',\n                coordinates: [data[i].longitude, data[i].latitude]\n              },\n              properties: data[i]\n            };\n            array.push(feature);\n          }\n        }\n        return array;\n      })"}},providers:[{id:"lac",attribution:"",url:"https://api.flyover.umn.edu/laccoreSample",body:{facilities:["laccore"],shape:"{$wkt}"},httpMethod:"post",timeout:2e4,description:"",formatter:"(function(data){\n        if( data && data.success){\n          return data.data;\n        }\n      })"}]},Yi={id:"neotoma",name:"Mammal Fossils",sourceName:"NeotomaDB.org",color:"#89806a",proxy:!1,defaultDataset:!0,features:{neotoma:{zIndex:9,isCluster:!0,layers:[{id:"neotomaClusters",type:"circlePoint",style:{color:"#89806a",isCluster:!0}},{id:"neotomaClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"neotomaCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"neotomaUnclustered",type:"circlePoint",style:{color:"#89806a"},filter:["!has","point_count"]},{id:"neotomaUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","OccurID",""],clickable:!1},{id:"neotomaLabel",type:"imagePoint",style:{text:"N"},filter:["!has","point_count"],clickable:!1}],filter:"(function(data){\n        var array = [];\n        var neoMeta = {\n            '6847': {commonName: 'Mammoth', img: 1672 },\n            '7495': {commonName: 'Mammoth', img: 1672 },\n            '7682': {commonName: 'Mammoth', img: 1672 },\n            '7680': {commonName: 'Mammoth', img: 1672 },\n            '7681': {commonName: 'Mammoth', img: 1672 },\n            '6174': {commonName: 'Mammoth', img: 1672 },\n            '6180': {commonName: 'Mammoth', img: 1672 },\n            '6176': {commonName: 'Mammoth', img: 1672 },\n            '6177': {commonName: 'Mammoth', img: 1672 },\n            '6178': {commonName: 'Mammoth', img: 1672 },\n            '6179': {commonName: 'Mammoth', img: 1672 },\n            '5932': {commonName: 'Giant Beaver', img: 1247},\n            '6746': {commonName: 'American Lion', img: 951},\n            '5912': {commonName: 'Dire Wolf', img: 1305},\n            '6509': {commonName: 'Saber-toothed Tiger', img: 182},\n            '7430': {commonName: 'Shrub-ox', img: 2096},\n            '5933': {commonName: 'Stag-moose', img: 396},\n            '6309': {commonName: 'Giant Sloth', img: 1619},\n            '5966': {commonName: 'Beautiful Armadillo', img: 1234},\n            '6172': {commonName: 'Mastodon', img: 1187}\n        };\n        if(data && data.length){\n          for(var i=0; i<data.length; i++){\n              data[i]['commonName'] = neoMeta[data[i].TaxonID].commonName;\n              data[i]['fcImageId'] = neoMeta[data[i].TaxonID].img;\n              data[i]['fcImageUrl'] = 'https://paleobiodb.org/data1.2/taxa/thumb.png?id=' + data[i].fcImageId;\n              var feature = {\n                  type: 'Feature',\n                  geometry: {\n                      type: 'Point',\n                      coordinates: [data[i].LongitudeEast, data[i].LatitudeNorth]\n                  },\n                  properties: data[i]\n              };\n              feature.properties.id = data[i].OccurID;\n              array.push(feature);\n          }\n        }\n        return array;\n    })"}},properties:{article:{filter:"(function(data){\n        var array = [];\n        for(var item of data){\n          if(array.indexOf(item.TaxonName)==-1) {\n            array.push(item.TaxonName);\n          }\n        }\n        return array;\n      })"},image:{filter:"(function(data){\n        var array = [];\n        var neoMeta = {\n            '6847': {commonName: 'Mammoth', img: 1672 },\n            '7495': {commonName: 'Mammoth', img: 1672 },\n            '7682': {commonName: 'Mammoth', img: 1672 },\n            '7680': {commonName: 'Mammoth', img: 1672 },\n            '7681': {commonName: 'Mammoth', img: 1672 },\n            '6174': {commonName: 'Mammoth', img: 1672 },\n            '6180': {commonName: 'Mammoth', img: 1672 },\n            '6176': {commonName: 'Mammoth', img: 1672 },\n            '6177': {commonName: 'Mammoth', img: 1672 },\n            '6178': {commonName: 'Mammoth', img: 1672 },\n            '6179': {commonName: 'Mammoth', img: 1672 },\n            '5932': {commonName: 'Giant Beaver', img: 1247},\n            '6746': {commonName: 'American Lion', img: 951},\n            '5912': {commonName: 'Dire Wolf', img: 1305},\n            '6509': {commonName: 'Saber-toothed Tiger', img: 182},\n            '7430': {commonName: 'Shrub-ox', img: 2096},\n            '5933': {commonName: 'Stag-moose', img: 396},\n            '6309': {commonName: 'Giant Sloth', img: 1619},\n            '5966': {commonName: 'Beautiful Armadillo', img: 1234},\n            '6172': {commonName: 'Mastodon', img: 1187}\n        };\n        let obj = {};\n        if(data && data.length){\n          for(var i=0; i<data.length; i++){\n            var id = neoMeta[data[i].TaxonID].img\n            var url = 'https://paleobiodb.org/data1.2/taxa/thumb.png?id=' + neoMeta[data[i].TaxonID].img;\n            if(!obj[id]){\n              obj[id]=true;\n              array.push({id: id, url: url});\n            }\n          }\n        }\n        return array;\n      })"}},providers:[{id:"neotoma",attribution:"",url:"http://api.neotomadb.org/v1/data/occurrences",body:{taxonids:[6172,6847,7495,7682,7680,7681,6174,6180,6176,6177,6178,6179,5932,6746,5912,6509,7430,5933,6309,5966].join(","),wkt:"{$wkt}"},httpMethod:"jsonp",timeout:2e4,description:"",formatter:"(function(data){\n        if(data.success==1){\n          return data.data;\n        }\n      })"}]},Vi={id:"ocd",name:"Ocean Core Samples",sourceName:"OpenCoreData.org",color:"#a6cc80",proxy:!1,defaultDataset:!0,features:{ocd:{zIndex:10,isCluster:!0,layers:[{id:"ocdClusters",type:"circlePoint",style:{color:"#a6cc80",isCluster:!0}},{id:"ocdClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"ocdCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"ocdUnclustered",type:"circlePoint",style:{color:"#a6cc80"},filter:["!has","point_count"]},{id:"ocdUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","id",""],clickable:!1},{id:"ocdLabel",type:"imagePoint",style:{text:"O"},filter:["!has","point_count"],clickable:!1}],filter:"(function(data){\n        for (var i = 0; i < data.length; i++) {\n          data[i].properties['id'] = data[i].properties.Expedition + '-' + data[i].properties.Site + '-' + data[i].properties.Hole\n        }\n        return data;\n      })"}},providers:[{id:"ocd",attribution:"",url:"http://opencoredata.org/api/v1/spatial/search/jrso",body:{guid:localStorage.getItem("guid"),abstracts:"true",geowithin:"{$wkt}"},httpMethod:"get",timeout:2e4,description:"",formatter:"(function(data){\n          if(data && data.features){\n            return data.features;\n          }\n      })"}]},qi={id:"elc",name:"Mammal fossils",sourceName:"Earthlifeconsortium.org",color:"#125265",proxy:!1,defaultDataset:!0,features:{elc:{zIndex:9,isCluster:!0,layers:[{id:"elcClusters",type:"circlePoint",style:{color:"#125265",isCluster:!0}},{id:"elcClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"elcCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"elcUnclustered",type:"circlePoint",style:{color:"#125265"},filter:["!has","point_count"]},{id:"elcUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","OccurID",""],clickable:!1},{id:"elcLabel",type:"imagePoint",style:{text:"E"},filter:["!has","point_count"],clickable:!1}],filter:"(function(data){\n        var array = [];\n\n        for(var i=0; i<data.length; i++){\n          var jsonObj = JSON.parse(data[i].loc.crd);\n          var coords = jsonObj.coordinates;\n          data[i]['fcImageUrl'] = data[i].org.img;\n          \n          var feature = {\n            type: 'Feature',\n            geometry: {\n              type: 'Point',\n              coordinates: coords\n            },\n            properties: data[i]\n          };\n          array.push(feature);\n        }\n        return array;\n    })"}},properties:{article:{filter:"(function(data){\n        return data;\n      })"},image:{filter:"(function(data){\n        return data;\n      })"}},providers:[{id:"elc",attribution:"",url:"http://earthlifeconsortium.org/api_v1/misc/mobile",body:{taxon:"dinosauria^aves,synapsida^mammalia,chalicotheriinae,cetacea,andrewsarchus,brontotheriidae,indricotheriinae,dunkleosteus,megalodon,helicoprion,stethacanthus,Echinochimaera,falcatus,ischyodus,carcharodon,phorusrhacidae,gastornithidae,argentavis,dinornis,eohippus,Protoceratidae,Rhinocerotidae,Megacerops,Moeritherium,Ceratogaulus,Gomphotherium,Deinotherium,Condylarthra,Paraceratherium,Mesonychia,Pantodonta,Hyaenodon,Thylacosmilus,Glyptodon,Castoroides,Toxodon,Megatherium,Arctodus,Smilodon,Mammuthus,Mammut,Coelodonta,Megaloceros,Gigantopithecus,Phlegethontia,Temnospondyli^anura,Ichthyosauria,Sauropterygia,Mosasauroidea,Pterosauromorpha,Titanoboa,Megalania,Placodus,Tanystropheidae,Hyperodapedon,Stagonolepis,Scutosaurus,Pareiasauria,Archelon,Stupendemys,Protostega,Placodermi,Leedsichthys,Onychodontiformes,Acanthostega,Ichthyostega,Crassigyrinus,Ornithosuchus,Erpetosuchidae,Protosuchus,Dakosaurus,Geosaurus,Deinosuchus",bbox:"{$wkt}"},httpMethod:"get",timeout:2e4,description:"",formatter:"(function(data){\n          return data;\n      })"}]},Gi={id:"smithsonian",name:"Holocene Volcanoes",color:"#EF4316",proxy:!1,defaultDataset:!0,sourceName:"Volcano.SI.edu",features:{volcano:{zIndex:11,isCluster:!0,layers:[{id:"smithsonianClusters",type:"circlePoint",style:{color:"#EF4316",isCluster:!0},filter:["has","point_count"]},{id:"smithsonianClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"smithsonianCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"smithsonianUnclustered",type:"circlePoint",style:{color:"#EF4316"},filter:["!has","point_count"]},{id:"smithsonianUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","id",""],clickable:!1},{id:"smithsonianLabel",type:"imagePoint",style:{text:"V"},filter:["!has","point_count"],clickable:!1}],filter:function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];i.properties.id=i.properties.Volcano_Number}return t}}},properties:{image:{filter:function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n];if(r.properties&&r.properties.Primary_Photo_Link){e.push({id:r.properties.Primary_Photo_Link,url:r.properties.Primary_Photo_Link})}}return e}}},providers:[{id:"smithsonian",attribution:"",url:"https://webservices.volcano.si.edu/geoserver/GVP-VOTW/ows",body:'<wfs:GetFeature xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \n        outputFormat="application/json" xsi:schemaLocation="http://www.opengis.net/wfs" \n        xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs"\n        xmlns:ogc="http://www.opengis.net/ogc" service="WFS" version="1.0.0">\n            <wfs:Query typeName="GVP-VOTW:Smithsonian_VOTW_Holocene_Volcanoes">\n              <ogc:Filter>\n                  <ogc:Intersects>\n                      <ogc:PropertyName>GeoLocation</ogc:PropertyName>\n                      <gml:Polygon srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>{$gml}</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon>\n                  </ogc:Intersects>\n              </ogc:Filter>\n          </wfs:Query>\n      </wfs:GetFeature>',httpMethod:"post",timeout:2e4,description:"",formatter:function(t){return t.features}}]},Wi={id:"gmrtTrack",name:"GMRT Track",sourceName:"gmrt.org",color:"#ffffff",icon:"assets/img/resourceIcon/ieda.png",defaultDataset:!0,features:{gmrtTrack:{zIndex:12,layers:[{id:"trackPath",type:"LineString",style:{width:5,opacity:.3}}],filter:"(function(data){\n        return data;\n      })"}},providers:[{id:"gmrtTrack",attribution:"",url:"http://www.marine-geo.org/services/mapserv7/mgdsAndGmrtData",body:{VERSION:"1.0.0",SERVICE:"WFS",REQUEST:"GetFeature",TYPENAME:"GMRT_Tracks",Filter:"<Filter><And><PropertyIsLike wildcard='*' singleChar='.' escape='!'><PropertyName>platform_id</PropertyName><Literal>*Langseth*</Literal></PropertyIsLike><Intersects><PropertyName>gis_geometry</PropertyName><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>{$gml}</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></Intersects></And></Filter>",outputformat:"geojson"},httpMethod:"get",timeout:2e4,description:"",formatter:"(function(data){\n        if(data && data.features){\n          return data.features;\n        }s\n      })"}]},Hi={id:"proxy",providers:[]},$i={id:"fieldtriplist",name:null,sourceName:null,proxy:!1,properties:{guides:{filter:"(function(data){\n        if(data && data.length){\n          if(data[0] && data[0].guides){\n            return data[0].guides.features;\n          }else return [];\n        }\n\n      })"},stops:{filter:"(function(data){\n        if(data && data.length){\n          if(data[0] && data[0].stops){\n            return data[0].stops.features;\n          }else return [];\n        }\n      })"}},providers:[{id:null,attribution:null,url:"http://api.flyover.umn.edu:80/v2/guide/find",body:{shape:"{$wkt}"},httpMethod:"post",timeout:8e3,description:null,formatter:"(function(data){\n        return data;\n      })"}],event:"fieldtriplist"},Xi={id:"earthscope",name:"Science Nuggets",sourceName:"EarthScope.org",color:"#7D9C45",proxy:!1,defaultDataset:!0,features:{earthscope:{zIndex:14,isCluster:!0,layers:[{id:"earthScopeClusters",type:"circlePoint",style:{color:"#7D9C45",isCluster:!0}},{id:"earthScopeClustersFcHighlight",type:"circlePoint",style:{color:"#ffa500",isCluster:!0},filter:["==","cluster_id",""],clickable:!1},{id:"earthScopeCount",type:"imagePoint",style:{text:"{point_count_abbreviated}",isCluster:!0},filter:["has","point_count"],clickable:!1},{id:"earthScopeUnclustered",type:"circlePoint",style:{color:"#7D9C45"},filter:["!has","point_count"]},{id:"earthScopeUnclusteredFcHighlight",type:"circlePoint",style:{color:"#ffa500"},filter:["==","id",""],clickable:!1},{id:"earthScopeLabel",type:"imagePoint",style:{text:"ES"},filter:["!has","point_count"],clickable:!1}],filter:"(function(data){\n        for (var i = 0; i < data.length; i++) {\n          data[i].properties['id'] = data[i].geometry.coordinates[0] + data[i].geometry.coordinates[1]\n        }\n        return data;\n      })"}},properties:{image:{filter:"(function(data){\n        var array = [];\n        for (var item of data) {\n          var id = item.properties.featured_image;\n          var url = 'http://www.earthscope.org' + item.properties.featured_image;\n          array.push({id: id, url: url});\n          \n          if (item.properties.slideshow) {\n            for (var slide of item.properties.slideshow) {\n              if (slide.image_link.length) {\n                var id = slide.image_link;\n                var url = 'http://www.earthscope.org' + slide.image_link;\n                array.push({\n                  id: id, \n                  url: url\n                });\n              }\n            }  \n          }\n        }\n        return array;\n      })"}},providers:[{id:"earthscope",attribution:"",url:"http://www.earthscope.org:3000",body:{area:"{$wkt}"},httpMethod:"get",timeout:2e4,description:"",formatter:"(function(data){\n        if(data && data.features){\n          return data.features;\n        }\n      })"}]},Ki=function(){return function(){this.proxy=Hi,this.dataLayer={wiki:Ui,pbdb:Ni,elc:qi,laccore:Zi,neotoma:Yi,ocd:Vi,smithsonian:Gi,gmrtTrack:Wi,earthscope:Xi},this.other={fieldtriplist:$i};for(var t in this.dataLayer)if(this.dataLayer[t].proxy)for(var e=0,n=this.dataLayer[t].providers;e<n.length;e++)this.proxy.providers.push(n[e])}}(),Ji={id:"macro",name:"Geologic Maps",sourceName:"Macrostrat.org",type:"dataset",icon:"./assets/img/maptile.jpg",zIndex:3,download:!0,sources:{type:"vector",tiles:["https://tiles.macrostrat.org/carto/{z}/{x}/{y}.mvt"],tileSize:512},layers:[{id:"burwell_fill",type:"fill",source:"macrostrat","source-layer":"units",filter:["!=","color",""],minzoom:0,maxzoom:16,paint:{"fill-color":["case",["==",["feature-state","highlight"],1],"#005ead",["to-color",["get","color"]]],"fill-opacity":{stops:[[0,.5],[12,.3]]}}},{id:"burwell_stroke",type:"line",source:"macrostrat","source-layer":"units",filter:["!=","color",""],minzoom:0,maxzoom:16,paint:{"line-color":"#777777","line-width":0,"line-opacity":{stops:[[0,0],[4,.5]]}}},{id:"burwell_water_fill",type:"fill",source:"macrostrat","source-layer":"units",filter:["==","color",""],minzoom:0,maxzoom:16,paint:{"fill-opacity":0}},{id:"burwell_water_line",type:"line",source:"macrostrat","source-layer":"units",filter:["==","color",""],minzoom:0,maxzoom:16,paint:{"line-opacity":0,"line-width":1}},{id:"faults",type:"line",source:"macrostrat","source-layer":"lines",filter:["in","type","fault","normal fault","strike-slip fault","reverse fault","growth fault","fault zone","zone"],minzoom:0,maxzoom:16,paint:{"line-color":["case",["==",["feature-state","highlight"],1],"#ffa500",["to-color","#000000"]],"line-width":{stops:[[0,.3],[1,.3],[2,.3],[3,.3],[4,.5],[5,.6],[6,.45],[7,.4],[8,.7],[9,.8],[10,.7],[11,1.1],[12,1.3],[13,1.5],[14,1.6],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"moraines",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","moraine"],minzoom:12,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3498DB","line-dasharray":[1,2],"line-width":{stops:[[10,1],[11,2],[12,2],[13,2.5],[14,3],[15,3]]},"line-opacity":{stops:[[10,.2],[13,1]]}}},{id:"eskers",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","esker"],minzoom:12,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#00FFFF","line-dasharray":[1,4],"line-width":{stops:[[10,1],[11,2],[12,2],[13,2.5],[14,3],[15,3]]},"line-opacity":{stops:[[10,.2],[13,1]]}}},{id:"lineaments",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","lineament"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#000000","line-dasharray":[2,2,7,2],"line-width":{stops:[[9,1],[10,1],[11,2],[12,2],[13,2.5],[14,3],[15,3]]},"line-opacity":1}},{id:"synclines",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","syncline"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#F012BE","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"monoclines",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","monocline"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#F012BE","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"folds",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","fold"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#F012BE","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"dikes",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","dike"],minzoom:6,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#FF4136","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":{stops:[[6,.2],[10,1]]}}},{id:"anticlines",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","anticline"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#F012BE","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"flows",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","flow"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#FF4136","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"sills",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","sill"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#FF4136","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"veins",type:"line",source:"macrostrat","source-layer":"lines",filter:["==","type","vein"],minzoom:0,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#FF4136","line-width":{stops:[[0,1],[7,.25],[8,.4],[9,.45],[10,.45],[11,.6],[12,.7],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":{stops:[[6,.2],[10,1]]}}},{id:"marker_beds",type:"line",source:"macrostrat","source-layer":"lines",filter:["in","type","marker bed","bed"],minzoom:12,maxzoom:16,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#333333","line-width":{stops:[[10,.8],[11,.8],[12,.9],[13,.9],[14,1.4],[15,1.75],[16,2.2]]},"line-opacity":1}},{id:"craters",type:"line",source:"macrostrat","source-layer":"lines",filter:["in","type","crater","impact structure"],minzoom:10,maxzoom:16,paint:{"line-dasharray":[6,6],"line-color":"#000000","line-width":{stops:[[10,.6],[11,.6],[12,.72],[13,.72],[14,1],[15,1.3],[16,1.8]]},"line-opacity":1}}]},Qi={name:"Satellite",type:"base",icon:"assets/img/tileIcon/2.png",zIndex:1,download:!0,attribution:[{content:"© Mapbox",link:"https://www.mapbox.com/about/maps"},{content:"© OpenStreetMap",link:"http://www.openstreetmap.org/about"},{content:"Improve this map",link:"https://www.mapbox.com/map-feedback",class:"mapbox-improve-map"},{content:"© DigitalGlobe",link:"https://www.digitalglobe.com"}],sources:{type:"raster",tileSize:256,tiles:["https://a.tiles.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ","https://b.tiles.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ"]},layers:[{id:"mapbox-satellite",type:"raster",source:"satellite",layout:{},paint:{}}]},tr={name:"Streets",type:"base",icon:"assets/img/tileIcon/1.png",zIndex:1,download:!1,attribution:[{content:"© Mapbox",link:"https://www.mapbox.com/about/maps"},{content:"© OpenStreetMap",link:"http://www.openstreetmap.org/about"},{content:"Improve this map",link:"https://www.mapbox.com/map-feedback",class:"mapbox-improve-map"}],sources:{type:"vector",tiles:["https://a.tiles.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ","https://b.tiles.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ"]},layers:[{id:"background",type:"background",layout:{},paint:{"background-color":{base:1,stops:[[11,"hsl(35, 32%, 91%)"],[13,"hsl(35, 12%, 89%)"]]}}},{id:"landcover_snow",type:"fill",metadata:{"mapbox:group":"1456970288113.8113"},source:"streets","source-layer":"landcover",filter:["==","class","snow"],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":.2,"fill-antialias":!1}},{id:"landcover_wood",type:"fill",metadata:{"mapbox:group":"1456970288113.8113"},source:"streets","source-layer":"landcover",maxzoom:14,filter:["==","class","wood"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[7,0]]},"fill-antialias":!1}},{id:"landcover_scrub",type:"fill",metadata:{"mapbox:group":"1456970288113.8113"},source:"streets","source-layer":"landcover",maxzoom:14,filter:["==","class","scrub"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[7,0]]},"fill-antialias":!1}},{id:"landcover_grass",type:"fill",metadata:{"mapbox:group":"1456970288113.8113"},source:"streets","source-layer":"landcover",maxzoom:14,filter:["==","class","grass"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[7,0]]},"fill-antialias":!1}},{id:"landcover_crop",type:"fill",metadata:{"mapbox:group":"1456970288113.8113"},source:"streets","source-layer":"landcover",maxzoom:14,filter:["==","class","crop"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[7,0]]},"fill-antialias":!1}},{id:"national_park",type:"fill",source:"streets","source-layer":"landuse_overlay",filter:["==","class","national_park"],layout:{},paint:{"fill-color":"hsl(100, 58%, 76%)","fill-opacity":{base:1,stops:[[5,0],[6,.5]]}}},{id:"park",type:"fill",source:"streets","source-layer":"landuse",filter:["==","class","park"],layout:{},paint:{"fill-color":"hsl(100, 58%, 76%)","fill-opacity":{base:1,stops:[[5,0],[6,1]]}}},{id:"pitch",type:"fill",source:"streets","source-layer":"landuse",filter:["==","class","pitch"],layout:{},paint:{"fill-color":"hsl(100, 57%, 72%)"}},{id:"pitch-line",type:"line",source:"streets","source-layer":"landuse",minzoom:15,filter:["==","class","pitch"],layout:{"line-join":"miter"},paint:{"line-color":"hsl(75, 57%, 84%)"}},{id:"cemetery",type:"fill",source:"streets","source-layer":"landuse",filter:["==","class","cemetery"],layout:{},paint:{"fill-color":"hsl(75, 37%, 81%)"}},{id:"industrial",type:"fill",source:"streets","source-layer":"landuse",filter:["==","class","industrial"],layout:{},paint:{"fill-color":{base:1,stops:[[15.5,"hsl(230, 15%, 86%)"],[16,"hsl(230, 29%, 89%)"]]}}},{id:"sand",type:"fill",source:"streets","source-layer":"landuse",filter:["==","class","sand"],layout:{},paint:{"fill-color":"hsl(60, 46%, 87%)"}},{id:"hillshade_highlight_bright",type:"fill",metadata:{"mapbox:group":"1456969573402.7817"},source:"streets","source-layer":"hillshade",maxzoom:16,filter:["==","level",94],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":{stops:[[14,.12],[16,0]]},"fill-antialias":!1}},{id:"hillshade_highlight_med",type:"fill",metadata:{"mapbox:group":"1456969573402.7817"},source:"streets","source-layer":"hillshade",maxzoom:16,filter:["==","level",90],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":{stops:[[14,.12],[16,0]]},"fill-antialias":!1}},{id:"hillshade_shadow_faint",type:"fill",metadata:{"mapbox:group":"1456969573402.7817"},source:"streets","source-layer":"hillshade",maxzoom:16,filter:["==","level",89],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[14,.05],[16,0]]},"fill-antialias":!1}},{id:"hillshade_shadow_med",type:"fill",metadata:{"mapbox:group":"1456969573402.7817"},source:"streets","source-layer":"hillshade",maxzoom:16,filter:["==","level",78],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[14,.05],[16,0]]},"fill-antialias":!1}},{id:"hillshade_shadow_dark",type:"fill",metadata:{"mapbox:group":"1456969573402.7817"},source:"streets","source-layer":"hillshade",maxzoom:16,filter:["==","level",67],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[14,.06],[16,0]]},"fill-antialias":!1}},{id:"hillshade_shadow_extreme",type:"fill",metadata:{"mapbox:group":"1456969573402.7817"},source:"streets","source-layer":"hillshade",maxzoom:16,filter:["==","level",56],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[14,.06],[16,0]]},"fill-antialias":!1}},{id:"waterway-river-canal",type:"line",source:"streets","source-layer":"waterway",minzoom:8,filter:["in","class","canal","river"],layout:{"line-cap":{base:1,stops:[[0,"butt"],[11,"round"]]},"line-join":"round"},paint:{"line-color":"hsl(205, 87%, 76%)","line-width":{base:1.3,stops:[[8.5,.1],[20,8]]},"line-opacity":{base:1,stops:[[8,0],[8.5,1]]}}},{id:"waterway-small",type:"line",source:"streets","source-layer":"waterway",minzoom:13,filter:["!in","class","canal","river"],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"hsl(205, 87%, 76%)","line-width":{base:1.35,stops:[[13.5,.1],[20,3]]},"line-opacity":{base:1,stops:[[13,0],[13.5,1]]}}},{id:"water-shadow",type:"fill",source:"streets","source-layer":"water",layout:{},paint:{"fill-color":"hsl(215, 84%, 69%)","fill-translate":{base:1.2,stops:[[7,[0,0]],[16,[-1,-1]]]},"fill-translate-anchor":"viewport","fill-opacity":1}},{id:"barrier_line-land-polygon",type:"fill",source:"streets","source-layer":"barrier_line",filter:["all",["==","$type","Polygon"],["==","class","land"]],layout:{},paint:{"fill-color":"hsl(35, 12%, 89%)"}},{id:"barrier_line-land-line",type:"line",source:"streets","source-layer":"barrier_line",filter:["all",["==","$type","LineString"],["==","class","land"]],layout:{"line-cap":"round"},paint:{"line-width":{base:1.99,stops:[[14,.75],[20,40]]},"line-color":"hsl(35, 12%, 89%)"}},{id:"aeroway-polygon",type:"fill",metadata:{"mapbox:group":"1444934828655.3389"},source:"streets","source-layer":"aeroway",minzoom:11,filter:["all",["==","$type","Polygon"],["!=","type","apron"]],layout:{},paint:{"fill-color":{base:1,stops:[[15,"hsl(230, 23%, 82%)"],[16,"hsl(230, 37%, 84%)"]]},"fill-opacity":{base:1,stops:[[11,0],[11.5,1]]}}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444934828655.3389"},source:"streets","source-layer":"aeroway",minzoom:9,filter:["all",["==","$type","LineString"],["==","type","runway"]],layout:{},paint:{"line-color":{base:1,stops:[[15,"hsl(230, 23%, 82%)"],[16,"hsl(230, 37%, 84%)"]]},"line-width":{base:1.5,stops:[[9,1],[18,80]]}}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444934828655.3389"},source:"streets","source-layer":"aeroway",minzoom:9,filter:["all",["==","$type","LineString"],["==","type","taxiway"]],layout:{},paint:{"line-color":{base:1,stops:[[15,"hsl(230, 23%, 82%)"],[16,"hsl(230, 37%, 84%)"]]},"line-width":{base:1.5,stops:[[10,.5],[18,20]]}}}]},er={name:"Labels(dark)",type:"label",zIndex:4,download:!0,sources:{type:"vector",tiles:["https://a.tiles.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ","https://b.tiles.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ"]},layers:[{id:"tunnel-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["in","class","secondary","tertiary"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13,0],[13.5,.5],[16,.75],[18,.35]]},"line-width":{base:1.5,stops:[[5,.75],[18,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,12]]}}},{id:"tunnel-street_limited-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13,0],[13.5,.5],[16,.75],[18,.35]]},"line-width":{base:1.5,stops:[[5,.75],[18,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,12]]}}},{id:"tunnel-street-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 28%, 93%)","line-opacity":{base:1,stops:[[13,0],[13.5,.5],[16,.75],[18,.35]]},"line-width":{base:1.5,stops:[[5,.75],[18,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{id:"tunnel-primary-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13,0],[13.5,.5],[16,.75],[18,.35]]},"line-width":{base:1.5,stops:[[5,.75],[18,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,18]]}}},{id:"tunnel-trunk_link-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk_link"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 28%, 93%)","line-opacity":{base:1,stops:[[13,0],[13.5,.5],[16,.75],[18,.35]]},"line-width":{base:1.5,stops:[[5,.75],[18,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{id:"tunnel-motorway_link-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13,0],[13.5,.5],[16,.75],[18,.35]]},"line-width":{base:1.5,stops:[[12,.5],[16,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,18]]}}},{id:"tunnel-trunk-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[14,.75],[16,.5]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,18]]}}},{id:"tunnel-motorway-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[14,.75],[16,.5]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-dasharray":[3,3],"line-blur":0,"line-gap-width":{base:1.5,stops:[[5,.75],[18,18]]}}},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","path"],["==","structure","tunnel"],["!=","type","steps"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 86%)","line-opacity":{base:1,stops:[[14,.25],[15,.4],[16,.75]]},"line-width":{base:1.5,stops:[[14,1],[18,2.5]]},"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]}}},{id:"tunnel-trunk_link",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(0, 28%, 93%)","line-opacity":{base:1,stops:[[14,.75],[16,0]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-dasharray":[1,0],"line-blur":0}},{id:"tunnel-motorway_link",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,.75],[16,0]]},"line-width":{base:1.5,stops:[[5,.75],[18,18]]},"line-dasharray":[1,0],"line-blur":0}},{id:"tunnel-pedestrian",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(26, 33%, 97%)","line-opacity":{base:1,stops:[[14,.75],[16,.5]]},"line-width":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,1]],[16,[1,2]]]},"line-blur":0,"line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]}}},{id:"tunnel-service-link-track-case",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["in","class","link","service","track"],["==","structure","tunnel"],["!=","type","trunk_link"]]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[7,"hsl(0, 1%, 56%)"],[10,"hsl(0, 0%, 75%)"]]},"line-opacity":{base:1,stops:[[14,.75],[16,.5]]},"line-width":{base:1.5,stops:[[5,.75],[18,12]]},"line-dasharray":[1,0]}},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["in","class","secondary","tertiary"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1.2,stops:[[11.5,0],[12.5,.65],[16,0]]},"line-width":{base:1.5,stops:[[5,.75],[16,12]]},"line-dasharray":[1,0],"line-blur":0}},{id:"tunnel-primary",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 2%, 83%)","line-opacity":{base:1,stops:[[14,.75],[16,0]]},"line-width":{base:1.5,stops:[[5,.75],[18,18]]},"line-dasharray":[1,0],"line-blur":0}},{id:"tunnel-oneway-arrows-blue-minor",type:"symbol",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","link","path","pedestrian","service","track"],["==","oneway","true"],["==","structure","tunnel"],["!=","type","trunk_link"]]],layout:{"icon-image":"oneway-spaced-white-large"},paint:{}},{id:"tunnel-oneway-arrows-blue-major",type:"symbol",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","primary","secondary","street","street_limited","tertiary"],["==","oneway","true"],["==","structure","tunnel"],["!=","type","trunk_link"]]],layout:{"icon-image":"oneway-spaced-white-large"},paint:{}},{id:"tunnel-trunk",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{base:1,stops:[[14,"hsl(54, 59%, 54%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,.75],[16,0]]},"line-width":{base:1.5,stops:[[5,.75],[18,18]]},"line-dasharray":[1,0],"line-blur":0}},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,.75],[16,0]]},"line-width":{base:1.5,stops:[[5,.75],[18,18]]},"line-dasharray":[1,0],"line-blur":0}},{id:"tunnel-oneway-arrows-white",type:"symbol",metadata:{"mapbox:group":"1460127465037.9006"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","link","motorway","motorway_link","trunk"],["==","oneway","true"],["==","structure","tunnel"],["!in","type","primary_link","secondary_link","tertiary_link"]]],layout:{"icon-image":"oneway-spaced-white-large","symbol-placement":"line","symbol-spacing":150,"icon-padding":2},paint:{}},{id:"ferry",type:"line",source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["==","type","ferry"]],layout:{"line-join":"round"},paint:{"line-color":"#dbdbdb","line-opacity":{base:1,stops:[[7.5,0],[8,.15],[16,.5]]},"line-width":{base:1,stops:[[14,1],[18,2.5]]},"line-dasharray":{base:1,stops:[[12,[3.5,2]],[14,[2,1]]]}}},{id:"ferry_auto",type:"line",source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["==","type","ferry_auto"]],layout:{"line-join":"round"},paint:{"line-color":"#dbdbdb","line-opacity":{base:1,stops:[[7.5,0],[8,.15],[16,.5]]},"line-width":{base:1,stops:[[14,1],[18,2.5]]}}},{id:"ferry-label",type:"symbol",source:"compositeDark","source-layer":"road_label",filter:["==","class","ferry"],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[16,11],[20,13]]},"text-letter-spacing":.01,"text-line-height":1.1,"text-max-width":7,"symbol-placement":"line"},paint:{"text-color":"hsl(230, 50%, 98%)","text-opacity":1,"text-halo-color":"hsl(0, 1%, 3%)","text-halo-blur":.5,"text-halo-width":1.75}},{id:"road-link-case",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","link"],["!in","structure","bridge","tunnel"],["!=","type","trunk_link"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[7,"hsl(0, 1%, 56%)"],[10,"hsl(0, 0%, 75%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]}}},{id:"road-motorway_link-case",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:10,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[12,.5],[16,2]]},"line-gap-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"road-primary-case",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",maxzoom:15,filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["!in","structure","bridge","tunnel"]]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[11,"hsl(0, 1%, 17%)"],[14,"hsl(54, 2%, 53%)"],[18,"hsl(0, 1%, 13%)"]]},"line-opacity":{base:1,stops:[[7,0],[10,.5],[14,1],[16,0]]},"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]}}},{id:"road-trunk_link-case",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","trunk_link"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-opacity":{base:1,stops:[[11,.75],[12,.65],[18,0]]},"line-width":{base:1.5,stops:[[12,.75],[14,2]]},"line-gap-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"road-trunk-case",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[5,"round"],[11,"butt"]]},"line-join":"round"},paint:{"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"]]},"line-width":{base:1,stops:[[5,.5],[18,2]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"road-motorway-case",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[5,"round"],[11,"butt"]]},"line-join":"round"},paint:{"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"road-path",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","path"],["!in","structure","bridge","tunnel"],["!in","type","crossing","piste","sidewalk","steps"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 86%)","line-width":{base:1.5,stops:[[14,1],[18,2.5]]},"line-opacity":{base:1,stops:[[14,.25],[15,.4],[16,.75]]},"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]}}},{id:"road-pedestrian",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:12,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","none"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 86%)","line-width":{base:1.5,stops:[[14,1],[18,2.5]]},"line-opacity":{base:1,stops:[[14,.25],[15,.4],[16,.75]]},"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,1]],[16,[1,2]]]}}},{id:"road-link",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","link"],["!in","structure","bridge","tunnel"],["!=","type","o"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[7,"hsl(0, 1%, 56%)"],[10,"hsl(0, 0%, 75%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[14,.5],[18,12]]}}},{id:"road-street_limited",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","none"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1,stops:[[12,0],[14,.25],[16,0]]},"line-width":{base:1.5,stops:[[10.5,.5],[12,4]]}}},{id:"road-street",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","none"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1,stops:[[12,0],[14,.5],[16,0]]},"line-width":{base:1.5,stops:[[10.5,.5],[12,4]]}}},{id:"road-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["in","class","secondary","tertiary"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1.2,stops:[[11.5,0],[12.5,.65],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[16,2]]}}},{id:"road-primary",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["in","class","link","primary"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[8,"hsl(0, 0%, 96%)"],[10,"hsl(0, 2%, 83%)"]]},"line-opacity":{base:1,stops:[[6,.25],[8,.6],[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,.5],[12,1.75],[18,1]]}}},{id:"road-oneway-arrows-blue-minor",type:"symbol",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["in","class","link","path","pedestrian","service","track"],["==","oneway","true"],["!in","structure","bridge","tunnel"],["!=","type","trunk_link"]]],layout:{"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"symbol-placement":"line","symbol-spacing":200,"icon-padding":2,"icon-rotation-alignment":"map"},paint:{}},{id:"road-oneway-arrows-blue-major",type:"symbol",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","primary","secondary","street","street_limited","tertiary"],["==","oneway","true"],["!in","structure","bridge","tunnel"],["!=","type","trunk_link"]]],layout:{"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"symbol-placement":"line","symbol-spacing":200,"icon-padding":2,"icon-rotation-alignment":"map"},paint:{}},{id:"road-trunk",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:5,filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[14,"hsl(54, 59%, 54%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]}}},{id:"road-motorway",type:"line",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["!in","structure","bridge","tunnel"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]}}},{id:"road-oneway-arrows-white",type:"symbol",metadata:{"mapbox:group":"1459882298057.56"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","link","motorway","motorway_link","trunk"],["==","oneway","true"],["!in","type","primary_link","secondary_link","tertiary_link"]]],layout:{"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"symbol-placement":"line","symbol-spacing":200,"icon-padding":2},paint:{}},{id:"bridge-primary-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[11,"hsl(0, 1%, 17%)"],[14,"hsl(54, 2%, 53%)"],[18,"hsl(0, 1%, 13%)"]]},"line-opacity":{base:1,stops:[[7,0],[10,.5],[14,1],[16,0]]},"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]}}},{id:"bridge-trunk_link-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:11,maxzoom:15,filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","structure","bridge"],["==","type","trunk_link"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-opacity":{base:1,stops:[[11,.75],[12,.65],[18,0]]},"line-width":{base:1.5,stops:[[12,.75],[14,2]]},"line-gap-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"bridge-motorway_link-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["!in","layer",2,3,4,5],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[12,.5],[16,2]]},"line-gap-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"bridge-trunk-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["!in","layer",2,3,4,5],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[5,"round"],[11,"butt"]]},"line-join":"round"},paint:{"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"]]},"line-width":{base:1,stops:[[5,.5],[18,2]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"bridge-motorway-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["!in","layer",2,3,4,5],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","path"],["==","structure","bridge"],["!=","type","steps"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 86%)","line-width":{base:1.5,stops:[[14,1],[18,2.5]]},"line-opacity":{base:1,stops:[[14,.25],[15,.4],[16,.75]]},"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]}}},{id:"bridge-trunk_link",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","structure","bridge"],["==","type","trunk_link"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2]]},"line-color":{base:1,stops:[[14,"hsl(54, 48%, 49%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"bridge-motorway_link",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["!in","layer",2,3,4,5],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"bridge-street_limited",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1,stops:[[12,0],[14,.25],[16,0]]},"line-width":{base:1.5,stops:[[10.5,.5],[12,4]]}}},{id:"bridge-street",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1,stops:[[12,0],[14,.5],[16,0]]},"line-width":{base:1.5,stops:[[10.5,.5],[12,4]]}}},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","type","secondary","tertiary"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 17%)","line-opacity":{base:1.2,stops:[[11.5,0],[12.5,.65],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[16,2]]}}},{id:"bridge-primary",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[8,"hsl(0, 0%, 96%)"],[10,"hsl(0, 2%, 83%)"]]},"line-opacity":{base:1,stops:[[6,.25],[8,.6],[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,.5],[12,1.75],[18,1]]}}},{id:"bridge-oneway-arrows-blue-minor",type:"symbol",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","link","path","pedestrian","service","track"],["==","oneway","true"],["==","structure","bridge"]]],layout:{"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"symbol-placement":"line","symbol-spacing":200,"icon-padding":2,"icon-rotation-alignment":"map"},paint:{}},{id:"bridge-oneway-arrows-blue-major",type:"symbol",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["in","class","primary","secondary","street","street_limited","tertiary"],["==","oneway","true"],["==","structure","bridge"]]],layout:{"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"symbol-placement":"line","symbol-spacing":200,"icon-padding":2,"icon-rotation-alignment":"map"},paint:{}},{id:"bridge-trunk",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:5,filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["!in","layer",2,3,4,5],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[14,"hsl(54, 59%, 54%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]}}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["!in","layer",2,3,4,5],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]}}},{id:"bridge-trunk_link-2-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:11,maxzoom:15,filter:["all",["==","$type","LineString"],["all",[">=","layer",2],["==","structure","bridge"],["==","type","trunk_link"]]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-opacity":{base:1,stops:[[11,.75],[12,.65],[18,0]]},"line-width":{base:1.5,stops:[[12,.75],[14,2]]},"line-gap-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"bridge-motorway_link-2-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],[">=","layer",2],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[12,.5],[16,2]]},"line-gap-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"bridge-trunk-2-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",maxzoom:15,filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],[">=","layer",2],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-opacity":{base:1.2,stops:[[5,0],[5.5,.5],[8,.85],[14,.2],[16,0]]}}},{id:"bridge-motorway-2-case",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",maxzoom:15,filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],[">=","layer",2],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-gap-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]},"line-color":{base:1,stops:[[9,"hsl(0, 1%, 26%)"],[12,"hsl(0, 1%, 31%)"],[15,"hsl(0, 1%, 25%)"]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"bridge-trunk_link-2",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",[">=","layer",2],["==","structure","bridge"],["==","type","trunk_link"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2]]},"line-color":{base:1,stops:[[14,"hsl(54, 48%, 49%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]}}},{id:"bridge-motorway_link-2",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],[">=","layer",2],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[12,.5],[14,2]]}}},{id:"bridge-trunk-2",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],[">=","layer",2],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[14,"hsl(54, 59%, 54%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]}}},{id:"bridge-motorway-2",type:"line",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],[">=","layer",2],["==","structure","bridge"]]],layout:{"line-cap":{base:1,stops:[[10,"round"],[12,"butt"]]},"line-join":"round"},paint:{"line-color":{base:1,stops:[[5,"hsl(31, 27%, 51%)"],[14.5,"hsl(31, 59%, 56%)"],[18,"hsl(84, 2%, 82%)"]]},"line-opacity":{base:1,stops:[[14,1],[16,0]]},"line-width":{base:1.5,stops:[[5,1],[12,2],[18,1]]}}},{id:"bridge-oneway-arrows-white",type:"symbol",metadata:{"mapbox:group":"1459882360129.4563"},source:"compositeDark","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["in","class","link","motorway","motorway_link","trunk"],["==","oneway","true"],["==","structure","bridge"],["!in","type","primary_link","secondary_link","tertiary_link"]]],layout:{"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"symbol-placement":"line","symbol-spacing":200,"icon-padding":2},paint:{}},{id:"aerialway-bg",type:"line",source:"compositeDark","source-layer":"road",minzoom:12,filter:["all",["==","$type","LineString"],["any",["==","class","aerialway"],["==","type","piste"]]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 1%, 45%)","line-opacity":{base:1,stops:[[12.5,0],[14,.25],[16,.75]]},"line-width":{base:1,stops:[[14,.5],[18,2.5]]},"line-blur":1}},{id:"admin-3-4-boundaries-bg",type:"line",metadata:{"mapbox:group":"1459882330622.065"},source:"compositeDark","source-layer":"admin",filter:["all",[">=","admin_level",3],["==","maritime",0]],layout:{"line-join":"bevel"},paint:{"line-color":{base:1,stops:[[0,"hsla(93, 26%, 62%, 0.77)"],[6,"hsla(93, 26%, 62%, 0.77)"],[8,"hsla(93, 63%, 24%, 0.77)"]]},"line-dasharray":[1,0],"line-opacity":{base:1,stops:[[4,.2],[8,.35]]},"line-width":{base:1,stops:[[3,2.5],[10,4.5]]},"line-blur":{base:1,stops:[[3,0],[8,3]]},"line-translate":[0,0]}},{id:"admin-2-boundaries-bg",type:"line",metadata:{"mapbox:group":"1459882330622.065"},source:"compositeDark","source-layer":"admin",minzoom:1,filter:["all",["==","admin_level",2],["==","maritime",0]],layout:{"line-join":"miter"},paint:{"line-color":"hsla(0, 0%, 95%, 0.77)","line-width":{base:1,stops:[[3,3.5],[10,10]]},"line-opacity":{base:1,stops:[[4,.1],[8,.35]]},"line-blur":{base:1,stops:[[3,0],[10,2]]},"line-translate":[0,0]}},{id:"admin-3-4-boundaries",type:"line",metadata:{"mapbox:group":"1459882330622.065"},source:"compositeDark","source-layer":"admin",filter:["all",[">=","admin_level",3],["==","maritime",0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsla(0, 0%, 0%, 0.72)","line-dasharray":[5,2.5],"line-opacity":{base:1,stops:[[0,1],[12,.5]]},"line-width":{base:1,stops:[[4,1],[9,1.75]]}}},{id:"admin-2-boundaries",type:"line",metadata:{"mapbox:group":"1459882330622.065"},source:"compositeDark","source-layer":"admin",filter:["all",["==","admin_level",2],["==","disputed",0],["==","maritime",0]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(0, 0%, 0%)","line-opacity":{base:1,stops:[[0,.5],[6,.75]]},"line-width":{base:1,stops:[[0,.75],[4,3]]}}},{id:"admin-2-boundaries-dispute",type:"line",metadata:{"mapbox:group":"1459882330622.065"},source:"compositeDark","source-layer":"admin",filter:["all",["==","admin_level",2],["==","disputed",1],["==","maritime",0]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 0%)","line-dasharray":[4,8],"line-width":.75,"line-opacity":{base:1,stops:[[0,1],[12,.75],[16,0]]}}},{id:"waterway-label",type:"symbol",source:"compositeDark","source-layer":"waterway_label",minzoom:12,filter:["in","class","canal","river","stream"],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-max-angle":30,"text-size":{base:1,stops:[[13,12],[18,16]]}},paint:{"text-halo-width":{base:1,stops:[[12,.5],[14,1.5]]},"text-halo-color":"hsl(0, 0%, 9%)","text-color":"#75cff0","text-halo-blur":.5}},{id:"poi-scalerank4-l15",type:"symbol",metadata:{"mapbox:group":"1461616039439.258"},source:"compositeDark","source-layer":"poi_label",filter:["all",[">=","localrank",15],["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",4]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[12,"{maki}-11"],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 3%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"poi-scalerank4-l1",type:"symbol",metadata:{"mapbox:group":"1461616039439.258"},source:"compositeDark","source-layer":"poi_label",minzoom:15,filter:["all",["<","localrank",14],["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",4]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[12,"{maki}-11"],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 3%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"poi-parks_scalerank4",type:"symbol",metadata:{"mapbox:group":"1461616039439.258"},source:"compositeDark","source-layer":"poi_label",filter:["all",["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",4]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[13,""],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium Italic","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 50%, 60%)","text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0,"text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 1%, 18%)"]]},"icon-opacity":1}},{id:"poi-scalerank3",type:"symbol",metadata:{"mapbox:group":"1461616021709.3948"},source:"compositeDark","source-layer":"poi_label",filter:["all",["<=","localrank",3],["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",3]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[12,"{maki}-11"],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 3%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"poi-parks-scalerank3",type:"symbol",metadata:{"mapbox:group":"1461616021709.3948"},source:"compositeDark","source-layer":"poi_label",filter:["all",["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",3]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[13,""],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium Italic","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 50%, 60%)","text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0,"text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 1%, 18%)"]]},"icon-opacity":1}},{id:"road-label-small",type:"symbol",metadata:{"mapbox:group":"1459882215460.736"},source:"compositeDark","source-layer":"road_label",minzoom:13,filter:["all",["==","$type","LineString"],["!in","class","ferry","link","motorway","pedestrian","primary","secondary","street","street_limited","tertiary","trunk"]],layout:{"text-size":{base:1,stops:[[15,10],[20,13]]},"text-max-angle":30,"symbol-spacing":250,"text-font":{base:1,stops:[[10,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[14,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}"},paint:{"text-color":"#fff","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 2%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"road-label-medium",type:"symbol",metadata:{"mapbox:group":"1459882215460.736"},source:"compositeDark","source-layer":"road_label",minzoom:12,filter:["all",["==","$type","LineString"],["in","class","link","pedestrian","street","street_limited"]],layout:{"text-size":{base:1,stops:[[11,10],[20,14]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}"},paint:{"text-color":"#fff","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 2%, 16%)"]]},"text-halo-blur":0,"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]}}},{id:"road-label-large",type:"symbol",metadata:{"mapbox:group":"1459882215460.736"},source:"compositeDark","source-layer":"road_label",minzoom:12,filter:["in","class","secondary","tertiary"],layout:{"text-size":{base:1,stops:[[9,10],[20,16]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}"},paint:{"text-color":"#fff","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 2%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"road-label-xlarge",type:"symbol",metadata:{"mapbox:group":"1459882215460.736"},source:"compositeDark","source-layer":"road_label",filter:["in","class","motorway","primary","trunk"],layout:{"text-size":{base:1,stops:[[9,10],[20,16]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}"},paint:{"text-color":"#fff","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 2%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"road-shields-black",type:"symbol",metadata:{"mapbox:group":"1459802883310.3264"},source:"compositeDark","source-layer":"road_label",filter:["all",["in","class","motorway","motorway_link","primary","secondary","trunk"],["in","localrank",1,2],["<=","reflen",6],["!in","shield","at-expressway","at-motorway","at-state-b","bg-motorway","bg-national","ch-main","ch-motorway","cz-expressway","cz-motorway","cz-road","de-motorway","e-road","fi-main","gr-motorway","gr-national","hr-motorway","hr-state","hu-main","hu-motorway","nz-state","pl-expressway","pl-motorway","pl-national","ro-county","ro-motorway","ro-national","rs-motorway","rs-state-1b","se-main","si-expressway","si-motorway","sk-highway","sk-road","us-interstate","us-interstate-business","us-interstate-duplex","us-interstate-truck","za-metropolitan","za-national","za-provincial","za-regional"]],layout:{"text-size":9,"icon-image":"{shield}-{reflen}","icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":{base:1,stops:[[11,150],[14,200]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-padding":2,"text-rotation-alignment":"viewport","text-field":"{ref}","text-letter-spacing":.05,"icon-padding":2},paint:{"text-color":"#000","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-opacity":1,"icon-color":"white","text-halo-color":"#ffffff","text-halo-width":0}},{id:"road-shields-white",type:"symbol",metadata:{"mapbox:group":"1459802883310.3264"},source:"compositeDark","source-layer":"road_label",filter:["all",["in","class","motorway","motorway_link","primary","secondary","trunk"],["<=","reflen",6],["in","shield","at-expressway","at-motorway","at-state-b","bg-motorway","bg-national","ch-main","ch-motorway","cz-expressway","cz-motorway","cz-road","de-motorway","e-road","fi-main","gr-motorway","gr-national","hr-motorway","hr-state","hu-main","hu-motorway","nz-state","pl-expressway","pl-motorway","pl-national","ro-county","ro-motorway","ro-national","rs-motorway","rs-state-1b","se-main","si-expressway","si-motorway","sk-highway","sk-road","us-interstate","us-interstate-business","us-interstate-duplex","us-interstate-truck","za-metropolitan","za-national","za-provincial","za-regional"]],layout:{"text-size":9,"icon-image":"{shield}-{reflen}","icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":{base:1,stops:[[11,150],[14,200]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-padding":2,"text-rotation-alignment":"viewport","text-field":"{ref}","text-letter-spacing":.05,"icon-padding":2},paint:{"text-color":"#fff","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-opacity":1,"icon-color":"white","text-halo-color":"#ffffff","text-halo-width":0}},{id:"motorway-junction",type:"symbol",metadata:{"mapbox:group":"1459802883310.3264"},source:"compositeDark","source-layer":"motorway_junction",minzoom:14,filter:[">","reflen",0],layout:{"text-field":"{ref}","text-size":9,"text-font":["DIN Offc Pro Bold","Arial Unicode MS Regular"],"icon-image":"motorway-exit-{reflen}"},paint:{"text-color":"#fff","text-translate":[0,0]}},{id:"poi-scalerank2",type:"symbol",metadata:{"mapbox:group":"1460058190129.9705"},source:"compositeDark","source-layer":"poi_label",filter:["all",["<=","localrank",3],["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",2]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[12,"{maki}-11"],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 3%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"poi-parks-scalerank2",type:"symbol",metadata:{"mapbox:group":"1460058190129.9705"},source:"compositeDark","source-layer":"poi_label",filter:["all",["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",2]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{base:1,stops:[[13,""],[14,"{maki}-15"]]},"text-font":["DIN Offc Pro Medium Italic","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 50%, 60%)","text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0,"text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 1%, 18%)"]]},"icon-opacity":1}},{id:"rail-label",type:"symbol",source:"compositeDark","source-layer":"rail_station_label",minzoom:12,filter:["!=","maki","entrance"],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{network}","symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.85],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":{base:1,stops:[[0,""],[13,"{name_en}"]]},"text-letter-spacing":.01,"icon-padding":0,"text-max-width":7},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":"hsl(0, 0%, 25%)","text-halo-width":{base:1,stops:[[7,.5],[16,1.5]]},"icon-halo-width":4,"icon-halo-color":"#fff","text-opacity":{base:1,stops:[[13.99,0],[14,1]]},"text-halo-blur":.5}},{id:"water-label-sm",type:"symbol",metadata:{"mapbox:group":"1459803160909.4875"},source:"compositeDark","source-layer":"water_label",minzoom:15,filter:["<=","area",1e4],layout:{"text-size":{base:1,stops:[[16,13],[20,16]]},"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-field":"{name_en}"},paint:{"text-color":"#75cff0","text-halo-color":"hsl(0, 0%, 9%)","text-halo-width":{base:1,stops:[[13,.5],[14,1]]},"text-halo-blur":{base:1,stops:[[12,.5],[15,1]]}}},{id:"water-label",type:"symbol",metadata:{"mapbox:group":"1459803160909.4875"},source:"compositeDark","source-layer":"water_label",minzoom:5,filter:[">","area",1e4],layout:{"text-size":{base:1,stops:[[13,13],[18,18]]},"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-field":"{name_en}"},paint:{"text-color":"#75cff0","text-halo-color":"hsl(0, 0%, 9%)","text-halo-width":{base:1,stops:[[13,.5],[14,1]]},"text-halo-blur":.5}},{id:"poi-parks-scalerank1",type:"symbol",metadata:{"mapbox:group":"1459803084625.6987"},source:"compositeDark","source-layer":"poi_label",filter:["all",["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["<=","scalerank",1]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":{base:1,stops:[[13,""],[14,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium Italic","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 50%, 60%)","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 1%, 18%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0,"icon-opacity":1}},{id:"poi-scalerank1",type:"symbol",metadata:{"mapbox:group":"1459803084625.6987"},source:"compositeDark","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["<=","scalerank",1]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":{base:1,stops:[[12,"{maki}-11"],[14,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":{base:1,stops:[[8,"hsl(0, 1%, 10%)"],[16,"hsl(0, 3%, 16%)"]]},"text-halo-width":{base:1,stops:[[14,1.25],[15,1.5]]},"text-halo-blur":0}},{id:"airport-label",type:"symbol",source:"compositeDark","source-layer":"airport_label",minzoom:9,filter:["<=","scalerank",2],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,12],[18,18]]},"icon-image":{stops:[[12,"{maki}-11"],[13,"{maki}-15"]]},"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":{stops:[[11,"{ref}"],[12,"{name_en}"]]},"text-letter-spacing":.01,"text-max-width":{base:1,stops:[[7,7],[12,8],[16,10]]}},paint:{"text-color":"hsl(0, 0%, 92%)","text-halo-color":"hsl(0, 0%, 25%)","text-halo-width":{base:1,stops:[[7,.5],[16,1.5]]},"text-halo-blur":.5,"icon-opacity":.8}},{id:"place-islets",type:"symbol",source:"compositeDark","source-layer":"place_label",filter:["==","type","islet"],layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,16]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1,"text-halo-blur":.5}},{id:"place-neighbourhood",type:"symbol",source:"compositeDark","source-layer":"place_label",minzoom:10,maxzoom:16,filter:["==","type","neighbourhood"],layout:{"text-line-height":1,"text-size":{base:1,stops:[[12,11],[16,16]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":3,"text-field":"{name_en}","text-letter-spacing":.1,"text-max-width":7},paint:{"text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-blur":.5,"text-color":"hsl(35, 100%, 100%)","text-halo-width":1}},{id:"place-suburb",type:"symbol",source:"compositeDark","source-layer":"place_label",minzoom:10,maxzoom:16,filter:["==","type","suburb"],layout:{"text-line-height":1,"text-size":{base:1,stops:[[12,11],[15,18]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":3,"text-field":"{name_en}","text-letter-spacing":.15,"text-max-width":7},paint:{"text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-blur":.5,"text-color":"hsl(35, 100%, 100%)","text-halo-width":1}},{id:"place-hamlet",type:"symbol",source:"compositeDark","source-layer":"place_label",minzoom:10,maxzoom:16,filter:["==","type","hamlet"],layout:{"text-line-height":1,"text-size":{base:1,stops:[[12,11.5],[15,16]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":3,"text-field":"{name_en}","text-letter-spacing":.1,"text-max-width":7},paint:{"text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-blur":.5,"text-color":"hsl(35, 100%, 100%)","text-halo-width":1}},{id:"place-village",type:"symbol",source:"compositeDark","source-layer":"place_label",minzoom:8,maxzoom:15,filter:["all",["<=","localrank",12],["==","type","village"]],layout:{"text-size":{base:1,stops:[[10,11.5],[16,18]]},"text-font":{base:1,stops:[[5,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[6,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7,[0,-.15]],[8,[0,0]]]},"icon-size":1,"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,.9],[8,0]]},"text-halo-blur":.5}},{id:"place-town",type:"symbol",source:"compositeDark","source-layer":"place_label",minzoom:6,maxzoom:15,filter:["all",["<=","localrank",12],["==","type","town"]],layout:{"text-size":{base:1,stops:[[7,11.5],[15,20]]},"icon-image":"dot-9","text-font":{base:1,stops:[[5,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[6,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7,[0,-.15]],[8,[0,0]]]},"icon-size":1,"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,.9],[8,0]]},"text-halo-blur":.5}},{id:"place-island",type:"symbol",source:"compositeDark","source-layer":"place_label",filter:["==","type","island"],layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,16]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1,"text-halo-blur":.5}},{id:"place-city-sm",type:"symbol",metadata:{"mapbox:group":"1459802912335.5327"},source:"compositeDark","source-layer":"place_label",maxzoom:14,filter:["all",["!in","scalerank",0,1,2,3,4,5],["==","type","city"]],layout:{"text-size":{base:1,stops:[[6,12],[14,22]]},"icon-image":"dot-9","text-font":{base:1,stops:[[5,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[6,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.2]],[8,[0,0]]]},"icon-size":1,"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-letter-spacing":{base:1,stops:[[5,.02],[6,.07]]},"text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1.75,"icon-opacity":{base:1,stops:[[7.99,.9],[8,0]]},"text-halo-blur":.5}},{id:"place-city-md-s",type:"symbol",metadata:{"mapbox:group":"1459802912335.5327"},source:"compositeDark","source-layer":"place_label",maxzoom:14,filter:["all",["in","ldir","E","S","SE","SW"],["in","scalerank",3,4,5],["==","type","city"]],layout:{"text-field":"{name_en}","icon-image":"dot-10","text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-offset":{base:1,stops:[[7.99,[0,.1]],[8,[0,0]]]},"text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-size":{base:.9,stops:[[5,12],[12,22]]},"icon-size":1},paint:{"text-halo-width":1.5,"text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-color":"hsl(0, 100%, 100%)","text-halo-blur":.5,"icon-opacity":{base:1,stops:[[7.99,.9],[8,0]]},"text-opacity":1}},{id:"place-city-md-n",type:"symbol",metadata:{"mapbox:group":"1459802912335.5327"},source:"compositeDark","source-layer":"place_label",maxzoom:14,filter:["all",["in","ldir","N","NE","NW","W"],["in","scalerank",3,4,5],["==","type","city"]],layout:{"text-size":{base:.9,stops:[[5,12],[12,22]]},"icon-image":"dot-10","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1.5,"icon-opacity":{base:1,stops:[[7.99,.9],[8,0]]},"text-halo-blur":.5,"text-opacity":1}},{id:"place-city-lg-s",type:"symbol",metadata:{"mapbox:group":"1459802912335.5327"},source:"compositeDark","source-layer":"place_label",minzoom:1,maxzoom:14,filter:["all",["in","ldir","E","S","SE","SW"],["<=","scalerank",2],["==","type","city"]],layout:{"text-size":{base:.9,stops:[[4,12],[10,22]]},"icon-image":"dot-11","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,.15]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1.5,"icon-opacity":{base:1,stops:[[7.99,.9],[8,0]]},"text-halo-blur":.5,"text-translate":[0,-.75],"text-opacity":1}},{id:"place-city-lg-n",type:"symbol",metadata:{"mapbox:group":"1459802912335.5327"},source:"compositeDark","source-layer":"place_label",minzoom:1,maxzoom:14,filter:["all",["in","ldir","N","NE","NW","W"],["<=","scalerank",2],["==","type","city"]],layout:{"text-size":{base:.9,stops:[[4,12],[10,22]]},"icon-image":"dot-11","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7},paint:{"text-color":"hsl(0, 100%, 100%)","text-opacity":1,"text-halo-color":{base:1,stops:[[9,"hsl(0, 0%, 18%)"],[12,"hsl(0, 2%, 14%)"]]},"text-halo-width":1.5,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":.5,"text-translate":[0,0]}},{id:"marine-label-sm-ln",type:"symbol",metadata:{"mapbox:group":"1459802922547.9956"},source:"compositeDark","source-layer":"marine_label",minzoom:3,maxzoom:10,filter:["all",["==","$type","LineString"],[">=","labelrank",4]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[3,12],[6,16]]},"symbol-spacing":{base:1,stops:[[4,100],[6,400]]},"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-field":"{name_en}","text-letter-spacing":.1,"text-max-width":5},paint:{"text-color":"hsl(224, 29%, 40%)"}},{id:"marine-label-sm-pt",type:"symbol",metadata:{"mapbox:group":"1459802922547.9956"},source:"compositeDark","source-layer":"marine_label",minzoom:3,maxzoom:10,filter:["all",["==","$type","Point"],[">=","labelrank",4]],layout:{"text-field":"{name_en}","text-max-width":5,"text-letter-spacing":.1,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[3,12],[6,16]]}},paint:{"text-color":"hsl(224, 29%, 40%)"}},{id:"marine-label-md-ln",type:"symbol",metadata:{"mapbox:group":"1459802922547.9956"},source:"compositeDark","source-layer":"marine_label",minzoom:2,maxzoom:8,filter:["all",["==","$type","LineString"],["in","labelrank",2,3]],layout:{"text-line-height":1.1,"text-size":{base:1.1,stops:[[2,12],[5,20]]},"symbol-spacing":250,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-field":"{name_en}","text-letter-spacing":.15,"text-max-width":5},paint:{"text-color":"hsl(224, 29%, 40%)"}},{id:"marine-label-md-pt",type:"symbol",metadata:{"mapbox:group":"1459802922547.9956"},source:"compositeDark","source-layer":"marine_label",minzoom:2,maxzoom:8,filter:["all",["==","$type","Point"],["in","labelrank",2,3]],layout:{"text-field":"{name_en}","text-max-width":5,"text-letter-spacing":.15,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1.1,stops:[[2,14],[5,20]]}},paint:{"text-color":"hsl(224, 29%, 40%)"}},{id:"marine-label-lg-ln",type:"symbol",metadata:{"mapbox:group":"1459802922547.9956"},source:"compositeDark","source-layer":"marine_label",minzoom:1,maxzoom:4,filter:["all",["==","$type","LineString"],["==","labelrank",1]],layout:{"text-field":"{name_en}","text-max-width":4,"text-size":{base:1,stops:[[1,14],[4,30]]},"text-line-height":1.1,"symbol-placement":"line","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.25},paint:{"text-color":"hsl(224, 29%, 40%)"}},{id:"marine-label-lg-pt",type:"symbol",metadata:{"mapbox:group":"1459802922547.9956"},source:"compositeDark","source-layer":"marine_label",minzoom:1,maxzoom:4,filter:["all",["==","$type","Point"],["==","labelrank",1]],layout:{"text-field":"{name_en}","text-max-width":4,"text-letter-spacing":.25,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[1,14],[4,30]]}},paint:{"text-color":"hsl(224, 29%, 40%)"}},{id:"state-label-sm",type:"symbol",metadata:{"mapbox:group":"1459802933574.639"},source:"compositeDark","source-layer":"state_label",minzoom:3,maxzoom:9,filter:["<","area",2e4],layout:{"text-size":{base:1,stops:[[6,10],[9,14]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":{base:1,stops:[[0,"{abbr}"],[6,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":5},paint:{"text-color":"hsl(0, 0%, 100%)","text-halo-color":"hsl(224, 2%, 18%)","text-halo-width":1,"text-opacity":1}},{id:"state-label-md",type:"symbol",metadata:{"mapbox:group":"1459802933574.639"},source:"compositeDark","source-layer":"state_label",minzoom:3,maxzoom:8,filter:["all",["<","area",8e4],[">=","area",2e4]],layout:{"text-size":{base:1,stops:[[5,10],[8,16]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":{base:1,stops:[[0,"{abbr}"],[5,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":6},paint:{"text-color":"hsl(0, 0%, 100%)","text-halo-color":"hsl(224, 2%, 18%)","text-halo-width":2}},{id:"state-label-lg",type:"symbol",metadata:{"mapbox:group":"1459802933574.639"},source:"compositeDark","source-layer":"state_label",minzoom:3,maxzoom:7,filter:[">=","area",8e4],layout:{"text-size":{base:1,stops:[[4,10],[7,18]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-padding":1,"text-field":{base:1,stops:[[0,"{abbr}"],[4,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":6},paint:{"text-color":"hsl(0, 0%, 100%)","text-halo-color":"hsl(224, 2%, 18%)","text-opacity":1,"text-halo-width":2}},{id:"country-label-sm",type:"symbol",metadata:{"mapbox:group":"1459802941943.712"},source:"compositeDark","source-layer":"country_label",minzoom:1,maxzoom:10,filter:[">=","scalerank",5],layout:{"text-field":"{name_en}","text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:.9,stops:[[5,14],[9,22]]}},paint:{"text-color":"hsl(0, 0%, 100%)","text-halo-color":{base:1,stops:[[0,"hsl(224, 2%, 18%)"],[4,"hsl(224, 1%, 12%)"],[8,"hsl(224, 1%, 2%)"]]},"text-halo-width":1.25}},{id:"country-label-md",type:"symbol",metadata:{"mapbox:group":"1459802941943.712"},source:"compositeDark","source-layer":"country_label",minzoom:1,maxzoom:8,filter:["in","scalerank",3,4],layout:{"text-field":{base:1,stops:[[0,"{code}"],[2,"{name_en}"]]},"text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[3,10],[8,24]]}},paint:{"text-color":"hsl(0, 0%, 100%)","text-halo-color":{base:1,stops:[[0,"hsl(224, 2%, 18%)"],[4,"hsl(224, 1%, 12%)"],[8,"hsl(224, 1%, 2%)"]]},"text-halo-width":1.25}},{id:"country-label-lg",type:"symbol",metadata:{"mapbox:group":"1459802941943.712"},source:"compositeDark","source-layer":"country_label",minzoom:1,maxzoom:7,filter:["in","scalerank",1,2],layout:{"text-field":"{name_en}","text-max-width":{base:1,stops:[[0,5],[3,6]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[1,10],[6,24]]}},paint:{"text-halo-color":{base:1,stops:[[0,"hsl(224, 2%, 18%)"],[4,"hsl(224, 1%, 12%)"],[8,"hsl(224, 1%, 2%)"]]},"text-halo-width":1.25,"text-color":"hsl(0, 0%, 100%)"}}]},nr={name:"Terrain",type:"base",icon:"assets/img/tileIcon/3.png",zIndex:1,download:!1,attribution:[{content:"GMRT.org",link:"https://www.gmrt.org"},{content:"© Mapbox",link:"https://www.mapbox.com/about/maps"},{content:"© OpenStreetMap",link:"http://www.openstreetmap.org/about"}],sources:{type:"raster",tileSize:256,tiles:["https://www.gmrt.org/services/mapserv/wms_merc?&REQUEST=GetMap&SERVICE=WMS&VERSION=1.1.1&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&WIDTH=256&HEIGHT=256&reaspect=false&LAYERS=topo&STYLES=&FORMAT=image/png&SRS=EPSG:3857&BBOX={bbox-epsg-3857}"]},layers:[{id:"gmrt-satellite",type:"raster",source:"gmrt",layout:{},paint:{}}]},ir=function(){return function(){this.currentBaseTile="satellite",this.currentLabel="compositeDark",this.tiles={macrostrat:Ji,satellite:Qi,streets:tr,compositeDark:er,gmrt:nr}}}(),rr=function(){function t(t,e,n){this.offlineStorage=!1,this.gpsEnabled=!0,this.gpsEnabledSubject=new Bi.Subject,this.gpsState=0,this.gpsSubject=new Bi.Subject,this.trackingState=!1,this.trackingSubject=new Bi.Subject,this.tabState=!0,this.tabStateSubject=new Bi.Subject,this.unit="metric",this.unitSubject=new Bi.Subject,this.tripMode="plane",this.tripState=0,this.mapStateSubject=new Bi.Subject,this.speedAltEnabled=!0,this.dataLayerStates={},this.otherDataLayerStates={},this.datasetTileStates={},this.tooltipsOn=!0;for(var i=0,r=t.DATASOURCE;i<r.length;i++){var a=r[i];if(e.dataLayer[a]&&e.dataLayer[a].defaultDataset)this.dataLayerStates[a]=!0;else{if(!e.dataLayer[a]||e.dataLayer[a].defaultDataset)throw new Error("Invalid datasource config file: "+a);this.dataLayerStates[a]=!1}for(var o=0,l=t.OTHERDATASOURCE;o<l.length;o++){var s=l[o];if(!e.other[s])throw new Error("Invalid datasource config file: "+s);this.otherDataLayerStates[s]=!0}for(var u=0,c=t.DATATILE;u<c.length;u++){var p=c[u];if(!n.tiles[p])throw new Error("Invalid datatile config file: "+p);this.datasetTileStates[p]=!0}}}return t.prototype.setDataLayerState=function(t,e){null==this.dataLayerStates[t]?console.log("data layer key is not valid"):this.dataLayerStates[t]=e},t.prototype.getDataLayerStates=function(){return this.dataLayerStates},t.prototype.setOtherDataLayerState=function(t,e){null==this.otherDataLayerStates[t]?console.log("other data layer key is not valid"):this.otherDataLayerStates[t]=e},t.prototype.getOtherDataLayerStates=function(){return this.otherDataLayerStates},t.prototype.setDatasetTileState=function(t,e){null!=this.datasetTileStates[t]?this.datasetTileStates[t]=e:console.log("dataset tile key is not valid")},t.prototype.getDatasetTileStates=function(){return this.datasetTileStates},t.prototype.isTripMode=function(t){return this.tripMode==t},t.prototype.setTripMode=function(t){this.tripMode=t},t.prototype.getTripMode=function(){return this.tripMode},t.prototype.isTripState=function(t){return this.tripState==t},t.prototype.setTripState=function(t){this.tripState=t},t.prototype.getTripState=function(){return this.tripState},t.prototype.isUnit=function(t){return this.unit==t},t.prototype.setUnit=function(t){this.unit=t,localStorage.setItem("units",t),this.unitSubject.next(t)},t.prototype.getUnitSubject=function(){return this.unitSubject},t.prototype.getUnit=function(){return null!==localStorage.getItem("units")?this.unit=localStorage.getItem("units"):this.unit},t.prototype.setSpeedAltEnabled=function(t){this.speedAltEnabled=t},t.prototype.getSpeedAltEnabled=function(){return this.speedAltEnabled},t.prototype.setGpsEnabled=function(t){this.gpsEnabled=t,localStorage.setItem("gpsEnabled",JSON.stringify(t)),this.gpsEnabledSubject.next(t)},t.prototype.isGpsEnabled=function(t){return this.gpsEnabled==t},t.prototype.getGpsEnabledSubject=function(){return this.gpsEnabledSubject},t.prototype.getGpsEnabled=function(){return null!==localStorage.getItem("gpsEnabled")?this.gpsEnabled=JSON.parse(localStorage.getItem("gpsEnabled")):this.gpsEnabled},t.prototype.setTracking=function(t){this.trackingState=t,this.trackingSubject.next(t)},t.prototype.getTracking=function(){return this.trackingState},t.prototype.isTracking=function(t){return this.trackingState==t},t.prototype.getTrackingSubject=function(){return this.trackingSubject},t.prototype.setGPS=function(t){this.gpsState=t,this.gpsSubject.next(t)},t.prototype.getGPS=function(){return this.gpsState},t.prototype.getGpsSubject=function(){return this.gpsSubject},t.prototype.setPlatform=function(t){this.platform=t},t.prototype.getPlatform=function(){return this.platform},t.prototype.isPlatform=function(t){return this.platform==t},t.prototype.setOfflineStorage=function(t){this.offlineStorage=t},t.prototype.getOfflineStorage=function(){return this.offlineStorage},t.prototype.setTabState=function(t){this.tabState=t,this.tabStateSubject.next(t)},t.prototype.isTabState=function(t){return this.tabState==t},t.prototype.getTabState=function(){return this.tabState},t.prototype.getTabStateSubject=function(){return this.tabStateSubject},t.prototype.getMapStateSubject=function(){return this.mapStateSubject},t.prototype.setMapState=function(t){this.mapState=t,this.mapStateSubject.next(t)},t.prototype.isMapState=function(t){return this.mapState==t},t.prototype.getMapState=function(){return this.mapState},t.prototype.getTooltipsOn=function(){return null!==localStorage.getItem("tooltipsOn")?this.tooltipsOn=JSON.parse(localStorage.getItem("tooltipsOn")):this.tooltipsOn},t.prototype.setTooltipsOn=function(t){this.tooltipsOn=t,localStorage.setItem("tooltipsOn",JSON.stringify(t))},t}(),ar=function(){function t(t,e,n,i){this.storageServ=t,this.eventServ=e,this.stateServ=n,this.tileConfigServ=i,this.currentDatasetTiles=[],this.offlineTileIndexes=[],this.offline=!1,this.collection={},this.base=[],this.label=[],this.dataset=[],this.init()}return t.prototype.init=function(){for(var t in this.tileConfigServ.tiles){var e=this.tileConfigServ.tiles[t],n=void 0;if("dataset"==e.type.toLowerCase()){if(!this.stateServ.getDatasetTileStates()[t]){console.log("this dataset tile will not be added",t);continue}n=new Ri(t,e.name,e.type,e.icon,e.zIndex,e.download,e.sources,e.layers,{sourceName:e.sourceName})}else n=new Ri(t,e.name,e.type,e.icon,e.zIndex,e.download,e.sources,e.layers,{attribution:e.attribution});this.addTile(n),this.tileConfigServ.currentBaseTile==t&&this.setCurrentBaseTile(n),this.tileConfigServ.currentLabel==t&&this.setCurrentLabel(n)}},t.prototype.addTile=function(t){var e=t.getId(),n=t.getLayerType();this.getTileById(e)?console.log("tile already exist"):(this.collection[e]=t,this[n].push(e))},t.prototype.getOffline=function(){return this.offline},t.prototype.setOffline=function(t){this.offline!=t&&(this.offline=t,this.eventServ.publishEvent("changeOfflineStatus"))},t.prototype.getOfflineDirectory=function(){return this.offlineDirectory},t.prototype.setOfflineDirectory=function(t){this.offlineDirectory=[this.storageServ.getRootDirectory(),"fc",t,"tile"].join("/")},t.prototype.calculateOfflineTileIndexes=function(t){var e=[0,1,2,3,4,5,6,7,8,9],n=[];if(!(e=0===this.stateServ.getTripState()?[0,1,2,3,4,5,6,7,8,9]:1===this.stateServ.getTripState()?[0,1,2,3,4,5,6,7,8,9,10,11]:[0,1,2,3,4,5,6,7,8,9]))return n;for(var i={min_zoom:void 0,max_zoom:void 0},r=0;r<e.length;r++)i.max_zoom=e[r],i.min_zoom=i.max_zoom,n=n.concat(ji.tiles(t,i));return n},t.prototype.calculateOfflineTileTypes=function(){for(var t={},e=!1,n=!1,i=0,r=this.getTiles("base");i<r.length;i++){var a=r[i];if(a.getDownload()){e=!0;var o=a.getUrl(),l=a.getId(),s=a.getFormat();t[o]?t[o].ids.push(l):t[o]={ids:[l],format:s}}}for(var u=0,c=this.getTiles("dataset");u<c.length;u++){var p=c[u];if(p.getDownload()){n=!0;o=p.getUrl(),l=p.getId(),s=p.getFormat();t[o]?t[o].ids.push(l):t[o]={ids:[l],format:s}}}if(!e&&!n)return t;for(var h=0,d=this.getTiles("label");h<d.length;h++){var f=d[h];if(f.getDownload()){e=!0;o=f.getUrl(),l=f.getId(),s=f.getFormat();t[o]?t[o].ids.push(l):t[o]={ids:[l],format:s}}}return t},t.prototype.getVisibleDatasetTileLayer=function(){for(var t=[],e=0,n=this.getTiles("dataset");e<n.length;e++){var i=n[e];i.getEnabled()&&i.getVisible()&&t.push(i)}return t},t.prototype.getTileById=function(t){return this.collection[t]},t.prototype.getTiles=function(t){var e=[];for(var n in this.collection)t?-1!=this[t].indexOf(n)&&e.push(this.getTileById(n)):e.push(this.getTileById(n));return e},t.prototype.setCurrentDatasetTile=function(t){for(var e=[],n=!1,i=0;i<t.length;i++){var r=t[i].getId();-1==this.dataset.indexOf(r)?console.log("invalid dataset tile"):e.push(r)}if(e.length==this.currentDatasetTiles.length){e.sort(),this.currentDatasetTiles.sort();for(i=0;i<e.length;i++)e[i]!=this.currentDatasetTiles[i]&&(n=!0)}else n=!0;if(n){for(i=0;i<this.dataset.length;i++)-1==e.indexOf(this.dataset[i])?this.getTileById(this.dataset[i]).setVisible(!1):this.getTileById(this.dataset[i]).setVisible(!0);this.currentDatasetTiles=e,this.eventServ.publishEvent("datasetTileChange")}else console.log("dataset tiles haven't changed")},t.prototype.setCurrentBaseTile=function(t){var e=t.getId();if(this.currentBaseTile!=e)if(-1!=this.base.indexOf(e)){for(var n=0;n<this.base.length;n++)e!=this.base[n]?this.getTileById(this.base[n]).setVisible(!1):this.getTileById(this.base[n]).setVisible(!0);this.currentBaseTile=e,this.eventServ.publishEvent("baseTileChange")}else console.log("invalid base tile");else console.log("base tile hasn't changed")},t.prototype.setCurrentLabel=function(t){var e=t.getId();if(this.currentLabel!=e)if(-1!=this.label.indexOf(e)){for(var n=0;n<this.label.length;n++)e!=this.label[n]?this.getTileById(this.label[n]).setVisible(!1):this.getTileById(this.label[n]).setVisible(!0);this.currentLabel=e,this.eventServ.publishEvent("labelTileChange")}else console.log("invalid label tile");else console.log("label tile hasn't changed")},t.prototype.getCurrentBaseTile=function(){return this.getTileById(this.currentBaseTile)},t.prototype.getCurrentDatasetTiles=function(){for(var t=[],e=0;e<this.currentDatasetTiles.length;e++)t.push(this.getTileById(this.currentDatasetTiles[e]));return t},t.prototype.resetTile=function(){for(var t=0,e=this.getTiles("base");t<e.length;t++){e[t].setEnabled(!0)}for(var n=0;n<this.getTiles("dataset").length;n++){this.getTiles("dataset")[n].setEnabled(!0)}this.setCurrentDatasetTile([]),this.setOffline(!1)},t}(),or=n(255),lr=function(){function t(t,e,n){this.renderedLayers=[],this.featureAdapter=t,this.storageServ=e,this.mapTileServ=n}return t.prototype.createMap=function(t){var e=this;return new Promise(function(n){or.accessToken="pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ",e.mapHandler=new or.Map({container:t,doubleClickZoom:!1,attributionControl:!1,style:{version:8,name:"Mapbox Flyover Country",sources:{},sprite:e.storageServ.getApplicationRootDirectory()+"/assets/img/sprite",glyphs:e.storageServ.getApplicationRootDirectory()+"/assets/font/arial/{range}.pbf",layers:[],created:0,modified:0,owner:"mapbox",draft:!1,visibility:"public"}}).on("load",function(){n()})})},t.prototype.mapEventListener=function(t,e,n){n?this.mapHandler.on(t,n,e):this.mapHandler.on(t,e)},t.prototype.getCoordsFromMapEvent=function(t){return[t.lngLat.lng,t.lngLat.lat]},t.prototype.addScaleControl=function(t){this.scale=new or.ScaleControl({maxWidth:100,unit:t}),this.mapHandler.addControl(this.scale,"top-left")},t.prototype.setScaleUnit=function(t){this.mapHandler.removeControl(this.scale),this.scale=new or.ScaleControl({maxWidth:100,unit:t}),this.mapHandler.addControl(this.scale,"top-left")},t.prototype.addNavControl=function(){this.mapHandler.addControl(new or.NavigationControl,"top-left")},t.prototype.addTiles=function(t){for(var e=0;e<t.length;e++)this.addTileLayer(t[e])},t.prototype.updateTile=function(t){for(var e=t.getVisible(),n=0;n<t.getLayers().length;n++){var i=t.getLayers()[n].id;this.hasLayer(i)&&this.mapHandler.setLayoutProperty(i,"visibility",e?"visible":"none")}},t.prototype.changeOffline=function(){var t=this.mapHandler.getStyle();t.offline||(t.offline={}),t.offline.status=this.mapTileServ.getOffline(),t.offline.rootDirectory=this.mapTileServ.getOfflineDirectory(),this.mapHandler.setStyle(t);for(var e=0,n=this.mapTileServ.getTiles();e<n.length;e++){var i=n[e];i.getSource().minZoom=0,this.mapTileServ.getOffline()?i.getSource().maxZoom=9:i.getSource().maxZoom=22,this.addTileLayer(i)}},t.prototype.addFeatureLayer=function(t){var e=t.getId(),n=this.featureAdapter.createSource(t);if(this.hasSource(e))this.mapHandler.getSource(e).setData(n.data);else{this.mapHandler.addSource(e,n);for(var i=t.getZIndex(),r=t.getBottomLayer(),a=this.getBeforeId(r,e,i),o=(t.getVisible(),0),l=t.getLayers();o<l.length;o++){var s=this.featureAdapter.createLayer(e,l[o]);this.hasLayer(s.id)?console.log("Already has a layer with this id"):this.mapHandler.addLayer(s,a)}}for(var u=t.getVisible(),c=0,p=t.getLayers();c<p.length;c++){var h=p[c].getId();this.hasLayer(h)&&this.mapHandler.setLayoutProperty(h,"visibility",u?"visible":"none")}t.setRendered(!0)},t.prototype.deleteFeatureLayer=function(t){var e=t.getId();if(this.hasSource(e)){for(var n=0;n<this.renderedLayers.length;n++)this.renderedLayers[n].id==e&&this.renderedLayers.splice(n,1);for(var i=0,r=t.getLayers();i<r.length;i++){var a=r[i].getId();this.hasLayer(a)&&this.mapHandler.removeLayer(a)}this.mapHandler.removeSource(e)}t.setRendered(!1)},t.prototype.getFeaturesAtLocation=function(t,e){var n=this,i=function(t,e,i){return new Promise(function(r,a){n.mapHandler.getSource(e).getClusterLeaves(i,1/0,0,function(e,n){t.properties=[];for(var i=0,a=n;i<a.length;i++){t.properties.push(a[i].properties)}r()})})};return new Promise(function(r,a){var o=n.mapHandler.queryRenderedFeatures(t,e);o.length<1&&(console.log("failure to get feature array at point",t),r([]));for(var l=[],s=0,u=o;s<u.length;s++){var c=u[s];if(c.properties.cluster){l.push(i(c,c.layer.source,c.properties.cluster_id))}else c.properties=[c.properties]}Promise.all(l).then(function(t){r(o)})})},t.prototype.addTileLayer=function(t){var e=t.getId();if(this.hasSource(e)){for(var n=0;n<this.renderedLayers.length;n++)this.renderedLayers[n].id==e&&this.renderedLayers.splice(n,1);for(n=0;n<t.getLayers().length;n++){var i=t.getLayers()[n].id;this.hasLayer(i)&&this.mapHandler.removeLayer(i)}this.mapHandler.removeSource(e)}var r=t.getSource(),a=t.getLayers();if(!t.getUrl()){if(!or.mapbox||!or.mapbox.normalizeTileURL)return void console.log("Cannot set url for map tile");t.setUrl(or.mapbox.normalizeTileURL(r.tiles[0],null,r.tileSize))}var o=t.getVisible(),l=t.getZIndex(),s=t.getBottomLayer();if(r&&a){this.mapHandler.addSource(e,r);var u=this.getBeforeId(s,e,l);for(n=0;n<a.length;n++)this.mapHandler.addLayer(a[n],u),this.mapHandler.setLayoutProperty(a[n].id,"visibility",o?"visible":"none")}else console.log("layers are not successfully added")},t.prototype.hasSource=function(t){return!!this.mapHandler.getSource(t)},t.prototype.hasLayer=function(t){return!!this.mapHandler.getLayer(t)},t.prototype.getBeforeId=function(t,e,n){if(!t)return null;if(0==this.renderedLayers.length)return this.renderedLayers.push({layerId:t,id:e,zIndex:n}),null;for(var i=this.renderedLayers.length-1;i>=0;i--)if(!(n<=this.renderedLayers[i].zIndex))return this.renderedLayers.splice(i+1,0,{layerId:t,id:e,zIndex:n}),i+2>=this.renderedLayers.length?null:this.renderedLayers[i+2].layerId;return this.renderedLayers.splice(i+1,0,{layerId:t,id:e,zIndex:n}),this.renderedLayers[i+2].layerId},t.prototype.easeToLocation=function(t){this.mapHandler.easeTo({center:t})},t.prototype.zoomToLocation=function(t,e,n){n&&this.mapHandler.setPitch(n),e&&this.mapHandler.setBearing(e),this.mapHandler.setCenter(t)},t.prototype.fitBounds=function(t){var e=new or.LngLatBounds(t[0],t[1]);this.mapHandler.fitBounds(e,{padding:20})},t.prototype.resetMapHeading=function(){this.mapHandler.resetNorth()},t.prototype.resetMapPitch=function(){this.mapHandler.setPitch(0)},t.prototype.addMarker=function(t,e){var n=document.createElement("div"),i=new or.Marker(n,{offset:[0,0]});return n.id=t,i.setLngLat(e).addTo(this.mapHandler),i},t.prototype.setMarker=function(t,e,n){if(e){t.getElement().id=e}n&&t.setLngLat(n)},t.prototype.deleteMarker=function(t){t.remove()},t.prototype.applyFilter=function(t,e){this.mapHandler.setFilter(t,e)},t.prototype.setFeatureState=function(t,e){this.mapHandler.setFeatureState(t,e)},t=Object(ci.__decorate)([Object(ci.__param)(0,Object(ui.m)("MapEngineFeatureAdapter"))],t)}(),sr=n(211),ur=n(256),cr=function(){function t(t){this.utilServ=t}return t.prototype.createPoint=function(t){if(!this.utilServ.checkType(t,"number",1))throw new TypeError("Invalid geojson point");return{type:"Point",coordinates:t}},t.prototype.setPoint=function(t,e){if(!this.utilServ.checkType(e,"number",1))throw new TypeError("Invalid geojson point");t.coordinates=e},t.prototype.createLinestring=function(t){if(!this.utilServ.checkType(t,"number",2))throw new TypeError("Invalid geojson linestring");return{type:"LineString",coordinates:t}},t.prototype.setLinestring=function(t,e){if(!this.utilServ.checkType(e,"number",2))throw new TypeError("Invalid geojson linestring");t.coordinates=e},t.prototype.appendCoordsToLinestring=function(t,e){if(!this.utilServ.checkType(e,"number",2))throw new TypeError("Invalid parameter type");for(var n=0;n<e.length;n++)t.coordinates.push(e[n])},t.prototype.createPolygon=function(t){if(!this.utilServ.checkType(t,"number",3))throw new TypeError("Invalid geojson polygon");return{type:"Polygon",coordinates:t}},t.prototype.setPolygon=function(t,e){if(!this.utilServ.checkType(e,"number",3))throw new TypeError("Invalid geojson polygon");t.coordinates=e},t.prototype.getCoordinates=function(t){switch(t.type.toLowerCase()){case"point":case"linestring":case"polygon":case"multipoint":case"multipolygon":case"multilinestring":return t.coordinates}},t.prototype.getGeometry=function(t){return t.geometry},t.prototype.createFeature=function(t,e){return{type:"Feature",geometry:t,properties:e}},t.prototype.setFeature=function(t,e,n){return t.geometry=e,t.properties=n,t},t.prototype.createFeatureCollection=function(t){return{type:"FeatureCollection",features:t}},t.prototype.addFeatureToCollection=function(t,e){return t.features.push(e),t},t.prototype.combileGeoJSON=function(t){return sr.combine(t)},t.prototype.getLength=function(t){return sr.length(t,{units:"miles"})},t.prototype.toGeoJSONArray=function(t){var e,n,i=[];if(!t||!t.geometry||!t.geometry.type)return null;if((e=t.geometry.type.toLowerCase()).includes("multi"))switch(e=e.substr(5),n=t.properties,e){case"point":i.push(this.createFeature(this.createPoint(t.geometry.coordinates),n));break;case"linestring":for(var r=0;r<t.geometry.coordinates.length;r++)i.push(this.createFeature(this.createLinestring(t.geometry.coordinates[r]),n));break;case"polygon":for(r=0;r<t.geometry.coordinates.length;r++)i.push(this.createFeature(this.createPolygon(t.geometry.coordinates[r]),n))}else i.push(t);return i},t.prototype.bufferGeoJSON=function(t,e){return ur(t,e,"kilometers")},t.prototype.simplifyGeoJSON=function(t){var e=sr.simplify(t,{tolerance:.1,highQuality:!1});return t=sr.truncate(e,{precision:3,coordinates:2})},t.prototype.getCentroid=function(t){return sr.centroid(t)},t.prototype.getBound=function(t){return sr.bbox(t)},t.prototype.thisWorld=function(t){var e=this.createPolygon([[[-180,-85],[180,-85],[180,85],[-180,85],[-180,-85]]]);return sr.intersect(e,t)},t.prototype.isCrossDateLine=function(t){var e=this.createPolygon([[[-180,-85],[180,-85],[180,85],[-180,85],[-180,-85]]]);return!!sr.lineIntersect(t,e).features[0]},t}(),pr=function(){return function(t,e,n,i,r,a){this.id=t,this.type=e,this.source=n,i&&(this.paint=i),r&&(this.layout=r),a&&(this.filter=a)}}(),hr=function(){return function(t,e){this.type="geojson",this.data=t,e&&(this.cluster=!0,this.clusterMaxZoom=14,this.clusterRadius=50)}}(),dr=function(){function t(t){this.geoJSONServ=t}return t.prototype.createSource=function(t){return new hr(this.geoJSONServ.createFeatureCollection(t.getShapeData()),t.getIsCluster())},t.prototype.createLayer=function(t,e){var n,i=e.getId(),r=e.getFilter(),a=e.getStyle(),o=null,l=null;switch(e.getType().toLowerCase()){case"polygon":return n="fill",l={"fill-outline-color":a.borderColor,"fill-color":a.fillColor,"fill-opacity":a.opacity},new pr(i,n,t,l,o,r);case"linestring":return n="line",l={"line-color":a.color,"line-width":a.width,"line-opacity":a.opacity},new pr(i,n,t,l,o,r);case"circlepoint":return n="circle",l={"circle-radius":a.size,"circle-stroke-color":a.strokeColor,"circle-color":a.color,"circle-opacity":a.opacity,"circle-stroke-width":a.strokeWidth},new pr(i,n,t,l,o,r);case"imagepoint":return n="symbol",o={"icon-image":a.image,"icon-offset":a.offset,"text-field":a.text,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":a.textSize},l={"text-color":"#FFFFFF"},new pr(i,n,t,l,o,r);default:console.log("unknown mapbox layer type")}},t}(),fr=n(260),mr=function(){function t(t,e){this.geoJSONServ=t,this.msg=e.SHAPE,this.geoJSONServ=t}return t.prototype.formatCoordsArray=function(t){if(0==t.length)throw new Error(this.msg.NO_COORDS);if(1==t.length)return t;for(var e=void 0,n=t.length-2;n>=0;n--){var i=t[n];(e=t[n+1])[0]==i[0]&&e[1]==i[1]&&t.splice(n+1,1)}return t},t.prototype.getCoordsInFirstWorld=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n][0],r=t[n][1],a=Math.floor((i+180)/360);e.push([i-=360*a,r])}return e},t.prototype.greatCircle=function(t,e){return new fr.GreatCircle({x:t[0],y:t[1]},{x:e[0],y:e[1]},null).Arc(100,{offset:10}).json()},t.prototype.createPathMarker=function(t,e){try{e=this.formatCoordsArray(e),e=this.getCoordsInFirstWorld(e);var n=[],i=this.geoJSONServ.createFeature(this.geoJSONServ.createPoint(e[0]));if(n.push(i),e.length>=2){var r=this.geoJSONServ.createFeature(this.geoJSONServ.createPoint(e[e.length-1]));n.push(r)}t.set(n),t.setEnabled(!0)}catch(t){throw t}},t.prototype.createArc=function(t,e){if((e=this.getCoordsInFirstWorld(e)).length>=2)try{for(var n=[],i=!1,r=1;r<e.length;r++){var a=[];if(a=this.geoJSONServ.toGeoJSONArray(this.greatCircle(e[r-1],e[r])),0==n.length)n=n.concat(a),a.length>1&&(i=!0);else{if(a.length>1){if(i)throw e.pop(),new Error(this.msg.NO_CROSS_TWICE);i=!0}this.geoJSONServ.appendCoordsToLinestring(this.geoJSONServ.getGeometry(n[n.length-1]),this.geoJSONServ.getCoordinates(this.geoJSONServ.getGeometry(a[0]))),a.length>1&&n.push(a[1])}}var o=this.geoJSONServ.createFeatureCollection(n),l=this.geoJSONServ.getLength(o.features[0]);console.log("path length: ",l),t.set(n),t.setEnabled(!0)}catch(t){throw t}},t.prototype.createLine=function(t,e){if(e.length>=2)try{var n=[],i=this.geoJSONServ.simplifyGeoJSON(this.geoJSONServ.createFeature(this.geoJSONServ.createLinestring(e)));if(this.geoJSONServ.isCrossDateLine(i))throw e.pop(),new Error("Cannot drive cross dateline");n.push(i);var r=this.geoJSONServ.createFeatureCollection(n),a=this.geoJSONServ.getLength(r.features[0]);console.log("path length: ",a),t.set(n),t.setEnabled(!0)}catch(t){throw t}},t.prototype.createArcBuffer=function(t,e){try{for(var n=[],i=0,r=e.getShapeData();i<r.length;i++){var a=this.geoJSONServ.bufferGeoJSON(r[i],t.getBufferSize());a=this.geoJSONServ.simplifyGeoJSON(a),a=this.geoJSONServ.thisWorld(a),n.push(a)}t.set(n),t.setEnabled(!0)}catch(t){throw t}},t.prototype.createBuffer=function(t,e){try{t.set(e),t.setEnabled(!0)}catch(t){throw t}},t}(),gr=n(117),yr=(n(262),n(263),n(272)),_r=function(){function t(t){this.http=t}return t.prototype.fetchData=function(t,e,n,i){console.log(t);var r=null;switch(i||(i=2e4),e.toLowerCase()){case"get":if(n){t+="?";var a=[];for(var o in n)a.push(o+"="+n[o]);t+=a.join("&")}r=this.http.get(t).timeout(i);break;case"post":r=this.http.post(t,n).timeout(i);break;case"jsonp":if(n){t+="?";a=[];for(var o in n)a.push(o+"="+n[o]);t+=a.join("&")}r=this.http.jsonp(t,"callback").timeout(i);break;default:return void console.log("Invalid httpMethod type in fetch request.")}return r},t.prototype.fetchImage=function(t,e){return this.http.get(e,{responseType:"arraybuffer"}).toPromise().then(function(n){return new gr.d(!0,t,e,new Blob([n],{type:"image/png"}))}).catch(function(n){return new gr.d(!1,t,e,null)})},t.prototype.fetchWiki=function(t,e){function n(e){var n={};n.title=e.title,n.id=t,n.articleText=e.extract.replace(/Edit/g,"");var i=document.createElement("div");return i.innerHTML=n.articleText,n.shortText=i.textContent.slice(0,250)+" ...",n}var i=this,r=function(e,a){var o=["https://en.m.wikipedia.org/w/api.php?action=query&prop=extracts&redirects=1&format=json&titles=",e].join("");return i.http.jsonp(o,"callback").toPromise().then(function(i){var o=i;if(!(o&&o.query&&o.query.pages))return new gr.c(!0,t,"application/octet-stream",null);if(o.query.pages[-1]){if(a&&-1!=e.indexOf(" ")){var l=e.split(" ")[0];return r(l,!1)}return new gr.c(!0,t,"application/octet-stream",null)}for(var s in o.query.pages){var u=n(o.query.pages[s]);return new gr.c(!0,t,"application/octet-stream",u)}}).catch(function(e){return console.log("error when fetch"),new gr.c(!1,t,"application/octet-stream",null)})};return r(t,e)},t.prototype.fetchTile=function(t,e,n,i){var r=e[0],a=e[1],o=e[2],l=yr.a(r,a,o);return n=n.replace("{z}",o.toString()).replace("{x}",r.toString()).replace("{y}",a.toString()).replace("{bbox-epsg-3857}",l),this.http.get(n,{responseType:"arraybuffer"}).toPromise().then(function(n){return new gr.e(!0,t,e,i,new Blob([n]))}).catch(function(n){var r=String.fromCharCode.apply(null,new Uint8Array(n._body));return new gr.e(r.length>0,t,e,i,null)})},t.prototype.searchPlace=function(t){return this.http.get("https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ&limit=5").timeout(8e3).toPromise().then(function(t){if(t.features)return t}).catch(function(t){})},t.prototype.searchDirection=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].join(","));var i=e.join(";");return this.http.get("https://api.mapbox.com/directions/v5/mapbox/driving-traffic/"+i+".json?geometries=geojson&alternatives=true&steps=true&overview=full&access_token=pk.eyJ1IjoiZmx5b3ZlcmNvdW50cnkiLCJhIjoiNDI2NzYzMmYxMzI5NWYxMDc0YTY5NzRiMzdlZDIyNTAifQ.x4T-qLEzRQMNFIdnkOkHKQ").timeout(8e3).toPromise().then(function(t){if(t&&"Ok"==t.code)return t}).catch(function(t){})},t}(),vr=n(273),br=function(){function t(){}return t.prototype.build=function(t,e){var n=[];switch(t=t.toLowerCase()){case"wkt":for(var i=0,r=e;i<r.length;i++){n.push(this.buildWKT(r[i]))}break;case"gml":for(var a=0,o=e;a<o.length;a++){n.push(this.buildGML(o[a]))}}return n},t.prototype.buildWKT=function(t){var e=vr.stringify(t);return e=e.replace(/\s\(/g,"("),e=e.replace(/, /g,",")},t.prototype.buildGML=function(t){return t.geometry.coordinates[0].join(" ")},t}(),xr=n(118),wr=function(){function t(){this.enabled=!1}return t.prototype.setEnabled=function(t){this.enabled=t},t.prototype.getEnabled=function(){return this.enabled},t.prototype.clear=function(){},t.prototype.set=function(t){},t}(),Sr=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Tr=function(t){function e(e){var n=t.call(this)||this;n.regionShapeConf=e;var i=e.regionShape.arc;return n.arc=new xr.a(i.layer.arc.id,i.zIndex),n.arc.addLayer(i.layer.arc.id,i.layer.arc.type,i.layer.arc.style,null,null),n}return Sr(e,t),e.prototype.getArc=function(){return this.arc},e.prototype.set=function(t){this.arc.setShapeData(t),this.arc.setVisible(!0)},e.prototype.setArcEnabled=function(t){this.enableArc=t},e.prototype.getArcEnabled=function(){return this.enableArc},e.prototype.clear=function(){this.arc.resetShapeData(),this.arc.setVisible(!1)},e}(wr),kr=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ir=function(t){function e(e){var n=t.call(this)||this;n.regionShapeConf=e;var i=e.regionShape.buffer;return n.buffer=new xr.a(i.layer.regionBuffer.id,i.zIndex),n.buffer.addLayer(i.layer.regionBuffer.id,i.layer.regionBuffer.type,i.layer.regionBuffer.style,null,null),n.border=new xr.a(i.layer.regionBorder.id,i.zIndex),n.border.addLayer(i.layer.regionBorder.id,i.layer.regionBorder.type,i.layer.regionBorder.style,null,null),n}return kr(e,t),e.prototype.setBufferSize=function(t){this.bufferSize=t},e.prototype.getBufferSize=function(){return this.bufferSize},e.prototype.getBuffer=function(){return this.buffer},e.prototype.getBorder=function(){return this.border},e.prototype.set=function(t){this.buffer.setShapeData(t),this.buffer.setVisible(!0);for(var e=[],n=0;n<t.length;n++){var i=sr.polygonToLine(t[n]);e.push(i)}this.border.setShapeData(e),this.border.setVisible(!0)},e.prototype.clear=function(){this.buffer.resetShapeData(),this.border.resetShapeData(),this.buffer.setVisible(!1),this.border.setVisible(!1)},e}(wr),Er=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ar=function(t){function e(e){var n=t.call(this)||this;n.regionShapeConf=e;var i=e.regionShape.pathMarker;return n.pathMarker=new xr.a(i.layer.pathMarker.id,i.zIndex),n.pathMarker.addLayer(i.layer.pathMarker.id,i.layer.pathMarker.type,i.layer.pathMarker.style,null,null),n}return Er(e,t),e.prototype.getPathMarker=function(){return this.pathMarker},e.prototype.set=function(t){this.pathMarker.setShapeData(t),this.pathMarker.setVisible(!0)},e.prototype.clear=function(){this.pathMarker.resetShapeData(),this.pathMarker.setVisible(!1)},e}(wr),Cr=n(213),Lr=function(){return function(t,e,n,i,r,a){this.name=t,this.path=e,this.description=n,this.type=i,this.options=r,this.version=a}}(),zr=function(){function t(t,e,n){this.fcConfig=t,this.shapeServ=e,this.eventServ=n,this.options={},this.renderQueue={add:[],delete:[]},this.version=this.fcConfig.VERSION}return t.prototype.setBuffer=function(t){this.buffer=t},t.prototype.getBuffer=function(){return this.buffer},t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){this.name=t},t.prototype.getPath=function(){return this.path},t.prototype.setPath=function(t){this.path=t},t.prototype.getDescription=function(){return this.description},t.prototype.setDescription=function(t){this.description=t},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.setOptions=function(t,e){this.options[t]=e},t.prototype.createRegionIndex=function(){var t=this.buffer.getBuffer().getId(),e=this.buffer.getBuffer().getShapeData();return this.setOptions(t,e),new Lr(this.name,this.path,this.description,this.type,this.options,this.version)},t.prototype.setRegionByRegionIndex=function(t){try{this.setName(t.name),this.setDescription(t.description);for(var e in t.options){this.setOptions(e,t.options[e])}this.setType(t.type),this.setPath(t.path),t.options&&t.options.regionBuffer&&(this.shapeServ.createBuffer(this.buffer,t.options.regionBuffer),this.buffer.setEnabled(!0),this.toAdd(this.buffer.getBuffer()),this.toAdd(this.buffer.getBorder()),this.eventServ.publishEvent("renderFeatures",this.renderQueue))}catch(t){throw console.log(t),t}},t.prototype.toAdd=function(t){t?this.renderQueue.add.push(t):console.log("invalid mapfeature")},t.prototype.toDelete=function(t){t?this.renderQueue.delete.push(t):console.log("invalid mapfeature")},t}(),Pr=function(){function t(t){this.id=t.id,this.attribution=t.attribution,this.url=t.url,this.body=t.body,this.httpMethod=t.httpMethod,this.description=t.description,this.formatter=t.formatter,this.timeout=t.timeout}return t.prototype.hasKey=function(t){return JSON.stringify(this.body).includes(t)},t.prototype.formatBody=function(t,e){var n=JSON.stringify(this.body);n=n.replace(t,e),this.body=JSON.parse(n)},t.prototype.formatUrl=function(t,e){this.url=this.url.replace(t,e)},t.prototype.getProvider=function(){return new t({id:this.id,attribution:this.attribution,url:this.url,body:this.body,httpMethod:this.httpMethod,description:this.description,formatter:this.formatter,timeout:this.timeout})},t}(),Dr=n(276),Mr={zIndex:5,layer:{arc:{id:"arc",type:"linestring",style:{}}}},Fr={zIndex:2,layer:{regionBuffer:{id:"regionBuffer",type:"polygon",style:{}},regionBorder:{id:"regionBorder",type:"linestring",style:{width:8,opacity:.75}}}},Or={zIndex:5,layer:{pathMarker:{id:"pathMarker",type:"circlePoint",style:{size:3}}}},Rr=function(){return function(){this.regionShape={buffer:Fr,arc:Mr,pathMarker:Or}}}(),jr=function(t){function e(e,n,i,r,a,o,l,s,u){var c=t.call(this,e,n,i)||this;return c.fcConfig=e,c.shapeServ=n,c.eventServ=i,c.geoJSONServ=r,c.stateServ=a,c.fetchServ=o,c.dataLayerConfig=l,c.regionShapeConfig=s,c.queryShapeServ=u,c.dataLayerArray=[],c.otherDataLayerArray=[],c.arc=new Tr(s),c.pathMarker=new Ar(s),c.buffer=new Ir(s),c.type="region",c}return Object(ci.__extends)(e,t),e.prototype.getDataLayers=function(){return this.dataLayerArray},e.prototype.getDataLayerById=function(t){for(var e=0,n=this.dataLayerArray;e<n.length;e++){var i=n[e];if(i.getId()==t)return i}return null},e.prototype.getOtherDataLayerById=function(t){for(var e=0,n=this.otherDataLayerArray;e<n.length;e++){var i=n[e];if(i.getId()==t)return i}return null},e.prototype.getArc=function(){return this.arc},e.prototype.setArc=function(t){this.arc=t},e.prototype.loadData=function(t){var e=[];for(var n in t)null!=this.stateServ.getDataLayerStates()[n]&&e.push(n);this.initDataLayers(e,[]);for(var i=0,r=this.dataLayerArray;i<r.length;i++){var a=r[i],o=t[a.getId()];try{for(var l=0,s=a.getFeatures();l<s.length;l++){a.buildFeature(p=s[l],o[p.getId()])}a.setVisible(!0),a.setEnabled(!0);for(var u=0,c=a.getFeatures();u<c.length;u++){var p;this.toAdd(p=c[u])}this.buffer&&this.toDelete(this.buffer.getBuffer()),this.eventServ.publishEvent("renderFeatures",this.renderQueue)}catch(t){console.log(t),a.clear()}}},e.prototype.initDataLayers=function(t,e){for(var n=0,i=t;n<i.length;n++){var r=new Cr.a(l=i[n],this.dataLayerConfig.dataLayer[l],this.geoJSONServ);this.dataLayerArray.push(r)}for(var a=0,o=e;a<o.length;a++){var l;r=new Cr.a(l=o[a],this.dataLayerConfig.other[l],this.geoJSONServ);this.otherDataLayerArray.push(r)}},e.prototype.initDatasets=function(){var t=this.queryShapeServ.build("wkt",this.buffer.getBuffer().getShapeData()),e=this.queryShapeServ.build("gml",this.buffer.getBuffer().getShapeData());if(t&&0!=t.length){for(var n=0,i=this.dataLayerArray;n<i.length;n++){for(var r=this.dataLayerConfig.dataLayer[(m=i[n]).getId()].providers,a=[],o=0;o<r.length;o++){if((g=new Pr(r[o])).hasKey("{$wkt}"))for(var l=0,s=t;l<s.length;l++){var u=s[l],c=new Pr(r[o]);c.formatBody("{$wkt}",u),a.push(c.getProvider())}else if(g.hasKey("{$gml}"))for(var p=0,h=e;p<h.length;p++){g.formatBody("{$gml}",h[p]),a.push(g.getProvider())}else a.push(g)}m.bindDataset(new Dr.a(a,this.fetchServ))}for(var d=0,f=this.otherDataLayerArray;d<f.length;d++){var m;for(r=this.dataLayerConfig.other[(m=f[d]).getId()].providers,a=[],o=0;o<r.length;o++){var g;if((g=new Pr(r[o])).hasKey("{$wkt}"))for(var y=0,_=t;y<_.length;y++){g.formatBody("{$wkt}",u=_[y]),a.push(g.getProvider())}else if(g.hasKey("{$gml}"))for(var v=0,b=e;v<b.length;v++){g.formatBody("{$gml}",b[v]),a.push(g.getProvider())}else a.push(g)}m.bindDataset(new Dr.a(a,this.fetchServ))}}else console.log("Invalid wkts")},e.prototype.updateDataLayer=function(t){if(t.getEnabled()){for(var e=0;e<t.getFeatures().length;e++)this.toAdd(t.getFeatures()[e]);this.eventServ.publishEvent("renderFeatures",this.renderQueue)}else console.log("cannot update data layer without enable it first")},e.prototype.getVisibleDataLayers=function(){for(var t=[],e=0,n=this.dataLayerArray;e<n.length;e++){var i=n[e];i.getEnabled()&&i.getVisible()&&t.push(i)}return t},e.prototype.clearRegionShape=function(){this.pathMarker&&(this.toDelete(this.pathMarker.getPathMarker()),this.pathMarker.clear(),this.pathMarker.setEnabled(!1)),this.buffer&&(this.buffer.getBuffer()&&this.toDelete(this.buffer.getBuffer()),this.buffer.getBorder()&&this.toDelete(this.buffer.getBorder()),this.buffer.clear(),this.buffer.setEnabled(!1)),this.arc&&(this.toDelete(this.arc.getArc()),this.arc.clear(),this.arc.setEnabled(!1)),this.eventServ.publishEvent("renderFeatures",this.renderQueue)},e.prototype.clearDataLayer=function(){if(this.dataLayerArray)for(var t=0,e=this.dataLayerArray;t<e.length;t++){(s=e[t]).getEvent()&&this.eventServ.publishEvent(s.getEvent(),null);for(var n=0,i=s.getDatasets();n<i.length;n++){i[n].stopFetch()}for(var r=0,a=s.getFeatures();r<a.length;r++){this.toDelete(a[r])}s.clear()}if(this.otherDataLayerArray)for(var o=0,l=this.otherDataLayerArray;o<l.length;o++){var s;(s=l[o]).getEvent()&&this.eventServ.publishEvent(s.getEvent(),null);for(var u=0,c=s.getDatasets();u<c.length;u++){c[u].stopFetch()}s.clear()}this.eventServ.publishEvent("renderFeatures",this.renderQueue),this.dataLayerArray=[],this.otherDataLayerArray=[]},e.prototype.drawDataLayers=function(){var t=this,e=function(e){return new Promise(function(n,i){e.queryDatasets().then(function(i){if(i.success)if(e.processDatasets(i.data),e.isEnabled(!0)){for(var r=0;r<e.getFeatures().length;r++)t.toAdd(e.getFeatures()[r]);e.getEvent()&&t.eventServ.publishEvent(e.getEvent(),e),t.eventServ.publishEvent("renderFeatures",t.renderQueue),n(new gr.a(!0,!0,e.getId()))}else n(new gr.a(!0,!1,e.getId()));else n(new gr.a(!1,!1,e.getId()))})})};return new Promise(function(n,i){for(var r=[],a=0,o=t.dataLayerArray;a<o.length;a++){r.push(e(o[a]))}for(var l=0,s=t.otherDataLayerArray;l<s.length;l++){r.push(e(s[l]))}Promise.all(r).then(function(e){t.buffer.getEnabled()&&t.toDelete(t.buffer.getBuffer()),t.eventServ.publishEvent("renderFeatures",t.renderQueue),n(e)})})},e.prototype.drawRegionShape=function(t){this.stateServ.isMapState(0)?this.stateServ.isTripMode("plane")?(this.buffer.setBufferSize(this.fcConfig.PLANE_MODE_RADIUS),this.arc.setArcEnabled(!0),this.stateServ.setTripState(0)):this.stateServ.isTripMode("car")&&(this.buffer.setBufferSize(this.fcConfig.CAR_MODE_RADIUS),this.arc.setArcEnabled(!1),this.stateServ.setTripState(1)):(this.pathMarker.setEnabled(!1),this.arc.setEnabled(!1),this.buffer.setEnabled(!1));try{this.shapeServ.createPathMarker(this.pathMarker,t),this.arc.getArcEnabled()?this.shapeServ.createArc(this.arc,t):this.shapeServ.createLine(this.arc,t),this.arc.getEnabled()?this.shapeServ.createArcBuffer(this.buffer,this.arc.getArc()):this.shapeServ.createArcBuffer(this.buffer,this.pathMarker.getPathMarker()),this.pathMarker.getEnabled()&&this.toAdd(this.pathMarker.getPathMarker()),this.arc.getEnabled()&&this.toAdd(this.arc.getArc()),this.buffer.getEnabled()&&this.toAdd(this.buffer.getBuffer()),this.buffer.getEnabled()&&this.toAdd(this.buffer.getBorder()),this.eventServ.publishEvent("renderFeatures",this.renderQueue)}catch(t){throw console.log(t),t}},e}(zr),Br=function(){return function(){this.fieldTripLayer={id:"fieldtrip",name:"Field guide stops",sourceName:"Contributors (z.umn.edu/fcfg)",color:"#582c83",properties:{bufferData:{filter:"(function(data){\n          if(data && data.length){\n            var obj = JSON.parse(JSON.stringify(data[0]));\n            obj.properties = null\n            return [obj];\n          }\n          return [];\n        })"},image:{filter:'(function(data){\n          var array = [];\n          if(data && data.length){\n            for(var figure of data[0].properties.figures){\n              array.push({ id: "fg"+figure.id, url: figure.url });\n            }\n            return array;\n          }\n          return [];\n        })'}},features:{fieldTripContent:{zIndex:7,layers:[{id:"fieldTripContent",type:"Polygon",style:{opacity:0}}],filter:"(function(data){\n          return data;\n        })"},fieldTripStops:{zIndex:7,isCluster:!1,layers:[{id:"stopsPoint",type:"circlePoint",style:{color:"#582c83"},filter:["==","$type","Point"]},{id:"stopsLabel",type:"imagePoint",style:{text:"G"},filter:["==","$type","Point"],clickable:!1},{id:"stopsLinestring",type:"LineString",style:{width:10,color:"#582c83"},filter:["==","$type","LineString"]},{id:"stopsPolygon",type:"Polygon",style:{fillColor:"#582c83",borderColor:"#582c83",borderWidth:5,opacity:.8},filter:["==","$type","Polygon"]}],filter:"(function(data){\n          var array = [];\n          if(data && data.length){\n            if(data[0].properties.stops){\n              array = data[0].properties.stops.features;\n            }\n          }\n          return array;\n        })"}},providers:[{id:"fieldtrip",attribution:"",url:"http://api.flyover.umn.edu:80/v2/guide/fetch/{$id}",body:{},httpMethod:"get",timeout:2e4,description:"",formatter:"(function(data){\n          if(data){\n            return data;\n          }\n        })"}],event:"FieldTripLoaded"}}}(),Ur=function(t){function e(e,n,i,r,a,o,l,s,u,c){var p=t.call(this,e,i,r)||this;return p.fcConfig=e,p.fieldTripLayerConfig=n,p.shapeServ=i,p.eventServ=r,p.fetchServ=a,p.geoJSONServ=o,p.stateServ=l,p.dataLayerConfig=s,p.regionShapeConfig=u,p.queryShapeServ=c,p.dataLayerArray=[],p.buffer=new Ir(u),p.type="fieldtrip",p}return Object(ci.__extends)(e,t),e.prototype.getDataLayers=function(){return this.dataLayerArray},e.prototype.getDataLayerById=function(t){for(var e=0,n=this.dataLayerArray;e<n.length;e++){var i=n[e];if(i.getId()==t)return i}return null},e.prototype.getFieldtripLayer=function(){return this.fieldtripLayer},e.prototype.loadData=function(t){var e=[];for(var n in t)n!=this.fieldTripLayerConfig.fieldTripLayer.id&&e.push(n);this.initFieldtripLayer(),this.initDataLayers(e);try{for(var i=0,r=this.fieldtripLayer.getFeatures();i<r.length;i++){this.fieldtripLayer.buildFeature(m=r[i],t[this.fieldTripLayerConfig.fieldTripLayer.id][m.getId()])}this.fieldtripLayer.setVisible(!0),this.fieldtripLayer.setEnabled(!0);for(var a=0,o=this.fieldtripLayer.getFeatures();a<o.length;a++){this.toAdd(m=o[a])}this.fieldtripLayer.getEvent()&&this.eventServ.publishEvent(this.fieldtripLayer.getEvent(),this.fieldtripLayer),this.buffer&&this.toDelete(this.buffer.getBuffer()),this.eventServ.publishEvent("renderFeatures",this.renderQueue)}catch(t){throw this.fieldtripLayer.clear(),t}for(var l=0,s=this.dataLayerArray;l<s.length;l++){var u=s[l],c=t[u.getId()];try{for(var p=0,h=u.getFeatures();p<h.length;p++){u.buildFeature(m=h[p],c[m.getId()])}u.setVisible(!0),u.setEnabled(!0);for(var d=0,f=u.getFeatures();d<f.length;d++){var m;this.toAdd(m=f[d])}this.eventServ.publishEvent("renderFeatures",this.renderQueue)}catch(t){console.log(t),u.clear()}}},e.prototype.initFieldtripLayer=function(){this.fieldtripLayer=new Cr.a(this.fieldTripLayerConfig.fieldTripLayer.id,this.fieldTripLayerConfig.fieldTripLayer,this.geoJSONServ)},e.prototype.initDataLayers=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=this.dataLayerConfig.dataLayer[i];if(r){var a=new Cr.a(i,r,this.geoJSONServ);this.dataLayerArray.push(a)}else console.log("Cannot find config file for this data layer:",i)}},e.prototype.initFieldtripDatasets=function(t){for(var e=0;e<this.fieldTripLayerConfig.fieldTripLayer.providers.length;e++){var n=new Pr(this.fieldTripLayerConfig.fieldTripLayer.providers[e]);n.formatUrl("{$id}",t),n=n.getProvider();var i=new Dr.a([n],this.fetchServ);this.fieldtripLayer.bindDataset(i)}},e.prototype.initDatasets=function(){var t=this.queryShapeServ.build("wkt",this.buffer.getBuffer().getShapeData()),e=this.queryShapeServ.build("gml",this.buffer.getBuffer().getShapeData());if(t&&0!=t.length)for(var n=0,i=this.dataLayerArray;n<i.length;n++)for(var r=i[n],a=this.dataLayerConfig.dataLayer[r.getId()].providers,o=[],l=0;l<a.length;l++){var s=new Pr(a[l]);if(s.hasKey("{$wkt}"))for(var u=0,c=t;u<c.length;u++){s.formatBody("{$wkt}",c[u]),o.push(s.getProvider())}else if(s.hasKey("{$gml}"))for(var p=0,h=e;p<h.length;p++){s.formatBody("{$gml}",h[p]),o.push(s.getProvider())}else o.push(s);r.bindDataset(new Dr.a(o,this.fetchServ))}else console.log("Invalid wkts")},e.prototype.clearDataLayer=function(){if(this.dataLayerArray)for(var t=0,e=this.dataLayerArray;t<e.length;t++){var n=e[t];n.getEvent()&&this.eventServ.publishEvent(n.getEvent(),null);for(var i=0,r=n.getDatasets();i<r.length;i++){r[i].stopFetch()}for(var a=0,o=n.getFeatures();a<o.length;a++){this.toDelete(o[a])}n.clear()}this.eventServ.publishEvent("renderFeatures",this.renderQueue),this.dataLayerArray=[]},e.prototype.clearFieldtrip=function(){if(this.fieldtripLayer){this.fieldtripLayer.getEvent()&&this.eventServ.publishEvent(this.fieldtripLayer.getEvent(),null);for(var t=0,e=this.fieldtripLayer.getDatasets();t<e.length;t++){e[t].stopFetch()}for(var n=0,i=this.fieldtripLayer.getFeatures();n<i.length;n++){this.toDelete(i[n])}this.fieldtripLayer.clear()}this.buffer&&(this.toDelete(this.buffer.getBuffer()),this.toDelete(this.buffer.getBorder()),this.buffer.clear(),this.buffer.setEnabled(!1)),this.eventServ.publishEvent("renderFeatures",this.renderQueue),this.fieldtripLayer=null},e.prototype.updateDataLayer=function(t){if(t.getEnabled()){for(var e=0;e<t.getFeatures().length;e++)this.toAdd(t.getFeatures()[e]);this.eventServ.publishEvent("renderFeatures",this.renderQueue)}else console.log("cannot update data layer without enable it first")},e.prototype.updateFieldtripLayer=function(){if(this.fieldtripLayer.getEnabled()){for(var t=0;t<this.fieldtripLayer.getFeatures().length;t++)this.toAdd(this.fieldtripLayer.getFeatures()[t]);this.eventServ.publishEvent("renderFeatures",this.renderQueue)}},e.prototype.drawFieldtrip=function(){var t=this;return new Promise(function(e,n){t.fieldtripLayer.queryDatasets().then(function(n){var i=t.fieldtripLayer;if(n.success)if(i.processDatasets(n.data),i.isEnabled(!0)){for(var r=0;r<i.getFeatures().length;r++)t.toAdd(i.getFeatures()[r]);i.getEvent()&&t.eventServ.publishEvent(i.getEvent(),i);try{for(var a in t.fieldtripLayer.getProperties())if("bufferData"==a){var o=t.fieldtripLayer.getProperties()[a];t.shapeServ.createBuffer(t.buffer,o.getProperty()),t.buffer.getEnabled()&&t.toAdd(t.buffer.getBorder());break}if(!t.buffer||!t.buffer.getBuffer()||0==t.buffer.getBuffer().getShapeData().length)throw new Error("Error")}catch(t){e(new gr.a(!0,!1,i.getId()))}t.eventServ.publishEvent("renderFeatures",t.renderQueue),e(new gr.a(!0,!0,i.getId()))}else e(new gr.a(!0,!1,i.getId()));else e(new gr.a(!1,!1,i.getId()))})})},e.prototype.drawDataLayers=function(){var t=this,e=function(e){return new Promise(function(n,i){e.queryDatasets().then(function(i){if(i.success)if(e.processDatasets(i.data),e.isEnabled(!0)){for(var r=0;r<e.getFeatures().length;r++)t.toAdd(e.getFeatures()[r]);e.getEvent()&&t.eventServ.publishEvent(e.getEvent(),e),t.eventServ.publishEvent("renderFeatures",t.renderQueue),n(new gr.a(!0,!0,e.getId()))}else n(new gr.a(!0,!1,e.getId()));else n(new gr.a(!1,!1,e.getId()))})})};return new Promise(function(n,i){for(var r=[],a=0,o=t.dataLayerArray;a<o.length;a++){r.push(e(o[a]))}Promise.all(r).then(function(e){t.buffer&&t.toDelete(t.buffer.getBuffer()),t.eventServ.publishEvent("renderFeatures",t.renderQueue),n(e)})})},e.prototype.getVisibleDataLayers=function(){for(var t=[],e=0,n=this.dataLayerArray;e<n.length;e++){var i=n[e];i.getEnabled()&&i.getVisible()&&t.push(i)}return this.fieldtripLayer&&this.fieldtripLayer.getEnabled()&&this.fieldtripLayer.getVisible()&&t.push(this.fieldtripLayer),t},e}(zr),Nr=function(){function t(t,e,n){this.region=t,this.fieldtrip=e,this.stateServ=n,this.current="region"}return t.prototype.setCurrent=function(t){this.current=t},t.prototype.getCurrent=function(){return this.current},t.prototype.getRegion=function(){return this.region},t.prototype.getFieldtrip=function(){return this.fieldtrip},t.prototype.clear=function(){"region"==this.current.toLowerCase()?(this.region.clearRegionShape(),this.region.clearDataLayer()):(this.fieldtrip.clearFieldtrip(),this.fieldtrip.clearDataLayer())},t.prototype.get=function(){return"region"==this.current.toLowerCase()?this.region:this.fieldtrip},t.prototype.drawPath=function(t,e){return"region"==t?(this.setCurrent("region"),this.drawRegionPath(e)):(this.setCurrent("fieldtrip"),this.drawFieldtrip(e))},t.prototype.drawRegionPath=function(t){var e=this.get();try{e.drawRegionShape(t)}catch(t){throw t}if(!e.getBuffer()||!e.getBuffer().getBuffer()||0==e.getBuffer().getBuffer().getShapeData().length)throw console.log("region buffer is invalid"),new Error("Cannot draw path because buffer is invalid")},t.prototype.drawFieldtrip=function(t){var e=this.get();e.initFieldtripLayer(),e.initFieldtripDatasets(t);var n=[];for(var i in this.stateServ.getDataLayerStates())this.stateServ.getDataLayerStates()[i]&&n.push(i);return e.initDataLayers(n),new Promise(function(t,n){e.drawFieldtrip().then(function(n){n.renderSuccess?(e.initDatasets(),e.drawDataLayers().then(function(e){t(e)})):t([n])})})},t.prototype.drawRegionDataLayer=function(){this.setCurrent("region");var t=this.getRegion(),e=[],n=[];for(var i in this.stateServ.getDataLayerStates())this.stateServ.getDataLayerStates()[i]&&e.push(i);for(var i in this.stateServ.getOtherDataLayerStates())this.stateServ.getOtherDataLayerStates()[i]&&n.push(i);return t.initDataLayers(e,n),t.initDatasets(),t.drawDataLayers()},t}(),Zr=function(){function t(t,e,n,i,r,a){this.latitude=t,this.longitude=e,this.altitude=n,this.heading=i,this.speed=r,this.timestamp=a,this.isValid(t)||(this.latitude=0),this.isValid(e)||(this.longitude=0),this.isValid(n)||(this.altitude=0),this.isValid(r)||(this.speed=0)}return t.prototype.isValid=function(t){return!(!t||isNaN(t))},t}(),Yr=function(){function t(t,e,n,i,r){this.loadingCtrl=t,this.modalCntr=e,this.popoverCtrl=n,this.alertCtrl=i,this.toastCtrl=r}return t.prototype.startSpinner=function(){var t=this.loadingCtrl.create({content:"Please wait..."});return t.present(),t},t.prototype.stopSpinner=function(t){setTimeout(function(){t.dismiss()},500)},t.prototype.createModal=function(t,e){var n=this.modalCntr.create(t,e,{enableBackdropDismiss:!1});n.present();return n},t.prototype.stopModal=function(t){t.dismiss()},t.prototype.createPopover=function(t,e){var n=this.popoverCtrl.create(t,{},{cssClass:"fc-popover"});return n.present({ev:e}),n},t.prototype.createDialog=function(t,e,n,i,r,a){this.alertCtrl.create({title:t,message:e,buttons:[{text:i,handler:a},{text:n,handler:r}],enableBackdropDismiss:!1}).present()},t.prototype.createAlert=function(t,e,n){n||(n=["OK"]);this.alertCtrl.create({title:t,subTitle:e,buttons:n}).present()},t.prototype.createToast=function(t,e,n){e||(e=3e3),n||(n="top");this.toastCtrl.create({message:t,duration:e,position:n}).present()},t}(),Vr=function(){function t(t,e,n,i){this.stateServ=t,this.geolocation=e,this.ionUIServ=n,this.opts={enableHighAccuracy:!0,maximumAge:0,timeout:6e3},this.locationSubject=new Bi.Subject,this.msg=i.LOCATION,this.stateServ.setGPS(0),this.init()}return t.prototype.init=function(){var t=this;this.stateServ.isGpsEnabled(!0)&&this.watchGPS(),this.stateServ.getGpsEnabledSubject().subscribe(function(e){e?t.watchGPS():t.stopWatchGPS()}),this.stateServ.getGpsSubject().subscribe(function(e){0==e&&t.stateServ.setTracking(!1)})},t.prototype.getLocation=function(){return this.location},t.prototype.getLocationObservable=function(){return this.locationSubject.asObservable()},t.prototype.stopWatchGPS=function(){this.watchId&&this.watchId.unsubscribe(),this.watchId=null,this.stateServ.setGPS(0)},t.prototype.watchGPS=function(){var t=this;this.watchId||(this.watchId=this.geolocation.watchPosition(this.opts).subscribe(function(e){var n=e;if(n.coords)t.location=new Zr(n.coords.latitude,n.coords.longitude,n.coords.altitude,n.coords.heading,n.coords.speed,n.timestamp),t.locationSubject.next(t.location),t.stateServ.setGPS(1);else switch(n.code){case 1:t.stateServ.setGPS(0),t.ionUIServ.createAlert(t.msg.ALERT_GPS_ACCESS_TITLE,t.msg.ALERT_GPS_ACCESS_CONTENT,[t.msg.ALERT_GPS_ACCESS_BUTTON]);break;case 2:t.watchGPS(),t.stateServ.setGPS(2),console.log("errors.location.positionUnavailable");break;case 3:t.watchGPS(),t.stateServ.setGPS(2),console.log("errors.location.timeout")}}))},t}(),qr=function(){function t(t,e,n,i,r,a){this.regionServ=t,this.storageServ=e,this.utilServ=n,this.sanitizer=i,this.shapeServ=r,this.msg=a.LOAD}return t.prototype.loadRegionIndexList=function(){var t=this;return new Promise(function(e,n){t.storageServ.getEntry("fc/index").then(function(i){t.storageServ.readFile(i).then(function(t){try{var i=JSON.parse(t),r=[];for(var a in i){var o=i[a];r.push(new Lr(o.name,o.path,o.description,o.type,o.options,o.version))}e(r)}catch(t){console.log(t),n()}},function(t){n()})},function(t){n()})})},t.prototype.getOfflineImageUrl=function(t){var e=this.regionServ.get().createRegionIndex();return e?this.sanitizer.bypassSecurityTrustUrl([this.storageServ.getRootDirectory(),"fc",e.path,"image",t].join("/")):void console.log("Invalid local object")},t.prototype.loadPath=function(t){var e=this;return new Promise(function(n,i){try{if("region"==t.type)e.regionServ.setCurrent("region");else{if("fieldtrip"!=t.type)return void i(e.msg.LOAD_FAIL_INVALID_DATA);e.regionServ.setCurrent("fieldtrip")}e.regionServ.get().setRegionByRegionIndex(t)}catch(t){return void i(e.msg.LOAD_FAIL_OUTDATED_DATA)}var r=e.regionServ.get().getPath();r?e.storageServ.getEntry(["fc",r,"region"].join("/")).then(function(r){e.storageServ.readFile(r).then(function(r){var a;if(t.version)try{a=JSON.parse(r),console.log(a),e.regionServ.get().loadData(a),n()}catch(t){i(e.msg.LOAD_FAIL_INVALID_DATA)}else try{var o={};a=JSON.parse(r);var l=void 0;"region"==t.type?l=a.buffer.feature.shapeData:(l=a.fieldtripLayer.outLine.shapeData,o.fieldtrip={fieldTripContent:a.fieldtripLayer.outLine.shapeData,fieldTripStops:a.fieldtripLayer.outLine.shapeData[0].properties.stops.features}),e.shapeServ.createBuffer(e.regionServ.get().getBuffer(),l),e.regionServ.get().setRegionByRegionIndex(e.regionServ.get().createRegionIndex());for(var s=0,u=a.dataLayerArray;s<u.length;s++){var c=u[s],p={};p[c.id]=c.feature.shapeData,o[c.id]=p}e.regionServ.get().loadData(o),n(e.msg.LOAD_SUCCESS_OUTDATED_DATA)}catch(t){console.log(t),i(e.msg.LOAD_FAIL_OUTDATED_DATA)}},function(t){i()})},function(t){i()}):i(e.msg.LOAD_FAIL_INVALID_DATA)})},t.prototype.loadWikiArticle=function(t){var e=this;return new Promise(function(n,i){var r=e.regionServ.get().createRegionIndex();r?e.storageServ.getEntry(["fc",r.path,"wiki",e.utilServ.normalizeFileName(t)].join("/")).then(function(t){e.storageServ.readFile(t).then(function(t){try{var e=JSON.parse(t);n(e)}catch(t){console.log("Invalid return data"),i()}},function(t){i()})},function(t){i()}):(console.log("Invalid local object"),i())})},t}(),Gr=function(){function t(t,e,n,i){this.storageServ=t,this.fetchServ=e,this.utilServ=n,this.regionData={},this.msg=i.SAVESERV}return t.prototype.getProgress=function(){return{currentSaving:this.currentSaving,progress:this.progress,maxProgress:this.maxProgress,stepProgress:this.stepProgress}},t.prototype.resetProgress=function(){this.maxProgress=0,this.progress=0,this.stepProgress=0,this.baseProgress=0,this.currentSaving="..."},t.prototype.isState=function(t){return this.state==t},t.prototype.getState=function(){return this.state},t.prototype.setState=function(t){this.state=t},t.prototype.getStep=function(){return this.step},t.prototype.toNextStep=function(){this.step++,this.resetTryTimes()},t.prototype.getTryTimes=function(){return this.tryTimes},t.prototype.decreaseTryTimes=function(){this.tryTimes--},t.prototype.canTry=function(){return!(this.tryTimes<=0)},t.prototype.resetTryTimes=function(){this.tryTimes=5},t.prototype.getAllowTileFail=function(){return this.allowTileFail},t.prototype.getAllowWikiFail=function(){return this.allowWikiFail},t.prototype.getAllowImageFail=function(){return this.allowImageFail},t.prototype.getTileArray=function(){return this.tileArray},t.prototype.getWikiArray=function(){return this.wikiArray},t.prototype.getImageArray=function(){return this.imageArray},t.prototype.rollback=function(){var t=this;return new Promise(function(e,n){t.storageServ.getEntry("fc").then(function(i){t.storageServ.deleteDirectory(i,t.regionIndex.path).then(function(i){t.storageServ.getEntry("fc/index").then(function(i){t.storageServ.readFile(i).then(function(r){try{var a=JSON.parse(r);delete a[t.regionIndex.path],r=JSON.stringify(a),t.storageServ.writeFile(i,r,{type:"text/plain"}).then(function(t){e()},function(t){n()})}catch(t){console.log(t),n()}},function(t){n()})},function(t){n()})},function(t){n()})},function(t){n()})})},t.prototype.preSave=function(t,e,n,i,r){return this.regionData=t,this.regionIndex=e,this.tileArray=n,this.wikiArray=i,this.imageArray=r,this.totalTiles=n.length,this.totalArticles=i.length,this.totalImages=r.length,this.tryTimes=5,this.allowTileFail=this.totalTiles/5,this.allowWikiFail=this.totalArticles/10,this.allowImageFail=this.totalImages/3,this.step=1,this.state=0,this.maxProgress=60+this.totalTiles+this.totalArticles+this.totalImages,this.progress=0,this.stepProgress=0,this.baseProgress=0,this.currentSaving="...",this.checkRegionIndex()},t.prototype.save=function(){var t=this;return new Promise(function(e,n){switch(t.state=4,t.step){case 1:t.createFolders().then(function(n){t.toNextStep(),e()},function(t){console.log(t),n(t)});break;case 2:t.currentSaving="region",t.createRegion(t.pathDirEntry).then(function(n){t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e()},function(t){console.log(t),n(t)});break;case 3:t.currentSaving="articles",t.createArticles(t.articleEntry).then(function(i){0==t.getWikiArray().length?(t.stepProgress=t.totalArticles-t.getWikiArray().length,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e()):t.canTry()?(t.stepProgress=t.totalArticles-t.getWikiArray().length,t.progress=t.baseProgress+t.stepProgress,e()):t.getWikiArray().length>=t.getAllowWikiFail()?n():(console.log("not all wikis are successfully saved"),t.stepProgress=t.totalArticles-t.getWikiArray().length,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e())},function(t){console.log(t),n()});break;case 4:t.currentSaving="tiles",t.createTiles(t.tileEntry).then(function(i){0==t.getTileArray().length?(t.stepProgress=t.totalTiles-t.getTileArray().length,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e()):t.canTry()?(t.stepProgress=t.totalTiles-t.getTileArray().length,t.progress=t.baseProgress+t.stepProgress,e()):t.getTileArray().length>=t.getAllowTileFail()?n():(console.log("not all tiles are successfully saved"),t.stepProgress=t.totalTiles-t.getTileArray().length,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e())},function(t){n()});break;case 5:t.currentSaving="images",t.createImages(t.imageEntry).then(function(i){0==t.getImageArray().length?(t.stepProgress=t.totalImages-t.getImageArray().length,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e()):t.canTry()?(t.stepProgress=t.totalImages-t.getImageArray().length,t.progress=t.baseProgress+t.stepProgress,e()):t.getImageArray().length>=t.getAllowImageFail()?n():(console.log("not all image are successfully saved"),t.stepProgress=t.totalImages-t.getImageArray().length,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e())},function(t){n()});break;case 6:t.currentSaving="index",t.saveRegionIndex().then(function(n){t.stepProgress+=50,t.progress=t.baseProgress+t.stepProgress,t.baseProgress=t.progress,t.toNextStep(),e()},function(t){n()});break;case 7:t.currentSaving=null,t.state=3,t.stepProgress=0,t.baseProgress=0,t.progress=t.maxProgress,e()}})},t.prototype.createFolders=function(){var t=this;return new Promise(function(e,n){t.storageServ.getEntry("fc").then(function(i){t.storageServ.createDirectory(i,t.regionIndex.path).then(function(i){t.pathDirEntry=i,t.storageServ.createDirectory(i,"image").then(function(r){t.imageEntry=r,t.storageServ.createDirectory(i,"tile").then(function(r){t.tileEntry=r,t.storageServ.createDirectory(i,"wiki").then(function(n){t.articleEntry=n,e()},function(e){n(t.msg.FILESYSTEM_CREATE_FAIL)})},function(e){n(t.msg.FILESYSTEM_CREATE_FAIL)})},function(e){n(t.msg.FILESYSTEM_CREATE_FAIL)})},function(e){n(t.msg.FILESYSTEM_CREATE_FAIL)})},function(e){n(t.msg.FILESYSTEM_FAIL)})})},t.prototype.createRegion=function(t){var e=this,n=JSON.stringify(this.regionData);return new Promise(function(i,r){e.storageServ.createFile(t,null,"region",n,{type:"text/plain"}).then(function(t){i()},function(t){r()})})},t.prototype.getWikiQueue=function(){for(var t=[],e=0,n=this.getWikiArray().splice(0,300);e<n.length;e++){t.push(this.fetchServ.fetchWiki(n[e],!0))}return Promise.all(t)},t.prototype.getTileQueue=function(){for(var t=[],e=0,n=this.getTileArray().splice(0,200);e<n.length;e++){var i=n[e];t.push(this.fetchServ.fetchTile(i.ids,i.index,i.url,i.format))}return Promise.all(t)},t.prototype.getImageQueue=function(){for(var t=[],e=0,n=this.getImageArray().splice(0,200);e<n.length;e++){var i=n[e];t.push(this.fetchServ.fetchImage(i.id,i.url))}return Promise.all(t)},t.prototype.createImages=function(t){var e=this;return new Promise(function(n,i){if(0==e.getImageArray().length)n();else{var r=!1;e.getImageQueue().then(function(i){for(var a=[],o=[],l=[],s=0,u=i;s<u.length;s++){var c=u[s];if(c.success){var p=c.id,h=c.data;o.push({id:p,url:c.url}),l.push(e.toNoReject([e.storageServ.createFile(t,null,e.utilServ.normalizeFileName(p),h,{type:"image/png"})]))}else a.push(c)}if(0==l.length){for(var d=0,f=a;d<f.length;d++){var m=f[d];e.getImageArray().push(m)}e.decreaseTryTimes(),n()}else Promise.all(l).then(function(t){for(var i=0;i<t.length;i++)t[i].success?r=!0:a.push(o[i]);for(var l=0,s=a;l<s.length;l++){var u=s[l];e.getImageArray().push(u)}r?e.resetTryTimes():e.decreaseTryTimes(),n()})})}})},t.prototype.createTiles=function(t){var e=this;return new Promise(function(n,i){if(0==e.getTileArray().length)n();else{var r=!1;e.getTileQueue().then(function(i){for(var a=[],o=[],l=[],s=0,u=i;s<u.length;s++){var c=u[s];if(c.success){for(var p=c.index,h=c.types,d=c.format,f=c.data,m=[],g=0;g<h.length;g++)m.push(e.storageServ.createFile(t,[h[g],p[2],p[0]].join("/"),p[1].toString(),f,{type:d}));o.push(c),l.push(e.toNoReject(m))}else a.push(c)}if(0==l.length){for(var y=0,_=a;y<_.length;y++){var v=_[y];e.getTileArray().push(v)}e.decreaseTryTimes(),n()}else Promise.all(l).then(function(t){for(var i=0;i<t.length;i++)t[i].success?r=!0:a.push(o[i]);for(var l=0,s=a;l<s.length;l++){var u=s[l];e.getTileArray().push(u)}r?e.resetTryTimes():e.decreaseTryTimes(),n()})})}})},t.prototype.createArticles=function(t){var e=this;return new Promise(function(n,i){if(0==e.getWikiArray().length)n();else{var r=!1;e.getWikiQueue().then(function(i){for(var a=[],o=[],l=[],s=0,u=i;s<u.length;s++){var c=u[s],p=c.id;if(c.success){var h=c.data,d=c.format;null!=h&&(h=JSON.stringify(h),o.push(p),l.push(e.toNoReject([e.storageServ.createFile(t,null,e.utilServ.normalizeFileName(p),h,{type:d})])))}else a.push(p)}if(0==l.length){for(var f=0,m=a;f<m.length;f++){var g=m[f];e.getWikiArray().push(g)}e.decreaseTryTimes(),n()}else Promise.all(l).then(function(t){for(var i=0;i<t.length;i++)t[i].success?r=!0:a.push(o[i]);for(var l=0,s=a;l<s.length;l++){var u=s[l];e.getWikiArray().push(u)}r?e.resetTryTimes():e.decreaseTryTimes(),n()})})}})},t.prototype.checkRegionIndex=function(){var t=this;return new Promise(function(e,n){t.storageServ.getEntry("fc/index").then(function(i){t.storageServ.readFile(i).then(function(i){try{JSON.parse(i)[t.regionIndex.path]?n(t.msg.DUPLICATE_NAME):e()}catch(e){n(t.msg.FILESYSTEM_FAIL)}},function(e){n(t.msg.FILESYSTEM_FAIL)})},function(e){n(t.msg.FILESYSTEM_FAIL)})})},t.prototype.saveRegionIndex=function(){var t=this;return new Promise(function(e,n){t.storageServ.getEntry("fc/index").then(function(i){t.storageServ.readFile(i).then(function(r){if(r.length>0){var a=JSON.parse(r);a[t.regionIndex.path]=t.regionIndex;var o=JSON.stringify(a);t.storageServ.writeFile(i,o,{type:"text/plain"}).then(function(t){e()},function(t){n()})}else n()},function(t){n()})},function(t){n(),console.log(t)})})},t.prototype.toNoReject=function(t){return new Promise(function(e,n){Promise.all(t).then(function(t){e({success:!0})},function(t){e({success:!1})})})},t}(),Wr=function(){function t(t){this.storageServ=t}return t.prototype.deletePath=function(t){var e=this;return new Promise(function(n,i){t?e.storageServ.getEntry("fc").then(function(r){e.storageServ.deleteDirectory(r,t.path).then(function(r){e.storageServ.getEntry("fc/index").then(function(r){e.storageServ.readFile(r).then(function(a){try{var o=JSON.parse(a);delete o[t.path];var l=JSON.stringify(o);e.storageServ.writeFile(r,l,{type:"text/plain"}).then(function(t){n()},function(t){i()})}catch(t){console.log(t),i()}},function(t){i()})},function(t){i()})},function(t){i()})},function(t){i()}):(console.log("Invalid local object"),i())})},t}(),Hr=function(){function t(){this.pageNumberStack=[]}return t.prototype.pushPage=function(t,e){e&&(Di.navCtrls[t]=e),Di.tabIndex=t;var n=this.pageNumberStack.indexOf(t);n>=0&&this.pageNumberStack.splice(n,1),this.pageNumberStack.push(t)},t.prototype.popPage=function(){return this.pageNumberStack.length>0&&this.pageNumberStack.pop(),this.pageNumberStack.length>0?this.pageNumberStack[this.pageNumberStack.length-1]:(this.pageNumberStack.push(2),-1)},t}(),$r=function(){function t(t){this.drag=new ui.l,this.el=t.nativeElement}return t.prototype.ngOnInit=function(){var t=this;this.dragGesture=new hi.a(this.el,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),this.dragGesture.listen(),this.dragGesture.on("panstart panmove panend",function(e){t.drag.emit(e)})},t.prototype.ngOnDestroy=function(){this.dragGesture.destroy()},t}(),Xr=function(){function t(t,e,n,i,r,a,o,l,s,u,c,p){this.saveServ=t,this.viewCtrl=e,this.mapTileServ=n,this.regionServ=i,this.eventServ=r,this.stateServ=a,this.ionUIServ=o,this.utilServ=l,this.ga=s,this.insomnia=p,this.baseTiles=[],this.dataLayers=[],this.datasetTiles=[],this.tileIndexes=[],this.downloadTileNumber=0,this.downloadArticleNumber=0,this.showProgressBar=!1,this.isCanceled=!1,this.msg=c.DOWNLOAD,this.title=this.msg.TITLE,this.namePathText=this.msg.TITLE_NAME_PATH,this.chooseTileText=this.msg.TITLE_CHOOSE_TILE,this.estimatedTileText=this.msg.ESTIMATED_TILES,this.chooseDataText=this.msg.TITLE_CHOOSE_DATA,this.estimatedStorageText=this.msg.ESTIMATED_STORAGE,this.saveText=this.msg.SAVE_BUTTON,this.baseTiles=this.mapTileServ.getTiles("base"),this.region=this.regionServ.get();for(var h=0,d=this.region.getDataLayers();h<d.length;h++){var f=d[h];this.dataLayers.push({id:f.getId(),name:f.getName(),enabled:f.getEnabled(),checked:f.getDownload()})}for(var m=0,g=this.mapTileServ.getTiles("dataset");m<g.length;m++){var y=g[m];this.stateServ.getDatasetTileStates()[y.getId()]&&this.datasetTiles.push({id:y.getId(),name:y.getName(),checked:y.getDownload()})}this.setDefaultPathName(),this.tileIndexes=u.get("tileIndexes"),this.recalculateTileTypes(),this.recalculateTileNumbers(),this.recalculateArticleNumbers()}return t.prototype.setDefaultPathName=function(){this.defaultPathName=this.generatePathName(),this.pathName=this.defaultPathName},t.prototype.generatePathName=function(){var t=new Date;return("region"==this.regionServ.getCurrent()?"path":"fieldtrip")+" "+t.toISOString().slice(0,10).replace(/-/g,"")+[t.getHours(),t.getMinutes(),t.getSeconds()].join("")},t.prototype.recalculateTileTypes=function(){this.tileTypes=this.mapTileServ.calculateOfflineTileTypes()},t.prototype.recalculateTileNumbers=function(){this.downloadTileNumber=this.tileIndexes.length*Object.keys(this.tileTypes).length},t.prototype.recalculateArticleNumbers=function(){for(var t=[],e=0,n=this.region.getDataLayers();e<n.length;e++){var i=n[e];if(i.getDownload())for(var r in i.getProperties()){var a=i.getProperties()[r];a.getProperty()&&"article"==r.toLowerCase()&&(t=t.concat(a.getProperty()))}}this.downloadArticleNumber=t.length},t.prototype.getDownloadTileSize=function(){return(20*this.downloadTileNumber/1024).toFixed(1)},t.prototype.getDownloadArticleSize=function(){return(1.5*this.downloadArticleNumber/1024).toFixed(1)},t.prototype.getBaseTiles=function(){return this.baseTiles},t.prototype.getDataLayers=function(){return this.dataLayers},t.prototype.getDatasetTiles=function(){return this.datasetTiles},t.prototype.changeBaseTile=function(t){t.setDownload(!t.getDownload()),this.recalculateTileTypes(),this.recalculateTileNumbers()},t.prototype.changeDataLayer=function(t){t.checked=!t.checked,this.region.getDataLayerById(t.id).setDownload(t.checked),this.recalculateArticleNumbers()},t.prototype.changeDatasetTile=function(t){t.checked=!t.checked,this.mapTileServ.getTileById(t.id).setDownload(t.checked),this.recalculateTileTypes(),this.recalculateTileNumbers()},t.prototype.saveButtonClick=function(){var t=this;4==this.stateServ.getMapState()&&(this.showProgressBar=!0,setTimeout(function(){t.stateServ.setMapState(5),t.saveStart()},0))},t.prototype.cancel=function(){var t=this;if(this.isCanceled=!0,this.stateServ.isMapState(4))this.showProgressBar=!1,this.viewCtrl.dismiss();else if(this.stateServ.isMapState(5))if(this.saveServ.isState(1)||this.saveServ.isState(4))this.ionUIServ.createDialog(this.msg.DIALOG_CANCEL_TITLE,this.msg.DIALOG_CANCEL_CONTENT,this.msg.DIALOG_CANCEL_OK,this.msg.DIALOG_CANCEL_NO,function(){t.isCanceled=!1,t.saveServ.setState(0);var e=t.ionUIServ.startSpinner();t.saveServ.rollback().then(function(n){t.viewCtrl.dismiss(),t.stateServ.setMapState(4),t.ionUIServ.stopSpinner(e)},function(n){t.viewCtrl.dismiss(),t.stateServ.setMapState(4),t.ionUIServ.stopSpinner(e)})},function(){t.isCanceled=!1,console.log("cancel ",t.saveServ.getState()),t.saveServ.isState(1)&&t.saveContinue()});else if(this.saveServ.isState(0)){var e=this.ionUIServ.startSpinner();setTimeout(function(){t.viewCtrl.dismiss(),t.stateServ.setMapState(4),t.ionUIServ.stopSpinner(e)},1e3)}},t.prototype.clearPathName=function(){this.pathName===this.defaultPathName&&(this.pathName="")},t.prototype.updatePathName=function(){""===this.pathName&&(this.pathName=this.defaultPathName)},t.prototype.saveStart=function(){var t=this,e=[],n=[],i=[],r=[],a={};try{if(!this.pathName||0==this.pathName.length)return this.ionUIServ.createToast(this.msg.TOAST_ENTER_NAME),this.stateServ.setMapState(4),void(this.showProgressBar=!1);if(this.utilServ.hasSpecialCharacter(this.pathName))return this.ionUIServ.createToast(this.msg.TOAST_INVALID_NAME),this.stateServ.setMapState(4),void(this.showProgressBar=!1);for(var o=!1,l=0,s=this.baseTiles;l<s.length;l++){s[l].getDownload()&&(o=!0)}if(!o)return this.ionUIServ.createToast(this.msg.TOAST_CHOOSE_TILE),this.stateServ.setMapState(4),void(this.showProgressBar=!1);this.ga.trackEvent("Map","Download Started"),this.insomnia.keepAwake().then(function(){return console.log("Insomnia start succeeded")},function(){return console.log("Insomnia start failed")});for(var u in this.tileTypes){r=r.concat((b=this.tileTypes[u]).ids);for(var c=0,p=this.tileIndexes;c<p.length;c++){n.push({url:u,ids:b.ids,format:b.format,index:p[c]})}}if(this.region.setName(this.pathName),this.region.setDescription(this.pathDescription),this.region.setPath(this.utilServ.replaceSpace(this.pathName)),this.region.setOptions("tileTypes",r),"region"!=this.region.getType()){for(var u in this.region.getFieldtripLayer().getProperties()){(b=this.region.getFieldtripLayer().getProperties()[u]).getProperty()&&("article"==u.toLowerCase()?e=e.concat(b.getProperty()):"image"==u.toLowerCase()&&(i=i.concat(b.getProperty())))}a[this.region.getFieldtripLayer().getId()]={};for(var h=0,d=this.region.getFieldtripLayer().getFeatures();h<d.length;h++){var f=d[h];a[this.region.getFieldtripLayer().getId()][f.getId()]=f.getShapeData()}}for(var m=0,g=this.region.getDataLayers();m<g.length;m++){var y=g[m];if(y.getDownload()){a[y.getId()]={};for(var _=0,v=y.getFeatures();_<v.length;_++){f=v[_];a[y.getId()][f.getId()]=f.getShapeData()}for(var u in y.getProperties()){var b;(b=y.getProperties()[u]).getProperty()&&("article"==u.toLowerCase()?e=e.concat(b.getProperty()):"image"==u.toLowerCase()&&(i=i.concat(b.getProperty())))}}}this.regionIndex=this.region.createRegionIndex(),this.saveServ.preSave(a,this.regionIndex,n,e,i).then(function(e){t.saveServ.setState(1),t.saveContinue()},function(e){t.ionUIServ.createAlert(t.msg.ALERT_PRESAVE_FAIL_TITLE,e),t.stateServ.setMapState(4),t.showProgressBar=!1})}catch(t){this.ionUIServ.createAlert(this.msg.ALERT_SAVE_TITLE,this.msg.ALERT_SAVE_CONTENT),this.stateServ.setMapState(4),this.showProgressBar=!1}},t.prototype.saveContinue=function(){var t=this;this.saveServ.isState(1)?this.saveServ.save().then(function(e){t.saveServ.isState(4)&&t.saveServ.setState(1),t.eventServ.publishEvent("addProgress",t.saveServ.getProgress()),t.isCanceled||t.saveContinue()},function(e){console.log("save return fail"),t.saveFail(e)}):this.saveServ.isState(3)&&this.saveSuccess()},t.prototype.saveSuccess=function(){var t=this;this.saveServ.setState(0),setTimeout(function(){t.stateServ.setMapState(6),t.ionUIServ.createAlert(t.msg.ALERT_SAVE_SUCCESS_TITLE,t.msg.ALERT_SAVE_SUCCESS_CONTENT),t.ga.trackEvent("Map","Download Succeeded"),t.mapTileServ.setOfflineDirectory(t.regionIndex.path),t.mapTileServ.setOffline(!0),t.viewCtrl.dismiss()},500),this.insomnia.allowSleepAgain().then(function(){return console.log("Insomnia end succeeded")},function(){return console.log("Insomnia end failed")})},t.prototype.saveFail=function(t){var e=this;this.saveServ.setState(0),this.stateServ.setMapState(4),this.viewCtrl.dismiss(),this.ga.trackEvent("Map","Download Failed"),t||(t="Download fails, please check your internet connection.");var n=this.ionUIServ.startSpinner();this.ionUIServ.createAlert(this.msg.ALERT_SAVE_FAIL_TITLE,t),this.saveServ&&this.saveServ.rollback().then(function(t){e.ionUIServ.stopSpinner(n)},function(t){e.ionUIServ.stopSpinner(n)}),this.insomnia.allowSleepAgain().then(function(){return console.log("Insomnia end succeeded")},function(){return console.log("Insomnia end failed")})},t}(),Kr=function(){function t(t,e,n){var i=this;this.eventServ=t,this.viewCtrl=e,this.ga=n,this.eventServ.createEventListener("slideTo",function(t){i.slides&&i.slides.slideTo(t)})}return t.prototype.ionViewWillEnter=function(){this.ga.trackView("Start your path")},t}(),Jr=function(){return function(t,e){this.layerId=t,this.properties=e}}(),Qr=function(){function t(t,e,n,i,r,a,o,l,s,u,c,p,h,d){this.regionServ=t,this.locServ=e,this.mapEngine=n,this.geoJSONServ=i,this.mapTileServ=r,this.eventServ=a,this.stateServ=o,this.ionUIServ=l,this.ga=s,this.network=u,this.nav=c,this.tileConfigServ=p,this.backbuttonService=h,this.coordsArray=[],this.highlightedFeatures=[],this.msg=d.MAP}return t.prototype.ngOnInit=function(){this.stateServ.getPlatform()?(this.initMap(),this.startNetworkCheck()):this.ionUIServ.createAlert("Error","Cannot initialize the map.")},t.prototype.ionViewWillEnter=function(){this.ga.trackView("Map"),this.backbuttonService.pushPage(Ci,this.nav)},t.prototype.initLocation=function(){var t=this;this.stateServ.getGpsSubject().subscribe(function(e){if(0==e)t.locationMarker&&t.mapEngine.deleteMarker(t.locationMarker),t.locationMarker=null;else if(1==e&&!t.locationMarker){var n=t.locServ.getLocation();t.locationMarker=t.mapEngine.addMarker("gps-marker",[n.longitude,n.latitude])}}),this.stateServ.getTrackingSubject().subscribe(function(e){if(e){var n=t.locServ.getLocation();t.mapEngine.setMarker(t.locationMarker,"gps-marker-tracking",null),t.mapEngine.zoomToLocation([n.longitude,n.latitude],n.heading,null),t.ga.trackEvent("Tracking","Enabled")}else t.locationMarker&&t.mapEngine.setMarker(t.locationMarker,"gps-marker",null),t.mapEngine.resetMapPitch(),t.mapEngine.resetMapHeading(),t.ga.trackEvent("Tracking","Disabled")}),this.locationObservable=this.locServ.getLocationObservable().subscribe(function(e){t.stateServ.getTracking()?(t.locationMarker&&t.mapEngine.setMarker(t.locationMarker,null,[e.longitude,e.latitude]),t.mapEngine.zoomToLocation([e.longitude,e.latitude],e.heading,60)):t.locationMarker&&t.mapEngine.setMarker(t.locationMarker,null,[e.longitude,e.latitude])})},t.prototype.initUnit=function(){var t=this;this.stateServ.getUnitSubject().subscribe(function(e){t.mapEngine.setScaleUnit(t.stateServ.getUnit())})},t.prototype.initTiles=function(){this.mapEngine.addTiles(this.mapTileServ.getTiles())},t.prototype.initMap=function(){var t=this;this.stateServ.setMapState(0),this.initLocation(),this.initUnit(),this.mapEngine.createMap("map").then(function(){t.initTiles(),t.mapEngine.addNavControl(),t.mapEngine.addScaleControl(t.stateServ.getUnit()),t.fcPullUp.enablePullUp(),t.mapEngine.mapEventListener("click",function(e){if(t.stateServ.getMapState()<=1){var n=t.mapEngine.getCoordsFromMapEvent(e);t.coordsArray.push(n);try{t.regionServ.drawPath("region",t.coordsArray),t.stateServ.setMapState(1)}catch(e){t.clear(),t.ionUIServ.createAlert(t.msg.ALERT_CREATE_PATH_TITLE,e.message?e.message:t.msg.ALERT_CREATE_PATH_CONTENT)}}else if(t.stateServ.getMapState()>=3){for(var i=[],r={},a=t.regionServ.get().getVisibleDataLayers(),o=0,l=t.mapTileServ.getVisibleDatasetTileLayer();o<l.length;o++)for(var s=l[o],u=0,c=s.getLayers();u<c.length;u++){r[c[u].id]=s}for(var p=0,h=a;p<h.length;p++)for(var d=h[p],f=0,m=d.getFeatures();f<m.length;f++)for(var g=0,y=m[f].getLayers();g<y.length;g++){var _=y[g];if(_.isClickable()){r[_.id]=d}}for(var v in r)i.push(v);t.getFeaturesOnMap({layers:i},e.point).then(function(e){var n=e;t.fcPullUp.pullUpOff();for(var i={},a=[],o=0,l=n;o<l.length;o++){i[(S=l[o]).layer.id]||(a.push(S),i[S.layer.id]=!0)}var s={highlight:0};if(t.highlightedFeatures&&t.highlightedFeatures.length>0){for(var u=0,c=t.highlightedFeatures;u<c.length;u++){var p=c[u];"macrostrat"==p.source.toLowerCase()?t.mapEngine.setFeatureState(p,s):t.mapEngine.applyFilter(p.layer.id+"FcHighlight",["==","id",NaN])}t.highlightedFeatures=[]}var h=null;if((n=a).length>0)if("fieldTripStops"==(h=n[0]).layer.source){for(var d=void 0,f=0;f<n.length;f++)if("fieldTripContent"==n[f].layer.source){d=n[f];break}t.fcPullUp.pullUpOn([new Jr(d.layer.id,d.properties)],r[d.layer.id]),t.fcPullUp.goToId(h.properties[0].id)}else if("fieldTripContent"==h.layer.source){if(n.length>1&&"macrostrat"==(h=n[1]).layer.source){var m=[];for(f=0;f<n.length;f++)"macrostrat"==n[f].layer.source&&m.push(new Jr(n[f].layer.id,n[f].properties));t.fcPullUp.pullUpOn(m,r[h.layer.id])}}else if("macrostrat"==h.layer.source){m=[];for(var g=[],y=0,_=n;y<_.length;y++){"macrostrat"==(S=_[y]).layer.source&&g.push(S)}for(var v=0,b=g;v<b.length;v++){t.highlightFeature(S=b[v])}for(var x=0,w=g;x<w.length;x++){var S;m.push(new Jr((S=w[x]).layer.id,S.properties))}t.fcPullUp.pullUpOn(m,r[h.layer.id])}else{m=[];t.highlightFeature(h),m.push(new Jr(h.layer.id,h.properties)),t.fcPullUp.pullUpOn(m,r[h.layer.id])}else t.fcPullUp.pullUpOff()})}})}),this.eventServ.createEventListener("GPSTrack",function(e){t.stateServ.getGPS()>=1?t.stateServ.setTracking(!t.stateServ.getTracking()):t.stateServ.setTracking(!1)}),this.eventServ.createEventListener("GPSLocate",function(e){if(0!=t.stateServ.getGPS()){var n=t.locServ.getLocation();t.mapEngine.easeToLocation([n.longitude,n.latitude]),t.ga.trackEvent("Map","Centered")}else console.log("Cannot center on user because gps is not available")}),this.eventServ.createEventListener("FieldTripLoaded",function(e){if(e){var n=[],i=e.getFeatureById("fieldTripContent").getShapeData();n.push(new Jr("fieldTripContent",[i[0].properties])),t.fcPullUp.pullUpOn(n,e)}}),this.eventServ.createEventListener("focusOnRegion",function(e){t.focusOnRegion()}),this.eventServ.createEventListener("mapClear",function(e){t.clear()}),this.eventServ.createEventListener("renderFeatures",function(e){for(;e.add.length;){var n=e.add.pop();t.mapEngine.addFeatureLayer(n)}for(;e.delete.length;){n=e.delete.pop();t.mapEngine.deleteFeatureLayer(n)}}),this.eventServ.createEventListener("datasetTileChange",function(e){for(var n=0,i=t.mapTileServ.getTiles("dataset");n<i.length;n++){t.mapEngine.updateTile(i[n])}}),this.eventServ.createEventListener("baseTileChange",function(e){for(var n=0,i=t.mapTileServ.getTiles("base");n<i.length;n++){t.mapEngine.updateTile(i[n])}}),this.eventServ.createEventListener("labelTileChange",function(e){for(var n=0,i=t.mapTileServ.getTiles("label");n<i.length;n++){t.mapEngine.updateTile(i[n])}}),this.eventServ.createEventListener("changeOfflineStatus",function(e){t.mapEngine.changeOffline()}),this.eventServ.createEventListener("datasetRenderSuccess",function(e){t.stateServ.setMapState(3)}),this.eventServ.createEventListener("tabFabClick",function(e){if(t.stateServ.isTabState(!0))switch(t.stateServ.getMapState()){case 1:t.stateServ.setMapState(2),t.ga.trackEvent("Map","Path Viewed");for(var n=[],i=0;i<t.mapTileServ.getTiles("dataset").length;i++){var r=t.mapTileServ.getTiles("dataset")[i];t.stateServ.getDatasetTileStates()[r.getId()]?r.getEnabled()&&n.push(r):console.log("disabled dataset tile")}t.mapTileServ.setCurrentDatasetTile(n),t.regionServ.drawRegionDataLayer().then(function(e){for(var n=!0,i=!0,r=0,a=e;r<a.length;r++){var o=a[r];o.requestSuccess&&(n=!1),o.renderSuccess&&(i=!1)}n?(t.ionUIServ.createAlert(t.msg.ALERT_REQUEST_TITLE,t.msg.ALERT_REQUEST_CONTENT),t.clear()):(t.focusOnRegion(),i&&t.ionUIServ.createAlert(t.msg.ALERT_NODATA_TITLE,t.msg.ALERT_NODATA_CONTENT),t.stateServ.setMapState(4))});break;case 0:t.startPathModal=t.ionUIServ.createModal(Kr);break;case 4:var a=void 0;if(!(a=t.regionServ.get().getBuffer().getBuffer().getShapeData())||0==a.length)return void console.log("cannot calculate tile indexes");var o=t.geoJSONServ.createFeatureCollection(a);o=t.geoJSONServ.combileGeoJSON(o);var l=t.geoJSONServ.getGeometry(o.features[0]),s=t.mapTileServ.calculateOfflineTileIndexes(l);t.downloadModal=t.ionUIServ.createModal(Xr,{tileIndexes:s})}})},t.prototype.clear=function(){this.regionServ.clear(),this.mapTileServ.resetTile(),this.coordsArray=[],this.fcPullUp.pullUpOff(),this.stateServ.setMapState(0)},t.prototype.getFeaturesOnMap=function(t,e){var n=e.x,i=e.y;return this.mapEngine.getFeaturesAtLocation([{x:n-5,y:i+5},{x:n+5,y:i-5}],t)},t.prototype.focusOnRegion=function(){var t=this.regionServ.get().getBuffer().getBuffer().getShapeData(),e=this.geoJSONServ.createFeatureCollection(t);e=this.geoJSONServ.combileGeoJSON(e);try{var n=this.geoJSONServ.getBound(e);this.mapEngine.fitBounds([[n[0],n[1]],[n[2],n[3]]])}catch(t){console.log("cannot center on centroid")}},t.prototype.highlightFeature=function(t){var e={highlight:1};this.highlightedFeatures.push(t),"macrostrat"!=t.source.toLowerCase()?t.layer.id.toLowerCase().includes("clusters")?this.mapEngine.applyFilter(t.layer.id+"FcHighlight",["==","cluster_id",t._vectorTileFeature.properties.cluster_id]):t.layer.id.toLowerCase().includes("unclustered")&&this.mapEngine.applyFilter(t.layer.id+"FcHighlight",["==","id",t._vectorTileFeature.properties.id]):this.mapEngine.setFeatureState(t,e)},t.prototype.startNetworkCheck=function(){var t=this;"none"===this.network.type&&6!==this.stateServ.getMapState()&&this.ionUIServ.createDialog(this.msg.DIALOG_NETWORK_TITLE,this.msg.DIALOG_NETWORK_CONTENT,this.msg.DIALOG_NETWORK_OK,this.msg.DIALOG_NETWORK_NO,function(){t.nav.parent.select(3)},function(){})},t=Object(ci.__decorate)([Object(ci.__param)(2,Object(ui.m)("MapEngine"))],t)}(),ta=function(){function t(t,e,n,i,r,a,o,l,s,u,c){this.navCtrl=t,this.fetchServ=e,this.geoJSONServ=n,this.mapTileServ=i,this.regionServ=r,this.eventServ=a,this.stateServ=o,this.ionUIServ=l,this.ga=s,this.backbuttonService=u,this.fieldtripList=[],this.filterInPathList=[],this.filterOutPathList=[],this.msg=c.FIELDGUIDE,this.returnFailMessage=this.msg.REQUEST_LIST_FAIL,this.inPathMessage=this.msg.TITLE_IN_PATH,this.outPathMessage=this.msg.TITLE_OUT_PATH,this.searchText=this.msg.SEARCH_TEXT}return t.prototype.ionViewWillEnter=function(){var t=this;this.ga.trackView("Field trip guides"),this.fieldtripList=[],this.filterInPathList=[],this.filterOutPathList=[],this.searchKey="";var e=this.ionUIServ.startSpinner();this.backbuttonService.pushPage(Ei,this.navCtrl),this.fetchServ.fetchData("https://api.flyover.umn.edu/guide/all","get",null,2e4).subscribe(function(n){n&&Array.isArray(n)?(t.fieldtripList=n,t.returnFail=!1,t.initFilterlist()):(t.returnFail=!0,console.log("Invalid field trip list")),t.ionUIServ.stopSpinner(e)},function(n){t.returnFail=!0,console.log("Load fails"),t.ionUIServ.stopSpinner(e)})},t.prototype.getInPathFilterList=function(){return this.filterInPathList},t.prototype.getOutPathFilterList=function(){return this.filterOutPathList},t.prototype.loadFieldtrip=function(t){var e=this;this.stateServ.setMapState(2),this.eventServ.publishEvent("tabToMap"),this.ga.trackEvent("Field trip","("+t.id+") "+t.title),this.regionServ.clear();for(var n=[],i=0;i<this.mapTileServ.getTiles("dataset").length;i++){var r=this.mapTileServ.getTiles("dataset")[i];this.stateServ.getDatasetTileStates()[r.getId()]?r.getEnabled()&&n.push(r):console.log("disabled dataset tile")}this.mapTileServ.setCurrentDatasetTile(n),this.regionServ.drawPath("fieldtrip",t.id).then(function(t){var n=!0;if(t&&1==t.length&&"fieldtrip"==t[0].id)(a=t[0]).requestSuccess?e.ionUIServ.createAlert(e.msg.ALERT_RENDER_TITLE,e.msg.ALERT_RENDER_CONTENT):e.ionUIServ.createAlert(e.msg.ALERT_REQUEST_TITLE,e.msg.ALERT_REQUEST_CONTENT),e.eventServ.publishEvent("mapClear");else{e.eventServ.publishEvent("focusOnRegion");for(var i=0,r=t;i<r.length;i++){var a=r[i];a.requestSuccess&&!1,a.renderSuccess&&(n=!1)}n&&e.ionUIServ.createAlert(e.msg.ALERT_NODATA_TITLE,e.msg.ALERT_NODATA_CONTENT),e.stateServ.setMapState(4)}})},t.prototype.initFilterlist=function(){this.filterOutPathList=[],this.filterInPathList=[];var t=[];if(this.regionServ.getRegion()&&this.regionServ.getRegion().getOtherDataLayerById("fieldtriplist")){var e=this.regionServ.getRegion().getOtherDataLayerById("fieldtriplist"),n=void 0;for(var i in e.getProperties())if("guides"==i){e.getProperties();n=e.getProperties()[i].getProperty();break}if(n&&Array.isArray(n))for(var r=0;r<n.length;r++)t.push(n[r].properties.id)}for(r=0;r<this.fieldtripList.length;r++)-1==t.indexOf(this.fieldtripList[r].id)?this.filterOutPathList.push(this.fieldtripList[r]):this.filterInPathList.push(this.fieldtripList[r])},t.prototype.getItems=function(t){var e=this;this.initFilterlist(),this.searchKey=t.srcElement.value,this.searchKey&&(this.filterOutPathList=this.filterOutPathList.filter(function(t){return!!(t.title&&e.searchKey&&t.title.toLowerCase().indexOf(e.searchKey.toLowerCase())>-1)}),this.filterInPathList=this.filterInPathList.filter(function(t){return!!(t.title&&e.searchKey&&t.title.toLowerCase().indexOf(e.searchKey.toLowerCase())>-1)}))},t}(),ea=[{id:"river",title:"River or stream",img:"assets/img/wit/landscape/list/river.jpg"},{id:"lake",title:"Lake or coastline",img:"assets/img/wit/landscape/list/lake.jpg"},{id:"mount",title:"Mountain, hill or ridge",img:"assets/img/wit/landscape/list/mountain.jpg"},{id:"can",title:"Valley or canyon",img:"assets/img/wit/landscape/list/valley.jpg"},{id:"dune",title:"Pattern of sand or debris",img:"assets/img/wit/landscape/list/sand.jpg"},{id:"land",title:"Whole landscape",img:"assets/img/wit/landscape/list/landscape.jpg"},{id:"human",title:"Human-made landscape",img:"assets/img/wit/landscape/list/human.jpg"},{id:"crops",title:"Crops",img:"assets/img/wit/landscape/list/crops.jpg"},{id:"colors",title:"Bizzare colors",img:"assets/img/wit/landscape/list/color.jpg"},{id:"other",title:"Other",img:"assets/img/wit/landscape/list/crater.jpg"}],na=[{id:"river",title:"Single-channel river",text:"Also known as a 'Sinuous' or 'Meandering' river, the Single Channel River is only one of many different types of rivers. A sinuous river bends and meanders but usually flows in just one channel.",wiki:"Meander",imgs:["assets/img/wit/landscape/River/SingleChan/river_single_channel.jpg","assets/img/wit/landscape/River/SingleChan/river_single_channel2.jpg","assets/img/wit/landscape/River/SingleChan/river_single_channel3.jpg"]},{id:"river",title:"Braided river",text:"A braided river consists of many small channels that repeatedly split apart and join back together. Large braided rivers are rare in the U.S., restricted to places like Alaska, Montana, and to some extent the Great Plains. Examples below: The Platte River of Nebraska and the Bitterroot River of Montana.",wiki:"Braided_river",imgs:["assets/img/wit/landscape/River/Braided/river_braided.jpg","assets/img/wit/landscape/River/Braided/river_braided2.jpg","assets/img/wit/landscape/River/Braided/river_braided3.jpg"]},{id:"river",title:"Entrenched river",text:"A river that is constrained by a canyon, usually formed as the land is tectonically uplifted, for example, in the case of the Colorado River in the Grand Canyon.",wiki:"Entrenched_river",imgs:["assets/img/wit/landscape/River/Entrenched/entrenchedriver.jpg","assets/img/wit/landscape/River/Entrenched/entrenchedriver2.jpg","assets/img/wit/landscape/River/Entrenched/entrenchedriver3.jpg"]},{id:"river",title:"Delta",text:"Where the mouth of the river flows into an ocean.",wiki:"River_delta",imgs:["assets/img/wit/landscape/River/Delta/delta.jpg","assets/img/wit/landscape/River/Delta/delta2.jpg","assets/img/wit/landscape/River/Delta/delta3.jpg"]},{id:"river",title:"Confluence",text:"The merging of two rivers.",wiki:"Confluence",imgs:["assets/img/wit/landscape/River/Confluence/confluence_1.jpg","assets/img/wit/landscape/River/Confluence/confluence2.jpg","assets/img/wit/landscape/River/Confluence/confluence3.jpg"]},{id:"river",title:"Meander",text:"A bend in a river, created as the river erodes the outer banks and deposits sediment on the inner banks.",wiki:"Meander",imgs:["assets/img/wit/landscape/River/Meander/meanders.jpg","assets/img/wit/landscape/River/Meander/meanders2.jpg","assets/img/wit/landscape/River/Meander/meanders3.jpg"]},{id:"river",title:"Abandoned meander",text:"A meander that has been cut off from the main flow of the river, similar to an oxbow.",wiki:"Meander",imgs:["assets/img/wit/landscape/River/AbMeander/abandonedmeander.jpg","assets/img/wit/landscape/River/AbMeander/abandonedmeander2.jpg","assets/img/wit/landscape/River/AbMeander/abandonedmeander3.jpg"]},{id:"river",title:"Oxbow",text:"A U-shaped lake or dry lake, cut off from a meandering river.",wiki:"Oxbow_lake",imgs:["assets/img/wit/landscape/River/Oxbow/oxbow_small.jpg","assets/img/wit/landscape/River/Oxbow/oxbow1_small.jpg","assets/img/wit/landscape/River/Oxbow/oxbow2_small.jpg"]},{id:"river",title:"Scrollbars",text:"Arcs of small ridges and valleys ('swales') that parallel a river. They're usually deposited as the river meanders across its floodplain.",wiki:"Meander",imgs:["assets/img/wit/landscape/River/Scrollbar/ridgeandswale.jpg","assets/img/wit/landscape/River/Scrollbar/ridgeandswale2.jpg","assets/img/wit/landscape/River/Scrollbar/ridgeandswale3.jpg"]},{id:"river",title:"Bayou",text:"A marshy, water-logged area with extremely slow-moving water, typically found in the Gulf region of the U.S.",wiki:"Bayou",imgs:["assets/img/wit/landscape/River/Bayou/bayou.jpg","assets/img/wit/landscape/River/Bayou/bayou2.jpg","assets/img/wit/landscape/River/Bayou/bayou3.jpg"]},{id:"river",title:"Manmade levee",text:"A wall or slope built next to a river to regulate water levels.",wiki:"Levee",imgs:["assets/img/wit/landscape/River/Levee/levee.jpg","assets/img/wit/landscape/River/Levee/levee2.jpg","assets/img/wit/landscape/River/Levee/levee3.jpg"]},{id:"river",title:"Flood plain",text:"Flat land on either side of a river, often submerged during times when the river runs high and overflows its banks. In some places, floodplains are farmed.",wiki:"Floodplain",imgs:["assets/img/wit/landscape/River/FloodPlain/floodplain.jpg","assets/img/wit/landscape/River/FloodPlain/floodplain2.jpg","assets/img/wit/landscape/River/FloodPlain/floodplain3.jpg"]},{id:"river",title:"Point-bar and cutbank",text:"Pointbars are piles of sand and sediment that accumulate on the sides of river meanders, where the water slows down as it rounds the curve. Cutbanks are the outer banks of meanders, where the water speeds up and erodes down the side.",wiki:"Point_bar",imgs:["assets/img/wit/landscape/River/PointBar/pointbar.jpg","assets/img/wit/landscape/River/PointBar/point_bar_2.jpg","assets/img/wit/landscape/River/PointBar/pointbar3.jpg"]},{id:"river",title:"Channel bar",text:"A deposit of sediment in a channel. Similar to a point bar, but not restricted to the shoreline. Usually an indication that the river carries large amounts of sediment during flood times.",wiki:"Shoal",imgs:["assets/img/wit/landscape/River/ChannelBar/channel_bar.jpg","assets/img/wit/landscape/River/ChannelBar/channel_bar2.jpg","assets/img/wit/landscape/River/ChannelBar/channel_bar3.jpg"]},{id:"river",title:"Slot canyon",text:"A deep, very narrow canyon, typically formed in limestone or sandstone and so frequently found in the Southwest.",wiki:"Slot_canyon",imgs:["assets/img/wit/landscape/River/SlotCan/slotcanyon1.jpg","assets/img/wit/landscape/River/SlotCan/slotcanyon2.jpg","assets/img/wit/landscape/River/SlotCan/slotcanyon3.jpg"]},{id:"river",title:"Anabranch",text:"A part of a river that leaves the main channel, then rejoins it further downstream. They can be small, short branches, or long, significant branches that cover many miles.",wiki:"Anabranch",imgs:["assets/img/wit/landscape/River/Anabranch/anabranch.jpg","assets/img/wit/landscape/River/Anabranch/anabranch2.jpg","assets/img/wit/landscape/River/Anabranch/anabranch3.jpg"]},{id:"river",title:"Stream offset",text:"Stream offsets occur when faults dramatically change the course of a stream or river. This is especially well illustrated along the San Andreas Fault in California.",wiki:null,imgs:["assets/img/wit/landscape/River/StreamOff/streamoffset.jpg","assets/img/wit/landscape/River/StreamOff/streamoffset2.jpg","assets/img/wit/landscape/River/StreamOff/streamoffset3.jpg"]},{id:"river",title:"River ice",text:"Check out the difference between winter, spring, and summer over the Missouri River in Nebraska.",wiki:null,imgs:["assets/img/wit/landscape/River/Ice/missouri_river_ice_breakup.jpg","assets/img/wit/landscape/River/Ice/missouri_river_iced_over.jpg","assets/img/wit/landscape/River/Ice/missouri_river_not_iced_over.jpg"]},{id:"river",title:"Delta distributaries",text:"Small streams that break off a main river at a delta and flow independently into the ocean, lake, or larger river that the river feeds into.",wiki:"Distributary",imgs:["assets/img/wit/landscape/River/DeltaDis/delta_distributary_1.jpg","assets/img/wit/landscape/River/DeltaDis/delta_distributary_2.jpg","assets/img/wit/landscape/River/DeltaDis/delta_distributary_3.jpg"]},{id:"lake",title:"Sinkhole",text:"A lake made from the collapse of an underground cave. Most sinkholes don't hold water, but when they do, they're noticeable and cool.",wiki:"Sinkhole",imgs:["assets/img/wit/landscape/Lake/Sink/sinkholes.jpg","assets/img/wit/landscape/Lake/Sink/sinkholes2.jpg","assets/img/wit/landscape/Lake/Sink/sinkholes3.jpg"]},{id:"lake",title:"Kettle hole",text:"A lake formed from a retreating glacier. These are typically found in the northern areas of the U.S.: Minnesota, Michigan, New York, Massachusetts, etc.",wiki:"Kettle_(landform)",imgs:["assets/img/wit/landscape/Lake/Kettle/kettelholes.jpg","assets/img/wit/landscape/Lake/Kettle/kettelholes2.jpg","assets/img/wit/landscape/Lake/Kettle/kettelholes3.jpg"]},{id:"lake",title:"Playa",text:"An ephemeral lake bed, usually in a desert.",wiki:"Dry_lake",imgs:["assets/img/wit/landscape/Lake/Playa/playa.jpg","assets/img/wit/landscape/Lake/Playa/playa2.jpg","assets/img/wit/landscape/Lake/Playa/playa3.jpg"]},{id:"lake",title:"Crater lake",text:"A lake in the caldera of a volcano. It's unusual to fly over these types of lakes, unless you're in the Cascade Range of the Pacific Northwest.",wiki:"Crater_lake",imgs:["assets/img/wit/landscape/Lake/Crater/craterlake.jpg","assets/img/wit/landscape/Lake/Crater/craterlake2.jpg","assets/img/wit/landscape/Lake/Crater/craterlake3.jpg"]},{id:"lake",title:"Barrier island",text:"A long, thin island running parallel to a coastline. They form from a variety of mechanisms and can shield the mainland from waves and storms.",wiki:"Barrier_island",imgs:["assets/img/wit/landscape/Lake/Barrier/barrierisland.jpg","assets/img/wit/landscape/Lake/Barrier/barrierisland2.jpg","assets/img/wit/landscape/Lake/Barrier/barrierisland3.jpg"]},{id:"lake",title:"Baymouth bar",text:"A long, thin bar of sand that completely cuts off a bay from the rest of the ocean.",wiki:"Baymouth_bar",imgs:["assets/img/wit/landscape/Lake/Baymouth/baymouthbar.jpg","assets/img/wit/landscape/Lake/Baymouth/baymouthbar2.jpg","assets/img/wit/landscape/Lake/Baymouth/baymouthbar3.jpg"]},{id:"lake",title:"Tombolo",text:"A long, thin bar of sand that connects the main land to an island.",wiki:"Tombolo",imgs:["assets/img/wit/landscape/Lake/Tombolo/tombolo.jpg","assets/img/wit/landscape/Lake/Tombolo/tombolo2.jpg","assets/img/wit/landscape/Lake/Tombolo/tombolo3.jpg"]},{id:"lake",title:"Estuary",text:"A transition zone between a river and an ocean, usually partially enclosed but open to the sea.",wiki:"Estuary",imgs:["assets/img/wit/landscape/Lake/Estuary/estuary.jpg","assets/img/wit/landscape/Lake/Estuary/estuary2.jpg","assets/img/wit/landscape/Lake/Estuary/estuary3.jpg"]},{id:"lake",title:"Salt lake/alkaline lake",text:"A lake with a high concentration of salt. You can usually identify them by the rings of white salts along their edges.",wiki:"Salt_lake",imgs:["assets/img/wit/landscape/Lake/Salt/sodalake.jpg","assets/img/wit/landscape/Lake/Salt/sodalake2.jpg","assets/img/wit/landscape/Lake/Salt/sodalake3.jpg"]},{id:"lake",title:"Sea stack",text:"A rock isolated by coastal erosion.",wiki:"Sea_stack",imgs:["assets/img/wit/landscape/Lake/SeaStack/sea_stack.jpg","assets/img/wit/landscape/Lake/SeaStack/seastack2.jpg","assets/img/wit/landscape/Lake/SeaStack/seastack3.jpg"]},{id:"lake",title:"Coastal dunes",text:"Dunes form on beaches when waves bring more sand than they take away, winds blow sand inland, and vegetation or another obstacle blocks sand from blowing too far inland.",wiki:"Dune",imgs:["assets/img/wit/landscape/Lake/Dunes/dunes_coastal.jpg","assets/img/wit/landscape/Lake/Dunes/dunes_coastal2.jpg","assets/img/wit/landscape/Lake/Dunes/dunes_coastal3.jpg"]},{id:"mount",title:"Butte",text:"A small, isolated, flat-topped hill, usually found in deserts.",wiki:"Butte",imgs:["assets/img/wit/landscape/Mount/butte1.jpg","assets/img/wit/landscape/Mount/butte2.jpg","assets/img/wit/landscape/Mount/butte3.jpg"]},{id:"mount",title:"Mesa",text:"A flat-topped mountain with steep sides, usually larger than a butte, usually found in a desert.",wiki:"Mesa",imgs:["assets/img/wit/landscape/Mount/mesa1.jpg","assets/img/wit/landscape/Mount/mesa2.jpg","assets/img/wit/landscape/Mount/mesa3.jpg"]},{id:"mount",title:"Monadnock/inselberg",text:"An isolated mountain that rises abruptly from otherwise level ground.",wiki:"Inselberg",imgs:["assets/img/wit/landscape/Mount/monadnock_1.jpg","assets/img/wit/landscape/Mount/monadnock_2.jpg","assets/img/wit/landscape/Mount/monadnock_3.jpg"]},{id:"mount",title:"Fold limb",text:"Fold limbs can look like ridges: long, linear mountains with crests at the top. Ridges can be due to a variety of geologic landforms, but, in highly folded areas of the country - like the Appalachians - they are frequently fold limbs.",wiki:"Fold_(geology)",imgs:["assets/img/wit/landscape/Mount/ridge.jpg","assets/img/wit/landscape/Mount/fold_limb2.jpg","assets/img/wit/landscape/Mount/fold_limb3.jpg"]},{id:"mount",title:"Hogbacks",text:"Steeply tilting rock layers which stick up out of the ground like spine vertebrae. Sometimes they can form triangle-shaped wedges that lay against the sides of mountains.",wiki:"Hogback_(geology)",imgs:["assets/img/wit/landscape/Mount/hogback.jpg","assets/img/wit/landscape/Mount/hogback2.jpg","assets/img/wit/landscape/Mount/hogback3.jpg"]},{id:"mount",title:"Thrust Sheets",text:"Thrust sheets can also produce ridges. The ridges below are the edges of giant sheets of rock that were thrust up on top of other rocks during a mountain-building event. The thrust sheets tend to form several long, parallel ridges. Note: Not all thrust faults look like this! These are special cases.",wiki:"Thrust_fault",imgs:["assets/img/wit/landscape/Mount/thrusts.jpg","assets/img/wit/landscape/Mount/thrusts2.jpg","assets/img/wit/landscape/Mount/thrusts3.jpg"]},{id:"mount",title:"Syncline",text:"Folded layers of rocks can make beautiful mountains. Syncline folds look like smiley-faces; anticlines look like frowney-faces. When viewed from above, synclines tend to have valleys in the middle; anticlines tend to be raised in the middle. Syncline mountains are common in the Appalachian Valley and Ridge Province.",wiki:"Syncline",imgs:["assets/img/wit/landscape/Mount/syncline.jpg","assets/img/wit/landscape/Mount/syncline2.jpg","assets/img/wit/landscape/Mount/syncline3.jpg"]},{id:"mount",title:"Anticline",text:"Folded layers of rocks can make beautiful mountains. Syncline folds look like smiley-faces; anticlines look like frowney-faces. When viewed from above, synclines tend to have valleys in the middle; anticlines tend to be raised in the middle. Syncline mountains are common in the Appalachian Valley and Ridge Province.",wiki:"Anticline",imgs:["assets/img/wit/landscape/Mount/anticline.jpg","assets/img/wit/landscape/Mount/anticline2.jpg","assets/img/wit/landscape/Mount/anticline3.jpg"]},{id:"mount",title:"Cirque",text:"A curved mountain face formed by glacial erosion. The cirque on the right is outlined in red to illustrate.",wiki:"Cirque",imgs:["assets/img/wit/landscape/Mount/cirque.jpg","assets/img/wit/landscape/Mount/cirque2.jpg","assets/img/wit/landscape/Mount/cirque3.jpg"]},{id:"mount",title:"Glacier",text:"U.S. glaciers are usually only seen in Montana or Alaska. The ones shown below are Montana glaciers.",wiki:"Glacier",imgs:["assets/img/wit/landscape/Mount/glacier.jpg","assets/img/wit/landscape/Mount/glacier2.jpg","assets/img/wit/landscape/Mount/glacier3.jpg"]},{id:"mount",title:"Alluvial fan",text:"Fan-shaped sediment deposit at the base of a mountain.",wiki:"Alluvial_fan",imgs:["assets/img/wit/landscape/Mount/alluvialfans.jpg","assets/img/wit/landscape/Mount/alluvialfans2.jpg","assets/img/wit/landscape/Mount/alluvialfan3.jpg"]},{id:"mount",title:"Drumlin",text:"A long, narrow hill formed by a retreating glacier. Common in Minnesota, Wisconsin, Boston, etc. They are often distinctive, since they can occur as swarms of long, narrow hills, all pointing North (or North-ish). From above, these swarms can look like long striations on the landscape.",wiki:"Drumlin",imgs:["assets/img/wit/landscape/Mount/drumlins.jpg","assets/img/wit/landscape/Mount/drumlins2.jpg","assets/img/wit/landscape/Mount/drumlins3.jpg"]},{id:"mount",title:"Esker",text:"A long, sinuous ridge of sand, presumably formed as sandy streams cutting down, through, or underneath glaciers. When the glacier retreats, the pile of stream sediment is left behind. You can spot them as long, sinuous ridges in the northern, formerly glaciated parts of the country.",wiki:"Esker",imgs:["assets/img/wit/landscape/Mount/esker.jpg","assets/img/wit/landscape/Mount/esker2.jpg","assets/img/wit/landscape/Mount/esker3.jpg"]},{id:"mount",title:"Moraine",text:"A pile of glacial debris (sand, gravel, etc.) that is left behind as the glacier retreats. They tend to be long, sinuous mounds of sand.",wiki:"Moraine",imgs:["assets/img/wit/landscape/Mount/moraine.jpg","assets/img/wit/landscape/Mount/moraine2.jpg","assets/img/wit/landscape/Mount/moraine3.jpg"]},{id:"mount",title:"Cinder cone",text:"A small, steep mountain of volcanic ash and cinder that accumulates around a small volcanic vent. They are common in the Southwest (especially Arizona) and in the Cascades. They're easily identified by their small, conical shape, and the large gaping hole on top. You can often see recent (solidified) lava flows pouring from their tops.",wiki:"Cinder_cone",imgs:["assets/img/wit/landscape/Mount/cindercone.jpg","assets/img/wit/landscape/Mount/cindercone2.jpg","assets/img/wit/landscape/Mount/cindercone3.jpg"]},{id:"mount",title:"Lava dome",text:"A small, budging dome of slowly-oozing lava, usually found near active volcanic zones, like the Cascades. From above, they look like raised pimples on the landscape.",wiki:"Lava_dome",imgs:["assets/img/wit/landscape/Mount/lavadomes.jpg","assets/img/wit/landscape/Mount/lavadomes2.jpg","assets/img/wit/landscape/Mount/lavadomes3.jpg"]},{id:"mount",title:"Exposed dike",text:"Dikes form when lava cuts up through overlying rock, usually on its way to the surface. As the overlying layers are eroded away, dikes can appear on the surface as long, resistant ridges, often a different color than the surrounding landscape.",wiki:"Dike_(geology)",imgs:["assets/img/wit/landscape/Mount/dike.jpg","assets/img/wit/landscape/Mount/dike2.jpg","assets/img/wit/landscape/Mount/dike3.jpg"]},{id:"can",title:"U-Shaped valleys",text:"A wide valley with steep sides - a cross-section of the valley would look like a U. These valleys are carved by glaciers, and are usually only seen in the northern regions of the U.S.",wiki:"U-shaped_valley",imgs:["assets/img/wit/landscape/Can/U-shaped-valley.jpg","assets/img/wit/landscape/Can/U-shaped-valley2.jpg","assets/img/wit/landscape/Can/U-shaped-valley3.jpg"]},{id:"can",title:"V-Shaped valleys",text:"V-shaped valleys typically form from rivers. Their sides are gentle slopes straight down to the river below, unlike U-shaped glacial valleys that have very steep sides and a rounded, flat bottom. V-shaped valleys are common in recently-uplifted, young terrain; for example: in the western states. Older, more well-developed terrain rarely have V-shaped valleys.",wiki:"Valley",imgs:["assets/img/wit/landscape/Can/v-shaped-valley1.jpg","assets/img/wit/landscape/Can/v-shaped-valley2.jpg","assets/img/wit/landscape/Can/v-shaped-valley3.jpg"]},{id:"can",title:"Joints in granite",text:"Joints (fractures) in granite can often form steep-sided gashes that look (from above) like mini-canyons. Granite joints are easily identified, since they tend to be irregularly spaced and occur across bare rock faces. They are easily seen when flying over the Sierra Nevadas of California or Nevada.",wiki:"Joint_(geology)",imgs:["assets/img/wit/landscape/Can/joints_granite.jpg","assets/img/wit/landscape/Can/joints_granite2.jpg","assets/img/wit/landscape/Can/joints_granite3.jpg"]},{id:"can",title:"Water gaps",text:"Water gaps are the small, narrow valleys by which a river cuts across a mountain range. They typically indicate that the river is older than the mountain; in other words: the river established its course before the region was uplifted.",wiki:"Water_gap",imgs:["assets/img/wit/landscape/Can/watergap1.jpg","assets/img/wit/landscape/Can/watergap2.jpg","assets/img/wit/landscape/Can/watergap3.jpg"]},{id:"can",title:"Fault-controlled valleys",text:"Faults often produce straight, steep valleys. Faults grind rocks together, creating a plane of weakness, which is more easily eroded than surrounding rock. This plane is a good place for a valley to form. (Note: Not all faults look like valleys, though. In fact, most do not.",wiki:null,imgs:["assets/img/wit/landscape/Can/valley_fault_controlled.jpg","assets/img/wit/landscape/Can/fault-controlled_canyon2.jpg","assets/img/wit/landscape/Can/fault-controlled_canyon4.jpg"]},{id:"can",title:"Syncline",text:"Folded layers of rocks can make beautiful mountains. Syncline folds look like smiley-faces; anticlines look like frowney-faces. When viewed from above, synclines tend to have valleys in the middle; anticlines tend to be raised in the middle. Syncline mountains are common in the Appalachian Valley and Ridge Province.",wiki:"Syncline",imgs:["assets/img/wit/landscape/Mount/syncline.jpg","assets/img/wit/landscape/Mount/syncline2.jpg","assets/img/wit/landscape/Mount/syncline3.jpg"]},{id:"can",title:"Entrenched river",text:"A river that is constrained by a canyon, usually formed as the land is tectonically uplifted, for example, in the case of the Colorado River in the Grand Canyon.",wiki:"Entrenched_river",imgs:["assets/img/wit/landscape/River/Entrenched/entrenchedriver.jpg","assets/img/wit/landscape/River/Entrenched/entrenchedriver2.jpg","assets/img/wit/landscape/River/Entrenched/entrenchedriver3.jpg"]},{id:"can",title:"Slot canyon",text:"A deep, very narrow canyon, typically formed in limestone or sandstone and so frequently found in the Southwest.",wiki:"Slot_canyon",imgs:["assets/img/wit/landscape/River/SlotCan/slotcanyon1.jpg","assets/img/wit/landscape/River/SlotCan/slotcanyon2.jpg","assets/img/wit/landscape/River/SlotCan/slotcanyon3.jpg"]},{id:"dune",title:"Coastal dunes",text:"Dunes form on beaches when waves bring more sand than they take away, winds blow sand inland, and vegetation or another obstacle blocks sand from blowing too far inland.",wiki:"Dune",imgs:["assets/img/wit/landscape/Lake/Dunes/dunes_coastal.jpg","assets/img/wit/landscape/Lake/Dunes/dunes_coastal2.jpg","assets/img/wit/landscape/Lake/Dunes/dunes_coastal3.jpg"]},{id:"dune",title:"Crescentic dunes (aka Barchans)",text:"Crescent-shaped sand dunes that form from wind that blows consistently from one direction. The 'wings' point in the direction the wind blows.",wiki:"Dune",imgs:["assets/img/wit/landscape/Dunes/barchan.jpg","assets/img/wit/landscape/Dunes/barchans2.jpg","assets/img/wit/landscape/Dunes/barchans3.jpg"]},{id:"dune",title:"Star dunes",text:"Radially-symmetrical sand dunes with multiple 'arms'. They form in places where the wind can blow from multiple directions.",wiki:"Dune",imgs:["assets/img/wit/landscape/Dunes/star_dunes.jpg","assets/img/wit/landscape/Dunes/dunes_star.jpg","assets/img/wit/landscape/Dunes/dunes_star2.jpg"]},{id:"dune",title:"Parabolic dunes",text:"U-shaped sand dunes, anchored by vegetation. The 'wings' point into the wind. (The opposite of barchan dunes).",wiki:"Dune",imgs:["assets/img/wit/landscape/Dunes/parabolic_dunes.jpg","assets/img/wit/landscape/Dunes/dunes_parabolic.jpg","assets/img/wit/landscape/Dunes/parabolicdunes3.jpg"]},{id:"dune",title:"Longitudinal dunes (aka Seif dunes)",text:"Long sand hills that form parallel to wind direction. The opposite is a transverse dune, perpendicular to the wind direction.",wiki:"Dune",imgs:["assets/img/wit/landscape/Dunes/linear_dunes.jpg","assets/img/wit/landscape/Dunes/longitudinal_dunes_2.jpg","assets/img/wit/landscape/Dunes/longitudinal_dunes_3.jpg"]},{id:"dune",title:"Alluvial fan",text:"Fan-shaped sediment deposit at the base of a mountain.",wiki:"Alluvial_fan",imgs:["assets/img/wit/landscape/Mount/alluvialfans.jpg","assets/img/wit/landscape/Mount/alluvialfans2.jpg","assets/img/wit/landscape/Mount/alluvialfan3.jpg"]},{id:"dune",title:"Erg",text:"A sand sea. The only active ergs in the U.S. are the Yuma Desert of Arizona, the Algodones of southeast California, the Great Sand Dunes of Colorado, White Sands of New Mexico, and the Nebraska Sand Hills {read more}. Note: Ergs are huge, so instead of a nadir-facing view at 35,000 feet, this image of the Great Sand Dunes of Colorado is a south-facing perspective at 35,000 feet.",wiki:"Dune",img2:null,img3:null,imgs:["assets/img/wit/landscape/Dunes/erg_perspective.jpg"]},{id:"land",title:"Badlands",text:"An arid environment with extreme erosion, unsuitable for grazing or farming.",wiki:"Badlands",imgs:["assets/img/wit/landscape/Land/badlands.jpg","assets/img/wit/landscape/Land/badlands2.jpg","assets/img/wit/landscape/Land/badlands3.jpg"]},{id:"land",title:"Dissected plateau",text:"A landscape that has been severely eroded, producing sharp relief and topography. Some portions of the Appalachian Plateau are dissected.",wiki:"Dissected_plateau",img2:null,img3:null,imgs:["assets/img/wit/landscape/Land/dissected plateau.jpg"]},{id:"human",title:"Power lines",text:"A long, straight swath cut across mountains and forests usually marks giant power lines and towers.",wiki:"Electric_power_transmission",imgs:["assets/img/wit/landscape/Human/power_lines_through_a_forest.jpg","assets/img/wit/landscape/Human/powerlines.jpg","assets/img/wit/landscape/Human/powerlines2.jpg"]},{id:"human",title:"Ski slopes",text:"Long tree-less scars down a mountainside often mark ski slopes.",wiki:null,imgs:["assets/img/wit/landscape/Human/ski_slopes.jpg","assets/img/wit/landscape/Human/ski_slopes2.jpg","assets/img/wit/landscape/Human/skislopes3.jpg"]},{id:"human",title:"Oil fields",text:"Large oil fields are easy to spot from a plane. They tend to have dense networks of dirt roads connecting small dirt patches, where the pumps are pumping.",wiki:"Oil_field",imgs:["assets/img/wit/landscape/Human/oilfields.jpg","assets/img/wit/landscape/Human/oilfields2.jpg","assets/img/wit/landscape/Human/oilfields23.jpg"]},{id:"human",title:"Tailing ponds",text:"Large man-made ponds near mines. The miners pump contaminated water into the ponds, where contaminates can precipitate out. Mine operators usually construct the ponds as giant rectangles, frequently in rows. The ponds tend to be multi-colored, and are usually right next to what is obviously a mine.",wiki:"Tailings",imgs:["assets/img/wit/landscape/Human/tailingsponds.jpg","assets/img/wit/landscape/Human/tailingsponds2.jpg","assets/img/wit/landscape/Human/tailingsponds3.jpg"]},{id:"human",title:"Quarry",text:"An open pit mine, usually for rock, gravel, or cement. Unlike mineral mines, quarries tend to be gray- or tan-colored. Bright reds, blues, greens, or variations in colors point to mineral deposits -- usually not to cement.",wiki:"Quarry",imgs:["assets/img/wit/landscape/Human/quarry.jpg","assets/img/wit/landscape/Human/quarry2.jpg","assets/img/wit/landscape/Human/quarry4.jpg"]},{id:"human",title:"Mountain-top removal mines",text:"These are usually coal mines in the Appalachians. Just like the name says, to get at the coal, the mine operators remove the top of a mountain, following the coal seam. They're easy to spot from a plane flying over, say, West Virginia or Kentucky.",wiki:"Mountaintop_removal_mining",imgs:["assets/img/wit/landscape/Human/mtr.jpg","assets/img/wit/landscape/Human/mtr2.jpg","assets/img/wit/landscape/Human/mtr3.jpg"]},{id:"human",title:"Open pit mines - coal",text:"Just as the name implies, an open pit mine is a large, open pit. Coal open pit mines often have an unsurprisingly coal-gray color. These are especially common in Wyoming.",wiki:"Open-pit_mining",imgs:["assets/img/wit/landscape/Human/coal.jpg","assets/img/wit/landscape/Human/coal2.jpg","assets/img/wit/landscape/Human/coal3.jpg"]},{id:"human",title:"Open pit mines - copper",text:"Copper open pit mines often (though not always) are associated with beautiful colors. The major copper ores include chalcopyrite (golden), cuprite (red), malachite (bright green), and bornite (which can be red, copper-colored, blue, or green, and is iridescent), all of which are usually found with other brightly-colored copper minerals.",wiki:"Open-pit_mining",imgs:["assets/img/wit/landscape/Human/copper.jpg","assets/img/wit/landscape/Human/copper2.jpg","assets/img/wit/landscape/Human/copper3.jpg"]},{id:"human",title:"Open pit mines - iron",text:"If the primary ore is an iron oxide, an open pit iron mine usually has a mixture of rust-red and dark gray. If the primary ore is an iron sulfide, the colors can be more vibrant and varied.",wiki:"Open-pit_mining",imgs:["assets/img/wit/landscape/Human/iron.jpg","assets/img/wit/landscape/Human/iron2.jpg","assets/img/wit/landscape/Human/iron3.jpg"]},{id:"human",title:"Coal power plant",text:"Readily identified by their tall cooling towers and flue gas stacks, also by their proximity to water.",wiki:"Fossil-fuel_power_station",imgs:["assets/img/wit/landscape/Human/coalpowerplant.jpg","assets/img/wit/landscape/Human/coalpowerplant2.jpg","assets/img/wit/landscape/Human/coalpowerplant3.jpg"]},{id:"human",title:"Dams",text:"Big dams are easily identifiable from overhead because of the giant pool of water behind them and the tiny little stream of water coming out the front. There are a lot of large dams in the U.S. that can be readily seen from flight.",wiki:"Dam",imgs:["assets/img/wit/landscape/Human/dam1.jpg","assets/img/wit/landscape/Human/dam2.jpg","assets/img/wit/landscape/Human/dam3.jpg"]},{id:"other",title:"Impact craters",text:"These giant round holes in the ground form when a rock from space flies through the atmosphere and hits Earth. They are very rare, and craters pristine enough to be seen from a plane are even more rare -- unless you're flying over Arizona, you're probably not seeing one.",wiki:"Impact_crater",imgs:["assets/img/wit/landscape/Other/crater.jpg","assets/img/wit/landscape/Other/crater2.jpg","assets/img/wit/landscape/Other/crater3.jpg"]},{id:"other",title:"Salt domes",text:"A dome pushed up from below as subsurface salt rises through overlying layers. These are rare in the U.S., but are sometimes seen in the southwest (e.g., Texas).",wiki:"Salt_dome",imgs:["assets/img/wit/landscape/Other/saltdome.jpg","assets/img/wit/landscape/Other/saltdome2.jpg","assets/img/wit/landscape/Other/saltdome3.jpg"]},{id:"other",title:"Nuclear test site",text:"Fields of small, circular pits, usually in Nevada. It's unlikely you'll fly over this.",wiki:"Sedan_(nuclear_test)",img2:null,img3:null,imgs:["assets/img/wit/landscape/Other/nucleartestground.jpg"]},{id:"other",title:"Dune buggy tracks",text:"You'll probably only see these if you're flying flow over a desert/dune/coastal area that's managed by the Bureau of Land Management (which doesn't mind dune buggies). They're small - this field is only ~2,000 feet across.",wiki:"Dune_buggy",img2:null,img3:null,imgs:["assets/img/wit/landscape/Other/dune_buggy_tracks.jpg"]},{id:"crops",title:"Contour farming",text:"Plowing along elevation lines. You'll see this technique most often in hilly farmland, especially over Minnesota and Wisconsin.",wiki:"Contour_plowing",imgs:["assets/img/wit/landscape/Crops/contour_farming.jpg","assets/img/wit/landscape/Crops/contourfarming2.jpg","assets/img/wit/landscape/Crops/contourfarming3.jpg"]},{id:"crops",title:"Center pivot irrigation",text:"Crops are often planted in giant circles to facilitate center pivot irrigation: an irrigation technique where the water-distributing poles are fixed in the center of the field and rotated around in a circle. This type of irrigation is effective on flat land - expect to see it mostly in Kansas and Nebraska.",wiki:"Center_pivot_irrigation",imgs:["assets/img/wit/landscape/Crops/center_pivot_1.jpg","assets/img/wit/landscape/Crops/center_pivot_2.jpg","assets/img/wit/landscape/Crops/center_pivot_3.jpg"]},{id:"crops",title:"Level basin irrigation",text:"Large, flat plots of land which are irrigated by channeling water directly into the basin. Rice paddies have made this method famous; however, other crops can use it too: alfalfa, citrus trees, and some cereals, for example. You can spot these from above by their weirdly-deformed rectangular shapes and various green colors. In the U.S., they're mostly concentrated around the Mississippi River Delta, especially in Arkansas.",wiki:"Surface_irrigation",imgs:["assets/img/wit/landscape/Crops/level_basin_irrigation_1.jpg","assets/img/wit/landscape/Crops/level_basin_irrigation_2.jpg","assets/img/wit/landscape/Crops/level_basin_irrigation_3.jpg"]},{id:"crops",title:"Furrow irrigation",text:"Furrow irrigation uses small channels running down the sides and rows of fields to irrigate crops.",wiki:"Surface_irrigation",imgs:["assets/img/wit/landscape/Crops/furrow_irrigation_1.jpg","assets/img/wit/landscape/Crops/furrow_irrigation_2.jpg","assets/img/wit/landscape/Crops/furrow_irrigation_3.jpg"]},{id:"crops",title:"Non-farmed hills",text:"The forested hills in this Midwest view were left unfarmed, while the low-lying plains were plowed.",wiki:null,img2:null,img3:null,imgs:["assets/img/wit/landscape/Crops/farmingaroundhills.jpg"]},{id:"colors",title:"White (salt)",text:"White salt crusts frequently form on dry lake beds in the desert. As the water evaporates, it leaves behind 'evaporite' minerals, for example, sodium carbonate and sodium bicarbonate.",wiki:"Evaporite",imgs:["assets/img/wit/landscape/Colors/white_dry_lake_bed.jpg","assets/img/wit/landscape/Colors/white_evaporites.jpg","assets/img/wit/landscape/Colors/white_evaporites2.jpg"]},{id:"colors",title:"Lightening (grain size)",text:"One of the most common reasons for a sudden light patch in an otherwise uniform terrain is a change in grain size. Ground-up rock (i.e., sand) is usually lighter than the rock it came from. So mines, alluvial fans, dunes, and other piles of freshly-ground dirt appear lighter than the surrounding rock.",wiki:"Sorting_(sediment)",imgs:["assets/img/wit/landscape/Colors/lightduetofinegrains.jpg","assets/img/wit/landscape/Colors/lightduetofinegrains2.jpg","assets/img/wit/landscape/Colors/lightduetofinegrains3.jpg"]},{id:"colors",title:"Black (basalt lava)",text:"Large splotches of black, especially in the southwest, are often lava flows.",wiki:"Basalt",imgs:["assets/img/wit/landscape/Colors/lava.jpg","assets/img/wit/landscape/Colors/lava2.jpg","assets/img/wit/landscape/Colors/lava3.jpg"]},{id:"colors",title:"Banded colors (sedimentary rocks)",text:"As a river or stream erodes down through a stack of sedimentary layers, it exposes deeper and deeper layers. If they layers are sufficiently different kinds of rock (e.g., shale, limestone, sandstone), they often look like stripes of color when viewed from above.",wiki:"Sedimentary_rock",imgs:["assets/img/wit/landscape/Colors/bands.jpg","assets/img/wit/landscape/Colors/bandedlayers2.jpg","assets/img/wit/landscape/Colors/bandedlayers3.jpg"]},{id:"colors",title:"Dark sands (in deserts)",text:"Frequently, desert sands and rocks will appear dark due to a coating of iron, manganese, and clay called desert varnish. A rock surface that is exposed to the desert environment for more than a few years will develop this varnish. From above, you will commonly see this effect on alluvial fans: the young, fresh sands will be bright, while the older sands (which are the same composition and grain size as the younger sands) will be stained a darker color.",wiki:"Desert_varnish",imgs:["assets/img/wit/landscape/Colors/darksand.jpg","assets/img/wit/landscape/Colors/darksand2.jpg","assets/img/wit/landscape/Colors/darksand3.jpg"]},{id:"colors",title:"Bright turquoise water",text:"Tailings ponds filled with mine debris can have spectacular color variations. Bright turquoise waters are often caused by very fine suspected clay particles.",wiki:"Tailings",imgs:["assets/img/wit/landscape/Colors/tailings_blue.jpg","assets/img/wit/landscape/Colors/tailings_blue2.jpg","assets/img/wit/landscape/Colors/tailings_blue3.jpg"]}],ia=function(){function t(t,e){this.navParams=t,this.msg=e.FULLARTICLE,this.title=this.msg.TITLE}return t.prototype.ionViewWillEnter=function(){this.article=this.navParams.get("article"),this.images=this.navParams.get("images"),console.log(this.article)},t}(),ra=function(){function t(t,e,n){this.navCtrl=t,this.navParams=e,this.http=n,this.content=na}return t.prototype.ngOnInit=function(){var t=this;this.id=this.navParams.get("id"),this.title=this.navParams.get("title"),this.content=this.content.filter(function(e){return e.id===t.id})},t.prototype.goToWiki=function(t){var e=this;this.http.get("./assets/witWiki/"+t.wiki+".json").subscribe(function(t){e.navCtrl.push(ia,{article:t})})},t}(),aa=function(){function t(t,e){this.navCtrl=t,this.sections=ea,this.grid=[],this.msg=e.WIT,this.title=this.msg.TITLE_RAF_ENTRY}return t.prototype.ngOnInit=function(){this.grid=Array(Math.ceil(this.sections.length/2));for(var t=0,e=0;e<this.sections.length;e+=2)this.grid[t]=Array(2),this.sections[e]&&(this.grid[t][0]=this.sections[e]),this.sections[e+1]&&(this.grid[t][1]=this.sections[e+1]),t++},t.prototype.goToSection=function(t){this.navCtrl.push(ra,{id:t.id,title:t.title})},t}(),oa=[{id:1,title:"Clouds, and how to know them",img:"assets/img/wit/cloud/section1.jpg"},{id:2,title:"Know your clouds",img:"assets/img/wit/cloud/section2.jpg"},{id:3,title:"More information to make you cloud-smarter",img:"assets/img/wit/cloud/section3.jpg"}],la=[{id:1,title:"Welcome to the sky!",primaryText:"This app is primarily about things on or in the ground, but what if you’re flying and it’s cloudy? What if you’re on a roadtrip but are 87 miles from ANYTHING WORTH SEEING?",secondaryText:"You might be resenting those fluffy little jerks out your window for coming between you and your geoscientific appetite, or loathing them for being the only thing between you and the endless horizon you have convinced yourself you are enjoying, or, you may be marveling at them for perfectly tracing the exquisite interactions between moisture and lift.\nWhatever your attitude toward them, every cloud has a story for you. And chances are, you are either bored enough or curious enough right now that hearing those stories may be worth your time. So stick around here and learn about clouds, at least until the urge to read Sky Shopper becomes too great, or until you feel like you can go back to hearing your car-mates banter without wanting to eat your own hands.\n\nIn any case, welcome to the sometimes-cloudy sky!",caption:["Patchwork stratocumulus clouds, from above"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/wtts1.jpg"],imgsCredit:["Shane Loeffler"]},{id:1,title:"How much do you like clouds?",primaryText:"This cloud-centric diversion is intended to be a very basic and hopefully practical introduction to the art and science of cloud interpretation. It is nowhere near exhaustive, and in truth, really only scratches the surface of cloud exploration--which should be enough for most users.",secondaryText:"If you are enthusiastic and want to get really good at clouds, you need plenty of practice looking at them. Turn your observations into questions and hypotheses, and then then seek additional information.\n\nReally enthusiastic users who become obsessed, fortunately,  will be able to indulge themselves with the World Meteorological Organization’s handy little, 367-page, two-volume, International Cloud Atlas, the first volume of which contains over 30,000 words, a comprehensive guide to cloud symbology, intricate hand-drawings, and exactly zero photographs. (The second volume is the photographic follow-up, but requires familiarity with the descriptions and symbols in the first volume for full comprehension!)",caption:["Ice wisps fall out from parent cloud fragments"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Cirrus.jpg"],imgsCredit:["John Hain"]},{id:1,title:"Now, about those cloud stories",primaryText:"Sure, every cloud has a story, but some stories are more interesting than others.",secondaryText:"And which part of that story are you seeing? Is the cloud growing? Shrinking? Holding steady? Does it appear to be changing forms?\n\nIf you are new to cloud-gazing, these questions may seem impossible to answer. And in a way, they are, because of course,every cloud dies, only to have its water recycled through the earth-ocean-atmosphere system, eventually resulting in another cloud, at another place and another time. So in that way, the story never ends. But let’s not get too existential here with these clouds and their stories. The ones that we are seeing right now have plenty to tell us about what is happening right where they are, right at this time.",caption:["Cumulus cloud variety pack, Andrew Lake, MN"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Signalclouds.jpg"],imgsCredit:["Kenny Blumenfeld"]},{id:1,title:"What is a cloud?",primaryText:"If you like it straight and kind of boring, then a cloud is a visible mass of water droplets and/or ice crystals, suspended in the air.",secondaryText:"In more convoluted terms, a cloud is the result of a process involving water vapor (the gas form of water) and air motions of some sort. The amount of water vapor and quality of those motions determine the type, size, and life-trajectory of every cloud you see.\n\nWater vapor is always present, but is most abundant over and near large bodies of water (especially oceans), or where winds drive air inland from those moisture sources with little interruption. Not surprisingly, areas far away or cut off from major water bodies tend to be very dry and are often cloudless.\n\nMotions in the atmosphere result from the uneven heating of the earth by the sun, the differences in heat storage capacity between land and water, seasonal and daily cycles of sunlight, pressure differences resulting from these heat imbalances, changes in the effect of gravity on air at different heights above the ground, the rotation of the earth, air passing over varied topography, and plenty of other equally-exciting processes.\n\nBut virtually every cloud you see is there because air motions have acted upon some quantity of water vapor.",caption:["Extreme cold, moisture, and motions combined to make this delicate creature"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/wiac1.jpg"],imgsCredit:["Kenny Blumenfeld"]},{id:1,title:"What every cloud tells you",primaryText:"Every cloud tells you there was too much water vapor, given the temperature (and pressure) of the air that the cloud now occupies.",secondaryText:"For the cloud to form, the relative humidity had to increase to (or even slightly exceed) 100%, and condensation had to begin.\n\nFor a given mass of air, relative humidity increases if a) the amount of water vapor increases, b) the temperature decreases, or c) those two things happen simultaneously. It turns out, though, that cooling a mass of air is far more effective than pumping it full of water vapor, so many clouds form simply because the air cools enough to begin the process of condensation.",caption:["Even this small cloud resulted from an excess of water vapor, given the temperature"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/airplane_cloud.jpg"],imgsCredit:["Nickbar"]},{id:1,title:"Cooling the air to make clouds",primaryText:"The air cools in to the point of condensation by radiation, advection, and through lifting or rising motions.",secondaryText:'"Radiational cooling," is the cooling that occurs on most nights as the heat built up during the day leaves the earth. The layer of air closest to the ground cools the fastest, sometimes reaching condensation and resulting in fog--which is a kind of cloud.\n\nNext we have "advection," which is fancy-talk for "the wind bringing in a different air mass." When the air blows from colder regions, colder air moves in. Large banks of clouds and even precipitation often form behind winter weather systems, as the cold air arrives faster than the moisture departs. Advection is not, however, a sure-fire process for cloud-building, because cold winds are also often dry winds, so cool advection is often associated with dry advection.\n\nLastly, we have lifting or rising motions. When air rises, the pressure on it decreases, so it expands and cools automatically (whereas sinking automatically compresses air and heats it). Whether a pocket of air near the ground gets hot and begins rising, or the wind blows it up a mountainside, cooling of it results every time. Although condensation from all three cooling processes can produce clouds, the vast majority of the world’s precipitation results from lifting processes, meaning that lift is a hidden driver of life on our planet.',caption:["Fog covers the Slovenian valleys, where overnight radiational cooling led to condensation","These clouds formed behind a cold front, in a still-moist environment","Clouds like these are produced by rising air that cools and condenses; you actually see it happening if you watch closely"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/ctatmc1.jpg","assets/img/wit/cloud/thumbnail/ctatmc2.jpg","assets/img/wit/cloud/thumbnail/ctatmc3.jpg"],imgsCredit:["Helena","B. Rockwell","Kenny Blumenfeld"]},{id:1,title:"How to see clouds",primaryText:"So it turns out the animal shapes we were told to identify in the sky don’t really tell us all that much about the weather. Luckily, a less imaginative kind of cloud-shape identification can tell us an awful lot!",secondaryText:'Clouds tend to assume one of three common forms: wispy, sheet-like, or heaped, although there are some combinations too. These basic forms tell us how the clouds were built and what that means about current and even future weather.\n\nOf course, it’s not proper to go around talking about heapy and wispy clouds, because eventually, you will just say "great big heapy cloud," which means that "sheep-looking cloud" isn’t far behind, and then we’re back where we started.\n\nInstead, we have a formalized system for identifying and describing clouds thanks to Luke Howard, who was one of those early 19th century natural-science wonderers. His cloud-naming scheme mimics the way we describe living things, and has survived with just a few modifications and embellishments since its conception.',caption:["Sheet-like clouds with little heaps and wispy clouds all in one view!"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/htsc1.jpg"],imgsCredit:["Shane Loeffler"]},{id:1,title:"How to talk about clouds",primaryText:'Clouds are categorized into a "Linnaean," genus-species system (after Carl Linnaeus, himself an 18th century natural-science wonderer), using Latin, which always sounds more intelligent than, for example, "heapy."',secondaryText:'Like other classification systems, this one is universally accepted, and also somewhat arbitrary. Clouds are categorized according to shape and form, into ten basic genera or groups ("genera," you may recall, is plural for "genus").\n\nEach genus tells us something about the cloud’s shape, and its name always includes a derivative of at least one of the following major cloud types: Cirrus, which is the wispy cloud; Stratus, which is the sheet-like or layered cloud; or Cumulus, which is the heaped or puffy cloud. Each of those basic types is also its own genus, accounting for three of the ten.\n\nThe three major cloud types are generally assumed to occupy certain parts of the sky:\nCirrus are high clouds, found at altitudes of at least 3 mi (~5 km), and often 2-3 times that height\nStratus are low clouds, usually forming between the ground and 1.2 mi (~ 2km)\nCumulus clouds are also low and form in the upper half or so of the layer common to stratus clouds\n\nHowever, some cumulus and stratus clouds can form higher up, between 1.2 and 3 mi (~2-5 km). Thus, two cloud genera are named for these "middle" clouds with the appropriate Latin suffix: Altostratus and Altocumulus.\n\n(If you were wondering, cirrus clouds have been banned for life from the middle altitudes, and hence, there will never be Altocirrus.)\n\nThree additional cloud genera combine two of the basic forms, giving us Cirrocumulus (wispy and heapy), Cirrostratus (wispy but sheet-like), and Stratocumulus (sheet-like and heapy).\n\nThe final two genera are for clouds that produce precipitation, which means we get to introduce the funny-sounding root, "nimbus." We apply it once again to stratus and cumulus, giving us Nimbostratus and Cumulonimbus, respectively.\n\n(Even though precipitation can fall from cirrus clouds, sanctions against them continue, so no Nimbocirrus or Cirronimbus cloud exists.)',caption:[null],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Cloudtypes.png"],imgsCredit:["Valentin de Bruyn, used under Creative Commons 3.0, retrieved from https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/Cloud_types_en.svg/2000px-Cloud_types_en.svg.png"]},{id:1,title:"How to talk about clouds even more",primaryText:'A given cloud genus may have several "species," which in this case means "varieties," rather than "a common group of living organisms," as we might assume. We often think of species as living things of some sort, but as the root of "specific," the term really just refers to a common manifestation or instance of a given genus, in this case a cloud.',secondaryText:'As an example, cumulus clouds can be small, medium or large, and so each of those sizes is its own species (humilis, mediocris, and congestus)--each a specific instance of the genus Cumulus.\n\nSo, there may be just 10 basic cloud types, but there are 26 different species. With the exception of altostratus and nimbostratus, every cloud type has at least two distinct species.\n\nWhen we add in the fourteen defined "varieties" of clouds, many of which can be applied to multiple cloud species, then consider the occasional "supplementary features and accessory clouds," and lastly, the all-important "mother-cloud" classification (which tells us that the cloud we are seeing descended or mutated from a different cloud type, yielding simple terms like Stratocumulus cumulogenitus), we end up with limitless options for describing clouds.\n\nFortunately, all that a scientifically-curious person who is not going to become a meteorologist or a professional cloud-type explainer needs to know, initially at least, are the ten basic genera. The two exceptions are for cumulus and altocumulus clouds, both of which have species that can be used to diagnose and forecast very different conditions.',caption:["Altocumulus lenticularis, a hypnotic species common to mountainous areas and otherwise not covered in the app"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Lenticular_hawaii.gif"],imgsCredit:["Public domain"]},{id:2,title:"Cirrus",primaryText:'Cirrus clouds are made entirely of ice crystals, can be found high in the sky, and appear wispy, thin, and translucent--or some combination thereof. They may look like feathers or "swooshes," because the tiny ice crystals that make them up get blasted into fast-looking shapes by very strong high-altitude winds.',secondaryText:'We find cirrus at altitudes above 3 miles (5 km), and especially above 5 miles (8 km), where the air is sufficiently cold that any condensation will immediately form ice crystals (this is actually not condensation but "deposition," which is when a gas becomes a solid without having been in the liquid phase first). In such cold conditions, it doesn\'t take much water vapor bring a volume air to the point of condensation (again, deposition), so the overall amount of water in cirrus clouds is quite low. As a result, they do not precipitate, although technically, the "anvil" portion of a cumulonimbus (thunderstorm cloud) is a mass of cirriform clouds that can "rain out" ice crystals as the parent cloud dissipates.\n\nYou generally see cirrus in fair weather, under otherwise clear skies. Their association with strong winds aloft may signal that the jet stream is nearly overhead, which could mean a turn toward inclement weather in 1-3 days. Cirrus are often so high, that even when you are flying, you have to look up to see them!',caption:["Cirrus formations over Bavaria","Cirrus clouds above flight level"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Cirrus_Bavaria.jpg","assets/img/wit/cloud/thumbnail/c2.jpg"],imgsCredit:["Stefan Schweihofer","Shane Loeffler"]},{id:2,title:"Stratus",primaryText:"Appearing as continuous sheets of monochromatic gray, Stratus clouds assure us that we should go back to bed.",secondaryText:'Stratus clouds usually cover most or all of the sky, and tell us to expect more of the same until an air mass with lower relative humidity arrives. They form when an entire layer of air cools to the point of condensation, and almost always in the absence of instability. Condensation without instability limits upward motions and ensures that little more than a bank of mist will result. Indeed, stratus clouds are just sheets of water droplets. They are low clouds, and can even hug the ground as fog.\n\nSome stratus clouds form as air is blown upslope and cools; others may form as cold air spreads in behind a retreating weather system, exploiting the leftover moisture; yet others form as cold air settles into low-lying areas. The mechanisms are nearly endless, and as a result, stratus clouds can be found in a wide variety of situations: over land, over the oceans and large lakes, in valleys, near the peaks of mountains, ahead of thermal boundaries, behind thermal boundaries--wherever air cools towards its dew point.\n\nLook for low, continuous sheets, sometimes with rows of lower and darker clouds among them. A large deck may have embedded areas of nimbostratus (precipitating stratus) clouds. Stratus clouds tend to thicken as weather systems approach and thin out as they retreat. In conditions leading to stratus fog, daytime sunlight may begin to reach the earth, warming it, and causing the relative humidity to fall. As this happens, condensed water begins to evaporate and the fog will dissipate from the bottom up, giving the impression that it has "burned up" or "lifted."\n\nAs you fly above them, stratus clouds look remarkably continuous and blanket-like. Even though you will almost certainly see bumps scattered across the blanket, they whole mass of clouds should appear somewhat smooth-toped. Better-formed heaps or cauliflower shapes imply the cloud sheet has cumulus elements and is likely stratocumulus, rather than just stratus.',caption:["A seemingly endless blanket of stratus","A perfect sheet of stratus, showing no texture or definition","Fog north of Hanmer Springs, New Zealand (beneath an altostratus deck)"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/stratus1.jpg","assets/img/wit/cloud/thumbnail/stratus2.jpg","assets/img/wit/cloud/thumbnail/stratus3.jpg"],imgsCredit:["Shane Loeffler","Kenny Blumenfeld","Unknown public domain"]},{id:2,title:"Cumulus clouds: telling you whatever you want to hear",primaryText:'"Cumuliform" clouds (those dominated by the heapy attributes of Cumulus) can mean many different things for the current and developing weather conditions. On one hand, they can foretell perfectly benign weather, and on the other they can warn of violent thunderstorms. It’s easy to find them, but it’s a bit more difficult to understand what they are telling you (versus what you want them to be telling you).',secondaryText:'All cumulus-based clouds provide us with the blueprints to their own development. Those heaps and puffs we see are produced by upwards air currents that cool the air to the point of condensation. In that way, each cumulus cloud traces out the upward air currents and processes that produced it.\n\nThe size of a cumulus cloud is determined by the intensity and velocity of its upwards motions, which are determined by the instability of the air, which itself is determined by the vertical profile of the atmosphere\'s temperature and humidity at that location and time. Cumulus clouds in highly unstable conditions have vigorous upward motions and become powerful thunderstorms, whereas those with far less instability have less total lift and become harmless little puffs.\n\nThe secret to the "success" of a cumulus cloud lies in its ability to ignite a convective chain reaction by releasing heat through condensation. When a pocket of air rises, it cools. If it rises and cools enough, it will reach condensation, which releases stored heat and makes it more likely the rising air will remain warmer than the air around it and will continue rising, cooling, and condensing.\n\nThe likelihood and intensity of the air’s ability to rise, cool and condense is governed by the amount of moisture in the pocket of air, and how quickly the air around it cools with height. A deeply moist air mass that cools rapidly with height will encourage explosive upward motions, resulting in heavy cumulus or even cumulonimbus development, because the rising air easily remains warmer than the air around it, especially after heat is released during condensation. A comparatively dry air mass that cools slowly with height will lead to weaker upward motions, if any at all.\n\nThe cumulus clouds we see merely diagnose the health of the convective processes (the upwards air motions that transfer heat vertically). The slight puffs that dot the skies on pleasant days tell us the convection is weak and shallow. The towering, cauliflower-textured clouds we see during late afternoon on muggy days tell us the convection is strong and deep.\n\nCumuliform clouds are common, because ultimately, convection is common too.\n\nPlease see Humilis, Mediocris, and Congestus for even more information on how to master all that is Cumulus.',caption:["Cumuliform clouds over eastern Colorado"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/cctywywth1.jpg"],imgsCredit:["Shane Loeffler"]},{id:2,title:"Cumulus humilis",primaryText:'"Humilis." That\'s the root of "humiliate," which is fitting, because these diminutive puffballs live in a constant state of embarrassment. They are small, they are benign, and the vast majority of the time, they will be gone by evening. You can’t imagine that any cloud droplet would want that for itself.',secondaryText:'These are the typical "fair-weather" clouds. You will usually find them during daylight hours, most commonly during the warm season, when there is enough heat from the lower atmosphere to lift and cool a pocket of rising air to the point of condensation, creating a little clump that traces out the process. But that’s about all you’re going to see most of the time; there isn’t enough instability for deeper convection.\n\nLook for small, sometimes "shredded" puffs that are wider than they are tall (which isn’t saying much). They often lack definition and have fuzzy edges, though you may see hints of the bubbly, cauliflower-like appearance common to other cumulus species. Even if they seem to dominate the afternoon sky, most of the time they will fade with evening, when the heat from below that fuels them disappears.\n\nOne caution: even massive, intense thunderstorms begin as humilis look-alikes. So keep an eye on them for 5-10 minutes to make sure they aren\'t actually in the early stages of becoming congestus or cumulonimbus clouds. Most of the time they are not, and if that’s the case, carry on.',caption:["Cumulus humilis over a Minnesota lake on a fine day","Small cumulus (humilis) dot the West Virginia sky"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/ch1.jpg","assets/img/wit/cloud/thumbnail/ch2.jpg"],imgsCredit:["B. Rockwell","Shane Loeffler"]},{id:2,title:"Cumulus mediocris",primaryText:"Some cloud droplets are destined for mediocrity, which is a slight upgrade from humiliating oneself constantly (see Cumulus humilis).",secondaryText:'Cumulus mediocris clouds are larger and better-formed than humilis clouds, meaning they have more available moisture, more lift, or both. Thus, they have easier-to-spot updrafts.\n\nLook for heapy clouds that are roughly as tall as they are wide. The convection that generates them is usually robust enough that you can actually see it traced out by the bubbly, cauliflower texture.  \n\nEven though they too are of the "fair-weather" type, and even though they rarely produce precipitation themselves, their heft implies they have some good things going for them, and may be on their way to becoming a congestus or cumulonimbus. If you see these clouds growing taller and maintaining definition, keep an eye on them; they may be bucking for a promotion!',caption:["Cumulus mediocris over the St. Croix River, MN/WI"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/congestus_north.jpg"],imgsCredit:["Kenny Blumenfeld"]},{id:2,title:"Cumulus congestus",primaryText:'Also known as "towering cumulus," this convective cloud means business.',secondaryText:'Cumulus congestus is a "dazzle your friends cloud," because most people see a tall whitish thing, but you see a convective chain reaction that may or may not be propelling itself towards thunderstormhood--the greatest achievement of any cloud.\n\nCumulus congestus clouds provide an immediate diagnosis of potentially stormy conditions. Any cumulonimbus cloud must first pass through the congestus phase, and the amount of time between the two phases can be trivial. In explosively unstable conditions, some congestus towers can be massive in their own right, and are an early-warning sign that a dangerous thunderstorm is about to form.\n\nIf you see a crisp, well-defined congestus tower, you are seeing one that is healthy and growing. The cauliflower or boiling look means that the updraft is still is still expanding the cloud upwards and outwards. If you want to win the Nerd Olympics, pull out a pair of binoculars and watch the cloud expand live, before your eyes. You may also see signs of a smooth, pileus or "cap cloud" forming, which is another sign that a congestus cloud is ready to graduate to cumulonimbus.\n\nIf you no longer see any expanding or rising motions, the updraft (the rising air) is weakening or dying, and that particular cloud will soon take on a fuzzy, ill-defined look. The lack of definition is a clear sign that the tower is losing its punch. Of course, another tower may form in its place and make a run for it. So if you see a congestus, you’ve been put on notice that thunderstorms may form shortly.',caption:["Massive congestus near St. Paul, MN","Cumulus congestus on a summer afternoon in central MN"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Towering.jpg","assets/img/wit/cloud/thumbnail/Sibley_towering.jpg"],imgsCredit:["Kenny Blumenfeld","Kenny Blumenfeld"]},{id:2,title:"Cumulonimbus",primaryText:"Life-enabler. Jaw-dropper. Thug of the sky. Cumulonimbus has many street names, because it plays many different roles, almost all having to do with making it rain, hard.",secondaryText:'If you learn only one cloud, learn cumulonimbus. They represent the elegant and life-serving engine of deep moist convection--the same engine that produces the vast majority of the world’s precipitation.\n\nMonsoon rains, tropical cyclones, daily sea breeze thunderstorms, and tropical  rainforest precipitation all come to us courtesy of cumulonimbus clouds. Same with severe convective weather hazards like tornadoes, straight-line winds, hail, and flash-floods. Even the infamous desert "haboob" (dust storm) results from cold cumulonimbus downdrafts that crash into the ground and fan out.\n\nEvery year cumulonimbus clouds cost the world billions upon billions of dollars, while supplying us with water and breathing life into our delicate and interconnected ecosystems. They are, without a doubt, the most important clouds on our planet.\n\nCumulonimbus clouds are also, as luck would have it, extremely easy to spot, especially from a distance. They are the largest of the cumuliform clouds, and they represent the final step in cumulus development--a step that is often not achieved.\n\nFrom a distance, a cumulonimbus looks like a mass of  overgrown cumulus clouds, but with a flattened top that results from the convective updraft reaching the tropopause--a layer at the top of the troposphere where temperature no longer decreases with height. Here, rising air will eventually cool to the temperature of the air around it, meaning it can rise no further, and so the top of the cloud will begin to flatten out.\n\nAssuming the convective processes at lower altitudes are still strong, the updraft(s) will continue to produce cumuliform clouds that grow right up to the tropopause, where they too will eventually flatten out. The whole process leads to an an outward-expanding, nearly circular lid that often covers much more horizontal distance than the parent cloud itself. This is what leads to the classic "anvil" shape of many cumulonimbus clouds. That anvil, for what it’s worth, is frequently cirriform--made up primarily of ice crystals because of the extremely cold environment into which the anvil expands.\n\nAs with cumulus mediocris and especially congestus, the health of a cumulonimbus cloud can be determined through visual clues. A "sharp-edged" or crisp-looking cumulonimbus is at that moment strengthening or maintaining its strength, whereas a mushy-looking or fuzzy one is most certainly in decline.\n\nBy definition, cumulonimbus clouds produce precipitation, which can make identifying them more difficult at close range. Near or beneath a cumulonimbus, a combination of falling precipitation, the cloud base itself, and lower "accessory clouds," can completely obstruct the view of the updrafts. At this range, observers are close enough to the storm to be at serious lightning risk and should get inside immediately.   \n\nAlthough they are often referred to as "thunderstorm clouds" or "thunderheads," cumulonimbus clouds do not always produce lightning and thunder. This is especially true in tropical areas, where the air is often too warm to support ice formation, which is essential for the electrification of storm clouds. Even though tropical cyclones contain some of the most powerful cumulonimbus clouds in the world, lightning is rarely observed with them because of the lack of ice in the clouds.\n\nDo not let geography fool you though. Any cumulonimbus cloud should be assumed to be dangerous. Please beware of lightning. If you hear thunder, the storm is electrified, dangerous, and you are at risk.\n\nA cumulonimbus is a common yet breathtaking sight, and cloud-adorers will stop to pay homage every chance they get.',caption:["Classic cumulonimbus near Callodi, Italy","Cumulonimbus twins over Ho Chi Minh City","Large thunderstorm 100 miles to east top-lit by setting sun","Even a small cumulonimbus up-close looks nothing like it does at a distance"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/cumulonimbus1.jpg","assets/img/wit/cloud/thumbnail/Air_cumulonimbus.jpg","assets/img/wit/cloud/thumbnail/Stpaul3.jpg","assets/img/wit/cloud/thumbnail/Approaching.jpg"],imgsCredit:["C. Langer","Kien Do","Kenny Blumenfeld","Kenny Blumenfeld"]},{id:2,title:"Cirrostratus",primaryText:"A combination of cirrus and stratus, but looking like neither, Cirrostratus clouds are nearly continuous sheets of ice crystals high in the sky.",secondaryText:'With little or no blue sky to provide contrast, cirrostratus clouds can be very difficult to spot, and often just look milky or pasty, creating a halo around the sun or the moon. They generally form when the upper levels of the atmosphere are moistening, which happens in advance of low-pressure systems. Thus, these can be precipitation precursors. So next time you see them, grab a friend, look up in the sky, and say, "Yup, Cirrostratus. Rain [or snow] by this time tomorrow." Then walk away. You will become a legend.',caption:["Veil of cirrostratus tops other clouds"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Cirrostratus.jpg"],imgsCredit:["Unknown public domain"]},{id:2,title:"Cirrocumulus",primaryText:"Take the icy form of cirrus, and the heapy look of cumulus, and poof: you have one of the least consequential clouds out there!",secondaryText:'Cirrocumulus clouds give the high sky a textured appearance, often like "ragged buttons," ripples, or like thin swatches of lambswool or cotton. The "lift" that normally produces cumuliform clouds is not really at play in this case. Instead, it’s really the high-speed "waves" that provide the extremely shallow lift. It may be better to think of these as cirrus clouds on a bumpy, high-speed motorboat ride. If you are flying at cruising altitude and can see multiple cloud layers, cirrocumulus, along with cirrus, will be  will at the top--possibly even higher than the plane!\n\nLike cirrus clouds, cirrocumulus clouds often replace clear skies and may be replaced themselves by cirrostratus and eventually thicker and lower clouds.',caption:["Cirrocumulus darkened by the coming night","Cirrocumulus field with hints of cirrostratus transformation"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Cirrocumulus1.jpg","assets/img/wit/cloud/thumbnail/cirrocumulus2.jpg"],imgsCredit:["Shane Loeffler","J.Rotrekl"]},{id:2,title:"Stratocumulus",primaryText:"Another generally inconsequential cloud type, stratocumulus have more breaks and a little more pop than than a straight-up stratus formation.",secondaryText:'Stratoculumus clouds come in many different arrangements, best described as low, typically-broken sheets of oblong puffs. From below, they tend to have the same patchwork-lambswool look common to cirrocumulus and some altocumulus, but because they are the lowest of the three types, they have larger-looking swatches.\n\nAs the name implies, stratocumulus do exhibit some vertical development, though it is often shallow, keeping the puffs and heaps comparable to those of cumulus humilis and cumulus mediocris at best. Moreover, stratoculumus clouds usually form in only very modest instability, so the cumuliform heaps tend not to be particularly well defined.\n\nFrom above, stratocumululs clouds appears as sheets or extensive "fields" of small cumulus clouds. Their heapy nature and the tendency for small breaks to form among them, differentiate stratocumulus from pure stratus clouds.\n\nStratocumulus form in many different situations, but are most frequently associated with benign or even improving conditions. You may see them in the morning following a stormy night, or as the pressure rises behind a retreating weather system. They rarely produce precipitation, and almost never foretell significantly inclement weather.',caption:["Stratocumulus field, at eye-level","Rows of stratocumulus seen from northeast Minnesota's Sawtooth Mountains"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/s1.jpg","assets/img/wit/cloud/thumbnail/s2.jpg"],imgsCredit:["Shane Loeffler","B.Rockwell"]},{id:2,title:"Nimbostratus",primaryText:"If cumulonimbus is Miami and Manilla, then nimbostratus is Seattle and London. As a precipitating stratus cloud almost entirely devoid of convection, nimbostratus is associated with prolonged bouts of light and moderate precipitation.",secondaryText:"Nimbostratus clouds are generated in extensive sheets, usually embedded within an even larger (mostly non-precipitating) stratus deck, and less frequently around (though not directly beneath) a cumulonimbus cloud. They are most common in the moist but non-convective air masses associated with mid-latitude low pressure systems.  These systems and their associated nimbostratus arrays may take anywhere from six hours to several days to pass through a region, producing seemingly-endless bouts of steady rain or snow. Although nimbostratus clouds can produce light, fleeting showers, they are usually marked by precipitation that begins and ends gradually, and persists for hours or days without sudden changes in intensity.\n\nTemperate, near-coastal areas that are not prone to convective updrafts tend to get the majority of their precipitation from nimbostratus clouds. This stratiform precipitation feeds the temperate rainforest that extends from coastal Oregon and Washington, along the Pacific coast into Alaska. The majority of winter precipitation in North America, Europe, Asian Russia, and North America, is driven by stratiform processes and delivered by nimbostratus clouds.\n\nNimbostratus clouds are difficult to see because the of the lack of contrast between the precipitation area and the cloud bases themselves. They can be difficult to spot at a distance because the gradual nature of the precipitation precludes clear visual definition.",caption:["The most one can hope to see of nimbostratus"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/nimbostratus1.jpg"],imgsCredit:["Henryk Niestrój"]},{id:2,title:"Altostratus",primaryText:'"The cloud of undefined malaise," also know as altostratus, is perhaps the most boring cloud in the world. At least with stratus clouds, you know it could rain. But the featureless altostratus clouds just hang there, casting a pall of bleakness over all that is otherwise decent.',secondaryText:"Altostratus clouds, by definition, form in the mid-levels of the troposphere, and at those altitudes, there simply is not enough water to create exceptionally thick clouds. Altostratus, therefore, lack the vertical depth of lower stratus clouds. Their formation, however, is still governed by layer-wise cooling and condensation, resulting in thin, relatively high sheets of water-droplet clouds that can cover large areas. Subtle variations in the already-scanty atmospheric water content, and/or small-scale sinking motions, can create random breaks in an altostratus cloud mass.\n\nThe thinness of altostratus often allows the sun to shine through, but because there are few if any ice crystals present, we tend not to see a halo. Thus, the presence or lack of a halo can be used to distinguish cirrostratus (halo) from altostratus (no halo). Altostratus clouds are also thicker than cirrostratus, and often mask the sky completely.\n\nWhen you see altostratus clouds, you can expect the next several hours to remain dry, and in many cases, the weather will not change substantially for days. However, they can be a sign that the atmosphere is moistening in advance of a disturbance. In those cases, altostratus may thicken and lower to form stratus and nimbostratus within 24 hours.\n\nAltostratus clouds are at their best around sunrise/sunset, when the diffuse light occasionally catches their relatively high altitudes just so, leaving us with a brightly-colored reward for putting up with them all day.",caption:["A dreary autumn altostratus deck over the Superior National Forest"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Altostratus1.jpg"],imgsCredit:["B.Rockwell"]},{id:2,title:"Altocumulus",primaryText:"The jury is still out on altocumulus clouds: are they really cumuliform clouds but with higher bases, or do they just happen to appear to be cumuliform? This question for the ages will be debated by the gatekeepers of cloud-identifying arcana for generations to come. Or not.",secondaryText:'Altocumulus clouds certainly earn more of their "cumulus" than, say, cirrocumulus, but these are not simply cumulus clouds begun at a higher altitude. The most common type of altocumulus clouds look  larger and lower than cirrocumulus, or a smaller and higher than stratocumulus--appearing as rows, bumps, "buttons," and "streets," any of which can be formed by waves or ripples getting ahold of air near the point of condensation. They are usually composed of water droplets, but ice crystals can be found in some of the higher/colder varieties.\n\nThere is one species that is distinctly cumuliform, and that is Altocumulus castellanus--a mouthful named for its "castle-like" towers. These clouds are like lofted and skinny mediocris-congestus hybrids, whose updrafts inform us that the atmosphere is convectively unstable, and whose relatively high bases (between 1.2 and 3 mi., or ~2-5 km) inform us that the instability is in the middle-altitudes and is not yet deep. Yet.\n\nWe usually see these clouds between mid-morning and mid-afternoon, before the surface-based heating and instability has maximized. In that way, altocumulus catellanus clouds tell us to watch for deeper convection, and that trouble may lie ahead.',caption:["Harmless altocumulus over Sweden","Altocumulus castellanus, with their skinny, turret-like updraft towers"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/Altocumulus1.jpg","assets/img/wit/cloud/thumbnail/Castellanus.jpg"],imgsCredit:["K. Valtonen","S. Petty"]},{id:3,title:"Spotting precipitation like a pro",primaryText:"All this cloud information may be blowing your minds, but when clouds are racing towards you, it might be good to know if you are about to get soaked. Here are some very basic tips for seeing precipitation, before it gets to you (in no particular order).",secondaryText:'This may seem obvious, but you want to look at the area between the base of the cloud and the ground, because that’s where you will see precipitation.\n\nPrecipitation restricts visibility, it has to. So you can get a sense of the precipitation intensity (and/or duration) by observing the extent to which visibility is limited beneath the cloud base. Darkness in this area is also a good indicator of limited visibility and intensity, because a heavy or large precipitation area will prevent light from passing through, thereby appearing dark.\n\nUse landscape features, and whether they are or are not obscured, to help you gauge the distance of the precipitation from you.\n\nLow visibility also limits the "texture" of the background, so precipitation areas therefore appear smooth, especially compared to the clouds around them.   \n\nAlthough precipitation areas will look darker than clear air, they are almost always lighter in color, sometimes much lighter, than the clouds immediately around them. So sharp contrast can be an excellent precipitation indicator.\n\nHere’s a great field trick that will impress your companions: if dark clouds are approaching and it is going to rain, the rain (or at least the heaviest of it) will begin, as or just after the darkest clouds pass. You can often find a sharp line delineating the darker "accessory clouds" from the lighter, smooth-looking precipitation area advancing towards you, and that line also marks the beginning of (the heaviest) precipitation.\n\nIsolated precipitation areas or pockets of more intense precipitation will appear as "shafts" of columns, sometimes looking like they have been "blasted" down from the cloud base.\n\nDefinition is, as with cumuliform clouds, an intensity indicator. The more sharply or clearly defined the precipitation area (based on its smoothness, contrast, visibility restrictions etc), the heavier it will be and/or the longer it will last.\n\nShafts of white, sometimes within a larger and darker precipitation area, may indicate that hail, snow, or some other form of frozen precipitation is falling.\n\nOf course, please beware of lightning, which is a frequent threat associated with precipitating clouds, especially during the warm season in continental, mountainous, tropical and sub-tropical, and even some desert regions. If you hear thunder, the storm is electrified, dangerous, and you are at risk.',caption:["Cold showers over the Tetons, Wyoming","A clean break in the rain, Red Wing, MN","Rain with an approaching thunderstorm","Raining, but not enough to obscure the setting sun!","A hail streak within an intense afternoon thunderstorm along the St. Croix River"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/splap1.jpg","assets/img/wit/cloud/thumbnail/Rain1.jpg","assets/img/wit/cloud/thumbnail/splap2.jpg","assets/img/wit/cloud/thumbnail/splap3.jpg","assets/img/wit/cloud/thumbnail/Hailstreak.jpg"],imgsCredit:["Kenny Blumenfeld","Kenny Blumenfeld","Kenny Blumenfeld","Kenny Blumenfeld","Kenny Blumenfeld"]},{id:3,title:"The Myth of the Dark Cloud",primaryText:'Point out a bright white congestus formation to someone and then exclaim, "ooh, that cloud might become a thunderstorm," and you face a 70% chance of being dismissed out of hand, in deference to the pervasive wisdom that storms can only come from dark clouds.',secondaryText:"Before you laugh out loud at that reasoning, try some compassion: people who already have the deficiency of not being interested in clouds are simply unable to understand them. Or maybe they are interested but haven’t yet learned much. Moreover, even with a cloud-interest deficiency, a person could still, under some circumstances, show decency and intelligence in other areas. So there is no reason to be rude.\n\nInstead, you might explain that of course the sky does darken as a storm approaches, but that is because the storm is putting an awful lot of water, and sometimes even ice, between you and the sun. Continue by saying that as the light enters the cloud, it gets absorbed and scattered (refracted) by the busy droplets and ice crystals, which not only exist, but also are moving frenetically. The bigger the storm, you tell them, the less originating light makes it to you, and the darker the clouds will appear.\n\nAnd then you turn the corner. From beneath or inside a thunderstorm, the sky looks exactly as your simple friend says. But from a distance, it has a completely different look.\n\nThis is your opportunity to enlighten and possibly bore them to tears about cumuliform clouds (especially congestus and cumulonimbus), which accompany almost all thunderstorms, but can scarcely be seen from below.\n\nGiven enough distance, we can see congestus and cumulonimbus clouds just fine, and with sunlight shining on them, they will appear white, because they reflect the majority of the sunlight back to us. At greater distances they will appear yellowish or even pink (in the evening especially), but will retain their billowy and heapy looks, irrespective of color.\n\nSo, you conclude, thunderstorms affecting us are indeed accompanied by darkening skies. But from a distance, those same clouds have a very different look (and you gesture to the cumulonimbus cloud that had been cumulus congestus when the whole debate began).\n\nAnd then you walk away, with just a hint of victorious swagger.",caption:["Sure, it probably is really dark underneath this thing; not from here though!"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/tmotdc1.jpg"],imgsCredit:["Sandid"]},{id:3,title:"Boundary Issues",primaryText:"It’s as true with clouds as it is with everything else: boundaries are where things happen.",secondaryText:'It’s not going to take very much cloud-gazing for you to notice clouds over here but not over there, or some sort of sharp demarcation between clouds and no clouds. Of course, observation is only the first part of inquiry, so naturally you may wonder, "why?"\n\nThe correct answer always will lie deep within meteorology and cloud microphysics, but for far less effort, money, and anguish, you can just blame it on "boundaries."\n\nIndeed, boundaries--whether in the air or on the landscape-- can produce, maintain, organize, and destroy clouds.\n\nAs the air changes temperature or moisture content, it also changes its ability to produce and maintain clouds. Warm and moist air masses often produce numerous convective (cumuliform) clouds; cool and moist air masses lead to stratiform clouds; hot and dry air masses yield only isolated cumuliform clouds, if any at all; and cold and dry air masses produce sinking motions that erode clouds and clear the skies.\n\nWe are most familiar with air mass changes that take place at the surface of the earth, but changes in air mass quality occur throughout the troposphere. At any level, boundaries between different air masses are also boundaries between different cloud formation and destruction zones.\n\nSimilarly, landscape features act like boundaries too, though perhaps more subtly. The flow of air across varying topography can encourage or discourage cloud formation. For instance, as air is forced up a mountain, it must cool, which increases its relative humidity, and its ability to generate clouds. When it is forced down a hill, the opposite happens, leaving us with dry and less-cloudy skies on one side of the mountain versus wetter and cloudier conditions on the other.\n\nThe world presents us with countless other examples of air mass and topographic boundaries, but the same principles hold no matter what you observe. Wherever you see clouds, there must be sufficient condensation (or deposition) to support them, and the kinds of clouds present can be used to diagnose how and why the condensation (or deposition) occurred. (Please refer to everything else in this part of the app for further information.)\n\nIf you see no clouds, the moisture and/or the processes to support cloud formation must be lacking.\n\nAs air masses and landscape features change, so do the capacities for building certain types of clouds. The patterns we see reflected in the cloud cover merely point us to where the changes are most meaningful. It’s all about the boundaries, indeed.',caption:["A sharp stratus boundary over the Great Plains"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/bi1.jpg"],imgsCredit:["Shane Loeffler"]},{id:3,title:"Turbulence yes, danger no",primaryText:"Some users of this app are in flight right now, which means that some number of them are losing their minds over ALL THAT TURBULENCE! If you are among them, this section is for you. Let’s start by loosening our grip on the armrest.",secondaryText:'First, know that aircraft are designed to withstand far more turbulence than they ever experience, and far more than your flight is experiencing right now. Turbulence is exceptionally common, and is not an aircraft safety issue.\n\nOn the inside of the plane, where all the passengers are, moderate or severe turbulence can cause people to lose balance in the aisles or develop motion sickness. So it is definitely a flyer experience and flyer comfort issue, but NOT an aircraft safety one. Sure, you might use the sad paper bag in the seat-back in front of you, but the airplane is going to be fine.\n\nIt might help to think of turbulence as one side-effect of the miracle of flight. Airplanes exploit laws of physics to fly through the air, which you may recall is a fluid jam-packed with currents and waves. When your plane encounters the waves, you experience turbulence.\n\nIf we could drop some dye into the air, we would be able to see all of its infinite motions. Instead, however, we have to contend with its invisibility, which is probably the main reason turbulence freaks us out. If we could see the waves in front of and around the aircraft, we’d have a much more intuitive sense of how the whole thing works--it’s much more like a boat than most people would guess.\n\nTurbulence is caused by anything that forces the air to develop even slightly vertical motions. As air passes over mountains, it has to go up, and then down, so mountainous areas are great sources of turbulence. Hot, sunny days encourage pockets of intense heating near the ground, which usually leads to rising "thermals"--another source of turbulence. Cold fronts associated with low pressure systems plow into to the warmer air masses ahead of them, giving the warm air a free ride skyward. Any condition that favors the development of thunderstorms is inherently turbulent. In fact, conditions conducive to the development of cumuliform clouds must therefore have rising motions and turbulence too. Anything anything that makes the air go up and down a little, is a source of turbulence.\n\nTurbulence is an immensely normal result of having an atmosphere, and your airplane can handle it. Whether you can is another story, but at least you can relax knowing the airplane itself is going to be okay.',caption:["This won't happen, but even if it does, see how the plane is still level?"],wiki:null,imgs:["assets/img/wit/cloud/thumbnail/turbulent_flyer.jpg"],imgsCredit:[null]}],sa=function(){function t(t){this.navParams=t,this.content=la}return t.prototype.ngOnInit=function(){var t=this;this.id=this.navParams.get("id"),this.title=this.navParams.get("title"),this.content=this.content.filter(function(e){return e.id===t.id})},t}(),ua=function(){function t(t,e){this.navCtrl=t,this.sections=oa,this.msg=e.WIT,this.title=this.msg.TITLE_CLOUD_ENTRY}return t.prototype.goToSection=function(t){this.navCtrl.push(sa,{id:t.id,title:t.title})},t}(),ca=function(){function t(t,e,n,i){this.navCtrl=t,this.ga=e,this.backbuttonService=n,this.msg=i.WIT,this.landTitle=this.msg.TITLE_LANDSCAPE,this.cloudTitle=this.msg.TITLE_CLOUD}return t.prototype.openWITSection=function(t){"landscape"===t&&(this.navCtrl.push(aa),this.ga.trackView("Landscape")),"clouds"===t&&(this.navCtrl.push(ua),this.ga.trackView("Clouds"))},t.prototype.ionViewWillEnter=function(){this.ga.trackView("What is that?"),this.backbuttonService.pushPage(Ai,this.navCtrl)},t}(),pa=function(){function t(t,e,n,i,r,a,o,l,s,u){this.mapTileServ=t,this.deleteServ=e,this.loadServ=n,this.stateServ=i,this.eventServ=r,this.ionUIServ=a,this.ga=o,this.backbuttonService=l,this.navCtrl=s,this.pathList=[],this.msg=u.SAVE,this.title=this.msg.TITLE,this.contentMessage=this.msg.CONTENT_MESSAGE}return t.prototype.ionViewWillEnter=function(){var t=this;this.pathList=[];var e=this.ionUIServ.startSpinner();this.loadServ.loadRegionIndexList().then(function(n){t.pathList=n,t.ionUIServ.stopSpinner(e)},function(n){t.ionUIServ.stopSpinner(e)}),this.ga.trackView("Saved"),this.backbuttonService.pushPage(Li,this.navCtrl)},t.prototype.getList=function(){return this.pathList},t.prototype.openOptions=function(t,e){t.setElementClass("active-sliding",!0),t.setElementClass("active-slide",!0),t.setElementClass("active-options-right",!0),e.setElementStyle("transform","translate3d(-241px, 0px, 0px)")},t.prototype.load=function(t){var e=this;this.eventServ.publishEvent("mapClear"),this.eventServ.publishEvent("tabToMap"),this.stateServ.setMapState(5);var n=this.ionUIServ.startSpinner();this.loadServ.loadPath(t).then(function(i){if(e.stateServ.setMapState(6),t.options&&t.options.tileTypes&&t.options.tileTypes.length>0){for(var r=0,a=e.mapTileServ.getTiles("base");r<a.length;r++){-1==t.options.tileTypes.indexOf((s=a[r]).getId())?s.setEnabled(!1):s.setEnabled(!0)}if(!e.mapTileServ.getCurrentBaseTile().getEnabled())for(var o=0,l=e.mapTileServ.getTiles("base");o<l.length;o++){var s;if((s=l[o]).getEnabled()){e.mapTileServ.setCurrentBaseTile(s);break}}for(var u=[],c=0,p=e.mapTileServ.getTiles("dataset");c<p.length;c++){var h=p[c];-1==t.options.tileTypes.indexOf(h.getId())?h.setEnabled(!1):(h.setEnabled(!0),u.push(h))}e.mapTileServ.setCurrentDatasetTile(u),e.mapTileServ.setOfflineDirectory(t.path),e.mapTileServ.setOffline(!0)}e.eventServ.publishEvent("focusOnRegion"),e.ionUIServ.stopSpinner(n),e.ga.trackEvent("Map","Saved Load Succeeded")},function(t){e.eventServ.publishEvent("mapClear"),e.ionUIServ.stopSpinner(n),t||(t=e.msg.ALERT_LOAD_CONTENT),e.ionUIServ.createAlert(e.msg.ALERT_LOAD_TITLE,t),e.ga.trackEvent("Map","Saved Load Failed")})},t.prototype.delete=function(t,e){var n=this;this.ionUIServ.createDialog(this.msg.DIALOG_DELETE_TITLE,this.msg.DIALOG_DELETE_CONTENT,this.msg.DIALOG_DELETE_OK,this.msg.DIALOG_DELETE_NO,function(){n.ga.trackEvent("Map","Saved Map Deleted");var i=n.ionUIServ.startSpinner();n.deleteServ.deletePath(t).then(function(t){n.pathList.splice(e,1),n.ionUIServ.stopSpinner(i)},function(t){n.ionUIServ.stopSpinner(i),n.ionUIServ.createAlert(n.msg.ALERT_DELETE_TITLE,n.msg.ALERT_DELETE_CONTENT)})},function(){})},t}(),ha=function(){function t(t,e,n){this.fcConfig=t,this.ga=e,this.iab=n,this.version=this.fcConfig.VERSION}return t.prototype.ionViewWillEnter=function(){this.ga.trackView("About")},t.prototype.getVersion=function(){return this.version},t.prototype.openUrl=function(t,e){this.iab.create(t,1==e?"_blank":"_system")},t}(),da=function(){function t(t,e){this.ga=t,this.iab=e,this.faqs=[{question:"How do I use Flyover Country® (FC)?",answer:"From the map tab (center), press the large button in the lower middle with a ‘+’ sign in it (if there is content already on the map, you may need to press the ‘x’ in the upper right to clear the map first).  The ‘+’ button will bring up a new screen where you can choose whether you’re travelling by air or foot and select which data sources to load.  Next, choose to build your path by tapping locations on the map, or for searching for locations along your route. <br><br>Tapping: If you’ve chosen to tap the map to enter your path, just tap your starting location and ending destination.  You can tap as many points as needed along the way.  Press the large middle button to load data.<br><br>Searching: Enter the name of your starting location, destination, and any locations between.  If you’re in ground mode, the app will route you along the shortest road route; if you’re in flight mode it will use the great circle path.  Press the ‘create path’ button to load data.<br><br>Saving offline:  Once you’ve loaded data onto the map using the above steps, press the main lower middle button on the map to begin the saving process.  This will bring up a new window that allows you to name the flight path and choose which base maps and data sets to save offline.  Saving usually takes a few minutes.  While saving, do not leave the saving screen or navigate away from the Flyover Country app.<br><br>Loading a saved path: Tap the ‘saved’ tab (computer disk, second from right) and select the path you want to load."},{question:"Does my phone’s GPS work in airplane mode? Is it legal?",answer:"Your phone is only receiving a GPS signal, not transmitting anything, and so it’s safe and legal. Enabling airplane mode does not turn off your GPS. Some users with older phones have reported problems getting a GPS fix on their positions while flying; this may be due to the plane’s speed relative to the phone’s ability to update.  Newer phones have no such reported issues.<br><br>GPS works best from the window seat.  If you lose your GPS position fix, put your phone close to window for a minute or so and you should pick up enough satellites to reestablish it."},{question:"Why is my position not showing up on screen?",answer:"Make sure that the GPS option in the settings menu is toggled to the on position and that you have granted FC permission to use your location data (this is prompted when you first run the app, but is also located in your phone’s settings menu)."},{question:"I’ve tried everything and still can’t get a GPS signal.",answer:"FC relies on the quality of the GPS receiver in your device. Some, especially older, devices may not have a sensitive enough GPS chip to get a consistent satellite signal while flying at high speeds and surrounded by metal high in the sky. However, most phones we’ve tested have successfully acquired a signal, so keep trying!"},{question:"I keep getting errors while saving.",answer:"Try breaking your trip into multiple shorter legs and saving them individually."},{question:"Can FC fix my position relative to the map?",answer:"Yes! Navigation mode (button with arrow symbol in lower right of map) centers your position and displays it as a blue arrowhead. The map will be oriented with your direction of travel in the up position (so that points of interest to your right in real life will be to the right of the symbol on your screen). In this mode you can zoom in and out but can’t move the map around. To exit navigation mode, tap the arrow in the lower right again. Your position will turn back into a dot, up will be north again, and you’ll be able to move the map around."},{question:"What’s the difference between plane and car/foot trip modes?",answer:"There are two differences: the size of the buffer strip, and the level of detail of the base maps that are saved offline. In plane mode, the buffer strip is about 200 miles on either side of your path (from 30,000 feet in the air you can see about 200 miles to the horizon). In car/foot mode, the buffer strip is about 20 miles on either side of your path.  Entering a path by searching for locations routes you along roads, while flight mode uses the great circle path."},{question:"Can I make a path with more than two points?",answer:"Yes! You can click as many points as you want before you load your path. Go ahead and follow roads, geologic contacts, state lines, and shorelines; draw your path in a circle or a heart shape and fill it in if you like. Also see the FAQ about the differences between plane vs. car/foot trip modes."},{question:"Why is the map white?",answer:"If you’re offline, make sure the basemap is set to one of the tile types that you have saved and that you are viewing an area within the saved path you have loaded."},{question:"Why is the base map fuzzy when I zoom in?",answer:"We only save basemap tiles down to a certain zoom level. Each time you zoom in to a finer level, the number of tiles for a particular path quadruples, so download sizes increase rapidly.  If you’re online you can view higher zoom levels."},{question:"Why don't I see anything when I open or return to the app?",answer:"You may be at a zoom level for which you don’t have map tiles saved or displayed, or you may be viewing an area off of the map strip you have saved. Zoom in or out, or move the map around.  Make sure you’ve loaded a saved path if you’re offline"},{question:"How do I change basemaps?",answer:"Satellite, street, and terrain maps are available. To choose, click on the layer symbol in the upper right of the map screen. You can choose to save multiple base maps when you save a path."},{question:"Can I view my speed and altitude?",answer:"Yes! Once you’ve got a GPS signal, your speed and altitude will show up in the upper left hand corner of the map."},{question:"What about failures?",answer:"There are a number of reasons a service or save might fail. FC relies on many separate databases and systems to work properly, and sometimes these services are down or undergoing maintenance, or your path may be so long that the request times out. Double check your connection to the internet while loading data to save offline, and if the problem persists, contact us and report the bug!"},{question:"Does FC work outside North America?",answer:"Yes! FC works worldwide."},{question:'Why "Flyover Country®"?',answer:"It’s a bit tongue-in-cheek. It describes one of the purposes of the app, of course, but “Flyover Country” is also a usually-derogatory term for the part of the United States between the east and west coasts - the part that the chic people never see (or would want to see) closer than from the airplane seat. We’re from Minnesota, and we love it (and the rest of the rich, beautiful, interesting midcontinent), and so we’re co-opting the term."},{question:"Can I put my own data in it?",answer:"Yes, we host field trip guides and other georeferenced “custom content” whose authors agree to a Creative Commons Attribution 4.0 International license.  Please contact Amy or Shane (amyrbo@umn.edu, Loeff081@d.umn.edu) to set up an account.<br><br>  Where appropriate, though, we prefer that you do the following: (1) Datasets: The best approach is to submit them to the appropriate database so that FC can access them - and everyone else can too! We’re big believers in public databases, because databases and the people who run them are what makes FC possible. (2) Narratives or articles: If appropriate, we encourage you to add them to Wikipedia! As with public databases above, if you add them to Wikipedia, they will be curated, formatted in a standard way, and best of all, available to everyone. "},{question:"What about data besides geology?",answer:"The possibilities are endless – history tours, architectural tours, points of interest along historic highways – for actual or virtual field trips."},{question:"I have an idea for an education/outreach project that uses Flyover Country®.",answer:"Great! Let’s talk! We have already worked with scientists to develop FC outreach modules for their scientific projects, and part of our mandate is to do more of it. You can easily plug into FC as part of the Broader Impacts activities for your NSF proposal. Email Amy at amyrbo@umn.edu to discuss your ideas at any stage of development."},{question:"Who pays for FC?",answer:"The National Science Foundation (NSF) has awarded grants to Amy Myrbo, Shane Loeffler, and Reed McEwan at the University of Minnesota, and colleagues at other institutions, to build the app for geoscience outreach, research, citizen science, and undergraduate education. Amy is supported by two additional NSF grants that fund her time to work on the app. A full list of award numbers, with links to the abstracts on the NSF website, is available at flyovercountry.io."},{question:"How do I report a bug?",answer:"We hate bugs, but we love bug reports. We’re a small team, so we can only test FC on a limited number of devices and in a small sampling of situations. If you find something isn’t working right or if you’ve thought of a way to make something better, please don’t hesitate to email Shane at Loeff081@d.umn.edu"}]}return t.prototype.ionViewWillEnter=function(){this.ga.trackView("FAQ");for(var t=0;t<this.faqs.length;t++)null==this.faqs.showContent&&(this.faqs.showContent=!1)},t}(),fa=function(){function t(t,e,n,i,r,a){this.stateServ=t,this.navCtrl=e,this.ga=n,this.iab=i,this.backbuttonService=r,this.speedAltOn=!0,this.gpsOn=this.stateServ.getGpsEnabled(),this.units=this.stateServ.getUnit(),this.tooltipsOn=this.stateServ.getTooltipsOn(),this.msg=a.SETTING,this.gpsTitle=this.msg.GPS_TITLE,this.gpsLocation=this.msg.GPS_LOCATION,this.gpsSpeed=this.msg.GPS_SPEED,this.helpTitle=this.msg.HELP_TITLE,this.helpTooltip=this.msg.HELP_TOOLTIP,this.unitTitle=this.msg.UNIT_TITLE,this.unitMetric=this.msg.UNIT_METRIC,this.unitImperial=this.msg.UNIT_IMPERIAL,this.aboutTitle=this.msg.ABOUT_TITLE,this.aboutFC=this.msg.ABOUT_FC,this.aboutFeedback=this.msg.ABOUT_FEEDBACK}return t.prototype.changeGpsOn=function(){this.gpsOn=!this.gpsOn,this.stateServ.setGpsEnabled(this.gpsOn)},t.prototype.changedUnits=function(){this.stateServ.setUnit(this.units),this.ga.trackEvent("Units",this.units)},t.prototype.changeSpeedAltOn=function(){this.speedAltOn=!this.speedAltOn,this.stateServ.setSpeedAltEnabled(this.speedAltOn)},t.prototype.changeTootipsOn=function(){this.tooltipsOn=!this.tooltipsOn,this.stateServ.setTooltipsOn(this.tooltipsOn)},t.prototype.goToAbout=function(){this.navCtrl.push(ha)},t.prototype.goToFAQ=function(){this.navCtrl.push(da)},t.prototype.ionViewWillEnter=function(){this.ga.trackView("Settings"),this.backbuttonService.pushPage(zi,this.navCtrl)},t.prototype.provideFeedback=function(){this.ga.trackView("Feedback form");this.iab.create("https://docs.google.com/a/d.umn.edu/forms/d/1I_obk_G3jYAEIhPd9kYTIB0Ouy0Qg2vDHCQpdJPsL9o/viewform","_system")},t.prototype.suggestFieldGuide=function(){this.ga.trackView("Suggest field guide form");this.iab.create("https://docs.google.com/forms/d/e/1FAIpQLSeTjqEzkyorbHw5j8Jw9wbrzfNCRRvqEsea7rvlsbYeYAATPA/viewform","_system")},t}(),ma=function(){function t(t,e,n,i){var r=this;this.stateServ=t,this.eventServ=e,this.toastCtrl=n,this.tabs=[{name:"fieldGuidePage",root:ta,title:"Field trip guides",icon:"icon-cust-rockHammer"},{name:"witPage",root:ca,title:"What is that?",icon:"icon-cust-openBook"},{name:"mapPage",root:Qr,title:"Map",icon:"icon-cust-map"},{name:"savedPage",root:pa,title:"Saved",icon:"icon-cust-savedStack"},{name:"settingPage",root:fa,title:"Settings",icon:"icon-cust-settings"}],this.msg=i.TAB,this.stateServ.isTabState(!0)&&(this.selected=2,this.tabFabVisible=!0),this.stateServ.getTabStateSubject().subscribe(function(t){t?6==r.stateServ.getMapState()?(r.hideTabFab(),r.enableCenterTab()):(r.showTabFab(),r.disableCenterTab()):(r.hideTabFab(),r.enableCenterTab())}),this.stateServ.getMapStateSubject().subscribe(function(t){switch(t){case 0:r.showIcon="add",r.stateServ.setTabState(!0);break;case 1:r.showIcon="load";break;case 2:case 3:r.showIcon="spinner";break;case 4:r.showIcon="save";break;case 5:r.showIcon="";break;case 6:r.showIcon="",r.stateServ.setTabState(!1)}}),this.eventServ.createEventListener("tabToMap",function(){r.fcTabs.select(2),r.tabClick("mapPage")}),this.eventServ.createEventListener("fieldtriplist",function(t){if(t){for(var e in t.getProperties())if("guides"==e){var n=t.getProperties()[e];n.getProperty()&&Array.isArray(n.getProperty())&&n.getProperty().length>0&&(r.fieldtripGuideBadge=n.getProperty().length,r.toastCtrl.create({message:r.msg.TOAST_MESSAGE,duration:2500,position:"top"}).present());break}}else r.fieldtripGuideBadge=null})}return t.prototype.ionViewDidEnter=function(){Di.tabs=this.fcTabs},t.prototype.getBadge=function(t){return"fieldGuidePage"==t?this.fieldtripGuideBadge:null},t.prototype.tabClick=function(t){this.stateServ.setTabState("mapPage"==t)},t.prototype.tabFabClicked=function(){this.stateServ.isTabState(!0)?this.eventServ.publishEvent("tabFabClick"):this.stateServ.setTabState(!0)},t.prototype.isShowTabFab=function(){return this.tabFabVisible},t.prototype.showTabFab=function(){this.tabFabVisible=!0,this.disableCenterTab()},t.prototype.hideTabFab=function(){this.tabFabVisible=!1,this.enableCenterTab()},t.prototype.disableCenterTab=function(){this.fcTab.forEach(function(t){2==t.index&&(t._isEnabled=!1,t.tabIcon="")})},t.prototype.enableCenterTab=function(){this.fcTab.forEach(function(t){2==t.index&&(t._isEnabled=!0,t.tabIcon="md-map")})},t}(),ga=function(){return function(t){this.ionUIServ=t,this.ionUIServ.createAlert("Fatal Error","Flyover Country doesn't support this platform")}}(),ya=function(){function t(t,e,n,i,r,a,o,l,s,u,c,p,h,d,f,m){this.fcConfig=t,this.splashScreen=e,this.keyboard=n,this.statusBar=i,this.utilServ=r,this.storageServ=a,this.platform=o,this.ionUIServ=l,this.stateServ=s,this.ga=u,this.appRate=c,this.messageServ=p,this.backbuttonService=h,this.alertController=d,this.appVersion=f,this.ionicApp=m,this.msg=p.FC,this.initializeApp()}return t.prototype.initializePlatformAndPlugins=function(t){if("browser"!=t)try{this.statusBar.styleDefault(),this.splashScreen.hide(),this.startGoogleAnalytics(),this.startAppRate(),this.startAppVersion(),"ios"==t&&this.keyboard.hideKeyboardAccessoryBar(!1),"android"==t&&(this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString("#000000"),this.registerBackbutton())}catch(t){console.log(t)}},t.prototype.initializeApp=function(){var t=this;this.platform.ready().then(function(e){var n;try{if(!t.platform.is("core")){if(t.platform.is("android"))return n="android",void t.ionUIServ.createDialog("Download Flyover Country","Looks like you're on a mobile device!  Download the app for a better experience.","Download","No thanks",function(){window.location.replace("market://details?id=com.ionicframework.app303739"),console.log("redirect")},function(){window.location.replace("https://flyovercountry.io/")});if(t.platform.is("ios"))return void(window.location="https://itunes.apple.com/us/app/flyover-country/id1059886913");throw new Error(t.msg.INIT_PLATFORM_FAIL)}t.stateServ.setPlatform(n="browser"),t.initializePlatformAndPlugins(n),t.storageServ.initAppDirectory(n),t.rootPage=ma,t.storageServ.initFileSystemDirectory(n),t.storageServ.initFileSystem(n).then(function(e){t.stateServ.setOfflineStorage(!0)},function(e){t.ionUIServ.createAlert(t.msg.ALERT_INIT_FS_TITLE,t.msg.ALERT_INIT_FS_CONTENT),t.stateServ.setOfflineStorage(!1)})}catch(e){t.ionUIServ.createAlert(t.msg.ALERT_INIT_APP_TITLE,e.message),t.rootPage=ga}})},t.prototype.startGoogleAnalytics=function(){var t=this;!function(){if(null==localStorage.getItem("guid")){var e=t.utilServ.createGUID();localStorage.setItem("guid",e)}}(),this.ga.setUserId(localStorage.getItem("guid")),this.ga.startTrackerWithId("UA-88319233-3").then(function(){console.log("GoogleAnalytics successfully started"),t.ga.trackEvent("App","Started")}).catch(function(t){return console.log("Error starting GoogleAnalytics",t)})},t.prototype.startAppVersion=function(){var t=this;this.appVersion.getVersionNumber().then(function(e){"string"==typeof e&&(t.fcConfig.VERSION=e)})},t.prototype.startAppRate=function(){this.appRate.preferences.promptAgainForEachNewVersion=!1,this.appRate.preferences.inAppReview=!0,this.appRate.preferences.storeAppURL={ios:"1059886913",android:"market://details?id=com.ionicframework.app303739"},this.appRate.preferences.usesUntilPrompt=3,this.appRate.preferences.simpleMode=!0,this.appRate.promptForRating(!1)},t.prototype.registerBackbutton=function(){var t=this;this.platform.registerBackButtonAction(function(){var e=t.ionicApp._modalPortal.getActive();if(e)return 0==t.stateServ.getMapState()?void e.dismiss():void 0;var n=t.ionicApp._overlayPortal.getActive();if(n)n.dismiss();else{for(var i=function(t){var e=Di.navCtrls[t];if(e&&e.canGoBack()){var n=e.getActive().getNavParams();if(n){var i=n.get("resolve");i?e.pop().then(function(){return i({})}):e.pop()}else e.pop();return{value:void 0}}},r=0;r<Di.navCtrls.length;r++){var a=i(r);if("object"==typeof a)return a.value}if(t.nav.getActive().instance instanceof ma&&!t.nav.canGoBack()){var o=t.backbuttonService.popPage();o>=0?t.switchTab(o):t.alert?(t.alert.dismiss(),t.alert=null):t.showAlert()}else t.nav.canGoBack()&&t.nav.pop()}})},t.prototype.switchTab=function(t){Di.tabs&&t>=0&&(Di.tabIndex=t,Di.tabs.select(t),Di.tabs.selectedIndex=t)},t.prototype.showAlert=function(){var t=this;this.alert=this.alertController.create({title:"Exit?",message:"Are you sure you want to exit?",buttons:[{text:"Cancel",role:"cancel",handler:function(){t.alert=null}},{text:"Exit",handler:function(){t.platform.exitApp()}}]}),this.alert.present()},t}(),_a=function(){function t(t,e,n,i,r,a){this.mapTileServ=t,this.regionServ=e,this.stateServ=n,this.ga=i,this.viewCtrl=r,this.baseTiles=[],this.datasetTiles=[],this.dataLayers=[],this.msg=a.MAPLAYERBOX,this.title=this.msg.TITLE,this.baseTiles=this.mapTileServ.getTiles("base");for(var o=0,l=this.mapTileServ.getTiles("dataset");o<l.length;o++){var s=l[o];this.stateServ.getDatasetTileStates()[s.getId()]&&this.datasetTiles.push(s)}"region"==this.regionServ.getCurrent()?this.dataLayers=this.regionServ.getRegion().getDataLayers():(this.dataLayers=this.regionServ.getFieldtrip().getDataLayers(),this.fieldtripLayer=this.regionServ.getFieldtrip().getFieldtripLayer())}return t.prototype.isDataLoaded=function(){return this.stateServ.getMapState()>=4},t.prototype.closePopover=function(){this.viewCtrl.dismiss()},t.prototype.getFieldtripLayer=function(){return this.fieldtripLayer},t.prototype.getDataLayers=function(){return this.dataLayers},t.prototype.getBaseTiles=function(){return this.baseTiles},t.prototype.getDatasetTiles=function(){return this.datasetTiles},t.prototype.isBaseTileSelected=function(t){return this.mapTileServ.getCurrentBaseTile().getId()==t.getId()},t.prototype.changeDataLayer=function(t){t.setVisible(!t.getVisible()),"region"==this.regionServ.getCurrent()?this.regionServ.getRegion().updateDataLayer(t):this.regionServ.getFieldtrip().updateDataLayer(t),t.getVisible()?this.ga.trackEvent("Data",t.getId()+" disabled"):this.ga.trackEvent("Data",t.getId()+" enabled")},t.prototype.changeFieldtripLayer=function(){this.fieldtripLayer.getFeatureById("fieldTripStops").setVisible(!this.fieldtripLayer.getFeatureById("fieldTripStops").getVisible()),this.regionServ.getFieldtrip().updateFieldtripLayer()},t.prototype.changeBaseTile=function(t){1!=this.isBaseTileSelected(t)&&(this.mapTileServ.setCurrentBaseTile(t),this.ga.trackEvent("Tile",t.getId()))},t.prototype.changeDatasetTile=function(t){for(var e=[],n=!1,i=0;i<this.mapTileServ.getCurrentDatasetTiles().length;i++){var r=this.mapTileServ.getCurrentDatasetTiles()[i];t.getId()!=r.getId()?e.push(r):n=!0}n||e.push(t),this.mapTileServ.setCurrentDatasetTile(e)},t}(),va=function(){function t(t,e,n){this.eventServ=t,this.ionUIServ=e,this.stateServ=n}return t.prototype.layerButtonClicked=function(t){this.ionUIServ.createPopover(_a,t)},t.prototype.fabClicked=function(t){this.eventServ.publishEvent(t,null)},t.prototype.showDeleteButton=function(){return this.stateServ.getMapState()>0},t}(),ba=function(){function t(t,e){var n=this;this.stateServ=t,this.eventServ=e,this.setToolText(this.stateServ.getMapState()),this.stateServ.getMapStateSubject().subscribe(function(t){n.setToolText(t)})}return t.prototype.showState=function(t){return this.show==t?"visible":"invisible"},t.prototype.setToolText=function(t){this.tooltipText=1===t?"Press to Load":4===t?"Save for Offline":0===t?"Create Path":void 0},t.prototype.isHideFab=function(){return!0},t.prototype.setHideFab=function(t){this.hideFab=t},t.prototype.stopTooltipClick=function(t){event.stopPropagation()},t}(),xa=function(){var t={};return t[t.Collapsed=0]="Collapsed",t[t.Expanded=1]="Expanded",t[t.Minimized=2]="Minimized",t[t.Hidden=3]="Hidden",t}(),wa=function(){function t(t,e,n){this.platform=t,this.el=e,this.renderer=n,this.onExpand=new ui.l,this.onCollapse=new ui.l,this.onMinimize=new ui.l,this._footerMeta={height:0,posY:0,lastPosY:0},this._currentViewMeta={},this.initialState=this.initialState||xa.Hidden,this.state=this.initialState,this.maxHeight=this.maxHeight||0}return t.prototype.ngOnInit=function(){var t=this;window.addEventListener("orientationchange",function(){t.updateUI()}),this.platform.resume.subscribe(function(){t.updateUI()})},t.prototype.ngAfterContentInit=function(){this.computeDefaults(),this.updateUI(!0)},Object.defineProperty(t.prototype,"expandedHeight",{get:function(){return window.innerHeight-this._currentViewMeta.headerHeight},enumerable:!0,configurable:!0}),t.prototype.computeDefaults=function(){this._footerMeta.defaultHeight=this.childFooter.nativeElement.offsetHeight,this._currentViewMeta.tabs=this.el.nativeElement.closest("ion-tabs"),this._currentViewMeta.tabsHeight=this._currentViewMeta.tabs?this._currentViewMeta.tabs.querySelector(".tabbar").offsetHeight:0,this._currentViewMeta.header=document.querySelector("ion-navbar.toolbar"),this._currentViewMeta.headerHeight=this._currentViewMeta.header?this._currentViewMeta.header.offsetHeight:0},t.prototype.computeHeights=function(t){void 0===t&&(t=!1),this._footerMeta.height=this.expandedHeight,0==this.maxHeight&&(this.maxHeight=.55*this._footerMeta.height),this.renderer.setElementStyle(this.childFooter.nativeElement,"height",this._footerMeta.height+"px"),this.setState(this.state)},t.prototype.updateUI=function(t){var e=this;void 0===t&&(t=!1),setTimeout(function(){e.computeHeights(t)},300),this.renderer.setElementStyle(this.childFooter.nativeElement,"transition","none")},t.prototype.expand=function(){this._footerMeta.posY=this.maxHeight,this._footerMeta.lastPosY=this._footerMeta.posY,this.renderer.setElementStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out"),this.onExpand.emit(null)},t.prototype.collapse=function(){this._footerMeta.posY=this._footerMeta.height-this._footerMeta.defaultHeight-this._currentViewMeta.tabsHeight,this._footerMeta.lastPosY=this._footerMeta.posY,this.renderer.setElementStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.onCollapse.emit(null)},t.prototype.minimize=function(){},t.prototype.calculateContentSize=function(){this.renderer.setElementStyle(this.childBody._elementRef.nativeElement.lastElementChild,"height",this._footerMeta.height-this._footerMeta.posY-2*this._currentViewMeta.tabsHeight+"px")},t.prototype.hide=function(){this._footerMeta.posY=this._footerMeta.height,this._footerMeta.lastPosY=this._footerMeta.posY,this.renderer.setElementStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out")},t.prototype.setState=function(t){switch(this.state=t,this.state){case xa.Collapsed:this.collapse();break;case xa.Expanded:this.expand();break;case xa.Minimized:this.minimize();break;case xa.Hidden:this.hide()}this.calculateContentSize()},t.prototype.onTap=function(t){t.preventDefault(),this.setState(this.state==xa.Collapsed?xa.Expanded:this.state==xa.Minimized?xa.Expanded:xa.Collapsed)},t.prototype.onDrag=function(t){switch(t.preventDefault(),t.type){case"panstart":this.renderer.setElementStyle(this.childFooter.nativeElement,"transition","none");break;case"panmove":if(this._footerMeta.lastPosY=Math.round(t.deltaY)+this._footerMeta.posY,this._footerMeta.lastPosY<0||this._footerMeta.lastPosY>this._footerMeta.height)return;this.renderer.setElementStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this._footerMeta.lastPosY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this._footerMeta.lastPosY+"px, 0)");break;case"panend":this._footerMeta.lastPosY<=0?(this._footerMeta.lastPosY=0,this.state=xa.Expanded):this._footerMeta.lastPosY<=this._footerMeta.height-this._footerMeta.defaultHeight-this._currentViewMeta.tabsHeight?this.state=xa.Expanded:this._footerMeta.lastPosY<=this._footerMeta.height?(this._footerMeta.lastPosY=this._footerMeta.lastPosY=this._footerMeta.height-this._footerMeta.defaultHeight-this._currentViewMeta.tabsHeight,this.state=xa.Collapsed):(this._footerMeta.lastPosY=this._footerMeta.height,this.state=xa.Hidden),this._footerMeta.posY=this._footerMeta.lastPosY,this.renderer.setElementStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out"),this.renderer.setElementStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this._footerMeta.posY+"px, 0)"),this.renderer.setElementStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this._footerMeta.posY+"px, 0)")}this.calculateContentSize()},t}(),Sa=function(){return function(){}}(),Ta=function(){function t(t){this.chRef=t,this.hidden=!0,this.isTop=!0,this.featureData={}}return t.prototype.goToId=function(t){this.id=void 0,this.chRef.detectChanges(),this.id=t},t.prototype.enablePullUp=function(){this.hidden&&(this.hidden=!1)},t.prototype.pullUpOn=function(t,e){if(t&&t.length>0){this.content.scrollTop>0&&this.content.scrollToTop(200),this.featureData={};for(var n=0;n<t.length;n++)this.featureData[t[n].layerId]=t[n].properties;e&&(this.title=e.name,this.source=e.sourceName),this.ionPullUp.setState(xa.Expanded)}else this.ionPullUp.setState(xa.Hidden)},t.prototype.pullUpOff=function(){this.featureData={},this.title="",this.ionPullUp.setState(xa.Hidden)},t.prototype.tap=function(t){this.ionPullUp.onTap(t)},t.prototype.drag=function(t){this.ionPullUp.onDrag(t)},t}(),ka=function(){function t(){this.dataArray=[],this.maxLength=0,this.currentLength=0,this.isEnd=!1}return t.prototype.ngOnChanges=function(){if(this.dataArray=[],this.currentLength=0,this.maxLength=0,this.isEnd=!1,this.data&&this.data.length>0){this.maxLength=this.data.length;for(var t=Math.min(10,this.maxLength),e=0;e<t;)this.dataArray.push(this.data[e]),e++;this.currentLength=e}else this.isEnd=!0,console.log("dataset is empty")},t.prototype.doInfinite=function(t){var e=this;setTimeout(function(){if(0==e.isEnd){for(var n=0;n<5&&e.currentLength<e.maxLength;)e.dataArray.push(e.data[e.currentLength]),e.currentLength++,n++;e.currentLength>=e.maxLength&&(e.isEnd=!0),console.log("Async operation has ended")}t.complete()},500)},t.prototype.hasMore=function(){return!this.isEnd},t}(),Ia=function(){function t(t,e,n,i,r,a,o){this.stateServ=t,this.loadServ=e,this.fetchServ=n,this.navCtrl=i,this.ga=r,this.locServ=a,this.msg=o.PULLUPARTICLE,this.noArticle=this.msg.NO_ARTICLE,this.fullArticle=this.msg.FULL_ARTICLE}return t.prototype.ngOnChanges=function(){this.articleLoaded=!1,this.collapsed=!0,this.articleValid=!1,this.showSpinner=!1,"string"==typeof this.images&&(this.images=JSON.parse(this.images))},t.prototype.generateDetailedGaInfo=function(){return["guid:"+localStorage.getItem("guid"),"id:"+this.pageTitle,this.locServ.getLocation()?"lat:"+this.locServ.getLocation().latitude:"lat:null",this.locServ.getLocation()?"lon:"+this.locServ.getLocation().longitude:"lon:null",this.locServ.getLocation()?"alt:"+this.locServ.getLocation().altitude:"alt:null",this.locServ.getLocation()?"spd:"+this.locServ.getLocation().speed:"spd:null",this.stateServ.getGPS()].join("|")},t.prototype.click=function(){var t=this,e=this.generateDetailedGaInfo();this.ga.trackEvent("Detailed Article","Preview",e),this.ga.trackEvent("Article","Preview",this.pageTitle),this.showSpinner=!0,this.articleLoaded?(this.collapsed=!this.collapsed,this.showSpinner=!1):this.getArticle(this.pageTitle).then(function(e){t.articleLoaded=!0,e?(t.article=e,t.articleValid=!0):t.articleValid=!1,t.collapsed=!t.collapsed,t.showSpinner=!1},function(e){t.articleLoaded=!0,t.articleValid=!1,t.collapsed=!t.collapsed,t.showSpinner=!1})},t.prototype.getArticle=function(t){var e=this;return new Promise(function(n,i){e.stateServ.isMapState(6)?e.loadServ.loadWikiArticle(t).then(function(t){n(t)},function(t){i()}):e.fetchServ.fetchWiki(t,!0).then(function(t){t.success&&t.data?n(t.data):i()})})},t.prototype.openFullArticle=function(t){t.stopPropagation();var e=this.generateDetailedGaInfo();this.ga.trackEvent("Detailed Article","Full View",e),this.ga.trackEvent("Article","Full View",this.pageTitle),this.articleLoaded&&this.articleValid&&this.navCtrl.push(ia,{article:this.article,images:this.images})},t}(),Ea=function(){function t(t,e,n,i){this.navParams=t,this.viewCtrl=e,this.stateServ=n,this.loadServ=i,this.caption=t.get("caption"),this.img=t.get("img")}return t.prototype.closePopover=function(){this.viewCtrl.dismiss()},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(t.fileId);return e||t.thumbnailUrl}return t.thumbnailUrl},t}(),Aa=function(){function t(t,e,n){this.popoverCtrl=t,this.stateServ=e,this.loadServ=n}return t.prototype.presentCaption=function(t,e){t.stopPropagation();this.popoverCtrl.create(Ea,{caption:null!==e.caption&&e.caption.length?e.caption:"no caption availalble",img:e}).present()},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(t.fileId);return e||t.thumbnailUrl}return t.thumbnailUrl},t}(),Ca=function(){function t(t,e,n){var i=this;this.stateServ=t,this.toastCtrl=e,this.eventServ=n,this.show=!1,this.stateServ.getGpsSubject().subscribe(function(t){0==t?i.show=!1:1==t&&(i.show=!0)}),this.stateServ.getTrackingSubject().subscribe(function(t){i.trackButtonActive=!!t})}return t.prototype.buttonClicked=function(t){if(this.show)this.eventServ.publishEvent(t);else{this.toastCtrl.create({message:"Searching for GPS signal",duration:2e3,position:"top"}).present()}},t.prototype.getTrackButtonActive=function(){return this.trackButtonActive},t}(),La=function(){return function(t){this.stateServ=t}}(),za=function(){function t(t,e,n){var i=this;this.locServ=t,this.stateServ=e,this.msg=n.SPEEDALT,this.speedText=this.msg.SPEED,this.altText=this.msg.ALT,this.searchGPSText=this.msg.SEARCH_GPS,this.stateServ.getGpsSubject().subscribe(function(t){i.goodLocation=1===t}),this.locServ.getLocationObservable().subscribe(function(t){i.currentSpeed=t.speed,i.currentAlt=t.altitude,i.setSpeedAlt(i.currentSpeed,i.currentAlt,i.unit),i.goodLocation=!0}),this.setUnit(this.stateServ.getUnit()),this.stateServ.getUnitSubject().subscribe(function(t){i.setUnit(t),i.setSpeedAlt(i.currentSpeed,i.currentAlt,i.unit)})}return t.prototype.setUnit=function(t){this.unit=t,"metric"===t?(this.speedUnit="kph",this.altitudeUnit="m"):(this.altitudeUnit="ft",this.speedUnit="mph")},t.prototype.setSpeedAlt=function(t,e,n){"metric"===this.unit?(this.speed=(t*=3.6).toFixed(0)+this.speedUnit,this.altitude=(e=e).toFixed(0)+this.altitudeUnit):(this.speed=(t*=2.23694).toFixed(0)+this.speedUnit,this.altitude=(e*=3.28084).toFixed(0)+this.altitudeUnit)},t}(),Pa=function(){function t(t,e,n){var i=this;this.mapTileServ=t,this.eventServ=e,this.iab=n,this.attributions=[],this.hideAttr=!0,this.eventServ.createEventListener("baseTileChange",function(t){i.attributions=i.mapTileServ.getCurrentBaseTile().getAttribution()})}return t.prototype.openUrl=function(t,e,n){if(t){e.preventDefault(),e.stopPropagation();this.iab.create(t,1==n?"_blank":"_system")}},t}(),Da=function(){function t(t,e,n,i,r,a,o){this.stateServ=t,this.fetchServ=e,this.ionUIServ=n,this.regionServ=i,this.viewCtrl=r,this.eventServ=a,this.currentSearch1=[],this.currentSearch2=[],this.chosen=[],this.msg=o.STARTPATH,this.title=this.msg.ENTER_DEST,this.createPathText=this.msg.CREATE_PATH,this.searchBox1Text=this.msg.DEST_BOX_SEARCH1,this.searchBox2Text=this.msg.DEST_BOX_SEARCH2}return t.prototype.back=function(){this.eventServ.publishEvent("slideTo",0)},t.prototype.cancel=function(){this.viewCtrl.dismiss()},t.prototype.searchFirst=function(t,e){var n=this;e.preventDefault(),e.stopPropagation(),this.currentSearch2=[],this.searchKey2=null,this.searchPlace(t).then(function(t){n.currentSearch1=t,n.currentSearch2=[]})},t.prototype.searchSecond=function(t,e){var n=this;e.preventDefault(),e.stopPropagation(),this.currentSearch1=[],this.searchKey1=null,this.searchPlace(t).then(function(t){n.currentSearch2=t,n.currentSearch1=[],setTimeout(function(){n.content.scrollToBottom()},80)})},t.prototype.searchPlace=function(t){var e=this;return new Promise(function(n,i){t?e.fetchServ.searchPlace(t).then(function(t){t?n(t.features):(e.ionUIServ.createAlert(e.msg.ALERT_NO_RESULT_TITLE,e.msg.ALERT_NO_RESULT_CONTENT),n([]))}):n([])})},t.prototype.reorderItems=function(t){var e=this.chosen[t.from];this.chosen.splice(t.from,1),this.chosen.splice(t.to,0,e)},t.prototype.deleteChosen=function(t){this.chosen.splice(t,1)},t.prototype.resetSearch=function(){this.currentSearch1=[],this.currentSearch2=[],this.searchKey1=null,this.searchKey2=null},t.prototype.searchDirection=function(t){var e=this;return new Promise(function(n,i){1==t.length&&t.push([t[0][0],t[0][1]]),t.length>0?e.fetchServ.searchDirection(t).then(function(t){n(t?t.routes:[])}):n([])})},t.prototype.selectPlace=function(t,e){var n=this;e.preventDefault(),e.stopPropagation(),this.chosen.push(t),this.resetSearch();var i=document.querySelectorAll("input");if(i){i[i.length-1].focus()}setTimeout(function(){n.content.scrollToBottom()},80)},t.prototype.createPath=function(){var t=this;if(0!=this.chosen.length){var e=[];this.chosen.forEach(function(t){e.push(t.geometry.coordinates)});try{if(this.stateServ.isTripState(1)){var n=this.ionUIServ.startSpinner();this.searchDirection(e).then(function(e){t.ionUIServ.stopSpinner(n),e&&e.length>0?(t.viewCtrl.dismiss(),t.regionServ.drawPath("region",e[0].geometry.coordinates),t.stateServ.setMapState(1),t.eventServ.publishEvent("tabFabClick")):t.ionUIServ.createAlert(t.msg.ALERT_INVALID_PATH_TITLE,t.msg.ALERT_INVALID_PATH_CONTENT)})}else this.viewCtrl.dismiss(),this.regionServ.drawPath("region",e),this.stateServ.setMapState(1),this.eventServ.publishEvent("tabFabClick")}catch(t){this.ionUIServ.createAlert(this.msg.ALERT_CREATE_PATH_FAIL_TITLE,t.message)}}else this.ionUIServ.createAlert(this.msg.ALERT_NO_INPUT_TITLE,this.msg.ALERT_NO_INPUT_CONTENT)},t}(),Ma=function(){function t(t,e,n,i,r,a,o,l){this.stateServ=t,this.ionUIServ=e,this.dataLayerConfig=n,this.mapTileServ=i,this.ga=r,this.eventServ=a,this.viewCtrl=o,this.dataLayers=[],this.datasetTiles=[],this.msg=l.STARTPATH,this.title=this.msg.SETTING_TITLE,this.tripModeText=this.msg.CHOOSE_TRIPMODE,this.datasetText=this.msg.CHOOSE_DATASET,this.pathModeText=this.msg.CHOOSE_PATHMODE,this.tapText=this.msg.TAP,this.searchText=this.msg.SEARCH,this.tripMode=this.stateServ.getTripMode(),this.stateServ.isTripMode("plane")?this.stateServ.setTripState(0):this.stateServ.isTripMode("car")&&this.stateServ.setTripState(1);var s=this.stateServ.getDataLayerStates();for(var u in s)this.dataLayerConfig.dataLayer[u]&&this.dataLayers.push({key:u,enabled:s[u],name:this.dataLayerConfig.dataLayer[u].name});s=this.stateServ.getDatasetTileStates();for(var c=0;c<this.mapTileServ.getTiles("dataset").length;c++){var p=this.mapTileServ.getTiles("dataset")[c];u=p.getId();this.datasetTiles.push({key:u,enabled:s[u],name:p.getName()})}}return t.prototype.cancel=function(){this.viewCtrl.dismiss()},t.prototype.changeTripMode=function(){this.stateServ.setTripMode(this.tripMode),this.stateServ.isTripMode("plane")?this.stateServ.setTripState(0):this.stateServ.isTripMode("car")&&this.stateServ.setTripState(1),this.ga.trackEvent("Trip mode",this.tripMode)},t.prototype.getDataLayers=function(){return this.dataLayers},t.prototype.changeDataLayer=function(t){t.enabled=!t.enabled,this.stateServ.setDataLayerState(t.key,t.enabled)},t.prototype.changeDatasetTile=function(t){t.enabled=!t.enabled,this.stateServ.setDatasetTileState(t.key,t.enabled)},t.prototype.next=function(){this.eventServ.publishEvent("slideTo",1)},t.prototype.tap=function(){this.viewCtrl.dismiss(),this.ionUIServ.createToast(this.msg.TOAST_TAP_MAP)},t.prototype.search=function(){this.eventServ.publishEvent("slideTo",1);var t=document.querySelector("input");setTimeout(function(){t.focus()},500)},t}(),Fa=function(){function t(){}return t.prototype.getPageTitle=function(){if(null!==this.data[0].age)return this.data[0].age},t.prototype.getTitle=function(){if(null!==this.data[0].name&&"null"!==this.data[0].name)return this.data[0].name},t.prototype.getColor=function(){if(null!==this.data[0].color&&this.data[0].color.length>0)return this.data[0].color},t.prototype.clipAgePrecisionTop=function(){return parseFloat(this.data[0].best_age_top).toFixed(2)},t.prototype.clipAgePrecisionBot=function(){return parseFloat(this.data[0].best_age_bottom).toFixed(2)},t.prototype.getDescription=function(){if(null!==this.data[0].descrip&&"null"!==this.data[0].descrip)return this.data[0].descrip},t.prototype.getComments=function(){if(null!==this.data[0].comments&&"null"!==this.data[0].comments)return this.data[0].comments},t.prototype.getRocktype=function(){if(null!==this.data[0].rocktype&&"null"!==this.data[0].rocktype)return this.data[0].rocktype},t.prototype.getRefAuthors=function(){if(null!==this.data[0].ref_authors&&"null"!==this.data[0].ref_authors)return this.data[0].ref_authors},t.prototype.getRefYear=function(){if(null!==this.data[0].ref_year&&"null"!==this.data[0].ref_year)return this.data[0].ref_year},t.prototype.getRefTitle=function(){if(null!==this.data[0].ref_title&&"null"!==this.data[0].ref_title)return this.data[0].ref_title},t.prototype.getRefSource=function(){if(null!==this.data[0].ref_source&&"null"!==this.data[0].ref_source)return this.data[0].ref_source},t}(),Oa=function(){function t(){}return t.prototype.getType=function(){if(null!==this.data[0].type&&"null"!==this.data[0].type&&this.data[0].type.length>0)return this.data[0].type},t.prototype.getName=function(){if(null!==this.data[0].name&&"null"!==this.data[0].name&&this.data[0].name.length>0)return this.data[0].name},t.prototype.getDescription=function(){if(null!==this.data[0].descrip&&"null"!==this.data[0].descrip&&this.data[0].descrip.length>0)return this.data[0].descrip},t}(),Ra=function(){function t(t,e){this.loadServ=t,this.stateServ=e}return t.prototype.ngOnChanges=function(){this.data=Array.isArray(this.data)?this.data.filter(function(t,e,n){return n.findIndex(function(e){return e.tna===t.tna})===e}):[this.data]},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(t.fcImageId);return e||t.fcImageUrl}return t.fcImageUrl},t}(),ja=function(){function t(){}return t.prototype.ngOnChanges=function(){this.data.sort(function(t,e){return e.pageLength-t.pageLength})},t}(),Ba=function(){function t(t,e){this.loadServ=t,this.stateServ=e}return t.prototype.ngOnChanges=function(){this.data=this.data.filter(function(t,e,n){return n.findIndex(function(e){return e.commonName===t.commonName})===e})},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(t.fcImageId);return e||t.fcImageUrl}return t.fcImageUrl},t}(),Ua=function(){function t(){}return t.prototype.switchToggle=function(t){t.toggle=null==t.toggle||!t.toggle},t}(),Na=function(){return function(){}}(),Za=function(){function t(t,e,n,i){this.loadServ=t,this.stateServ=e,this.utilServ=n,this.iab=i}return t.prototype.ngOnChanges=function(){for(var t in this.data[0]){var e=this.data[0][t];if("string"==typeof e&&"["==e.charAt(0)&&"]"==e.charAt(e.length-1)){var n=JSON.parse(e);Array.isArray(n)&&(this.data[0][t]=n)}}},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(this.utilServ.replaceSpecialCharacter(t));return e||"http://www.earthscope.org"+t}return"http://www.earthscope.org"+t},t.prototype.openRefLink=function(t){this.iab.create(t,"_system")},t}(),Ya=function(){function t(t,e,n){this.loadServ=t,this.stateServ=e,this.utilServ=n}return t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(this.utilServ.replaceSpecialCharacter(t));return e||t}return t},t.prototype.formatYear=function(t){return t<0?Math.abs(t)+" BCE":t+" CE"},t.prototype.formatElevation=function(t){return"metric"==this.stateServ.getUnit()?t+" meters":(3.28084*t).toFixed(0)+" feet"},t}(),Va=function(){function t(t,e,n,i){this.mapEngine=t,this.loadServ=e,this.stateServ=n,this.geoJSONServ=i,this.sections=[],this.stops=[]}return Object.defineProperty(t.prototype,"newData",{set:function(t){if(t=t[0]){if(this.data=t,t.sections){for(var e=0;e<t.sections.length;e++)t.sections[e].title&&(t.sections[e].title=t.sections[e].title.toLowerCase());var n=t.sections;"string"==typeof n&&(n=JSON.parse(n)),this.sections=n}if(t.stops){var i=t.stops;"string"==typeof i&&(i=JSON.parse(i)),this.stops=i.features}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stopId",{set:function(t){if(this._stopId=t,this.stops.length)for(var e=0,n=this.stops;e<n.length;e++){var i=n[e];i.properties.id===t&&(i.show=!0)}},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewChecked=function(){this._stopId!==this.previousStopId&&this.scrollToId(this._stopId),this._stopId=this.previousStopId},t.prototype.scrollToId=function(t){if(!t)return console.log("Invalid element id"),void this.parent.scrollTo(0,0);var e=document.getElementById(t);if(e){this.parent.scrollTo(e.offsetLeft,e.offsetTop)}else console.log("cannot find element")},t.prototype.getTitle=function(){if(this.data&&null!==this.data.title)return this.data.title},t.prototype.getAuthors=function(){if(this.data&&null!==this.data.authors)return this.data.authors},t.prototype.getPublisher=function(){if(this.data&&null!==this.data.publisher)return this.data.publisher},t.prototype.getYear=function(){if(this.data&&null!==this.data.yearPublished)return this.data.yearPublished},t.prototype.getSections=function(){return this.sections},t.prototype.getStops=function(){return this.stops},t.prototype.getAbstract=function(){if(this.data&&"null"!==this.data.abstract)return this.data.abstract},t.prototype.focusStop=function(t,e){e.stopPropagation();var n=this.geoJSONServ.getCentroid(t);this.mapEngine.easeToLocation(n.geometry.coordinates)},t.prototype.toggleText=function(t,e){e.stopPropagation(),t.show=!t.show},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl("fg"+t.id);return e||t.url}return"https://api.flyover.umn.edu/v2/guide/fig/"+t.id},t=Object(ci.__decorate)([Object(ci.__param)(0,Object(ui.m)("MapEngine"))],t)}(),qa=function(){function t(t,e){this.loadServ=t,this.stateServ=e}return t.prototype.ngOnChanges=function(){console.log(this.data)},t.prototype.getImage=function(t){if(this.stateServ.isMapState(6)){var e=this.loadServ.getOfflineImageUrl(t.fcImageId);return e||t.fcImageUrl}return t.fcImageUrl},t}(),Ga=function(){function t(t,e){var n=this;this.eventServ=t,this.progress=0,this.maxProgress=1,this.stepProgress=0,this.stepMaxProgress=0,this.msg=e.PROGRESSBAR,this.nowSaving=this.msg.NOW_SAVING,this.baseTileDownload=this.msg.BASE_TILE_DOWNLOAD,this.articleDownload=this.msg.ARTICLE_DOWNLOAD,this.eventServ.createEventListener("addProgress",function(t){t&&(n.progress=t.progress,n.stepProgress=t.stepProgress,n.maxProgress=t.maxProgress,n.stepMaxProgress=t.stepMaxProgress,n.currentlySaving=t.currentSaving)})}return t.prototype.showText=function(){return!!(this.currentlySaving&&this.currentlySaving.length>0)},t.prototype.showArticleProgress=function(){return"articles"==this.currentlySaving},t.prototype.showTileProgress=function(){return"tiles"==this.currentlySaving},t.prototype.tileSizeLeft=function(){return(20*this.stepProgress/1024).toFixed(1)+" MB"},t.prototype.articleLeft=function(){return this.stepProgress},t.prototype.getPercentage=function(){return 0==this.maxProgress?"0%":(this.progress/this.maxProgress*100).toFixed(0)+"%"},t}(),Wa=function(){return function(){}}(),Ha=n(65),$a=n(277),Xa=n(278),Ka=n(279),Ja=n(280),Qa=n(281),to=n(282),eo=n(283),no=n(284),io=n(285),ro=n(286),ao=n(50),oo=n(81),lo=n(5),so=n(10),uo=n(9),co=n(2),po=n(3),ho=n(8),fo=n(41),mo=n(28),go=n(6),yo=n(91),_o=ui.X({encapsulation:2,styles:[],data:{}}),vo=ui.V("ng-component",ya,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ng-component",[],null,null,null,i,_o)),ui.Y(1,49152,null,0,ya,[Ii,bi.a,_i.a,xi.a,ki,Fi,po.a,Yr,rr,gi.a,wi.a,Mi,Hr,yo.a,Si.a,Ha.b],null,null)],null,null)},{},{},[]),bo=n(287),xo=n(106),wo=n(71),So=n(7),To=n(120),ko=n(61),Io=n(121),Eo=n(48),Ao=n(17),Co=n(119),Lo=n(63),zo=ui.X({encapsulation:2,styles:[],data:{animation:[{type:7,name:"showAnimation",definitions:[{type:0,name:"invisible",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"* => *",animation:{type:4,styles:void 0,timings:"0.4s"},options:null}],options:{}}]}}),Po=ui.V("fc-tab-fab",ba,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-tab-fab",[],null,null,null,a,zo)),ui.Y(1,49152,null,0,ba,[rr,Oi],null,null)],null,null)},{show:"show",hideFab:"hideFab"},{},[]),Do=n(288),Mo=n(19),Fo=n(72),Oo=ui.X({encapsulation:2,styles:[],data:{}}),Ro=ui.V("fc-tabs",ma,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-tabs",[],null,null,null,s,Oo)),ui.Y(1,49152,null,0,ma,[rr,Oi,Fo.a,Mi],null,null)],null,null)},{},{},[]),jo=n(32),Bo=n(15),Uo=n(22),No=n(27),Zo=n(12),Yo=n(11),Vo=n(21),qo=n(49),Go=n(24),Wo=n(214),Ho=n(23),$o=n(84),Xo=n(38),Ko=n(47),Jo=n(104),Qo=n(215),tl=n(70),el=n(96),nl=ui.X({encapsulation:2,styles:[],data:{}}),il=ui.V("fc-setting",fa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-setting",[],null,null,null,u,nl)),ui.Y(1,49152,null,0,fa,[rr,so.a,gi.a,yi.a,Hr,Mi],null,null)],null,null)},{},{},[]),rl=ui.X({encapsulation:2,styles:[],data:{}}),al=ui.V("fc-speed-alt",za,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-speed-alt",[],null,null,null,d,rl)),ui.Y(1,49152,null,0,za,[Vr,rr,Mi],null,null)],null,null)},{},{},[]),ol=ui.X({encapsulation:2,styles:[],data:{}}),ll=ui.V("fc-map-fab",va,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-map-fab",[],null,null,null,m,ol)),ui.Y(1,49152,null,0,va,[Oi,Yr,rr],null,null)],null,null)},{},{},[]),sl=ui.X({encapsulation:2,styles:[],data:{}}),ul=ui.V("fc-map-gps-button",Ca,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-map-gps-button",[],null,null,null,_,sl)),ui.Y(1,49152,null,0,Ca,[rr,Fo.a,Oi],null,null)],null,null)},{},{},[]),cl=ui.X({encapsulation:2,styles:[],data:{}}),pl=ui.V("fc-map-attribution",Pa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-map-attribution",[],null,null,null,b,cl)),ui.Y(1,49152,null,0,Pa,[ar,Oi,yi.a],null,null)],null,null)},{},{},[]),hl=n(26),dl=n(18),fl=n(31),ml=n(46),gl=ui.X({encapsulation:2,styles:[],data:{}}),yl=ui.V("fc-fieldtrip-card",Va,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-fieldtrip-card",[],null,null,null,F,gl)),ui.Y(1,8437760,null,0,Va,["MapEngine",qr,rr,cr],null,null)],null,null)},{newData:"newData",stopId:"stopId",parent:"parent"},{},[]),_l=ui.X({encapsulation:2,styles:[],data:{}}),vl=ui.V("fc-macroline-card",Oa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-macroline-card",[],null,null,null,B,_l)),ui.Y(1,49152,null,0,Oa,[],null,null)],null,null)},{data:"data"},{},[]),bl=ui.X({encapsulation:2,styles:[],data:{}}),xl=ui.V("fc-fill-card",Fa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-fill-card",[],null,null,null,H,bl)),ui.Y(1,49152,null,0,Fa,[],null,null)],null,null)},{data:"data"},{},[]),wl=n(68),Sl=ui.X({encapsulation:2,styles:[],data:{}}),Tl=ui.V("fc-pullup-article-card-images",Aa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-pullup-article-card-images",[],null,null,null,K,Sl)),ui.Y(1,49152,null,0,Aa,[wl.a,rr,qr],null,null)],null,null)},{images:"images"},{},[]),kl=ui.X({encapsulation:2,styles:[],data:{}}),Il=ui.V("fc-pullup-article-card",Ia,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-pullup-article-card",[],null,null,null,at,kl)),ui.Y(1,573440,null,0,Ia,[rr,qr,_r,so.a,gi.a,Vr,Mi],null,null)],null,null)},{pageTitle:"pageTitle",images:"images"},{},["*"]),El=n(80),Al=n(289),Cl=n(94),Ll=ui.X({encapsulation:2,styles:[],data:{}}),zl=ui.V("fc-pull-up-scroll",ka,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-pull-up-scroll",[],null,null,null,lt,Ll)),ui.Y(1,573440,null,0,ka,[],null,null)],null,null)},{data:"data"},{},["*"]),Pl=ui.X({encapsulation:2,styles:[],data:{}}),Dl=ui.V("fc-wiki-card",ja,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-wiki-card",[],null,null,null,ut,Pl)),ui.Y(1,573440,null,0,ja,[],null,null)],null,null)},{data:"data"},{},[]),Ml=ui.X({encapsulation:2,styles:[],data:{}}),Fl=ui.V("fc-pbdb-card",Ra,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-pbdb-card",[],null,null,null,ht,Ml)),ui.Y(1,573440,null,0,Ra,[qr,rr],null,null)],null,null)},{data:"data"},{},[]),Ol=ui.X({encapsulation:2,styles:[],data:{}}),Rl=ui.V("fc-neotoma-card",Ba,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-neotoma-card",[],null,null,null,mt,Ol)),ui.Y(1,573440,null,0,Ba,[qr,rr],null,null)],null,null)},{data:"data"},{},[]),jl=ui.X({encapsulation:2,styles:[],data:{}}),Bl=ui.V("fc-ocd-card",Ua,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-ocd-card",[],null,null,null,St,jl)),ui.Y(1,49152,null,0,Ua,[],null,null)],null,null)},{data:"data"},{},[]),Ul=ui.X({encapsulation:2,styles:[],data:{}}),Nl=ui.V("fc-laccore-card",Na,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-laccore-card",[],null,null,null,zt,Ul)),ui.Y(1,49152,null,0,Na,[],null,null)],null,null)},{data:"data"},{},[]),Zl=n(216),Yl=n(83),Vl=n(62),ql=n(217),Gl=ui.X({encapsulation:2,styles:[],data:{}}),Wl=ui.V("fc-earthscope-card",Za,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-earthscope-card",[],null,null,null,Wt,Gl)),ui.Y(1,573440,null,0,Za,[qr,rr,ki,yi.a],null,null)],null,null)},{data:"data"},{},[]),Hl=ui.X({encapsulation:2,styles:[],data:{}}),$l=ui.V("fc-smithsonian-card",Ya,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-smithsonian-card",[],null,null,null,ae,Hl)),ui.Y(1,49152,null,0,Ya,[qr,rr,ki],null,null)],null,null)},{data:"data"},{},[]),Xl=n(73),Kl=ui.X({encapsulation:2,styles:[],data:{}}),Jl=ui.V("ion-pullup",wa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,2,"ion-pullup",[],null,null,null,oe,Kl)),ui.Y(1,1163264,null,1,wa,[po.a,ui.j,ui.z],null,null),ui._17(335544320,1,{childBody:0})],function(t,e){t(e,1,0)},null)},{initialState:"initialState",maxHeight:"maxHeight"},{onExpand:"onExpand",onCollapse:"onCollapse",onMinimize:"onMinimize"},["*"]),Ql=n(86),ts=n(30),es=n(40),ns=n(35),is=n(29),rs=ui.X({encapsulation:2,styles:[],data:{}}),as=ui.V("fc-pull-up",Ta,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-pull-up",[],null,null,null,Ne,rs)),ui.Y(1,49152,null,0,Ta,[ui.g],null,null)],null,null)},{},{},[]),os=ui.X({encapsulation:2,styles:[],data:{}}),ls=ui.V("fc-map",Qr,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-map",[],null,null,null,Ye,os)),ui.Y(1,114688,null,0,Qr,[Nr,Vr,"MapEngine",cr,ar,Oi,rr,Yr,gi.a,vi.a,so.a,ir,Hr,Mi],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),ss=n(37),us=n(218),cs=n(82),ps=ui.X({encapsulation:2,styles:[],data:{}}),hs=ui.V("fc-fieldguide",ta,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-fieldguide",[],null,null,null,Ke,ps)),ui.Y(1,49152,null,0,ta,[so.a,_r,cr,ar,Nr,Oi,rr,Yr,gi.a,Hr,Mi],null,null)],null,null)},{},{},[]),ds=ui.X({encapsulation:2,styles:[],data:{}}),fs=ui.V("fc-wit",ca,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-wit",[],null,null,null,Je,ds)),ui.Y(1,49152,null,0,ca,[so.a,gi.a,Hr,Mi],null,null)],null,null)},{},{},[]),ms=n(290),gs=n(98),ys=n(132),_s=n(97),vs=ui.X({encapsulation:2,styles:[],data:{}}),bs=ui.V("fc-saved",pa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-saved",[],null,null,null,tn,vs)),ui.Y(1,49152,null,0,pa,[ar,Wr,qr,rr,Oi,Yr,gi.a,Hr,so.a,Mi],null,null)],null,null)},{},{},[]),xs=n(55),ws=n(56),Ss=ui.X({encapsulation:2,styles:[],data:{}}),Ts=ui.V("fc-map-layer-box",_a,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-map-layer-box",[],null,null,null,pn,Ss)),ui.Y(1,49152,null,0,_a,[ar,Nr,rr,gi.a,lo.a,Mi],null,null)],null,null)},{},{},[]),ks=n(20),Is=ui.X({encapsulation:2,styles:[],data:{}}),Es=ui.V("fc-caption-popover",Ea,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-caption-popover",[],null,null,null,hn,Is)),ui.Y(1,49152,null,0,Ea,[ks.a,lo.a,rr,qr],null,null)],null,null)},{},{},[]),As=ui.X({encapsulation:2,styles:[],data:{}}),Cs=ui.V("fc-elc-card",qa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-elc-card",[],null,null,null,mn,As)),ui.Y(1,573440,null,0,qa,[qr,rr],null,null)],null,null)},{data:"data"},{},[]),Ls=ui.X({encapsulation:2,styles:[],data:{}}),zs=ui.V("ion-pullup-tab",Sa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"ion-pullup-tab",[],null,null,null,gn,Ls)),ui.Y(1,49152,null,0,Sa,[],null,null)],null,null)},{},{},["*"]),Ps=n(219),Ds=n(78),Ms=n(85),Fs=n(291),Os=n(95),Rs=n(69),js=ui.X({encapsulation:2,styles:[],data:{}}),Bs=ui.V("fc-progress-bar",Ga,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-progress-bar",[],null,null,null,bn,js)),ui.Y(1,49152,null,0,Ga,[Oi,Mi],null,null)],null,null)},{},{},[]),Us=ui.X({encapsulation:2,styles:[],data:{}}),Ns=ui.V("fc-download",Xr,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-download",[],null,null,null,In,Us)),ui.Y(1,49152,null,0,Xr,[Gr,lo.a,ar,Nr,Oi,rr,Yr,ki,gi.a,ks.a,Mi,Ti.a],null,null)],null,null)},{},{},[]),Zs=n(77),Ys=n(64),Vs=ui.X({encapsulation:2,styles:[],data:{}}),qs=ui.V("fc-full-article",ia,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-full-article",[],null,null,null,An,Vs)),ui.Y(1,49152,null,0,ia,[ks.a,Mi],null,null)],null,null)},{},{},[]),Gs=n(136),Ws=ui.X({encapsulation:2,styles:[],data:{}}),Hs=ui.V("fc-rfaEntry",aa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-rfaEntry",[],null,null,null,zn,Ws)),ui.Y(1,114688,null,0,aa,[so.a,Mi],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),$s=ui.X({encapsulation:2,styles:[],data:{}}),Xs=ui.V("fc-rfaSection",ra,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-rfaSection",[],null,null,null,Fn,$s)),ui.Y(1,114688,null,0,ra,[so.a,ks.a,pi.c],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Ks=ui.X({encapsulation:2,styles:[],data:{}}),Js=ui.V("fc-cloudEntry",ua,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-cloudEntry",[],null,null,null,Rn,Ks)),ui.Y(1,49152,null,0,ua,[so.a,Mi],null,null)],null,null)},{},{},[]),Qs=ui.X({encapsulation:2,styles:[],data:{}}),tu=ui.V("fc-cloudSection",sa,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-cloudSection",[],null,null,null,Yn,Qs)),ui.Y(1,114688,null,0,sa,[ks.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),eu=ui.X({encapsulation:2,styles:[],data:{}}),nu=ui.V("fc-map-rotate-buttons",La,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-map-rotate-buttons",[],null,null,null,Vn,eu)),ui.Y(1,49152,null,0,La,[rr],null,null)],null,null)},{},{},[]),iu=n(134),ru=ui.X({encapsulation:2,styles:[],data:{}}),au=ui.V("fc-about",ha,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-about",[],null,null,null,qn,ru)),ui.Y(1,49152,null,0,ha,[Ii,gi.a,yi.a],null,null)],null,null)},{},{},[]),ou=ui.X({encapsulation:2,styles:[],data:{}}),lu=ui.V("fc-error",ga,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-error",[],null,null,null,Gn,ou)),ui.Y(1,49152,null,0,ga,[Yr],null,null)],null,null)},{},{},[]),su=ui.X({encapsulation:2,styles:[],data:{}}),uu=ui.V("fc-faq",da,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-faq",[],null,null,null,$n,su)),ui.Y(1,49152,null,0,da,[gi.a,yi.a],null,null)],null,null)},{},{},[]),cu=ui.X({encapsulation:2,styles:[],data:{}}),pu=ui.X({encapsulation:2,styles:[],data:{}}),hu=ui.X({encapsulation:2,styles:[],data:{}}),du=ui.V("fc-start-path",Kr,function(t){return ui._20(0,[(t()(),ui.Z(0,0,null,null,1,"fc-start-path",[],null,null,null,li,hu)),ui.Y(1,49152,null,0,Kr,[Oi,lo.a,gi.a],null,null)],null,null)},{},{},[]),fu=n(153),mu=n(209),gu=n(154),yu=n(130),_u=n(150),vu=n(137),bu=n(206),xu=n(76),wu=n(67),Su=n(139),Tu=n(92),ku=n(149),Iu=n(205),Eu=n(151),Au=n(52),Cu=n(138),Lu=n(152),zu=ui.W(Wa,[Ha.b],function(t){return ui._7([ui._8(512,ui.i,ui.S,[[8,[$a.a,Xa.a,Ka.a,Ja.a,Qa.a,to.a,eo.a,no.a,io.a,vo,Ro,il,ls,hs,fs,bs,Ts,Es,ll,Po,as,zl,Il,Tl,xl,Cs,vl,Fl,Bl,Nl,Wl,$l,yl,Dl,Rl,Jl,zs,Ns,qs,Hs,Xs,Js,tu,ul,Bs,nu,pl,au,lu,uu,du,al]],[3,ui.i],ui.s]),ui._8(5120,ui.r,ui._16,[[3,ui.r]]),ui._8(4608,So.k,So.j,[ui.r,[2,So.s]]),ui._8(4608,Ho.k,Ho.k,[]),ui._8(4608,Ho.c,Ho.c,[]),ui._8(5120,ui.b,ui._1,[]),ui._8(5120,ui.p,ui._9,[]),ui._8(5120,ui.q,ui._12,[]),ui._8(4608,si.c,si.q,[So.c]),ui._8(6144,ui.D,null,[si.c]),ui._8(4608,si.f,fu.a,[]),ui._8(5120,si.d,function(t,e,n,i,r){return[new si.k(t,e),new si.o(n),new si.n(i,r)]},[So.c,ui.u,So.c,So.c,si.f]),ui._8(4608,si.e,si.e,[si.d,ui.u]),ui._8(135680,si.m,si.m,[So.c]),ui._8(4608,si.l,si.l,[si.e,si.m]),ui._8(5120,mu.a,di.d,[]),ui._8(5120,mu.c,di.e,[]),ui._8(4608,mu.b,di.c,[mu.a,mu.c]),ui._8(5120,ui.B,di.f,[si.l,mu.b,ui.u]),ui._8(6144,si.p,null,[si.m]),ui._8(4608,ui.G,ui.G,[ui.u]),ui._8(4608,si.h,si.h,[So.c]),ui._8(4608,si.i,si.i,[So.c]),ui._8(5120,pi.m,pi.o,[]),ui._8(4608,pi.j,pi.j,[pi.m,So.c]),ui._8(4608,pi.i,pi.s,[So.c,ui.w,pi.q]),ui._8(4608,pi.t,pi.t,[pi.i,pi.r]),ui._8(5120,pi.a,function(t,e){return[new pi.k(t),e]},[pi.j,pi.t]),ui._8(4608,pi.p,pi.p,[]),ui._8(6144,pi.l,null,[pi.p]),ui._8(4608,pi.h,pi.h,[pi.l]),ui._8(6144,pi.b,null,[pi.h]),ui._8(4608,pi.g,pi.n,[pi.b,ui.o]),ui._8(4608,pi.c,pi.c,[pi.g]),ui._8(4608,gu.b,di.b,[ui.B,si.b]),ui._8(4608,yu.a,yu.a,[uo.a,co.a]),ui._8(4608,yo.a,yo.a,[uo.a,co.a]),ui._8(4608,_u.a,_u.a,[]),ui._8(4608,Yo.a,Yo.a,[]),ui._8(4608,Xo.a,Xo.a,[po.a]),ui._8(4608,Mo.a,Mo.a,[co.a,po.a,ui.u,go.a]),ui._8(4608,vu.a,vu.a,[uo.a,co.a]),ui._8(5120,So.f,bu.b,[So.q,[2,So.a],co.a]),ui._8(4608,So.e,So.e,[So.f]),ui._8(5120,xu.b,xu.d,[uo.a,xu.a]),ui._8(5120,mo.a,mo.b,[uo.a,xu.b,So.e,wu.b,ui.i]),ui._8(4608,Su.a,Su.a,[uo.a,co.a,mo.a]),ui._8(4608,Tu.a,Tu.a,[uo.a,co.a]),ui._8(4608,wl.a,wl.a,[uo.a,co.a,mo.a]),ui._8(4608,ku.a,ku.a,[co.a,po.a,go.a,uo.a,ho.l]),ui._8(4608,Fo.a,Fo.a,[uo.a,co.a]),ui._8(4608,fo.a,fo.a,[po.a,co.a]),ui._8(4608,ki,ki,[]),ui._8(4608,cr,cr,[ki]),ui._8(4608,"MapEngineFeatureAdapter",dr,[cr]),ui._8(4608,Ii,Ii,[]),ui._8(4608,Mi,Mi,[]),ui._8(4608,Fi,Fi,[Ii,ki,Mi]),ui._8(4608,Oi,Oi,[_u.a]),ui._8(4608,Ki,Ki,[]),ui._8(4608,ir,ir,[]),ui._8(4608,rr,rr,[Ii,Ki,ir]),ui._8(4608,ar,ar,[Fi,Oi,rr,ir]),ui._8(4608,"MapEngine",lr,["MapEngineFeatureAdapter",Fi,ar]),ui._8(4608,mr,mr,[cr,Mi]),ui._8(4608,_r,_r,[pi.c]),ui._8(4608,Rr,Rr,[]),ui._8(4608,br,br,[]),ui._8(4608,jr,jr,[Ii,mr,Oi,cr,rr,_r,Ki,Rr,br]),ui._8(4608,Br,Br,[]),ui._8(4608,Ur,Ur,[Ii,Br,mr,Oi,_r,cr,rr,Ki,Rr,br]),ui._8(4608,Gr,Gr,[Fi,_r,ki,Mi]),ui._8(4608,Wr,Wr,[Fi]),ui._8(4608,Nr,Nr,[jr,Ur,rr]),ui._8(4608,mi.a,mi.a,[]),ui._8(4608,Yr,Yr,[vu.a,Su.a,wl.a,yo.a,Fo.a]),ui._8(4608,Vr,Vr,[rr,mi.a,Yr,Mi]),ui._8(4608,qr,qr,[Nr,Fi,ki,si.c,mr,Mi]),ui._8(4608,fi.a,fi.a,[]),ui._8(4608,gi.a,gi.a,[]),ui._8(4608,yi.a,yi.a,[]),ui._8(4608,_i.a,_i.a,[]),ui._8(4608,bi.a,bi.a,[]),ui._8(4608,vi.a,vi.a,[]),ui._8(4608,xi.a,xi.a,[]),ui._8(4608,wi.a,wi.a,[]),ui._8(4608,Si.a,Si.a,[]),ui._8(4608,Hr,Hr,[]),ui._8(4608,Ti.a,Ti.a,[]),ui._8(512,So.b,So.b,[]),ui._8(512,Ho.j,Ho.j,[]),ui._8(512,Ho.d,Ho.d,[]),ui._8(512,Ho.i,Ho.i,[]),ui._8(512,bu.a,bu.a,[]),ui._8(512,ui.k,Iu.a,[]),ui._8(256,co.b,{},[]),ui._8(1024,Eu.a,Eu.b,[]),ui._8(1024,po.a,po.b,[si.b,Eu.a,ui.u]),ui._8(1024,co.a,co.c,[co.b,po.a]),ui._8(512,go.a,go.a,[po.a]),ui._8(512,Au.a,Au.a,[]),ui._8(512,uo.a,uo.a,[co.a,po.a,[2,Au.a]]),ui._8(512,ho.l,ho.l,[uo.a]),ui._8(256,xu.a,{links:[]},[]),ui._8(512,ui.h,ui.h,[]),ui._8(512,Cu.a,Cu.a,[ui.h]),ui._8(1024,wu.b,wu.c,[Cu.a,ui.o]),ui._8(1024,ui.c,function(t,e,n,i,r,a,o,l,s,u,c,p,h){return[si.s(t),Lu.a(e),_u.b(n,i),ku.b(r,a,o,l,s),wu.d(u,c,p,h)]},[[2,ui.t],co.a,po.a,go.a,co.a,po.a,go.a,uo.a,ho.l,co.a,xu.a,wu.b,ui.u]),ui._8(512,ui.d,ui.d,[[2,ui.c]]),ui._8(131584,ui.f,ui.f,[ui.u,ui.T,ui.o,ui.k,ui.i,ui.d]),ui._8(512,ui.e,ui.e,[ui.f]),ui._8(512,si.a,si.a,[[3,si.a]]),ui._8(512,pi.d,pi.d,[]),ui._8(512,pi.f,pi.f,[]),ui._8(512,pi.e,pi.e,[]),ui._8(512,di.a,di.a,[]),ui._8(512,Wa,Wa,[]),ui._8(256,pi.q,"XSRF-TOKEN",[]),ui._8(256,pi.r,"X-XSRF-TOKEN",[]),ui._8(256,Ha.a,ya,[]),ui._8(256,So.a,"/",[])])});n(292);Object(ui.M)(),Object(si.j)().bootstrapModuleFactory(zu)},255:function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,r){if(e)if(n){var a="var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk);",o={};e(o),(i=r(o)).workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else n=r;else e=r}var e,n,i;return t(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}function i(t,e){this.x=t,this.y=e}function r(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!r(t[i],e[i]))return!1;return!0}return t===e}function a(t,e,n,i){var r=new Bn(t,e,n,i);return function(t){return r.solve(t)}}function o(t,e,n){return Math.min(n,Math.max(e,t))}function l(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var a=r[i];for(var o in a)t[o]=a[o]}return t}function s(){return Yn++}function u(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function c(t,e){return-1!==t.indexOf(e,t.length-e.length)}function p(t,e,n){var i={};for(var r in t)i[r]=e.call(n||this,t[r],r,t);return i}function h(t,e,n){var i={};for(var r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?p(t,d):t}function f(t){Vn[t]||("undefined"!=typeof console&&console.warn(t),Vn[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function g(t){for(var e=0,n=0,i=t.length,r=i-1,a=void 0,o=void 0;n<i;r=n++)a=t[n],e+=((o=t[r]).x-a.x)*(a.y+o.y);return e}function y(t){var e=new self.XMLHttpRequest;for(var n in e.open(t.method||"GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function _(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function v(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}function b(t){var e=t.value;return e?[new ii(t.key,e,"constants have been deprecated as of v8")]:[]}function x(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var a=r[i];for(var o in a)t[o]=a[o]}return t}function w(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function S(t){return Array.isArray(t)?t.map(S):w(t)}function T(t,e){return{kind:"array",itemType:t,N:e}}function k(t){if("array"===t.kind){var e=k(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function I(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!I(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=mi;n<i.length;n+=1)if(!I(i[n],e))return null}return"Expected "+k(t)+" but found "+k(e)+" instead."}function E(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function A(t){if(null===t)return oi;if("string"==typeof t)return si;if("boolean"==typeof t)return ui;if("number"==typeof t)return li;if(t instanceof yi)return ci;if(t instanceof _i)return di;if(Array.isArray(t)){for(var e,n=t.length,i=0,r=t;i<r.length;i+=1){var a=A(r[i]);if(e){if(e===a)continue;e=hi;break}e=a}return T(e||hi,n)}return pi}function C(t){if(t instanceof zi){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!C(t)&&(e=!1)}),e}function L(t){if(t instanceof zi&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!L(t)&&(e=!1)}),e}function z(t,e){if(t instanceof zi&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!z(t,e)&&(n=!1)}),n}function P(t,e){for(var n,i,r=0,a=t.length-1,o=0;r<=a;){if(n=t[o=Math.floor((r+a)/2)],i=t[o+1],e===n||e>n&&e<i)return o;if(n<e)r=o+1;else{if(!(n>e))throw new Ti("Input is not a number.");a=o-1}}return Math.max(o-1,0)}function D(t,e,n){return t*(1-n)+e*n}function M(t){return t>Zi?Math.pow(t,1/3):t/Ni+Bi}function F(t){return t>Ui?t*t*t:Ni*(t-Bi)}function O(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function R(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function j(t){var e=R(t.r),n=R(t.g),i=R(t.b),r=M((.4124564*e+.3575761*n+.1804375*i)/Oi),a=M((.2126729*e+.7151522*n+.072175*i)/Ri);return{l:116*a-16,a:500*(r-a),b:200*(a-M((.0193339*e+.119192*n+.9503041*i)/ji)),alpha:t.a}}function B(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=Ri*F(e),n=Oi*F(n),i=ji*F(i),new yi(O(3.2404542*n-1.5371385*e-.4985314*i),O(-.969266*n+1.8760108*e+.041556*i),O(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function U(t,e,n,i){var r=i-n,a=t-n;return 0===r?0:1===e?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}function N(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Z(t,e,n,i){return 0===i.compare(e,n)}function Y(t,e,n){var i="=="!==t&&"!="!==t;return function(){function r(t,e,n){this.type=ui,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],a=e.parse(t[1],1,hi);if(!a)return null;if(!N(n,a.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+k(a.type)+"'.");var o=e.parse(t[2],2,hi);if(!o)return null;if(!N(n,o.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+k(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+k(a.type)+"' and '"+k(o.type)+"'.");i&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Ii(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Ii(a.type,[o])));var l=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(l=e.parse(t[3],3,di)))return null}return new r(a,o,l)},r.prototype.evaluate=function(r){var a=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var l=A(a),s=A(o);if(l.kind!==s.kind||"string"!==l.kind&&"number"!==l.kind)throw new Ti('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+l.kind+", "+s.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var u=A(a),c=A(o);if("string"!==u.kind||"string"!==c.kind)return e(r,a,o)}return this.collator?n(r,a,o,this.collator.evaluate(r)):e(r,a,o)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.possibleOutputs=function(){return[!0,!1]},r.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},r}()}function V(t,e){var n=e[0],i=e[1],r=e[2],a=e[3];n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);var o=a?a.evaluate(t):1,l=E(n,i,r,o);if(l)throw new Ti(l);return new yi(n/255*o,i/255*o,r/255*o,o)}function q(t,e){return t in e}function G(t,e){var n=e[t];return void 0===n?null:n}function W(t){return{type:t}}function H(t){return{result:"success",value:t}}function $(t){return{result:"error",value:t}}function X(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function K(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function J(t){return!!t.expression&&t.expression.interpolated}function Q(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function tt(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function et(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function nt(t,e,n,i,r){return et(typeof n===r?i[n]:void 0,t.default,e.default)}function it(t,e,n){if("number"!==Q(n))return et(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var r=ot(t.stops,n);return t.stops[r][1]}function rt(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==Q(n))return et(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var a=ot(t.stops,n),o=function(e,i,r,o){var l=t.stops[a+1][0]-r,s=n-r;return 0===l?0:1===i?s/l:(Math.pow(i,s)-1)/(Math.pow(i,l)-1)}(0,i,t.stops[a][0]),l=t.stops[a][1],s=t.stops[a+1][1],u=Fi[e.type]||function(t){return t};if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Wi[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),o))}}return"function"==typeof l.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=l.evaluate.apply(void 0,t),i=s.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return u(n,i,o)}}:u(l,s,o)}function at(t,e,n){return"color"===e.type?n=yi.parse(n):Q(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),et(n,t.default,e.default)}function ot(t,e){for(var n,i,r=0,a=t.length-1,o=0;r<=a;){if(n=t[o=Math.floor((r+a)/2)][0],i=t[o+1][0],e===n||e>n&&e<i)return o;n<e?r=o+1:n>e&&(a=o-1)}return Math.max(o-1,0)}function lt(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in lr}function st(t,e){var n=new Di(lr,[],function(t){var e={color:ci,string:si,number:li,enum:si,boolean:ui};return"array"===t.type?T(e[t.value]||hi,t.length):e[t.type]||null}(e)),i=n.parse(t);return i?H(new sr(i,e)):$(n.errors)}function ut(t,e){if("error"===(t=st(t,e)).result)return t;var n=t.value.expression,i=C(n);if(!i&&!X(e))return $([new ri("","data expressions not supported")]);var r=z(n,["zoom"]);if(!r&&!K(e))return $([new ri("","zoom expressions not supported")]);var a=function t(e){var n=null;if(e instanceof Xi)n=t(e.result);else if(e instanceof $i)for(var i=0,r=e.args;i<r.length;i+=1){if(n=t(r[i]))break}else(e instanceof Mi||e instanceof Hi)&&e.input instanceof zi&&"zoom"===e.input.name&&(n=e);return n instanceof ri?n:(e.eachChild(function(e){var i=t(e);i instanceof ri?n=i:!n&&i?n=new ri("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new ri("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return a||r?a instanceof ri?$([a]):a instanceof Hi&&!J(e)?$([new ri("",'"interpolate" expressions cannot be used with this property')]):H(a?new cr(i?"camera":"composite",t.value,a):new ur(i?"constant":"source",t.value)):$([new ri("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function ct(t,e){if(tt(t))return new pr(t,e);if(lt(t)){var n=ut(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=yi.parse(t)),{kind:"constant",evaluate:function(){return i}}}function pt(t){var e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},a=t.style,o=t.styleSpec,l=[],s=Q(n);if("object"!==s)return[new ii(e,n,"object expected, "+s+" found")];for(var u in n){var c=u.split(".")[0],p=i[c]||i["*"],h=void 0;if(r[c])h=r[c];else if(i[c])h=Dt;else if(r["*"])h=r["*"];else{if(!i["*"]){l.push(new ii(e,n[u],'unknown property "'+u+'"'));continue}h=Dt}l=l.concat(h({key:(e?e+".":e)+u,value:n[u],valueSpec:p,style:a,styleSpec:o,object:n,objectKey:u},n))}for(var d in i)r[d]||i[d].required&&void 0===i[d].default&&void 0===n[d]&&l.push(new ii(e,n,'missing required property "'+d+'"'));return l}function ht(t){var e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,a=t.key,o=t.arrayElementValidator||Dt;if("array"!==Q(e))return[new ii(a,e,"array expected, "+Q(e)+" found")];if(n.length&&e.length!==n.length)return[new ii(a,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new ii(a,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var l={type:n.value};r.$version<7&&(l.function=n.function),"object"===Q(n.value)&&(l=n.value);for(var s=[],u=0;u<e.length;u++)s=s.concat(o({array:e,arrayIndex:u,value:e[u],valueSpec:l,style:i,styleSpec:r,key:a+"["+u+"]"}));return s}function dt(t){var e=t.key,n=t.value,i=t.valueSpec,r=Q(n);return"number"!==r?[new ii(e,n,"number expected, "+r+" found")]:"minimum"in i&&n<i.minimum?[new ii(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new ii(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function ft(t){function e(t){var e=[],i=t.value,l=t.key;if("array"!==Q(i))return[new ii(l,i,"array expected, "+Q(i)+" found")];if(2!==i.length)return[new ii(l,i,"array length 2 expected, length "+i.length+" found")];if(p){if("object"!==Q(i[0]))return[new ii(l,i,"object expected, "+Q(i[0])+" found")];if(void 0===i[0].zoom)return[new ii(l,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new ii(l,i,"object stop key must have value")];if(a&&a>w(i[0].zoom))return[new ii(l,i[0].zoom,"stop zoom values must appear in ascending order")];w(i[0].zoom)!==a&&(a=w(i[0].zoom),r=void 0,s={}),e=e.concat(pt({key:l+"[0]",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:dt,value:n}}))}else e=e.concat(n({key:l+"[0]",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return e.concat(Dt({key:l+"[1]",value:i[1],valueSpec:o,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=Q(t.value),a=w(t.value),u=null!==t.value?t.value:e;if(i){if(n!==i)return[new ii(t.key,u,n+" stop domain type must match previous stop domain type "+i)]}else i=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new ii(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==l){var c="number expected, "+n+" found";return X(o)&&void 0===l&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ii(t.key,u,c)]}return"categorical"!==l||"number"!==n||isFinite(a)&&Math.floor(a)===a?"categorical"!==l&&"number"===n&&void 0!==r&&a<r?[new ii(t.key,u,"stop domain values must appear in ascending order")]:(r=a,"categorical"===l&&a in s?[new ii(t.key,u,"stop domain values must be unique")]:(s[a]=!0,[])):[new ii(t.key,u,"integer expected, found "+a)]}var i,r,a,o=t.valueSpec,l=w(t.value.type),s={},u="categorical"!==l&&void 0===t.value.property,c=!u,p="array"===Q(t.value.stops)&&"array"===Q(t.value.stops[0])&&"object"===Q(t.value.stops[0][0]),h=pt({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===l)return[new ii(t.key,t.value,'identity function may not have a "stops" property')];var n=[],i=t.value;return n=n.concat(ht({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===Q(i)&&0===i.length&&n.push(new ii(t.key,i,"array must have at least one stop")),n},default:function(t){return Dt({key:t.key,value:t.value,valueSpec:o,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===l&&u&&h.push(new ii(t.key,t.value,'missing required property "property"')),"identity"===l||t.value.stops||h.push(new ii(t.key,t.value,'missing required property "stops"')),"exponential"===l&&t.valueSpec.expression&&!J(t.valueSpec)&&h.push(new ii(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!X(t.valueSpec)?h.push(new ii(t.key,t.value,"property functions not supported")):u&&!K(t.valueSpec)&&h.push(new ii(t.key,t.value,"zoom functions not supported"))),"categorical"!==l&&!p||void 0!==t.value.property||h.push(new ii(t.key,t.value,'"property" property is required')),h}function mt(t){var e=("property"===t.expressionContext?ut:st)(S(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new ii(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new ii(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||L(e.value._styleExpression.expression)?[]:[new ii(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function gt(t){var e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(w(n))&&r.push(new ii(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(w(n))&&r.push(new ii(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),r}function yt(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!yt(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function _t(t){if(null===t||void 0===t)return function(){return!0};yt(t)||(t=bt(t));var e=st(t,hr);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function vt(t,e){return t<e?-1:t>e?1:0}function bt(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?xt(t[1],t[2],"=="):"!="===n?Tt(xt(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?xt(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(bt))):"all"===n?["all"].concat(t.slice(1).map(bt)):"none"===n?["all"].concat(t.slice(1).map(bt).map(Tt)):"in"===n?wt(t[1],t.slice(2)):"!in"===n?Tt(wt(t[1],t.slice(2))):"has"===n?St(t[1]):"!has"!==n||Tt(St(t[1]))}function xt(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function wt(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(vt)]]:["filter-in-small",t,["literal",e]]}}function St(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Tt(t){return["!",t]}function kt(t){return yt(S(t.value))?mt(x({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==Q(n))return[new ii(i,n,"array expected, "+Q(n)+" found")];var r,a=e.styleSpec,o=[];if(n.length<1)return[new ii(i,n,"filter array must have at least 1 element")];switch(o=o.concat(gt({key:i+"[0]",value:n[0],valueSpec:a.filter_operator,style:e.style,styleSpec:e.styleSpec})),w(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===w(n[1])&&o.push(new ii(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&o.push(new ii(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(r=Q(n[1]))&&o.push(new ii(i+"[1]",n[1],"string expected, "+r+" found"));for(var l=2;l<n.length;l++)r=Q(n[l]),"$type"===w(n[1])?o=o.concat(gt({key:i+"["+l+"]",value:n[l],valueSpec:a.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new ii(i+"["+l+"]",n[l],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var s=1;s<n.length;s++)o=o.concat(t({key:i+"["+s+"]",value:n[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Q(n[1]),2!==n.length?o.push(new ii(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==r&&o.push(new ii(i+"[1]",n[1],"string expected, "+r+" found"))}return o}(t)}function It(t,e){var n=t.key,i=t.style,r=t.styleSpec,a=t.value,o=t.objectKey,l=r[e+"_"+t.layerType];if(!l)return[];var s=o.match(/^(.*)-transition$/);if("paint"===e&&s&&l[s[1]]&&l[s[1]].transition)return Dt({key:n,value:a,valueSpec:r.transition,style:i,styleSpec:r});var u,c=t.valueSpec||l[o];if(!c)return[new ii(n,a,'unknown property "'+o+'"')];if("string"===Q(a)&&X(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new ii(n,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===o&&i&&!i.glyphs&&p.push(new ii(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&tt(S(a))&&"identity"===w(a.type)&&p.push(new ii(n,a,'"text-font" does not support identity functions'))),p.concat(Dt({key:t.key,value:a,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:o}))}function Et(t){return It(t,"paint")}function At(t){return It(t,"layout")}function Ct(t){var e=[],n=t.value,i=t.key,r=t.style,a=t.styleSpec;n.type||n.ref||e.push(new ii(i,n,'either "type" or "ref" is required'));var o,l=w(n.type),s=w(n.ref);if(n.id)for(var u=w(n.id),c=0;c<t.arrayIndex;c++){var p=r.layers[c];w(p.id)===u&&e.push(new ii(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+p.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new ii(i,n[t],'"'+t+'" is prohibited for ref layers'))}),r.layers.forEach(function(t){w(t.id)===s&&(o=t)}),o?o.ref?e.push(new ii(i,n.ref,"ref cannot reference another ref layer")):l=w(o.type):e.push(new ii(i,n.ref,'ref layer "'+s+'" not found'));else if("background"!==l)if(n.source){var h=r.sources&&r.sources[n.source],d=h&&w(h.type);h?"vector"===d&&"raster"===l?e.push(new ii(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===d&&"raster"!==l?e.push(new ii(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==l?e.push(new ii(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==l||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&h.lineMetrics||e.push(new ii(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new ii(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new ii(i,n.source,'source "'+n.source+'" not found'))}else e.push(new ii(i,n,'missing required property "source"'));return e=e.concat(pt({key:i,value:n,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Dt({key:i+".type",value:n.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:kt,layout:function(t){return pt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return At(x({layerType:l},t))}}})},paint:function(t){return pt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Et(x({layerType:l},t))}}})}}}))}function Lt(t){var e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new ii(n,e,'"type" is required')];var a=w(e.type),o=[];switch(a){case"vector":case"raster":case"raster-dem":if(o=o.concat(pt({key:n,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i})),"url"in e)for(var l in e)["type","url","tileSize","attribution"].indexOf(l)<0&&o.push(new ii(n+"."+l,e[l],'a source with a "url" property may not include a "'+l+'" property'));return o;case"geojson":return pt({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i});case"video":return pt({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return pt({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return o.push(new ii(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),o;default:return gt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function zt(t){var e=t.value,n=t.styleSpec,i=n.light,r=t.style,a=[],o=Q(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new ii("light",e,"object expected, "+o+" found")]);for(var l in e){var s=l.match(/^(.*)-transition$/);a=a.concat(s&&i[s[1]]&&i[s[1]].transition?Dt({key:l,value:e[l],valueSpec:n.transition,style:r,styleSpec:n}):i[l]?Dt({key:l,value:e[l],valueSpec:i[l],style:r,styleSpec:n}):[new ii(l,e[l],'unknown property "'+l+'"')])}return a}function Pt(t){var e=t.value,n=t.key,i=Q(e);return"string"!==i?[new ii(n,e,"string expected, "+i+" found")]:[]}function Dt(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&tt(w(e))?ft(t):n.expression&&lt(S(e))?mt(t):n.type&&dr[n.type]?dr[n.type](t):pt(x({},t,{valueSpec:n.type?i[n.type]:n}))}function Mt(t){var e=t.value,n=t.key,i=Pt(t);return i.length?i:(-1===e.indexOf("{range}")&&i.push(new ii(n,e,'"glyphs" url must include a "{range}" token')),i)}function Ft(t,e){var n=[];return n=n.concat(Dt({key:"",value:t,valueSpec:(e=e||ni).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Mt,"*":function(){return[]}}})),t.constants&&(n=n.concat(b({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ot(n)}function Ot(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Rt(t){return function(){return Ot(t.apply(this,arguments))}}function jt(t,e){var n=!1;if(e&&e.length)for(var i=0,r=e;i<r.length;i+=1){var a=r[i];t.fire(new ti(new Error(a.message))),n=!0}return n}function Bt(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var a=0;a<this.d*this.d;a++){var o=r[vr+a],l=r[vr+a+1];i.push(o===l?null:r.subarray(o,l))}var s=r[vr+i.length+1];this.keys=r.subarray(r[vr+i.length],s),this.bboxes=r.subarray(s),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var u=0;u<this.d*this.d;u++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}function Ut(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),xr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function Nt(t,e){if(null===t||void 0===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof br)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],r=0,a=t;r<a.length;r+=1){i.push(Nt(a[r],e))}return i}if("object"==typeof t){var o=t.constructor,l=o._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var s=o.serialize?o.serialize(t,e):{};if(!o.serialize){for(var u in t)if(t.hasOwnProperty(u)&&!(xr[l].omit.indexOf(u)>=0)){var c=t[u];s[u]=xr[l].shallow.indexOf(u)>=0?c:Nt(c,e)}t instanceof Error&&(s.message=t.message)}if(s.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(s.$name=l),s}throw new Error("can't serialize object of type "+typeof t)}function Zt(t){if(null===t||void 0===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof br)return t;if(Array.isArray(t))return t.map(Zt);if("object"==typeof t){var e=t.$name||"Object",n=xr[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),r=0,a=Object.keys(t);r<a.length;r+=1){var o=a[r];if("$name"!==o){var l=t[o];i[o]=xr[e].shallow.indexOf(o)>=0?l:Zt(l)}}return i}throw new Error("can't deserialize object of type "+typeof t)}function Yt(t){for(var e=0,n=t;e<n.length;e+=1)if(qt(n[e].charCodeAt(0)))return!0;return!1}function Vt(t){return!(kr.Arabic(t)||kr["Arabic Supplement"](t)||kr["Arabic Extended-A"](t)||kr["Arabic Presentation Forms-A"](t)||kr["Arabic Presentation Forms-B"](t))}function qt(t){return!!(746===t||747===t||!(t<4352)&&(kr["Bopomofo Extended"](t)||kr.Bopomofo(t)||kr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||kr["CJK Compatibility Ideographs"](t)||kr["CJK Compatibility"](t)||kr["CJK Radicals Supplement"](t)||kr["CJK Strokes"](t)||!(!kr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||kr["CJK Unified Ideographs Extension A"](t)||kr["CJK Unified Ideographs"](t)||kr["Enclosed CJK Letters and Months"](t)||kr["Hangul Compatibility Jamo"](t)||kr["Hangul Jamo Extended-A"](t)||kr["Hangul Jamo Extended-B"](t)||kr["Hangul Jamo"](t)||kr["Hangul Syllables"](t)||kr.Hiragana(t)||kr["Ideographic Description Characters"](t)||kr.Kanbun(t)||kr["Kangxi Radicals"](t)||kr["Katakana Phonetic Extensions"](t)||kr.Katakana(t)&&12540!==t||!(!kr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!kr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||kr["Unified Canadian Aboriginal Syllabics"](t)||kr["Unified Canadian Aboriginal Syllabics Extended"](t)||kr["Vertical Forms"](t)||kr["Yijing Hexagram Symbols"](t)||kr["Yi Syllables"](t)||kr["Yi Radicals"](t)))}function Gt(t){return!(qt(t)||function(t){return!!(kr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||kr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||kr["Letterlike Symbols"](t)||kr["Number Forms"](t)||kr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||kr["Control Pictures"](t)&&9251!==t||kr["Optical Character Recognition"](t)||kr["Enclosed Alphanumerics"](t)||kr["Geometric Shapes"](t)||kr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||kr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||kr["CJK Symbols and Punctuation"](t)||kr.Katakana(t)||kr["Private Use Area"](t)||kr["CJK Compatibility Forms"](t)||kr["Small Form Variants"](t)||kr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Wt(t,e){return!(!e&&(t>=1424&&t<=2303||kr["Arabic Presentation Forms-A"](t)||kr["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||kr.Khmer(t))}function Ht(t,e){void 0===e&&(e=1);var n=0,i=0;return{members:t.map(function(t){var r,a=(r=t.type,Wr[r].BYTES_PER_ELEMENT),o=n=$t(n,Math.max(e,a)),l=t.components||1;return i=Math.max(i,a),n+=a*l,{name:t.name,type:t.type,components:l,offset:o}}),size:$t(n,Math.max(i,e)),alignment:e}}function $t(t,e){return Math.ceil(t/e)*e}function Xt(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Kt(t){return[Pa(255*t.r,255*t.g),Pa(255*t.b,255*t.a)]}function Jt(t,e,n){var i={"line-pattern":{source:ta,composite:ta},"fill-pattern":{source:ta,composite:ta},"fill-extrusion-pattern":{source:ta,composite:ta}}[t];return i&&i[n]||{color:{source:ma,composite:ga},number:{source:ua,composite:ma}}[e][n]}function Qt(t){for(var e=Xa/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],a=0;a<r.length;a++){var o=r[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<Ka.min||o.x>Ka.max||o.y<Ka.min||o.y>Ka.max)&&f("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function te(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}function ee(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];if(se(r,e))return!0;if(ae(e,r,n))return!0}return!1}function ne(t,e){if(1===t.length&&1===t[0].length)return le(e,t[0][0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(le(t,i[r]))return!0;for(var a=0;a<t.length;a++){for(var o=t[a],l=0;l<o.length;l++)if(le(e,o[l]))return!0;for(var s=0;s<e.length;s++)if(re(o,e[s]))return!0}return!1}function ie(t,e,n){for(var i=0;i<e.length;i++)for(var r=e[i],a=0;a<t.length;a++){var o=t[a];if(o.length>=3)for(var l=0;l<r.length;l++)if(se(o,r[l]))return!0;if(function(t,e,n){if(t.length>1){if(re(t,e))return!0;for(var i=0;i<e.length;i++)if(ae(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(ae(t[r],e,n))return!0;return!1}(o,r,n))return!0}return!1}function re(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],a=0;a<e.length-1;a++)if(function(t,e,n,i){return m(t,n,i)!==m(e,n,i)&&m(t,e,n)!==m(t,e,i)}(i,r,e[a],e[a+1]))return!0;return!1}function ae(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(oe(t,e[r-1],e[r])<i)return!0;return!1}function oe(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function le(t,e){for(var n,i,r,a=!1,o=0;o<t.length;o++)for(var l=0,s=(n=t[o]).length-1;l<n.length;s=l++)i=n[l],r=n[s],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(a=!a);return a}function se(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var a=t[i],o=t[r];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function ue(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).binders[t].maxValue}function ce(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function pe(t,e,n,i,r){if(!e[0]&&!e[1])return t;var a=Nn.convert(e);"viewport"===n&&a._rotate(-i);for(var o=[],l=0;l<t.length;l++){for(var s=t[l],u=[],c=0;c<s.length;c++)u.push(s[c].sub(a._mult(r)));o.push(u)}return o}function he(){var t=new to(9);return to!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function de(){var t=new to(3);return to!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function fe(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function me(t,e,n){var i=new to(3);return i[0]=t,i[1]=e,i[2]=n,i}function ge(){var t=new to(4);return to!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function ye(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=a*o),t}function _e(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,t}function ve(){var t=new to(4);return to!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function be(t,e,n){var i=_e([],[t.x,t.y,0,1],e);return new Nn((i[0]/i[3]+1)*n.width*.5,(i[1]/i[3]+1)*n.height*.5)}function xe(t,e,n,i){var r=e.width,a=e.height;if(i){if(i.length!==r*a*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*a*n);return t.width=r,t.height=a,t.data=i,t}function we(t,e,n){var i=e.width,r=e.height;if(i!==t.width||r!==t.height){var a=xe({},{width:i,height:r},n);Se(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=a.data}}function Se(t,e,n,i,r,a){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,l=e.data,s=0;s<r.height;s++)for(var u=((n.y+s)*t.width+n.x)*a,c=((i.y+s)*e.width+i.x)*a,p=0;p<r.width*a;p++)l[c+p]=o[u+p];return e}function Te(t,e){for(var n=new Uint8Array(1024),i={},r=0,a=0;r<256;r++,a+=4){i[e]=r/255;var o=t.evaluate(i);n[a+0]=Math.floor(255*o.r/o.a),n[a+1]=Math.floor(255*o.g/o.a),n[a+2]=Math.floor(255*o.b/o.a),n[a+3]=Math.floor(255*o.a)}return new so({width:256,height:1},n)}function ke(t,e,n){n=n||2;var i,r,a,o,l,s,u,c=e&&e.length,p=c?e[0]*n:t.length,h=Ie(t,0,p,n,!0),d=[];if(!h)return d;if(c&&(h=function(t,e,n,i){var r,a,o,l,s,u=[];for(r=0,a=e.length;r<a;r++)o=e[r]*i,l=r<a-1?e[r+1]*i:t.length,(s=Ie(t,o,l,i,!1))===s.next&&(s.steiner=!0),u.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(s));for(u.sort(Ce),r=0;r<u.length;r++)(function(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var l=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=r&&l>o){if(o=l,l===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var s,u=n,c=n.x,p=n.y,h=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&ze(a<p?r:o,a,c,p,a<p?o:r,a,i.x,i.y)&&((s=Math.abs(a-i.y)/(r-i.x))<h||s===h&&i.x>n.x)&&Fe(i,t)&&(n=i,h=s),i=i.next;return n}(t,e)){var n=Oe(e,t);Ee(n,n.next)}})(u[r],n),n=Ee(n,n.next);return n}(t,e,h,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var f=n;f<p;f+=n)l=t[f],s=t[f+1],l<i&&(i=l),s<r&&(r=s),l>a&&(a=l),s>o&&(o=s);u=0!==(u=Math.max(a-i,o-r))?1/u:0}return Ae(h,d,n,i,r,u),d}function Ie(t,e,n,i,r){var a,o;if(r===Ue(t,e,n,i)>0)for(a=e;a<n;a+=i)o=Re(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=Re(a,t[a],t[a+1],o);return o&&De(o,o.next)&&(je(o),o=o.next),o}function Ee(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!De(i,i.next)&&0!==Pe(i.prev,i,i.next))i=i.next;else{if(je(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Ae(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Le(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,l,s,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,l=0,e=0;e<u&&(l++,i=i.nextZ);e++);for(s=u;l>0||s>0&&i;)0!==l&&(0===s||!i||n.z<=i.z)?(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,s--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(t,i,r,a);for(var l,s,u=t;t.prev!==t.next;)if(l=t.prev,s=t.next,a?function(t,e,n,i){var r=t.prev,a=t,o=t.next;if(Pe(r,a,o)>=0)return!1;for(var l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,s=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,u=Le(r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,e,n,i),c=Le(l,s,e,n,i),p=t.prevZ,h=t.nextZ;p&&p.z>=u&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&ze(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Pe(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&ze(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Pe(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&ze(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Pe(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&ze(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Pe(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}(t,i,r,a):function(t){var e=t.prev,n=t,i=t.next;if(Pe(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ze(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Pe(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}(t))e.push(l.i/n),e.push(t.i/n),e.push(s.i/n),je(t),t=s.next,u=s.next;else if((t=s)===u){o?1===o?Ae(t=function(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!De(r,a)&&Me(r,i,i.next,a)&&Fe(r,a)&&Fe(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),je(i),je(i.next),i=t=a),i=i.next}while(i!==t);return i}(t,e,n),e,n,i,r,a,2):2===o&&function(t,e,n,i,r,a){var o=t;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Me(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Fe(t,e)&&Fe(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}(o,l)){var s=Oe(o,l);return o=Ee(o,o.next),s=Ee(s,s.next),Ae(o,e,n,i,r,a),void Ae(s,e,n,i,r,a)}l=l.next}o=o.next}while(o!==t)}(t,e,n,i,r,a):Ae(Ee(t),e,n,i,r,a,1);break}}}function Ce(t,e){return t.x-e.x}function Le(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ze(t,e,n,i,r,a,o,l){return(r-o)*(e-l)-(t-o)*(a-l)>=0&&(t-o)*(i-l)-(n-o)*(e-l)>=0&&(n-o)*(a-l)-(r-o)*(i-l)>=0}function Pe(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function De(t,e){return t.x===e.x&&t.y===e.y}function Me(t,e,n,i){return!!(De(t,e)&&De(n,i)||De(t,i)&&De(n,e))||Pe(t,e,n)>0!=Pe(t,e,i)>0&&Pe(n,i,t)>0!=Pe(n,i,e)>0}function Fe(t,e){return Pe(t.prev,t,t.next)<0?Pe(t,e,t.next)>=0&&Pe(t,t.prev,e)>=0:Pe(t,e,t.prev)<0||Pe(t,t.next,e)<0}function Oe(t,e){var n=new Be(t.i,t.x,t.y),i=new Be(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Re(t,e,n,i){var r=new Be(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function je(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Be(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ue(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}function Ne(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ze(t,e){var n=t.length;if(n<=1)return[t];for(var i,r,a=[],o=0;o<n;o++){var l=g(t[o]);0!==l&&(t[o].area=Math.abs(l),void 0===r&&(r=l<0),r===l<0?(i&&a.push(i),i=[t[o]]):i.push(t[o]))}if(i&&a.push(i),e>1)for(var s=0;s<a.length;s++)a[s].length<=e||(_o(a[s],e,1,a[s].length-1,Ye),a[s]=a[s].slice(0,e));return a}function Ye(t,e){return e.area-t.area}function Ve(t,e,n){for(var i=n.patternDependencies,r=!1,a=0,o=e;a<o.length;a+=1){var l=o[a].paint.get(t+"-pattern");l.isConstant()||(r=!0);var s=l.constantOr(null);s&&(r=!0,i[s.to]=!0,i[s.from]=!0)}return r}function qe(t,e,n,i,r){for(var a=r.patternDependencies,o=0,l=e;o<l.length;o+=1){var s=l[o],u=s.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:i-1},n,{}),p=u.evaluate({zoom:i},n,{}),h=u.evaluate({zoom:i+1},n,{});a[c]=!0,a[p]=!0,a[h]=!0,n.patterns[s.id]={min:c,mid:p,max:h}}}return n}function Ge(t,e,n,i,r,a,o,l){t.emplaceBack(e,n,2*Math.floor(i*To)+o,r*To*2,a*To*2,Math.round(l))}function We(t,e){return t.x===e.x&&(t.x<0||t.x>Xa)||t.y===e.y&&(t.y<0||t.y>Xa)}function He(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Xa})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Xa})}function $e(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(Xe,this,e)}function Xe(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Ke(t){for(var e,n,i=0,r=0,a=t.length,o=a-1;r<a;o=r++)e=t[r],i+=((n=t[o]).x-e.x)*(e.y+n.y);return i}function Je(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Qe,this,e),this.length=this._features.length}function Qe(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function tn(t,e,n){if(3===t){var i=new zo(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}function en(t,e,n,i,r,a,o){t.emplaceBack(e.x,e.y,i?1:0,r?1:-1,Math.round(Mo*n.x)+128,Math.round(Mo*n.y)+128,1+(0===a?0:a<0?-1:1)|(o*Oo&63)<<2,o*Oo>>6)}function nn(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Ro-1)}function rn(t,e){return e>0?e+2*t:t}function an(t,e,n){var i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Lr.applyArabicShaping&&(t=Lr.applyArabicShaping(t)),t}function on(t,e,n){return t instanceof xi?(t.sections.forEach(function(t){t.text=an(t.text,e,n)}),t):an(t,e,n)}function ln(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new zr(t+1))};if("source"===n.kind)return{functionType:"source"};for(var i=n.zoomStops,r=0;r<i.length&&i[r]<=t;)r++;for(var a=r=Math.max(0,r-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var o={min:i[r],max:i[a]};return"composite"===n.kind?{functionType:"composite",zoomRange:o,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new zr(t+1)),zoomRange:o,sizeRange:{min:n.evaluate(new zr(o.min)),max:n.evaluate(new zr(o.max))},propertyValue:e.value}}function sn(t,e,n,i,r,a,o,l){t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),a,o,l?l[0]:0,l?l[1]:0)}function un(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function cn(t){for(var e=0,n=0,i=0,r=t;i<r.length;i+=1){var a=r[i];e+=a.w*a.h,n=Math.max(n,a.w)}t.sort(function(t,e){return e.h-t.h});for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],l=0,s=0,u=0,c=t;u<c.length;u+=1)for(var p=c[u],h=o.length-1;h>=0;h--){var d=o[h];if(!(p.w>d.w||p.h>d.h)){if(p.x=d.x,p.y=d.y,s=Math.max(s,p.y+p.h),l=Math.max(l,p.x+p.w),p.w===d.w&&p.h===d.h){var f=o.pop();h<o.length&&(o[h]=f)}else p.h===d.h?(d.x+=p.w,d.w-=p.w):p.w===d.w?(d.y+=p.h,d.h-=p.h):(o.push({x:d.x+p.w,y:d.y,w:d.w-p.w,h:p.h}),d.y+=p.h,d.h-=p.h);break}}return{w:l,h:s,fill:e/(l*s)||0}}function pn(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function hn(t){return t.type===pn.Bytes?t.readVarint()+t.pos:t.pos+1}function dn(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function fn(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function mn(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function gn(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function yn(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function _n(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function vn(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function bn(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function xn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function wn(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Sn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Tn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function kn(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function In(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function En(t,e,n){1===t&&n.readMessage(An,e)}function An(t,e,n){if(3===t){var i=n.readMessage(Cn,{}),r=i.width,a=i.height,o=i.left,l=i.top,s=i.advance;e.push({id:i.id,bitmap:new lo({width:r+2*vl,height:a+2*vl},i.bitmap),metrics:{width:r,height:a,left:o,top:l,advance:s}})}}function Cn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Ln(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}function zn(t,e,n,i){(t*=2)<0&&(t=-1*t-1);var r=1<<e;return 32*(r*r*t+r*i+n)+e}function Pn(t,e){return e-t}function Dn(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function Mn(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Fn(t,e,n,i,r,a){for(var o=null,l=Dn(e,n,r,a),s=0,u=i;s<u.length;s+=1){var c=u[s],p=Dn(e-c.x,n,r,a)+c.badness;p<=l&&(o=c,l=p)}return{index:t,x:e,priorBreak:o,badness:l}}function On(t,e,n,i){if(!n)return[];if(!t)return[];for(var r,a=[],o=function(t,e,n,i){for(var r=0,a=0;a<t.length();a++){var o=t.getSection(a),l=i[o.fontStack],s=l&&l[t.getCharCode(a)];s&&(r+=s.metrics.advance*o.scale+e)}return r/Math.max(1,Math.ceil(r/n))}(t,e,n,i),l=0,s=0;s<t.length();s++){var u=t.getSection(s),c=t.getCharCode(s),p=i[u.fontStack],h=p&&p[c];h&&!Fl[c]&&(l+=h.metrics.advance*u.scale+e),s<t.length()-1&&(Ol[c]||!((r=c)<11904)&&(kr["Bopomofo Extended"](r)||kr.Bopomofo(r)||kr["CJK Compatibility Forms"](r)||kr["CJK Compatibility Ideographs"](r)||kr["CJK Compatibility"](r)||kr["CJK Radicals Supplement"](r)||kr["CJK Strokes"](r)||kr["CJK Symbols and Punctuation"](r)||kr["CJK Unified Ideographs Extension A"](r)||kr["CJK Unified Ideographs"](r)||kr["Enclosed CJK Letters and Months"](r)||kr["Halfwidth and Fullwidth Forms"](r)||kr.Hiragana(r)||kr["Ideographic Description Characters"](r)||kr["Kangxi Radicals"](r)||kr["Katakana Phonetic Extensions"](r)||kr.Katakana(r)||kr["Vertical Forms"](r)||kr["Yi Radicals"](r)||kr["Yi Syllables"](r)))&&a.push(Fn(s+1,l,o,a,Mn(c,t.getCharCode(s+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Fn(t.length(),l,o,a,0,!0))}function Rn(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function jn(t,e,n,i,r){if(r){var a=t[i],o=e[a.fontStack],l=o&&o[a.glyph];if(l)for(var s=l.metrics.advance*a.scale,u=(t[i].x+s)*r,c=n;c<=i;c++)t[c].x-=u}}var Bn=n;n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,i,r,a,o;for(void 0===e&&(e=1e-6),r=t,o=0;o<8;o++){if(a=this.sampleCurveX(r)-t,Math.abs(a)<e)return r;var l=this.sampleCurveDerivativeX(r);if(Math.abs(l)<1e-6)break;r-=a/l}if(i=1,(r=t)<(n=0))return n;if(r>i)return i;for(;n<i;){if(a=this.sampleCurveX(r),Math.abs(a-t)<e)return r;t>a?n=r:i=r,r=.5*(i-n)+n}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Un=function(t,e,n){this.column=t,this.row=e,this.zoom=n};Un.prototype.clone=function(){return new Un(this.column,this.row,this.zoom)},Un.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},Un.prototype.sub=function(t){return this.clone()._sub(t)},Un.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},Un.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var Nn=i;i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t};var Zn=a(.25,.1,.25,1),Yn=1,Vn={},qn=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Gn=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Wn=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Hn={now:qn,frame:function(t){var e=Gn(t);return{cancel:function(){return Wn(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var $n=self.document.createElement("img");$n.onload=function(){Hn.supportsWebp=!0},$n.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var Xn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Xn);var Kn=function(t){function e(e,n,i){t.call(this,e),this.status=n,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Jn=function(t,e){var n=y(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var i=n.response;if(0===i.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));(n.status>=200&&n.status<300||0===n.status)&&n.response?e(null,{data:i,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new Kn(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},Qn=function(t,e){void 0===e&&(e={}),l(this,e),this.type=t},ti=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",l({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Qn),ei=function(){};ei.prototype.on=function(t,e){return this._listeners=this._listeners||{},_(t,e,this._listeners),this},ei.prototype.off=function(t,e){return v(t,e,this._listeners),v(t,e,this._oneTimeListeners),this},ei.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},_(t,e,this._oneTimeListeners),this},ei.prototype.fire=function(t){"string"==typeof t&&(t=new Qn(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var r=0,a=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];r<a.length;r+=1){var o=a[r];v(e,o,this._oneTimeListeners),o.call(this,t)}var s=this._eventedParent;s&&(l(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else t instanceof ti&&console.error(t.error);return this},ei.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},ei.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var ni={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-order":{type:"enum",values:{"viewport-y":{},source:{}},default:"viewport-y",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},ii=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)},ri=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ai=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.bindings[r[0]]=r[1]}};ai.prototype.concat=function(t){return new ai(this,t)},ai.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},ai.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var oi={kind:"null"},li={kind:"number"},si={kind:"string"},ui={kind:"boolean"},ci={kind:"color"},pi={kind:"object"},hi={kind:"value"},di={kind:"collator"},fi={kind:"formatted"},mi=[oi,li,si,ui,ci,fi,pi,T(hi)],gi=e(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return i("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function o(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in l)return l[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var s=i.indexOf("("),u=i.indexOf(")");if(-1!==s&&u+1===i.length){var c=i.substr(0,s),p=i.substr(s+1,u-(s+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=a(p.pop());case"rgb":return 3!==p.length?null:[r(p[0]),r(p[1]),r(p[2]),h];case"hsla":if(4!==p.length)return null;h=a(p.pop());case"hsl":if(3!==p.length)return null;var d=(parseFloat(p[0])%360+360)%360/360,f=a(p[1]),m=a(p[2]),g=m<=.5?m*(f+1):m+f-m*f,y=2*m-g;return[n(255*o(y,g,d+1/3)),n(255*o(y,g,d)),n(255*o(y,g,d-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,yi=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};yi.parse=function(t){if(t){if(t instanceof yi)return t;if("string"==typeof t){var e=gi(t);if(e)return new yi(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},yi.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],i=t[2],r=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(i)+","+r+")"},yi.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},yi.black=new yi(0,0,0,1),yi.white=new yi(1,1,1,1),yi.transparent=new yi(0,0,0,0),yi.red=new yi(1,0,0,1);var _i=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_i.prototype.compare=function(t,e){return this.collator.compare(t,e)},_i.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var vi=function(t,e,n){this.type=di,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};vi.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ui);if(!i)return null;var r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ui);if(!r)return null;var a=null;return n.locale&&!(a=e.parse(n.locale,1,si))?null:new vi(i,r,a)},vi.prototype.evaluate=function(t){return new _i(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},vi.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},vi.prototype.possibleOutputs=function(){return[void 0]},vi.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var bi=function(t,e,n){this.text=t,this.scale=e,this.fontStack=n},xi=function(t){this.sections=t};xi.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},xi.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.text);var r=i.fontStack?["literal",i.fontStack.split(",")]:null;t.push({"text-font":r,"font-scale":i.scale})}return t};var wi=function(t){this.type=fi,this.sections=t};wi.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var n=[],i=1;i<t.length-1;i+=2){var r=e.parse(t[i],1,hi);if(!r)return null;var a=r.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var o=t[i+1];if("object"!=typeof o||Array.isArray(o))return e.error("Format options argument must be an object.");var l=null;if(o["font-scale"]&&!(l=e.parse(o["font-scale"],1,li)))return null;var s=null;if(o["text-font"]&&!(s=e.parse(o["text-font"],1,T(si))))return null;n.push({text:r,scale:l,font:s})}return new wi(n)},wi.prototype.evaluate=function(t){return new xi(this.sections.map(function(e){return new bi(e.text.evaluate(t)||"",e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},wi.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t(i.text),i.scale&&t(i.scale),i.font&&t(i.font)}},wi.prototype.possibleOutputs=function(){return[void 0]},wi.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.text.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),t.push(r)}return t};var Si=function(t,e){this.type=t,this.value=e};Si.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof yi)return!0;if(e instanceof _i)return!0;if(Array.isArray(e)){for(var n=0,i=e;n<i.length;n+=1)if(!t(i[n]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!t(e[r]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],i=A(n),r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Si(i,n)},Si.prototype.evaluate=function(){return this.value},Si.prototype.eachChild=function(){},Si.prototype.possibleOutputs=function(){return[this.value]},Si.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof yi?["rgba"].concat(this.value.toArray()):this.value instanceof xi?this.value.serialize():this.value};var Ti=function(t){this.name="ExpressionEvaluationError",this.message=t};Ti.prototype.toJSON=function(){return this.message};var ki={string:si,number:li,boolean:ui,object:pi},Ii=function(t,e){this.type=t,this.args=e};Ii.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,i=1,r=t[0];if("array"===r){var a,o;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in ki)||"object"===l)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=ki[l],i++}else a=hi;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}n=T(a,o)}else n=ki[r];for(var s=[];i<t.length;i++){var u=e.parse(t[i],i,hi);if(!u)return null;s.push(u)}return new Ii(n,s)},Ii.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!I(this.type,A(n)))return n;if(e===this.args.length-1)throw new Ti("Expected value to be of type "+k(this.type)+", but found "+k(A(n))+" instead.")}return null},Ii.prototype.eachChild=function(t){this.args.forEach(t)},Ii.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Ii.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Ei={"to-number":li,"to-color":ci},Ai=function(t,e){this.type=t,this.args=e};Ai.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=Ei[t[0]],i=[],r=1;r<t.length;r++){var a=e.parse(t[r],r,hi);if(!a)return null;i.push(a)}return new Ai(n,i)},Ai.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1)if(n=null,"string"==typeof(e=r[i].evaluate(t))){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":E(e[0],e[1],e[2],e[3])))return new yi(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new Ti(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("formatted"===this.type.kind){for(var o,l=0,s=this.args;l<s.length;l+=1)if("string"==typeof(o=s[l].evaluate(t)))return new xi([new bi(o,null,null)]);throw new Ti("Could not parse formatted text from value '"+("string"==typeof o?o:JSON.stringify(o))+"'")}for(var u=null,c=0,p=this.args;c<p.length;c+=1)if(null!==(u=p[c].evaluate(t))){var h=Number(u);if(!isNaN(h))return h}throw new Ti("Could not convert "+JSON.stringify(u)+" to number.")},Ai.prototype.eachChild=function(t){this.args.forEach(t)},Ai.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Ai.prototype.serialize=function(){var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Ci=["Unknown","Point","LineString","Polygon"],Li=function(){this._parseColorCache={}};Li.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Li.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ci[this.feature.type]:this.feature.type:null},Li.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Li.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=yi.parse(t)),e};var zi=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};zi.prototype.evaluate=function(t){return this._evaluate(t,this.args)},zi.prototype.eachChild=function(t){this.args.forEach(t)},zi.prototype.possibleOutputs=function(){return[void 0]},zi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},zi.parse=function(t,e){var n=t[0],i=zi.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var r=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),l=null,s=0,u=o;s<u.length;s+=1){var c=u[s],p=c[0],h=c[1];l=new Di(e.registry,e.path,null,e.scope);for(var d=[],f=!1,m=1;m<t.length;m++){var g=t[m],y=Array.isArray(p)?p[m-1]:p.type,_=l.parse(g,1+d.length,y);if(!_){f=!0;break}d.push(_)}if(!f)if(Array.isArray(p)&&p.length!==d.length)l.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var v=0;v<d.length;v++){var b=Array.isArray(p)?p[v]:p.type,x=d[v];l.concat(v+1).checkSubtype(b,x.type)}if(0===l.errors.length)return new zi(n,r,h,d)}}if(1===o.length)e.errors.push.apply(e.errors,l.errors);else{for(var w=(o.length?o:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(k).join(", ")+")":"("+k(e.type)+"...)"}).join(" | "),S=[],T=1;T<t.length;T++){var I=e.parse(t[T],1+S.length);if(!I)return null;S.push(k(I.type))}e.error("Expected arguments of type "+w+", but found ("+S.join(", ")+") instead.")}return null},zi.register=function(t,e){for(var n in zi.definitions=e,e)t[n]=zi};var Pi=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Pi.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Pi(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Pi.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Pi.prototype.eachChild=function(){},Pi.prototype.possibleOutputs=function(){return[void 0]},Pi.prototype.serialize=function(){return["var",this.name]};var Di=function(t,e,n,i,r){void 0===e&&(e=[]),void 0===i&&(i=new ai),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=i,this.errors=r,this.expectedType=n};Di.prototype.parse=function(t,e,n,i,r){return void 0===r&&(r={}),e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)},Di.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var r=i.parse(t,this);if(!r)return null;if(this.expectedType){var a=this.expectedType,o=r.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==o.kind)if("color"!==a.kind||"value"!==o.kind&&"string"!==o.kind)if("formatted"!==a.kind||"value"!==o.kind&&"string"!==o.kind){if(this.checkSubtype(this.expectedType,r.type))return null}else e.omitTypeAnnotations||(r=new Ai(a,[r]));else e.omitTypeAnnotations||(r=new Ai(a,[r]));else e.omitTypeAnnotations||(r=new Ii(a,[r]))}if(!(r instanceof Si)&&function t(e){if(e instanceof Pi)return t(e.boundExpression);if(e instanceof zi&&"error"===e.name)return!1;if(e instanceof vi)return!1;var n=e instanceof Ai||e instanceof Ii,i=!0;return e.eachChild(function(e){i=n?i&&t(e):i&&e instanceof Si}),!!i&&(C(e)&&z(e,["zoom","heatmap-density","line-progress","is-supported-script"]))}(r)){var l=new Li;try{r=new Si(r.type,r.evaluate(l))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Di.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new Di(this.registry,i,e||null,r,this.errors)},Di.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new ri(i,t))},Di.prototype.checkSubtype=function(t,e){var n=I(t,e);return n&&this.error(n),n};var Mi=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var a=r[i],o=a[1];this.labels.push(a[0]),this.outputs.push(o)}};Mi.parse=function(t,e){var n=t[1],i=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,li)))return null;var r=[],a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType),i.unshift(-1/0);for(var o=0;o<i.length;o+=2){var l=i[o],s=i[o+1],u=o+1,c=o+2;if("number"!=typeof l)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=l)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=e.parse(s,c,a);if(!p)return null;a=a||p.type,r.push([l,p])}return new Mi(a,n,r)},Mi.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[P(e,i)].evaluate(t)},Mi.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Mi.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Mi.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Fi=Object.freeze({number:D,color:function(t,e,n){return new yi(D(t.r,e.r,n),D(t.g,e.g,n),D(t.b,e.b,n),D(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,i){return D(t,e[i],n)})}}),Oi=.95047,Ri=1,ji=1.08883,Bi=4/29,Ui=6/29,Ni=3*Ui*Ui,Zi=Ui*Ui*Ui,Yi=Math.PI/180,Vi=180/Math.PI,qi={forward:j,reverse:B,interpolate:function(t,e,n){return{l:D(t.l,e.l,n),a:D(t.a,e.a,n),b:D(t.b,e.b,n),alpha:D(t.alpha,e.alpha,n)}}},Gi={forward:function(t){var e=j(t),n=e.l,i=e.a,r=e.b,a=Math.atan2(r,i)*Vi;return{h:a<0?a+360:a,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Yi,n=t.c;return B({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,i,r){var a=e.h-t;return t+n*(a>180||a<-180?a-360*Math.round(a/360):a)}(t.h),c:D(t.c,e.c,n),l:D(t.l,e.l,n),alpha:D(t.alpha,e.alpha,n)}}},Wi=Object.freeze({lab:qi,hcl:Gi}),Hi=function(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(var a=0,o=r;a<o.length;a+=1){var l=o[a],s=l[1];this.labels.push(l[0]),this.outputs.push(s)}};Hi.interpolationFactor=function(t,e,n,i){var r=0;if("exponential"===t.name)r=U(e,t.base,n,i);else if("linear"===t.name)r=U(e,1,n,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;r=new Bn(a[0],a[1],a[2],a[3]).solve(U(e,1,n,i))}return r},Hi.parse=function(t,e){var n=t[0],i=t[1],r=t[2],a=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var o=i[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:o}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var l=i.slice(1);if(4!==l.length||l.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:l}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,li)))return null;var s=[],u=null;"interpolate-hcl"===n||"interpolate-lab"===n?u=ci:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<a.length;c+=2){var p=a[c],h=a[c+1],d=c+3,f=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=e.parse(h,f,u);if(!m)return null;u=u||m.type,s.push([p,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Hi(u,n,i,r,s):e.error("Type "+k(u)+" is not interpolatable.")},Hi.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var a=P(e,i),o=Hi.interpolationFactor(this.interpolation,i,e[a],e[a+1]),l=n[a].evaluate(t),s=n[a+1].evaluate(t);return"interpolate"===this.operator?Fi[this.type.kind.toLowerCase()](l,s,o):"interpolate-hcl"===this.operator?Gi.reverse(Gi.interpolate(Gi.forward(l),Gi.forward(s),o)):qi.reverse(qi.interpolate(qi.forward(l),qi.forward(s),o))},Hi.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Hi.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Hi.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var $i=function(t,e){this.type=t,this.args=e};$i.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var r=[],a=0,o=t.slice(1);a<o.length;a+=1){var l=e.parse(o[a],1+r.length,n,void 0,{omitTypeAnnotations:!0});if(!l)return null;n=n||l.type,r.push(l)}var s=i&&r.some(function(t){return I(i,t.type)});return new $i(s?hi:n,r)},$i.prototype.evaluate=function(t){for(var e=null,n=0,i=this.args;n<i.length&&null===(e=i[n].evaluate(t));n+=1);return e},$i.prototype.eachChild=function(t){this.args.forEach(t)},$i.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},$i.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Xi=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Xi.prototype.evaluate=function(t){return this.result.evaluate(t)},Xi.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},Xi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var r=t[i];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=e.parse(t[i+1],i+1);if(!a)return null;n.push([r,a])}var o=e.parse(t[t.length-1],t.length-1,void 0,n);return o?new Xi(n,o):null},Xi.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Xi.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var Ki=function(t,e,n){this.type=t,this.index=e,this.input=n};Ki.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,li),i=e.parse(t[2],2,T(e.expectedType||hi));if(!n||!i)return null;return new Ki(i.type.itemType,n,i)},Ki.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Ti("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Ti("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Ti("Array index must be an integer, but found "+e+" instead.");return n[e]},Ki.prototype.eachChild=function(t){t(this.index),t(this.input)},Ki.prototype.possibleOutputs=function(){return[void 0]},Ki.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ji=function(t,e,n,i,r,a){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=a};Ji.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r={},a=[],o=2;o<t.length-1;o+=2){var l=t[o],s=t[o+1];Array.isArray(l)||(l=[l]);var u=e.concat(o);if(0===l.length)return u.error("Expected at least one branch label.");for(var c=0,p=l;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,A(h)))return null}else n=A(h);if(void 0!==r[String(h)])return u.error("Branch labels must be unique.");r[String(h)]=a.length}var d=e.parse(s,o,i);if(!d)return null;i=i||d.type,a.push(d)}var f=e.parse(t[1],1,hi);if(!f)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==f.type.kind&&e.concat(1).checkSubtype(n,f.type)?null:new Ji(n,i,f,r,a,m):null},Ji.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(A(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ji.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ji.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Ji.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],i={},r=0,a=Object.keys(this.cases).sort();r<a.length;r+=1){var o=a[r],l=i[t.cases[o]];void 0===l?(i[t.cases[o]]=n.length,n.push([t.cases[o],[o]])):n[l][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,c=n;u<c.length;u+=1){var p=c[u],h=p[0],d=p[1];e.push(1===d.length?s(d[0]):d.map(s)),e.push(t.outputs[h].serialize())}return e.push(this.otherwise.serialize()),e};var Qi=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};Qi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],r=1;r<t.length-1;r+=2){var a=e.parse(t[r],r,ui);if(!a)return null;var o=e.parse(t[r+1],r+1,n);if(!o)return null;i.push([a,o]),n=n||o.type}var l=e.parse(t[t.length-1],t.length-1,n);return l?new Qi(n,i,l):null},Qi.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];if(i[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},Qi.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];t(i[0]),t(r)}t(this.otherwise)},Qi.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Qi.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var tr=Y("==",function(t,e,n){return e===n},Z),er=Y("!=",function(t,e,n){return e!==n},function(t,e,n,i){return!Z(0,e,n,i)}),nr=Y("<",function(t,e,n){return e<n},function(t,e,n,i){return i.compare(e,n)<0}),ir=Y(">",function(t,e,n){return e>n},function(t,e,n,i){return i.compare(e,n)>0}),rr=Y("<=",function(t,e,n){return e<=n},function(t,e,n,i){return i.compare(e,n)<=0}),ar=Y(">=",function(t,e,n){return e>=n},function(t,e,n,i){return i.compare(e,n)>=0}),or=function(t){this.type=li,this.input=t};or.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+k(n.type)+" instead."):new or(n):null},or.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Ti("Expected value to be of type string or array, but found "+k(A(e))+" instead.")},or.prototype.eachChild=function(t){t(this.input)},or.prototype.possibleOutputs=function(){return[void 0]},or.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var lr={"==":tr,"!=":er,">":ir,"<":nr,">=":ar,"<=":rr,array:Ii,at:Ki,boolean:Ii,case:Qi,coalesce:$i,collator:vi,format:wi,interpolate:Hi,"interpolate-hcl":Hi,"interpolate-lab":Hi,length:or,let:Xi,literal:Si,match:Ji,number:Ii,object:Ii,step:Mi,string:Ii,"to-color":Ai,"to-number":Ai,var:Pi};zi.register(lr,{error:[{kind:"error"},[si],function(t,e){throw new Ti(e[0].evaluate(t))}],typeof:[si,[hi],function(t,e){return k(A(e[0].evaluate(t)))}],"to-string":[si,[hi],function(t,e){var n=e[0],i=typeof(n=n.evaluate(t));return null===n?"":"string"===i||"number"===i||"boolean"===i?String(n):n instanceof yi||n instanceof xi?n.toString():JSON.stringify(n)}],"to-boolean":[ui,[hi],function(t,e){var n=e[0];return Boolean(n.evaluate(t))}],"to-rgba":[T(li,4),[ci],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[ci,[li,li,li],V],rgba:[ci,[li,li,li,li],V],has:{type:ui,overloads:[[[si],function(t,e){return q(e[0].evaluate(t),t.properties())}],[[si,pi],function(t,e){var n=e[1];return q(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:hi,overloads:[[[si],function(t,e){return G(e[0].evaluate(t),t.properties())}],[[si,pi],function(t,e){var n=e[1];return G(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[hi,[si],function(t,e){return G(e[0].evaluate(t),t.featureState||{})}],properties:[pi,[],function(t){return t.properties()}],"geometry-type":[si,[],function(t){return t.geometryType()}],id:[hi,[],function(t){return t.id()}],zoom:[li,[],function(t){return t.globals.zoom}],"heatmap-density":[li,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[li,[],function(t){return t.globals.lineProgress||0}],"+":[li,W(li),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[li,W(li),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:li,overloads:[[[li,li],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[li],function(t,e){return-e[0].evaluate(t)}]]},"/":[li,[li,li],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[li,[li,li],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[li,[],function(){return Math.LN2}],pi:[li,[],function(){return Math.PI}],e:[li,[],function(){return Math.E}],"^":[li,[li,li],function(t,e){var n=e[0],i=e[1];return Math.pow(n.evaluate(t),i.evaluate(t))}],sqrt:[li,[li],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[li,[li],function(t,e){var n=e[0];return Math.log10(n.evaluate(t))}],ln:[li,[li],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[li,[li],function(t,e){var n=e[0];return Math.log2(n.evaluate(t))}],sin:[li,[li],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[li,[li],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[li,[li],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[li,[li],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[li,[li],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[li,[li],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[li,W(li),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[li,W(li),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[li,[li],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[li,[li],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[li,[li],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[li,[li],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[ui,[si,hi],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[ui,[hi],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[ui,[si],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[ui,[si,hi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r<a}],"filter-id-<":[ui,[hi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[ui,[si,hi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r>a}],"filter-id->":[ui,[hi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[ui,[si,hi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r<=a}],"filter-id-<=":[ui,[hi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[ui,[si,hi],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],a=i.value;return typeof r==typeof a&&r>=a}],"filter-id->=":[ui,[hi],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[ui,[hi],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[ui,[],function(t){return null!==t.id()}],"filter-type-in":[ui,[T(si)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[ui,[T(hi)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[ui,[si,T(hi)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[ui,[si,T(hi)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:ui,overloads:[[[ui,ui],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[W(ui),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:ui,overloads:[[[ui,ui],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[W(ui),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[ui,[ui],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[ui,[si],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[si,[si],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[si,[si],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[si,W(si),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}],"resolved-locale":[si,[di],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var sr=function(t,e){var n;this.expression=t,this._warningHistory={},this._defaultValue="color"===(n=e).type&&tt(n.default)?new yi(0,0,0,0):"color"===n.type?yi.parse(n.default)||null:void 0===n.default?null:n.default,"enum"===e.type&&(this._enumValues=e.values)};sr.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator||(this._evaluator=new Li),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},sr.prototype.evaluate=function(t,e,n){this._evaluator||(this._evaluator=new Li),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n;try{var i=this.expression.evaluate(this._evaluator);if(null===i||void 0===i)return this._defaultValue;if(this._enumValues&&!(i in this._enumValues))throw new Ti("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(i)+" instead.");return i}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var ur=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!L(e.expression)};ur.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},ur.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var cr=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!L(e.expression),n instanceof Hi&&(this._interpolationType=n.interpolation)};cr.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},cr.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},cr.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Hi.interpolationFactor(this._interpolationType,t,e,n):0};var pr=function(t,e){this._parameters=t,this._specification=e,x(this,function t(e,n){var i,r,a,o="color"===n.type,l=e.stops&&"object"==typeof e.stops[0][0],s=l||!(l||void 0!==e.property),u=e.type||(J(n)?"exponential":"interval");if(o&&((e=x({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],yi.parse(t[1])]})),e.default=yi.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Wi[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)i=rt;else if("interval"===u)i=it;else if("categorical"===u){i=nt,r=Object.create(null);for(var c=0,p=e.stops;c<p.length;c+=1){var h=p[c];r[h[0]]=h[1]}a=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');i=at}if(l){for(var d={},f=[],m=0;m<e.stops.length;m++){var g=e.stops[m],y=g[0].zoom;void 0===d[y]&&(d[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},f.push(y)),d[y].stops.push([g[0].value,g[1]])}for(var _=[],v=0,b=f;v<b.length;v+=1){var w=b[v];_.push([d[w].zoom,t(d[w],n)])}return{kind:"composite",interpolationFactor:Hi.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,i){var r=t.zoom;return rt({stops:_,base:e.base},n,r).evaluate(r,i)}}}return s?{kind:"camera",interpolationFactor:"exponential"===u?Hi.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return i(e,n,t.zoom,r,a)}}:{kind:"source",evaluate:function(t,o){var l=o&&o.properties?o.properties[e.property]:void 0;return void 0===l?et(e.default,n.default):i(e,n,l,r,a)}}}(this._parameters,this._specification))};pr.deserialize=function(t){return new pr(t._parameters,t._specification)},pr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var hr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},dr={"*":function(){return[]},array:ht,boolean:function(t){var e=t.value,n=t.key,i=Q(e);return"boolean"!==i?[new ii(n,e,"boolean expected, "+i+" found")]:[]},number:dt,color:function(t){var e=t.key,n=t.value,i=Q(n);return"string"!==i?[new ii(e,n,"color expected, "+i+" found")]:null===gi(n)?[new ii(e,n,'color expected, "'+n+'" found')]:[]},constants:b,enum:gt,filter:kt,function:ft,layer:Ct,object:pt,source:Lt,light:zt,string:Pt,formatted:function(t){return 0===Pt(t).length?[]:mt(t)}};Ft.source=Rt(Lt),Ft.light=Rt(zt),Ft.layer=Rt(Ct),Ft.filter=Rt(kt),Ft.paintProperty=Rt(Et),Ft.layoutProperty=Rt(At);var fr=Ft,mr=Ft.light,gr=Ft.paintProperty,yr=Ft.layoutProperty,_r=Bt,vr=3;Bt.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Bt.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Bt.prototype._insertCell=function(t,e,n,i,r,a){this.cells[r].push(a)},Bt.prototype.query=function(t,e,n,i){var r=this.min,a=this.max;if(t<=r&&e<=r&&a<=n&&a<=i)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(t,e,n,i,this._queryCell,o,{}),o},Bt.prototype._queryCell=function(t,e,n,i,r,a,o){var l=this.cells[r];if(null!==l)for(var s=this.keys,u=this.bboxes,c=0;c<l.length;c++){var p=l[c];if(void 0===o[p]){var h=4*p;t<=u[h+2]&&e<=u[h+3]&&n>=u[h+0]&&i>=u[h+1]?(o[p]=!0,a.push(s[p])):o[p]=!1}}},Bt.prototype._forEachCell=function(t,e,n,i,r,a,o){for(var l=this._convertToCellCoord(t),s=this._convertToCellCoord(e),u=this._convertToCellCoord(n),c=this._convertToCellCoord(i),p=l;p<=u;p++)for(var h=s;h<=c;h++){if(r.call(this,t,e,n,i,this.d*h+p,a,o))return}},Bt.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Bt.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=vr+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var l=t[o];r[vr+o]=a,r.set(l,a),a+=l.length}return r[vr+t.length]=a,r.set(this.keys,a),a+=this.keys.length,r[vr+t.length+1]=a,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};var br=self.ImageData,xr={};for(var wr in Ut("Object",Object),_r.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},_r.deserialize=function(t){return new _r(t.buffer)},Ut("Grid",_r),Ut("Color",yi),Ut("Error",Error),Ut("StylePropertyFunction",pr),Ut("StyleExpression",sr,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",cr),Ut("ZoomConstantExpression",ur),Ut("CompoundExpression",zi,{omit:["_evaluate"]}),lr)lr[wr]._classRegistryKey||Ut("Expression_"+wr,lr[wr]);var Sr=function(){this.first=!0};Sr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Tr,kr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},Ir=!1,Er=null,Ar=!1,Cr=new ei,Lr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ar||null!=Lr.applyArabicShaping}},zr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sr,this.transition={})};zr.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,i=t;n<i.length;n+=1)if(!Wt(i[n].charCodeAt(0),e))return!1;return!0}(t,Lr.isLoaded())},zr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},zr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Pr=function(t,e){this.property=t,this.value=e,this.expression=ct(void 0===e?t.specification.default:e,t.specification)};Pr.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Pr.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Dr=function(t){this.property=t,this.value=new Pr(t,void 0)};Dr.prototype.transitioned=function(t,e){return new Fr(this.property,this.value,e,l({},t.transition,this.transition),t.now)},Dr.prototype.untransitioned=function(){return new Fr(this.property,this.value,null,{},0)};var Mr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Mr.prototype.getValue=function(t){return d(this._values[t].value.value)},Mr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Dr(this._values[t].property)),this._values[t].value=new Pr(this._values[t].property,null===e?void 0:d(e))},Mr.prototype.getTransition=function(t){return d(this._values[t].transition)},Mr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Dr(this._values[t].property)),this._values[t].transition=d(e)||void 0},Mr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r);var a=this.getTransition(i);void 0!==a&&(t[i+"-transition"]=a)}return t},Mr.prototype.transitioned=function(t,e){for(var n=new Or(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var a=r[i];n._values[a]=this._values[a].transitioned(t,e._values[a])}return n},Mr.prototype.untransitioned=function(){for(var t=new Or(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var Fr=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};Fr.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),i=this.prior;if(i){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return i.possiblyEvaluate(t);var r=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(r))}return n};var Or=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Or.prototype.possiblyEvaluate=function(t){for(var e=new Br(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e},Or.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){if(this._values[e[t]].prior)return!0}return!1};var Rr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Rr.prototype.getValue=function(t){return d(this._values[t].value)},Rr.prototype.setValue=function(t,e){this._values[t]=new Pr(this._values[t].property,null===e?void 0:d(e))},Rr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},Rr.prototype.possiblyEvaluate=function(t){for(var e=new Br(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e};var jr=function(t,e,n){this.property=t,this.value=e,this.parameters=n};jr.prototype.isConstant=function(){return"constant"===this.value.kind},jr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},jr.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Br=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Br.prototype.get=function(t){return this._values[t]};var Ur=function(t){this.specification=t};Ur.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Ur.prototype.interpolate=function(t,e,n){var i=Fi[this.specification.type];return i?i(t,e,n):t};var Nr=function(t){this.specification=t};Nr.prototype.possiblyEvaluate=function(t,e){return new jr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e)}:t.expression,e)},Nr.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new jr(this,{kind:"constant",value:void 0},t.parameters);var i=Fi[this.specification.type];return i?new jr(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t},Nr.prototype.evaluate=function(t,e,n,i){return"constant"===t.kind?t.value:t.evaluate(e,n,i)};var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new jr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e),i=this._calculate(n,n,n,e);return new jr(this,{kind:"constant",value:i},e)}if("camera"===t.expression.kind){var r=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new jr(this,{kind:"constant",value:r},e)}return new jr(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,i){if("source"===t.kind){var r=t.evaluate(e,n,i);return this._calculate(r,r,r,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value},e.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(Nr),Yr=function(t){this.specification=t};Yr.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new zr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new zr(Math.floor(e.zoom),e)),t.expression.evaluate(new zr(Math.floor(e.zoom+1),e)),e)}},Yr.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},Yr.prototype.interpolate=function(t){return t};var Vr=function(t){this.specification=t};Vr.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Vr.prototype.interpolate=function(){return!1};var qr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],i=this.defaultPropertyValues[e]=new Pr(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new Dr(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};Ut("DataDrivenProperty",Nr),Ut("DataConstantProperty",Ur),Ut("CrossFadedDataDrivenProperty",Zr),Ut("CrossFadedProperty",Yr),Ut("ColorRampProperty",Vr);var Gr=function(t){function e(e,n){for(var i in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new Rr(n.layout)),this._transitionablePaint=new Mr(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(null!==e&&void 0!==e){if(this._validate(yr,"layers."+this.id+".layout."+t,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return c(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(null!==e&&void 0!==e){if(this._validate(gr,"layers."+this.id+".paint."+t,t,e,n))return!1}if(c(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&e,a=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var o=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),o||a||r},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),h(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,i,r){return(!r||!1!==r.validate)&&jt(this,t.call(fr,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:ni,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof jr&&X(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(ei),Wr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Hr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},$r=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};$r.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},$r.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},$r.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},$r.prototype.clear=function(){this.length=0},$r.prototype.resize=function(t){this.reserve(t),this.length=t},$r.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},$r.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.int16[i+0]=t,this.int16[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t},e}($r);Xr.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",Xr);var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var a=4*r;return this.int16[a+0]=t,this.int16[a+1]=e,this.int16[a+2]=n,this.int16[a+3]=i,r},e.prototype.emplace=function(t,e,n,i,r){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,t},e}($r);Kr.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",Kr);var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a){var o=this.length;this.resize(o+1);var l=6*o;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=i,this.int16[l+4]=r,this.int16[l+5]=a,o},e.prototype.emplace=function(t,e,n,i,r,a,o){var l=6*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=r,this.int16[l+4]=a,this.int16[l+5]=o,t},e}($r);Jr.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Jr);var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,l){var s=this.length;this.resize(s+1);var u=6*s,c=12*s;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=n,this.int16[u+3]=i,this.uint8[c+8]=r,this.uint8[c+9]=a,this.uint8[c+10]=o,this.uint8[c+11]=l,s},e.prototype.emplace=function(t,e,n,i,r,a,o,l,s){var u=6*t,c=12*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.uint8[c+8]=a,this.uint8[c+9]=o,this.uint8[c+10]=l,this.uint8[c+11]=s,t},e}($r);Qr.prototype.bytesPerElement=12,Ut("StructArrayLayout4i4ub12",Qr);var ta=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,l){var s=this.length;this.resize(s+1);var u=8*s;return this.uint16[u+0]=t,this.uint16[u+1]=e,this.uint16[u+2]=n,this.uint16[u+3]=i,this.uint16[u+4]=r,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=l,s},e.prototype.emplace=function(t,e,n,i,r,a,o,l,s){var u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=n,this.uint16[u+2]=i,this.uint16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=l,this.uint16[u+7]=s,t},e}($r);ta.prototype.bytesPerElement=16,Ut("StructArrayLayout8ui16",ta);var ea=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,l){var s=this.length;this.resize(s+1);var u=8*s;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=n,this.int16[u+3]=i,this.uint16[u+4]=r,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=l,s},e.prototype.emplace=function(t,e,n,i,r,a,o,l,s){var u=8*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=i,this.int16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=l,this.uint16[u+7]=s,t},e}($r);ea.prototype.bytesPerElement=16,Ut("StructArrayLayout4i4ui16",ea);var na=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.float32[r+0]=t,this.float32[r+1]=e,this.float32[r+2]=n,i},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t},e}($r);na.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",na);var ia=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);return this.uint32[1*e+0]=t,e},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}($r);ia.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",ia);var ra=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,l,s,u,c){var p=this.length;this.resize(p+1);var h=12*p,d=6*p;return this.int16[h+0]=t,this.int16[h+1]=e,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=r,this.int16[h+5]=a,this.uint32[d+3]=o,this.uint16[h+8]=l,this.uint16[h+9]=s,this.int16[h+10]=u,this.int16[h+11]=c,p},e.prototype.emplace=function(t,e,n,i,r,a,o,l,s,u,c,p){var h=12*t,d=6*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=i,this.int16[h+3]=r,this.int16[h+4]=a,this.int16[h+5]=o,this.uint32[d+3]=l,this.uint16[h+8]=s,this.uint16[h+9]=u,this.int16[h+10]=c,this.int16[h+11]=p,t},e}($r);ra.prototype.bytesPerElement=24,Ut("StructArrayLayout6i1ul2ui2i24",ra);var aa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a){var o=this.length;this.resize(o+1);var l=6*o;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=i,this.int16[l+4]=r,this.int16[l+5]=a,o},e.prototype.emplace=function(t,e,n,i,r,a,o){var l=6*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=r,this.int16[l+4]=a,this.int16[l+5]=o,t},e}($r);aa.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",aa);var oa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=4*n;return this.uint8[i+0]=t,this.uint8[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=4*t;return this.uint8[i+0]=e,this.uint8[i+1]=n,t},e}($r);oa.prototype.bytesPerElement=4,Ut("StructArrayLayout2ub4",oa);var la=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,l,s,u,c,p,h,d){var f=this.length;this.resize(f+1);var m=20*f,g=10*f,y=40*f;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=n,this.uint16[m+3]=i,this.uint32[g+2]=r,this.uint32[g+3]=a,this.uint32[g+4]=o,this.uint16[m+10]=l,this.uint16[m+11]=s,this.uint16[m+12]=u,this.float32[g+7]=c,this.float32[g+8]=p,this.uint8[y+36]=h,this.uint8[y+37]=d,f},e.prototype.emplace=function(t,e,n,i,r,a,o,l,s,u,c,p,h,d,f){var m=20*t,g=10*t,y=40*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.uint16[m+2]=i,this.uint16[m+3]=r,this.uint32[g+2]=a,this.uint32[g+3]=o,this.uint32[g+4]=l,this.uint16[m+10]=s,this.uint16[m+11]=u,this.uint16[m+12]=c,this.float32[g+7]=p,this.float32[g+8]=h,this.uint8[y+36]=d,this.uint8[y+37]=f,t},e}($r);la.prototype.bytesPerElement=40,Ut("StructArrayLayout2i2ui3ul3ui2f2ub40",la);var sa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,a,o,l,s,u,c,p,h,d){var f=this.length;this.resize(f+1);var m=16*f,g=8*f;return this.int16[m+0]=t,this.int16[m+1]=e,this.int16[m+2]=n,this.int16[m+3]=i,this.uint16[m+4]=r,this.uint16[m+5]=a,this.uint16[m+6]=o,this.uint16[m+7]=l,this.uint16[m+8]=s,this.uint16[m+9]=u,this.uint16[m+10]=c,this.uint16[m+11]=p,this.uint16[m+12]=h,this.uint32[g+7]=d,f},e.prototype.emplace=function(t,e,n,i,r,a,o,l,s,u,c,p,h,d,f){var m=16*t,g=8*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.int16[m+2]=i,this.int16[m+3]=r,this.uint16[m+4]=a,this.uint16[m+5]=o,this.uint16[m+6]=l,this.uint16[m+7]=s,this.uint16[m+8]=u,this.uint16[m+9]=c,this.uint16[m+10]=p,this.uint16[m+11]=h,this.uint16[m+12]=d,this.uint32[g+7]=f,t},e}($r);sa.prototype.bytesPerElement=32,Ut("StructArrayLayout4i9ui1ul32",sa);var ua=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);return this.float32[1*e+0]=t,e},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}($r);ua.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",ua);var ca=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.int16[r+0]=t,this.int16[r+1]=e,this.int16[r+2]=n,i},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t},e}($r);ca.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",ca);var pa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=4*i;return this.uint32[2*i+0]=t,this.uint16[r+2]=e,this.uint16[r+3]=n,i},e.prototype.emplace=function(t,e,n,i){var r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=n,this.uint16[r+3]=i,t},e}($r);pa.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",pa);var ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.uint16[r+0]=t,this.uint16[r+1]=e,this.uint16[r+2]=n,i},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t},e}($r);ha.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",ha);var da=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.uint16[i+0]=t,this.uint16[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t},e}($r);da.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",da);var fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);return this.uint16[1*e+0]=t,e},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}($r);fa.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",fa);var ma=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.float32[i+0]=t,this.float32[i+1]=e,n},e.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t},e}($r);ma.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",ma);var ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var a=4*r;return this.float32[a+0]=t,this.float32[a+1]=e,this.float32[a+2]=n,this.float32[a+3]=i,r},e.prototype.emplace=function(t,e,n,i,r){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=r,t},e}($r);ga.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",ga);var ya=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new Nn(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Hr);ya.prototype.size=24;var _a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new ya(this,t)},e}(ra);Ut("CollisionBoxArray",_a);var va=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(Hr);va.prototype.size=40;var ba=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new va(this,t)},e}(la);Ut("PlacedSymbolArray",ba);var xa=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,n),e}(Hr);xa.prototype.size=32;var wa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new xa(this,t)},e}(sa);Ut("SymbolInstanceArray",wa);var Sa=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(Hr);Sa.prototype.size=4;var Ta=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Sa(this,t)},e}(ua);Ut("GlyphOffsetArray",Ta);var ka=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(Hr);ka.prototype.size=6;var Ia=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new ka(this,t)},e}(ca);Ut("SymbolLineVertexArray",Ia);var Ea=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(Hr);Ea.prototype.size=8;var Aa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ea(this,t)},e}(pa);Ut("FeatureIndexArray",Aa);var Ca=Ht([{name:"a_pos",components:2,type:"Int16"}],4),La=Ca.members,za=function(t){void 0===t&&(t=[]),this.segments=t};za.prototype.prepareSegment=function(t,e,n){var i=this.segments[this.segments.length-1];return t>za.MAX_VERTEX_ARRAY_LENGTH&&f("Max vertices per segment is "+za.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>za.MAX_VERTEX_ARRAY_LENGTH)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(i)),i},za.prototype.get=function(){return this.segments},za.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},za.simpleSegment=function(t,e,n,i){return new za([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{}}])},za.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",za);var Pa=function(t,e){return 256*(t=o(Math.floor(t),0,255))+(e=o(Math.floor(e),0,255))},Da=function(){this.ids=[],this.positions=[],this.indexed=!1};Da.prototype.add=function(t,e,n,i){this.ids.push(t),this.positions.push(e,n,i)},Da.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var i=e+n>>1;this.ids[i]>=t?n=i:e=i+1}for(var r=[];this.ids[e]===t;){r.push({index:this.positions[3*e],start:this.positions[3*e+1],end:this.positions[3*e+2]}),e++}return r},Da.serialize=function(t,e){var n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,n,i,r){if(!(i>=r)){for(var a=e[i+r>>1],o=i-1,l=r+1;;){do{o++}while(e[o]<a);do{l--}while(e[l]>a);if(o>=l)break;Xt(e,o,l),Xt(n,3*o,3*l),Xt(n,3*o+1,3*l+1),Xt(n,3*o+2,3*l+2)}t(e,n,i,l),t(e,n,l+1,r)}}(n,i,0,n.length-1),e.push(n.buffer,i.buffer),{ids:n,positions:i}},Da.deserialize=function(t){var e=new Da;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},Ut("FeaturePositionMap",Da);var Ma=function(t,e){this.gl=t.gl,this.location=e},Fa=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Ma),Oa=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Ma),Ra=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Ma),ja=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Ma),Ba=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Ma),Ua=function(t){function e(e,n){t.call(this,e,n),this.current=yi.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Ma),Na=new Float32Array(16),Za=function(t){function e(e,n){t.call(this,e,n),this.current=Na}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Ma),Ya=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0};Ya.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Ya.prototype.setConstantPatternPositions=function(){},Ya.prototype.populatePaintArray=function(){},Ya.prototype.updatePaintArray=function(){},Ya.prototype.upload=function(){},Ya.prototype.destroy=function(){},Ya.prototype.setUniforms=function(t,e,n,i){e.set(i.constantOr(this.value))},Ya.prototype.getBinding=function(t,e){return"color"===this.type?new Ua(t,e):new Oa(t,e)},Ya.serialize=function(t){var e=t.names,n=t.type;return{value:Nt(t.value),names:e,type:n}},Ya.deserialize=function(t){var e=t.names,n=t.type;return new Ya(Zt(t.value),e,n)};var Va=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Va.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Va.prototype.populatePaintArray=function(){},Va.prototype.updatePaintArray=function(){},Va.prototype.upload=function(){},Va.prototype.destroy=function(){},Va.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},Va.prototype.setUniforms=function(t,e,n,i,r){var a=this.patternPositions;"u_pattern_to"===r&&a.patternTo&&e.set(a.patternTo),"u_pattern_from"===r&&a.patternFrom&&e.set(a.patternFrom)},Va.prototype.getBinding=function(t,e){return new Ba(t,e)};var qa=function(t,e,n,i){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new i};qa.prototype.defines=function(){return[]},qa.prototype.setConstantPatternPositions=function(){},qa.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var r=this.expression.evaluate(new zr(0),e,{});if("color"===this.type)for(var a=Kt(r),o=i;o<t;o++)n.emplaceBack(a[0],a[1]);else{for(var l=i;l<t;l++)n.emplaceBack(r);this.maxValue=Math.max(this.maxValue,r)}},qa.prototype.updatePaintArray=function(t,e,n,i){var r=this.paintVertexArray,a=this.expression.evaluate({zoom:0},n,i);if("color"===this.type)for(var o=Kt(a),l=t;l<e;l++)r.emplace(l,o[0],o[1]);else{for(var s=t;s<e;s++)r.emplace(s,a);this.maxValue=Math.max(this.maxValue,a)}},qa.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qa.prototype.setUniforms=function(t,e){e.set(0)},qa.prototype.getBinding=function(t,e){return new Oa(t,e)};var Ga=function(t,e,n,i,r,a){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new o};Ga.prototype.defines=function(){return[]},Ga.prototype.setConstantPatternPositions=function(){},Ga.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var r=this.expression.evaluate(new zr(this.zoom),e,{}),a=this.expression.evaluate(new zr(this.zoom+1),e,{});if("color"===this.type)for(var o=Kt(r),l=Kt(a),s=i;s<t;s++)n.emplaceBack(o[0],o[1],l[0],l[1]);else{for(var u=i;u<t;u++)n.emplaceBack(r,a);this.maxValue=Math.max(this.maxValue,r,a)}},Ga.prototype.updatePaintArray=function(t,e,n,i){var r=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);if("color"===this.type)for(var l=Kt(a),s=Kt(o),u=t;u<e;u++)r.emplace(u,l[0],l[1],s[0],s[1]);else{for(var c=t;c<e;c++)r.emplace(c,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},Ga.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ga.prototype.interpolationFactor=function(t){return this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(t):t,this.zoom,this.zoom+1)},Ga.prototype.setUniforms=function(t,e,n){e.set(this.interpolationFactor(n.zoom))},Ga.prototype.getBinding=function(t,e){return new Oa(t,e)};var Wa=function(t,e,n,i,r,a,o){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=i,this.zoom=r,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};Wa.prototype.defines=function(){return[]},Wa.prototype.setConstantPatternPositions=function(){},Wa.prototype.populatePaintArray=function(t,e,n){var i=this.zoomInPaintVertexArray,r=this.zoomOutPaintVertexArray,a=this.layerId,o=i.length;if(i.reserve(t),r.reserve(t),n&&e.patterns&&e.patterns[a]){var l=e.patterns[a],s=n[l.min],u=n[l.mid],c=n[l.max];if(!s||!u||!c)return;for(var p=o;p<t;p++)i.emplaceBack(u.tl[0],u.tl[1],u.br[0],u.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1]),r.emplaceBack(u.tl[0],u.tl[1],u.br[0],u.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1])}},Wa.prototype.updatePaintArray=function(t,e,n,i,r){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,l=this.layerId;if(r&&n.patterns&&n.patterns[l]){var s=n.patterns[l],u=r[s.min],c=r[s.mid],p=r[s.max];if(!u||!c||!p)return;for(var h=t;h<e;h++)a.emplace(h,c.tl[0],c.tl[1],c.br[0],c.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1]),o.emplace(h,c.tl[0],c.tl[1],c.br[0],c.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1])}},Wa.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Wa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Wa.prototype.setUniforms=function(t,e){e.set(0)},Wa.prototype.getBinding=function(t,e){return new Oa(t,e)};var Ha=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Da,this._bufferOffset=0};Ha.createDynamic=function(t,e,n){var i=new Ha,r=[];for(var a in t.paint._values)if(n(a)){var o=t.paint.get(a);if(o instanceof jr&&X(o.property.specification)){var l=function(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}(a,t.type),s=o.property.specification.type,u=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)i.binders[a]=new Va(o.value.value,l,s),r.push("/u_"+a);else{var c=Jt(a,s,"source");i.binders[a]=new Wa(o.value,l,s,u,e,c,t.id),r.push("/a_"+a)}else if("constant"===o.value.kind)i.binders[a]=new Ya(o.value.value,l,s),r.push("/u_"+a);else if("source"===o.value.kind){var p=Jt(a,s,"source");i.binders[a]=new qa(o.value,l,s,p),r.push("/a_"+a)}else{var h=Jt(a,s,"composite");i.binders[a]=new Ga(o.value,l,s,u,e,h),r.push("/z_"+a)}}}return i.cacheKey=r.sort().join(""),i},Ha.prototype.populatePaintArrays=function(t,e,n,i){for(var r in this.binders)this.binders[r].populatePaintArray(t,e,i);void 0!==e.id&&this._featureMap.add(+e.id,n,this._bufferOffset,t),this._bufferOffset=t},Ha.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders)this.binders[n].setConstantPatternPositions(t,e)},Ha.prototype.updatePaintArrays=function(t,e,n,i){var r=!1;for(var a in t)for(var o=0,l=this._featureMap.getPositions(+a);o<l.length;o+=1){var s=l[o],u=e.feature(s.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof Ya||p instanceof Va)&&!0===p.expression.isStateDependent){var h=n.paint.get(c);p.expression=h.value,p.updatePaintArray(s.start,s.end,u,t[a],i),r=!0}}}return r},Ha.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Ha.prototype.getPaintVertexBuffers=function(){return this._buffers},Ha.prototype.getUniforms=function(t,e){var n={};for(var i in this.binders)for(var r=this.binders[i],a=0,o=r.uniformNames;a<o.length;a+=1){var l=o[a];n[l]=r.getBinding(t,e[l])}return n},Ha.prototype.setUniforms=function(t,e,n,i){for(var r in this.binders)for(var a=this.binders[r],o=0,l=a.uniformNames;o<l.length;o+=1){var s=l[o];a.setUniforms(t,e[s],i,n.get(r),s)}},Ha.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof Wa){var r=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&e.push(r)}else(i instanceof qa||i instanceof Ga)&&i.paintVertexBuffer&&e.push(i.paintVertexBuffer)}this._buffers=e},Ha.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var i in this.binders){var r=this.binders[i];(r instanceof qa||r instanceof Ga)&&r.paintVertexBuffer&&n.push(r.paintVertexBuffer)}this._buffers=n},Ha.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var $a=function(t,e,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,a=e;r<a.length;r+=1){var o=a[r];this.programConfigurations[o.id]=Ha.createDynamic(o,n,i),this.programConfigurations[o.id].layoutAttributes=t}this.needsUpload=!1};$a.prototype.populatePaintArrays=function(t,e,n,i){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n,i);this.needsUpload=!0},$a.prototype.updatePaintArrays=function(t,e,n,i){for(var r=0,a=n;r<a.length;r+=1){var o=a[r];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o,i)||this.needsUpload}},$a.prototype.get=function(t){return this.programConfigurations[t]},$a.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},$a.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Ut("ConstantBinder",Ya),Ut("CrossFadedConstantBinder",Va),Ut("SourceExpressionBinder",qa),Ut("CrossFadedCompositeBinder",Wa),Ut("CompositeExpressionBinder",Ga),Ut("ProgramConfiguration",Ha,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",$a);var Xa=8192,Ka=(16,{min:-1*Math.pow(2,15),max:Math.pow(2,15)-1}),Ja=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Xr,this.indexArray=new ha,this.segments=new za,this.programConfigurations=new $a(La,t.layers,t.zoom)};Ja.prototype.populate=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,l=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var s=Qt(a);this.addFeature(a,s,o),e.featureIndex.insert(a,s,o,l,this.index)}}},Ja.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ja.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ja.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ja.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,La),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ja.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ja.prototype.addFeature=function(t,e,n){for(var i=0,r=e;i<r.length;i+=1)for(var a=0,o=r[i];a<o.length;a+=1){var l=o[a],s=l.x,u=l.y;if(!(s<0||s>=Xa||u<0||u>=Xa)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;te(this.layoutVertexArray,s,u,-1,-1),te(this.layoutVertexArray,s,u,1,-1),te(this.layoutVertexArray,s,u,1,1),te(this.layoutVertexArray,s,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},Ut("CircleBucket",Ja,{omit:["layers"]});var Qa={paint:new qr({"circle-radius":new Nr(ni.paint_circle["circle-radius"]),"circle-color":new Nr(ni.paint_circle["circle-color"]),"circle-blur":new Nr(ni.paint_circle["circle-blur"]),"circle-opacity":new Nr(ni.paint_circle["circle-opacity"]),"circle-translate":new Ur(ni.paint_circle["circle-translate"]),"circle-translate-anchor":new Ur(ni.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ur(ni.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ur(ni.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Nr(ni.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Nr(ni.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Nr(ni.paint_circle["circle-stroke-opacity"])})},to="undefined"!=typeof Float32Array?Float32Array:Array;Math;var eo,no=fe,io=(eo=de(),function(t,e,n,i,r,a){var o=void 0,l=void 0;for(e||(e=3),n||(n=0),l=i?Math.min(i*e+n,t.length):t.length,o=n;o<l;o+=e)eo[0]=t[o],eo[1]=t[o+1],eo[2]=t[o+2],r(eo,eo,a),t[o]=eo[0],t[o+1]=eo[1],t[o+2]=eo[2];return t}),ro=function(){var t=ge();return function(e,n,i,r,a,o){var l=void 0,s=void 0;for(n||(n=4),i||(i=0),s=r?Math.min(r*n+i,e.length):e.length,l=i;l<s;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],a(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}}();de(),me(1,0,0),me(0,1,0),ve(),ve(),he(),function(){var t;t=new to(2),to!=Float32Array&&(t[0]=0,t[1]=0)}();var ao=function(t){function e(e){t.call(this,e,Qa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Ja(t)},e.prototype.queryRadius=function(t){var e=t;return ue("circle-radius",this,e)+ue("circle-stroke-width",this,e)+ce(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o,l){for(var s=pe(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),p=c?s:function(t,e,n){return s.map(function(t){return t.map(function(t){return be(t,e,n)})})}(0,l,a),h=c?u*o:u,d=0,f=i;d<f.length;d+=1)for(var m=0,g=f[d];m<g.length;m+=1){var y=g[m],_=c?y:be(y,l,a),v=h,b=_e([],[y.x,y.y,0,1],l);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=a.cameraToCenterDistance/b[3]),ee(p,_,v))return!0}return!1},e}(Gr),oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ja);Ut("HeatmapBucket",oo,{omit:["layers"]});var lo=function(t,e){xe(this,t,1,e)};lo.prototype.resize=function(t){we(this,t,1)},lo.prototype.clone=function(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))},lo.copy=function(t,e,n,i,r){Se(t,e,n,i,r,1)};var so=function(t,e){xe(this,t,4,e)};so.prototype.resize=function(t){we(this,t,4)},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(t,e,n,i,r){Se(t,e,n,i,r,4)},Ut("AlphaImage",lo),Ut("RGBAImage",so);var uo={paint:new qr({"heatmap-radius":new Nr(ni.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Nr(ni.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ur(ni.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vr(ni.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ur(ni.paint_heatmap["heatmap-opacity"])})},co=function(t){function e(e){t.call(this,e,uo),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new oo(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=Te(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Gr),po={paint:new qr({"hillshade-illumination-direction":new Ur(ni.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ur(ni.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ur(ni.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ur(ni.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ur(ni.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ur(ni.paint_hillshade["hillshade-accent-color"])})},ho=function(t){function e(e){t.call(this,e,po)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Gr),fo=Ht([{name:"a_pos",components:2,type:"Int16"}],4),mo=fo.members,go=ke,yo=ke;ke.deviation=function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,o=Math.abs(Ue(t,0,a,n));if(r)for(var l=0,s=e.length;l<s;l++){var u=e[l]*n,c=l<s-1?e[l+1]*n:t.length;o-=Math.abs(Ue(t,u,c,n))}var p=0;for(l=0;l<i.length;l+=3){var h=i[l]*n,d=i[l+1]*n,f=i[l+2]*n;p+=Math.abs((t[h]-t[f])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[f+1]-t[h+1]))}return 0===o&&0===p?0:Math.abs((p-o)/o)},ke.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[r][a][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},go.default=yo;var _o=function t(e,n,i,r,a){for(i=i||0,r=r||e.length-1,a=a||function(t,e){return t<e?-1:t>e?1:0};r>i;){if(r-i>600){var o=r-i+1,l=n-i+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(l-o/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-l*u/o+c)),Math.min(r,Math.floor(n+(o-l)*u/o+c)),a)}var p=e[n],h=i,d=r;for(Ne(e,i,n),a(e[r],p)>0&&Ne(e,i,r);h<d;){for(Ne(e,h,d),h++,d--;a(e[h],p)<0;)h++;for(;a(e[d],p)>0;)d--}0===a(e[i],p)?Ne(e,i,d):Ne(e,++d,r),d<=n&&(i=d+1),n<=d&&(r=d-1)}},vo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Xr,this.indexArray=new ha,this.indexArray2=new da,this.programConfigurations=new $a(mo,t.layers,t.zoom),this.segments=new za,this.segments2=new za};vo.prototype.populate=function(t,e){this.features=[],this.hasPattern=Ve("fill",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,l=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var s=Qt(a),u={sourceLayerIndex:l,index:o,geometry:s,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(qe("fill",this.layers,u,this.zoom,e)):this.addFeature(u,s,o,{}),e.featureIndex.insert(a,s,o,l,this.index)}}},vo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},vo.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n];this.addFeature(r,r.geometry,r.index,e)}},vo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,mo),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},vo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},vo.prototype.addFeature=function(t,e,n,i){for(var r=0,a=Ze(e,500);r<a.length;r+=1){for(var o=a[r],l=0,s=0,u=o;s<u.length;s+=1)l+=u[s].length;for(var c=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],d=[],f=0,m=o;f<m.length;f+=1){var g=m[f];if(0!==g.length){g!==o[0]&&d.push(h.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),_=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(_+g.length-1,_),h.push(g[0].x),h.push(g[0].y);for(var v=1;v<g.length;v++)this.layoutVertexArray.emplaceBack(g[v].x,g[v].y),this.indexArray2.emplaceBack(_+v-1,_+v),h.push(g[v].x),h.push(g[v].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var b=go(h,d),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(p+b[x],p+b[x+1],p+b[x+2]);c.vertexLength+=l,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i)},Ut("FillBucket",vo,{omit:["layers","features"]});var bo={paint:new qr({"fill-antialias":new Ur(ni.paint_fill["fill-antialias"]),"fill-opacity":new Nr(ni.paint_fill["fill-opacity"]),"fill-color":new Nr(ni.paint_fill["fill-color"]),"fill-outline-color":new Nr(ni.paint_fill["fill-outline-color"]),"fill-translate":new Ur(ni.paint_fill["fill-translate"]),"fill-translate-anchor":new Ur(ni.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zr(ni.paint_fill["fill-pattern"])})},xo=function(t){function e(e){t.call(this,e,bo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new vo(t)},e.prototype.queryRadius=function(){return ce(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o){return ne(pe(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),i)},e}(Gr),wo=Ht([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),So=wo.members,To=Math.pow(2,13),ko=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jr,this.indexArray=new ha,this.programConfigurations=new $a(So,t.layers,t.zoom),this.segments=new za};ko.prototype.populate=function(t,e){this.features=[],this.hasPattern=Ve("fill-extrusion",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,l=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var s=Qt(a),u={sourceLayerIndex:l,index:o,geometry:s,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(qe("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,s,o,{}),e.featureIndex.insert(a,s,o,l,this.index)}}},ko.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n];this.addFeature(r,r.geometry,r.index,e)}},ko.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ko.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ko.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ko.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,So),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ko.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ko.prototype.addFeature=function(t,e,n,i){for(var r=0,a=Ze(e,500);r<a.length;r+=1){for(var o=a[r],l=0,s=0,u=o;s<u.length;s+=1)l+=u[s].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=o;p<h.length;p+=1){var d=h[p];if(0!==d.length&&!He(d))for(var f=0,m=0;m<d.length;m++){var g=d[m];if(m>=1){var y=d[m-1];if(!We(g,y)){c.vertexLength+4>za.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=g.sub(y)._perp()._unit(),v=y.dist(g);f+v>32768&&(f=0),Ge(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,0,f),Ge(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,1,f),Ge(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,f+=v),Ge(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,f);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+1,b+2),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+l>za.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],S=c.vertexLength,T=0,k=o;T<k.length;T+=1){var I=k[T];if(0!==I.length){I!==o[0]&&w.push(x.length/2);for(var E=0;E<I.length;E++){var A=I[E];Ge(this.layoutVertexArray,A.x,A.y,0,0,1,1,0),x.push(A.x),x.push(A.y)}}}for(var C=go(x,w),L=0;L<C.length;L+=3)this.indexArray.emplaceBack(S+C[L],S+C[L+1],S+C[L+2]);c.primitiveLength+=C.length/3,c.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i)},Ut("FillExtrusionBucket",ko,{omit:["layers","features"]});var Io={paint:new qr({"fill-extrusion-opacity":new Ur(ni["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Nr(ni["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ur(ni["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ur(ni["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zr(ni["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Nr(ni["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Nr(ni["paint_fill-extrusion"]["fill-extrusion-base"])})},Eo=function(t){function e(e){t.call(this,e,Io)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new ko(t)},e.prototype.queryRadius=function(){return ce(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o){return ne(pe(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,o),i)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Gr),Ao=Ht([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Co=Ao.members,Lo=$e;$e.types=["Unknown","Point","LineString","Polygon"],$e.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,a=0,o=0,l=[];t.pos<n;){if(r<=0){var s=t.readVarint();i=7&s,r=s>>3}if(r--,1===i||2===i)a+=t.readSVarint(),o+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new Nn(a,o));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},$e.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,a=0,o=1/0,l=-1/0,s=1/0,u=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)r+=t.readSVarint(),a+=t.readSVarint(),r<o&&(o=r),r>l&&(l=r),a<s&&(s=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,s,l,u]},$e.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+s)/o;t[e]=[360*(n.x+l)/o-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var r,a,o=this.extent*Math.pow(2,n),l=this.extent*t,s=this.extent*e,u=this.loadGeometry(),c=$e.types[this.type];switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];i(u=p);break;case 2:for(r=0;r<u.length;r++)i(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],a=0;a<e;a++){var o=Ke(t[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[t[a]]):n.push(t[a]))}return n&&r.push(n),r}(u),r=0;r<u.length;r++)for(a=0;a<u[r].length;a++)i(u[r][a])}1===u.length?u=u[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var zo=Je;Je.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Lo(this._pbf,e,this.extent,this._keys,this._values)};var Po={VectorTile:function(t,e){this.layers=t.readFields(tn,{},e)},VectorTileFeature:Lo,VectorTileLayer:zo},Do=Po.VectorTileFeature.types,Mo=63,Fo=Math.cos(Math.PI/180*37.5),Oo=.5,Ro=Math.pow(2,14)/Oo,jo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Qr,this.indexArray=new ha,this.programConfigurations=new $a(Co,t.layers,t.zoom),this.segments=new za};jo.prototype.populate=function(t,e){this.features=[],this.hasPattern=Ve("line",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],a=r.feature,o=r.index,l=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var s=Qt(a),u={sourceLayerIndex:l,index:o,geometry:s,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(qe("line",this.layers,u,this.zoom,e)):this.addFeature(u,s,o,{}),e.featureIndex.insert(a,s,o,l,this.index)}}},jo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},jo.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n];this.addFeature(r,r.geometry,r.index,e)}},jo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},jo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Co),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},jo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jo.prototype.addFeature=function(t,e,n,i){for(var r=this.layers[0].layout,a=r.get("line-join").evaluate(t,{}),o=r.get("line-cap"),l=r.get("line-miter-limit"),s=r.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){this.addLine(c[u],t,a,o,l,s,n,i)}},jo.prototype.addLine=function(t,e,n,i,r,a,o,l){var s=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(s={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===Do[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var p=0;p<c-1&&t[p].equals(t[p+1]);)p++;if(!(c<(u?3:2))){s&&(s.tileTotal=function(t,e,n){for(var i,r,a=0,o=p;o<n-1;o++)i=t[o],r=t[o+1],a+=i.dist(r);return a}(t,0,c)),"bevel"===n&&(r=1.05);var h=Xa/(512*this.overscaling)*15,d=t[p],f=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var m,g,y,_=i,v=u?"butt":i,b=!0,x=void 0,w=void 0,S=void 0,T=void 0;this.e1=this.e2=this.e3=-1,u&&(m=t[c-2],T=d.sub(m)._unit()._perp());for(var k=p;k<c;k++)if(!(w=u&&k===c-1?t[p+1]:t[k+1])||!t[k].equals(w)){T&&(S=T),m&&(x=m),m=t[k],T=w?w.sub(m)._unit()._perp():S;var I=(S=S||T).add(T);0===I.x&&0===I.y||I._unit();var E=I.x*T.x+I.y*T.y,A=0!==E?1/E:1/0,C=E<Fo&&x&&w;if(C&&k>p){var L=m.dist(x);if(L>2*h){var z=m.sub(m.sub(x)._mult(h/L)._round());this.distance+=z.dist(x),this.addCurrentVertex(z,this.distance,S.mult(1),0,0,!1,f,s),x=z}}var P=x&&w,D=P?n:w?_:v;if(P&&"round"===D&&(A<a?D="miter":A<=2&&(D="fakeround")),"miter"===D&&A>r&&(D="bevel"),"bevel"===D&&(A>2&&(D="flipbevel"),A<r&&(D="miter")),x&&(this.distance+=m.dist(x)),"miter"===D)I._mult(A),this.addCurrentVertex(m,this.distance,I,0,0,!1,f,s);else if("flipbevel"===D){if(A>100)I=T.clone().mult(-1);else{var M=S.x*T.y-S.y*T.x>0?-1:1,F=A*S.add(T).mag()/S.sub(T).mag();I._perp()._mult(F*M)}this.addCurrentVertex(m,this.distance,I,0,0,!1,f,s),this.addCurrentVertex(m,this.distance,I.mult(-1),0,0,!1,f,s)}else if("bevel"===D||"fakeround"===D){var O=S.x*T.y-S.y*T.x>0,R=-Math.sqrt(A*A-1);if(O?(y=0,g=R):(g=0,y=R),b||this.addCurrentVertex(m,this.distance,S,g,y,!1,f,s),"fakeround"===D){for(var j=Math.floor(8*(.5-(E-.5))),B=void 0,U=0;U<j;U++)B=T.mult((U+1)/(j+1))._add(S)._unit(),this.addPieSliceVertex(m,this.distance,B,O,f,s);this.addPieSliceVertex(m,this.distance,I,O,f,s);for(var N=j-1;N>=0;N--)B=S.mult((N+1)/(j+1))._add(T)._unit(),this.addPieSliceVertex(m,this.distance,B,O,f,s)}w&&this.addCurrentVertex(m,this.distance,T,-g,-y,!1,f,s)}else"butt"===D?(b||this.addCurrentVertex(m,this.distance,S,0,0,!1,f,s),w&&this.addCurrentVertex(m,this.distance,T,0,0,!1,f,s)):"square"===D?(b||(this.addCurrentVertex(m,this.distance,S,1,1,!1,f,s),this.e1=this.e2=-1),w&&this.addCurrentVertex(m,this.distance,T,-1,-1,!1,f,s)):"round"===D&&(b||(this.addCurrentVertex(m,this.distance,S,0,0,!1,f,s),this.addCurrentVertex(m,this.distance,S,1,1,!0,f,s),this.e1=this.e2=-1),w&&(this.addCurrentVertex(m,this.distance,T,-1,-1,!0,f,s),this.addCurrentVertex(m,this.distance,T,0,0,!1,f,s)));if(C&&k<c-1){var Z=m.dist(w);if(Z>2*h){var Y=m.add(w.sub(m)._mult(h/Z)._round());this.distance+=Y.dist(m),this.addCurrentVertex(Y,this.distance,T.mult(1),0,0,!1,f,s),m=Y}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,l)}},jo.prototype.addCurrentVertex=function(t,e,n,i,r,a,o,l){var s,u=this.layoutVertexArray,c=this.indexArray;l&&(e=nn(e,l)),s=n.clone(),i&&s._sub(n.perp()._mult(i)),en(u,t,s,a,!1,i,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,s=n.mult(-1),r&&s._sub(n.perp()._mult(r)),en(u,t,s,a,!0,-r,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>Ro/2&&!l&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,r,a,o))},jo.prototype.addPieSliceVertex=function(t,e,n,i,r,a){n=n.mult(i?-1:1);var o=this.layoutVertexArray,l=this.indexArray;a&&(e=nn(e,a)),en(o,t,n,!1,i,0,e),this.e3=r.vertexLength++,this.e1>=0&&this.e2>=0&&(l.emplaceBack(this.e1,this.e2,this.e3),r.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},Ut("LineBucket",jo,{omit:["layers","features"]});var Bo=new qr({"line-cap":new Ur(ni.layout_line["line-cap"]),"line-join":new Nr(ni.layout_line["line-join"]),"line-miter-limit":new Ur(ni.layout_line["line-miter-limit"]),"line-round-limit":new Ur(ni.layout_line["line-round-limit"])}),Uo={paint:new qr({"line-opacity":new Nr(ni.paint_line["line-opacity"]),"line-color":new Nr(ni.paint_line["line-color"]),"line-translate":new Ur(ni.paint_line["line-translate"]),"line-translate-anchor":new Ur(ni.paint_line["line-translate-anchor"]),"line-width":new Nr(ni.paint_line["line-width"]),"line-gap-width":new Nr(ni.paint_line["line-gap-width"]),"line-offset":new Nr(ni.paint_line["line-offset"]),"line-blur":new Nr(ni.paint_line["line-blur"]),"line-dasharray":new Yr(ni.paint_line["line-dasharray"]),"line-pattern":new Zr(ni.paint_line["line-pattern"]),"line-gradient":new Vr(ni.paint_line["line-gradient"])}),layout:Bo},No=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new zr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i,r){return n=l({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i,r)},e}(Nr))(Uo.paint.properties["line-width"].specification);No.useIntegerZoom=!0;var Zo=function(t){function e(e){t.call(this,e,Uo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=Te(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=No.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new jo(t)},e.prototype.queryRadius=function(t){var e=t,n=rn(ue("line-width",this,e),ue("line-gap-width",this,e)),i=ue("line-offset",this,e);return n/2+Math.abs(i)+ce(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a,o){var l=pe(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,o),s=o/2*rn(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(i=function(t,e){for(var n=[],i=new Nn(0,0),r=0;r<t.length;r++){for(var a=t[r],o=[],l=0;l<a.length;l++){var s=a[l],u=a[l+1],c=0===l?i:s.sub(a[l-1])._unit()._perp(),p=l===a.length-1?i:u.sub(s)._unit()._perp(),h=c._add(p)._unit();h._mult(1/(h.x*p.x+h.y*p.y)),o.push(h._mult(e)._add(s))}n.push(o)}return n}(i,u*o)),ie(l,i,s)},e}(Gr),Yo=Ht([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Vo=Ht([{name:"a_projected_pos",components:3,type:"Float32"}],4),qo=(Ht([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ht([{name:"a_placed",components:2,type:"Uint8"}],4)),Go=(Ht([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Ht([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Wo=Ht([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Ht([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Ht([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Ht([{type:"Float32",name:"offsetX"}]),Ht([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ho={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},$o=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(Nn);Ut("Anchor",$o);var Xo=Po.VectorTileFeature.types,Ko=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Jo=function(t){this.layoutVertexArray=new ea,this.indexArray=new ha,this.programConfigurations=t,this.segments=new za,this.dynamicLayoutVertexArray=new na,this.opacityVertexArray=new ia,this.placedSymbolArray=new ba};Jo.prototype.upload=function(t,e,n,i){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Yo.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Vo.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ko,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t)},Jo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ut("SymbolBuffers",Jo);var Qo=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new za,this.collisionVertexArray=new oa};Qo.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,qo.members,!0)},Qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ut("CollisionBuffers",Qo);var tl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ln(this.zoom,e["text-size"]),this.iconSizeData=ln(this.zoom,e["icon-size"]);var n=this.layers[0].layout,i="viewport-y"===n.get("symbol-z-order");this.sortFeaturesByY=i&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.sourceID=t.sourceID};tl.prototype.createArrays=function(){this.text=new Jo(new $a(Yo.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Jo(new $a(Yo.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Qo(aa,Go.members,da),this.collisionCircle=new Qo(aa,Wo.members,ha),this.glyphOffsetArray=new Ta,this.lineVertexArray=new Ia,this.symbolInstances=new wa},tl.prototype.calculateGlyphDependencies=function(t,e,n,i){for(var r=0;r<t.length;r++)if(e[t.charCodeAt(r)]=!0,n&&i){var a=Ho[t.charAt(r)];a&&(e[a.charCodeAt(0)]=!0)}},tl.prototype.populate=function(t,e){var n=this.layers[0],i=n.layout,r=i.get("text-font"),a=i.get("text-field"),o=i.get("icon-image"),l=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==r.value.kind||r.value.value.length>0),s="constant"!==o.value.kind||o.value.value&&o.value.value.length>0;if(this.features=[],l||s){for(var u=e.iconDependencies,c=e.glyphDependencies,p=new zr(this.zoom),h=0,d=t;h<d.length;h+=1){var f=d[h],m=f.feature,g=f.index,y=f.sourceLayerIndex;if(n._featureFilter(p,m)){var _=void 0;l&&(_=on(_=n.getValueAndResolveTokens("text-field",m),n,m));var v=void 0;if(s&&(v=n.getValueAndResolveTokens("icon-image",m)),_||v){var b={text:_,icon:v,index:g,sourceLayerIndex:y,geometry:Qt(m),properties:m.properties,type:Xo[m.type]};if(void 0!==m.id&&(b.id=m.id),this.features.push(b),v&&(u[v]=!0),_){var x=r.evaluate(m,{}).join(","),w=c[x]=c[x]||{},S="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");if(_ instanceof xi)for(var T=0,k=_.sections;T<k.length;T+=1){var I=k[T],E=Yt(_.toString()),A=I.fontStack||x,C=c[A]=c[A]||{};this.calculateGlyphDependencies(I.text,C,S,E)}else{var L=Yt(_);this.calculateGlyphDependencies(_,w,S,L)}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){function e(e){l.push(t[e]),s++}function n(t,e,n){var i=o[t];return delete o[t],o[e]=i,l[i].geometry[0].pop(),l[i].geometry[0]=l[i].geometry[0].concat(n[0]),i}function i(t,e,n){var i=a[e];return delete a[e],a[t]=i,l[i].geometry[0].shift(),l[i].geometry[0]=n[0].concat(l[i].geometry[0]),i}function r(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var a={},o={},l=[],s=0,u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.text instanceof xi?c.text.toString():c.text;if(h){var d=r(h,p),f=r(h,p,!0);if(d in o&&f in a&&o[d]!==a[f]){var m=i(d,f,p),g=n(d,f,l[m].geometry);delete a[d],delete o[f],o[r(h,l[g].geometry,!0)]=g,l[m].geometry=null}else d in o?n(d,f,p):f in a?i(d,f,p):(e(u),a[d]=s-1,o[f]=s-1)}else e(u)}return l.filter(function(t){return t.geometry})}(this.features))}},tl.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},tl.prototype.isEmpty=function(){return 0===this.symbolInstances.length},tl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},tl.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},tl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},tl.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:i},o<e.length-1&&(i+=e[o+1].dist(e[o]));for(var l=t.segment||0;l>=0;l--)a[l]={x:e[l].x,y:e[l].y,tileUnitDistanceFromAnchor:r},l>0&&(r+=e[l-1].dist(e[l]));for(var s=0;s<e.length;s++){var u=a[s];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},tl.prototype.addSymbols=function(t,e,n,i,r,a,o,l,s,u){for(var c=t.indexArray,p=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,d=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),f=this.glyphOffsetArray.length,m=d.vertexLength,g=0,y=e;g<y.length;g+=1){var _=y[g],v=_.tl,b=_.tr,x=_.bl,w=_.br,S=_.tex,T=d.vertexLength,k=_.glyphOffset[1];sn(p,l.x,l.y,v.x,k+v.y,S.x,S.y,n),sn(p,l.x,l.y,b.x,k+b.y,S.x+S.w,S.y,n),sn(p,l.x,l.y,x.x,k+x.y,S.x,S.y+S.h,n),sn(p,l.x,l.y,w.x,k+w.y,S.x+S.w,S.y+S.h,n),un(h,l,0),c.emplaceBack(T,T+1,T+2),c.emplaceBack(T+1,T+2,T+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_.glyphOffset[0])}t.placedSymbolArray.emplaceBack(l.x,l.y,f,this.glyphOffsetArray.length-f,m,s,u,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{})},tl.prototype._addCollisionDebugVertex=function(t,e,n,i,r,a){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,r,Math.round(a.x),Math.round(a.y))},tl.prototype.addCollisionDebugVertices=function(t,e,n,i,r,a,o,l){var s=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),u=s.vertexLength,c=r.layoutVertexArray,p=r.collisionVertexArray,h=o.anchorX,d=o.anchorY;if(this._addCollisionDebugVertex(c,p,a,h,d,new Nn(t,e)),this._addCollisionDebugVertex(c,p,a,h,d,new Nn(n,e)),this._addCollisionDebugVertex(c,p,a,h,d,new Nn(n,i)),this._addCollisionDebugVertex(c,p,a,h,d,new Nn(t,i)),s.vertexLength+=4,l){var f=r.indexArray;f.emplaceBack(u,u+1,u+2),f.emplaceBack(u,u+2,u+3),s.primitiveLength+=2}else{var m=r.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),s.primitiveLength+=4}},tl.prototype.addDebugCollisionBoxes=function(t,e,n){for(var i=t;i<e;i++){var r=this.collisionBoxArray.get(i),a=r.radius>0;this.addCollisionDebugVertices(r.x1,r.y1,r.x2,r.y2,a?this.collisionCircle:this.collisionBox,r.anchorPoint,n,a)}},tl.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},tl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,i,r){for(var a={},o=e;o<n;o++){var l=t.get(o);if(0===l.radius){a.textBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},a.textFeatureIndex=l.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=l.featureIndex),a.textCircles.push(l.anchorPointX,l.anchorPointY,l.radius,l.signedDistanceFromAnchor,1)}for(var s=i;s<r;s++){var u=t.get(s);if(0===u.radius){a.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},a.iconFeatureIndex=u.featureIndex;break}}return a},tl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},tl.prototype.hasTextData=function(){return this.text.segments.get().length>0},tl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},tl.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},tl.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},tl.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),n=e.vertexStartIndex+4*e.numGlyphs,i=e.vertexStartIndex;i<n;i+=4)this.text.indexArray.emplaceBack(i,i+1,i+2),this.text.indexArray.emplaceBack(i+1,i+2,i+3)},tl.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);for(var i=Math.sin(t),r=Math.cos(t),a=[],o=[],l=0;l<this.symbolInstances.length;l++){var s=this.symbolInstances.get(l);a.push(0|Math.round(i*s.anchorX+r*s.anchorY)),o.push(s.featureIndex)}e.sort(function(t,e){return a[t]-a[e]||o[e]-o[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,c=e;u<c.length;u+=1){var p=c[u],h=this.symbolInstances.get(p);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(p);if(d.numGlyphs){var f=d.vertexStartIndex;this.icon.indexArray.emplaceBack(f,f+1,f+2),this.icon.indexArray.emplaceBack(f+1,f+2,f+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ut("SymbolBucket",tl,{omit:["layers","collisionBoxArray","features","compareText"]}),tl.MAX_GLYPHS=65535,tl.addDynamicAttributes=un;var el=new qr({"symbol-placement":new Ur(ni.layout_symbol["symbol-placement"]),"symbol-spacing":new Ur(ni.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ur(ni.layout_symbol["symbol-avoid-edges"]),"symbol-z-order":new Ur(ni.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ur(ni.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ur(ni.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ur(ni.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ur(ni.layout_symbol["icon-rotation-alignment"]),"icon-size":new Nr(ni.layout_symbol["icon-size"]),"icon-text-fit":new Ur(ni.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ur(ni.layout_symbol["icon-text-fit-padding"]),"icon-image":new Nr(ni.layout_symbol["icon-image"]),"icon-rotate":new Nr(ni.layout_symbol["icon-rotate"]),"icon-padding":new Ur(ni.layout_symbol["icon-padding"]),"icon-keep-upright":new Ur(ni.layout_symbol["icon-keep-upright"]),"icon-offset":new Nr(ni.layout_symbol["icon-offset"]),"icon-anchor":new Nr(ni.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ur(ni.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ur(ni.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ur(ni.layout_symbol["text-rotation-alignment"]),"text-field":new Nr(ni.layout_symbol["text-field"]),"text-font":new Nr(ni.layout_symbol["text-font"]),"text-size":new Nr(ni.layout_symbol["text-size"]),"text-max-width":new Nr(ni.layout_symbol["text-max-width"]),"text-line-height":new Ur(ni.layout_symbol["text-line-height"]),"text-letter-spacing":new Nr(ni.layout_symbol["text-letter-spacing"]),"text-justify":new Nr(ni.layout_symbol["text-justify"]),"text-anchor":new Nr(ni.layout_symbol["text-anchor"]),"text-max-angle":new Ur(ni.layout_symbol["text-max-angle"]),"text-rotate":new Nr(ni.layout_symbol["text-rotate"]),"text-padding":new Ur(ni.layout_symbol["text-padding"]),"text-keep-upright":new Ur(ni.layout_symbol["text-keep-upright"]),"text-transform":new Nr(ni.layout_symbol["text-transform"]),"text-offset":new Nr(ni.layout_symbol["text-offset"]),"text-allow-overlap":new Ur(ni.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ur(ni.layout_symbol["text-ignore-placement"]),"text-optional":new Ur(ni.layout_symbol["text-optional"])}),nl={paint:new qr({"icon-opacity":new Nr(ni.paint_symbol["icon-opacity"]),"icon-color":new Nr(ni.paint_symbol["icon-color"]),"icon-halo-color":new Nr(ni.paint_symbol["icon-halo-color"]),"icon-halo-width":new Nr(ni.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Nr(ni.paint_symbol["icon-halo-blur"]),"icon-translate":new Ur(ni.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ur(ni.paint_symbol["icon-translate-anchor"]),"text-opacity":new Nr(ni.paint_symbol["text-opacity"]),"text-color":new Nr(ni.paint_symbol["text-color"]),"text-halo-color":new Nr(ni.paint_symbol["text-halo-color"]),"text-halo-width":new Nr(ni.paint_symbol["text-halo-width"]),"text-halo-blur":new Nr(ni.paint_symbol["text-halo-blur"]),"text-translate":new Ur(ni.paint_symbol["text-translate"]),"text-translate-anchor":new Ur(ni.paint_symbol["text-translate-anchor"])}),layout:el},il=function(t){function e(e){t.call(this,e,nl)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,i=this.layout.get(t).evaluate(e,{}),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||lt(r.value)?i:(n=e.properties,i.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new tl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Gr),rl={paint:new qr({"background-color":new Ur(ni.paint_background["background-color"]),"background-pattern":new Yr(ni.paint_background["background-pattern"]),"background-opacity":new Ur(ni.paint_background["background-opacity"])})},al=function(t){function e(e){t.call(this,e,rl)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Gr),ol={paint:new qr({"raster-opacity":new Ur(ni.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ur(ni.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ur(ni.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ur(ni.paint_raster["raster-brightness-max"]),"raster-saturation":new Ur(ni.paint_raster["raster-saturation"]),"raster-contrast":new Ur(ni.paint_raster["raster-contrast"]),"raster-resampling":new Ur(ni.paint_raster["raster-resampling"]),"raster-fade-duration":new Ur(ni.paint_raster["raster-fade-duration"])})},ll={circle:ao,heatmap:co,hillshade:ho,fill:xo,"fill-extrusion":Eo,line:Zo,symbol:il,background:al,raster:function(t){function e(e){t.call(this,e,ol)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Gr)},sl=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},ul={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ul.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ul.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ul.tlbr.get=function(){return this.tl.concat(this.br)},ul.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(sl.prototype,ul);var cl=function(t,e){var n={},i={},r=[];for(var a in t){var o=t[a],l={x:0,y:0,w:o.data.width+2,h:o.data.height+2};r.push(l),n[a]=new sl(l,o)}for(var s in e){var u=e[s],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};r.push(c),i[s]=new sl(c,u)}var p=cn(r),h=new so({width:p.w||1,height:p.h||1});for(var d in t){var f=t[d],m=n[d].paddedRect;so.copy(f.data,h,{x:0,y:0},{x:m.x+1,y:m.y+1},f.data)}for(var g in e){var y=e[g],_=i[g].paddedRect,v=_.x+1,b=_.y+1,x=y.data.width,w=y.data.height;so.copy(y.data,h,{x:0,y:0},{x:v,y:b},y.data),so.copy(y.data,h,{x:0,y:w-1},{x:v,y:b-1},{width:x,height:1}),so.copy(y.data,h,{x:0,y:0},{x:v,y:b+w},{width:x,height:1}),so.copy(y.data,h,{x:x-1,y:0},{x:v-1,y:b},{width:1,height:w}),so.copy(y.data,h,{x:0,y:0},{x:v+x,y:b},{width:1,height:w})}this.image=h,this.iconPositions=n,this.patternPositions=i};Ut("ImagePosition",sl),Ut("ImageAtlas",cl);var pl=self.HTMLImageElement,hl=self.HTMLCanvasElement,dl=self.HTMLVideoElement,fl=self.ImageData,ml=function(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};ml.prototype.update=function(t,e){var n=t.width,i=t.height,r=!this.size||this.size[0]!==n||this.size[1]!==i,a=this.context,o=a.gl;this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),r?(this.size=[n,i],a.pixelStoreUnpack.set(1),this.format!==o.RGBA||e&&!1===e.premultiply||a.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof pl||t instanceof hl||t instanceof dl||t instanceof fl?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,n,i,0,this.format,o.UNSIGNED_BYTE,t.data)):t instanceof pl||t instanceof hl||t instanceof dl||t instanceof fl?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,0,0,n,i,o.RGBA,o.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},ml.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var gl=function(t,e,n,i,r){var a,o,l=8*r-i-1,s=(1<<l)-1,u=s>>1,c=-7,p=n?r-1:0,h=n?-1:1,d=t[e+p];for(p+=h,a=d&(1<<-c)-1,d>>=-c,c+=l;c>0;a=256*a+t[e+p],p+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+t[e+p],p+=h,c-=8);if(0===a)a=1-u;else{if(a===s)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=u}return(d?-1:1)*o*Math.pow(2,a-i)},yl=function(t,e,n,i,r,a){var o,l,s,u=8*a-r-1,c=(1<<u)-1,p=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-o))<1&&(o--,s*=2),(e+=o+p>=1?h/s:h*Math.pow(2,1-p))*s>=2&&(o++,s/=2),o+p>=c?(l=0,o=c):o+p>=1?(l=(e*s-1)*Math.pow(2,r),o+=p):(l=e*Math.pow(2,p-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&l,d+=f,l/=256,r-=8);for(o=o<<r|l,u+=r;u>0;t[n+d]=255&o,d+=f,o/=256,u-=8);t[n+d-f]|=128*m},_l=pn;pn.Varint=0,pn.Fixed64=1,pn.Bytes=2,pn.Fixed32=5,pn.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,a=this.pos;this.type=7&i,t(r,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Tn(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=In(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Tn(this.buf,this.pos)+4294967296*Tn(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Tn(this.buf,this.pos)+4294967296*In(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=gl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=gl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,a=n.buf;if(r=a[n.pos++],i=(112&r)>>4,r<128)return dn(t,i,e);if(r=a[n.pos++],i|=(127&r)<<3,r<128)return dn(t,i,e);if(r=a[n.pos++],i|=(127&r)<<10,r<128)return dn(t,i,e);if(r=a[n.pos++],i|=(127&r)<<17,r<128)return dn(t,i,e);if(r=a[n.pos++],i|=(127&r)<<24,r<128)return dn(t,i,e);if(r=a[n.pos++],i|=(1&r)<<31,r<128)return dn(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var i="",r=e;r<n;){var a,o,l,s=t[r],u=null,c=s>239?4:s>223?3:s>191?2:1;if(r+c>n)break;1===c?s<128&&(u=s):2===c?128==(192&(a=t[r+1]))&&(u=(31&s)<<6|63&a)<=127&&(u=null):3===c?(a=t[r+1],o=t[r+2],128==(192&a)&&128==(192&o)&&((u=(15&s)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[r+1],o=t[r+2],l=t[r+3],128==(192&a)&&128==(192&o)&&128==(192&l)&&((u=(15&s)<<18|(63&a)<<12|(63&o)<<6|63&l)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=hn(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=hn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===pn.Varint)for(;this.buf[this.pos++]>127;);else if(e===pn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===pn.Fixed32)this.pos+=4;else{if(e!==pn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),kn(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),kn(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),kn(this.buf,-1&t,this.pos),kn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),kn(this.buf,-1&t,this.pos),kn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,n){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(i,0,n),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,n)}(0,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,a=0;a<e.length;a++){if((i=e.charCodeAt(a))>55295&&i<57344){if(!r){i>56319||a+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&fn(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),yl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),yl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&fn(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,pn.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,mn,e)},writePackedSVarint:function(t,e){this.writeMessage(t,gn,e)},writePackedBoolean:function(t,e){this.writeMessage(t,vn,e)},writePackedFloat:function(t,e){this.writeMessage(t,yn,e)},writePackedDouble:function(t,e){this.writeMessage(t,_n,e)},writePackedFixed32:function(t,e){this.writeMessage(t,bn,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,xn,e)},writePackedFixed64:function(t,e){this.writeMessage(t,wn,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Sn,e)},writeBytesField:function(t,e){this.writeTag(t,pn.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,pn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,pn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,pn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,pn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,pn.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,pn.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,pn.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,pn.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,pn.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var vl=3,bl=vl,xl=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,u(["receive"],this),this.target.addEventListener("message",this.receive,!1)};xl.prototype.send=function(t,e,n,i){var r=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[r]=n);var a=[];this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(r),data:Nt(e,a)},a)},xl.prototype.receive=function(t){var e,n=this,i=t.data,r=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var a=function(t,e){var i=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(r),error:t?Nt(t):null,data:Nt(e,i)},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&i.error?e(Zt(i.error)):e&&e(null,Zt(i.data));else if(void 0!==i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,Zt(i.data),a);else if(void 0!==i.id&&this.parent.getWorkerSource){var o=i.type.split("."),l=Zt(i.data);this.parent.getWorkerSource(i.sourceMapId,o[0],l.source)[o[1]](l,a)}else this.parent[i.type](Zt(i.data))}},xl.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var wl=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=zn(0,t,e,n)};wl.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},wl.prototype.url=function(t,e){var n,i,r,a,o,l=(n=this.x,i=this.y,r=this.z,a=Ln(256*n,256*(i=Math.pow(2,r)-i-1),r),o=Ln(256*(n+1),256*(i+1),r),a[0]+","+a[1]+","+o[0]+","+o[1]),s=function(t,e,n){for(var i,r="",a=t;a>0;a--)r+=(e&(i=1<<a-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",s).replace("{bbox-epsg-3857}",l)};var Sl=function(t,e){this.wrap=t,this.canonical=e,this.key=zn(t,e.z,e.x,e.y)},Tl=function(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new wl(n,+i,+r),this.key=zn(e,t,i,r)};Tl.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Tl.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Tl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Tl(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Tl.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Tl.prototype.children=function(t){if(this.overscaledZ>=t)return[new Tl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Tl(e,this.wrap,e,n,i),new Tl(e,this.wrap,e,n+1,i),new Tl(e,this.wrap,e,n,i+1),new Tl(e,this.wrap,e,n+1,i+1)]},Tl.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Tl.prototype.wrapped=function(){return new Tl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Tl.prototype.unwrapTo=function(t){return new Tl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Tl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Tl.prototype.toUnwrapped=function(){return new Sl(this.wrap,this.canonical)},Tl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Tl.prototype.toCoordinate=function(){return new Un(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},Ut("CanonicalTileID",wl),Ut("OverscaledTileID",Tl,{omit:["posMatrix"]});var kl=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return f('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var i=this.dim=e.height;this.border=Math.max(Math.ceil(e.height/2),1),this.stride=this.dim+2*this.border,this.data=new Int32Array(this.stride*this.stride);for(var r=e.data,a="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,o=0;o<i;o++)for(var l=0;l<i;l++){var s=4*(o*i+l);this.set(l,o,a(r[s],r[s+1],r[s+2]))}for(var u=0;u<i;u++)this.set(-1,u,this.get(0,u)),this.set(i,u,this.get(i-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,i,this.get(u,i-1));this.set(-1,-1,this.get(0,0)),this.set(i,-1,this.get(i-1,0)),this.set(-1,i,this.get(0,i-1)),this.set(i,i,this.get(i-1,i-1))};kl.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},kl.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},kl.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},kl.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},kl.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},kl.prototype.getPixels=function(){return new so({width:this.dim+2*this.border,height:this.dim+2*this.border},new Uint8Array(this.data.buffer))},kl.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,r=e*this.dim+this.dim,a=n*this.dim,l=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:a=l-1;break;case 1:l=a+1}for(var s=o(i,-this.border,this.dim+this.border),u=o(r,-this.border,this.dim+this.border),c=o(a,-this.border,this.dim+this.border),p=o(l,-this.border,this.dim+this.border),h=-e*this.dim,d=-n*this.dim,f=c;f<p;f++)for(var m=s;m<u;m++)this.set(m,f,t.get(m+h,f+d))},Ut("DEMData",kl);var Il=Ht([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),El=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};El.prototype.encode=function(t){return this._stringToNumber[t]},El.prototype.decode=function(t){return this._numberToString[t]};var Al=function(t,e,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Cl={geometry:{configurable:!0}};Cl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Cl.geometry.set=function(t){this._geometry=t},Al.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Al.prototype,Cl);var Ll=function(){this.state={},this.stateChanges={}};Ll.prototype.updateState=function(t,e,n){var i=String(e);this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},l(this.stateChanges[t][i],n)},Ll.prototype.getState=function(t,e){var n=String(e);return l({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n])},Ll.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Ll.prototype.coalesceChanges=function(t,e){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),l(this.state[i][a],this.stateChanges[i][a]),r[a]=this.state[i][a];n[i]=r}if(this.stateChanges={},0!==Object.keys(n).length)for(var o in t)t[o].setFeatureState(n,e)};var zl=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new _r(Xa,16,0),this.featureIndexArray=n||new Aa};zl.prototype.insert=function(t,e,n,i,r){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var o=0;o<e.length;o++){for(var l=e[o],s=[1/0,1/0,-1/0,-1/0],u=0;u<l.length;u++){var c=l[u];s[0]=Math.min(s[0],c.x),s[1]=Math.min(s[1],c.y),s[2]=Math.max(s[2],c.x),s[3]=Math.max(s[3],c.y)}s[0]<Xa&&s[1]<Xa&&s[2]>=0&&s[3]>=0&&this.grid.insert(a,s[0],s[1],s[2],s[3])}},zl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Po.VectorTile(new _l(this.rawTileData)).layers,this.sourceLayerCoder=new El(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},zl.prototype.query=function(t,e,n){var i=this;this.loadVTLayers();for(var r=t.params||{},a=Xa/t.tileSize/t.scale,o=_t(r.filter),l=t.queryGeometry,s=t.queryPadding*a,u=1/0,c=1/0,p=-1/0,h=-1/0,d=0;d<l.length;d++)for(var f=l[d],m=0;m<f.length;m++){var g=f[m];u=Math.min(u,g.x),c=Math.min(c,g.y),p=Math.max(p,g.x),h=Math.max(h,g.y)}var y=this.grid.query(u-s,c-s,p+s,h+s);y.sort(Pn);for(var _,v={},b=function(s){var u=y[s];if(u!==_){_=u;var c=i.featureIndexArray.get(u),p=null;i.loadMatchingFeature(v,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,o,r.layers,e,function(e,r){p||(p=Qt(e));var o={};return e.id&&(o=n.getState(r.sourceLayer||"_geojsonTileLayer",e.id)),r.queryIntersectsFeature(l,e,o,p,i.z,t.transform,a,t.posMatrix)})}},x=0;x<y.length;x++)b(x);return v},zl.prototype.loadMatchingFeature=function(t,e,n,i,r,a,o,l){var s=this.bucketLayerIDs[e];if(!a||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(a,s)){var u=this.sourceLayerCoder.decode(n),c=this.vtLayers[u].feature(i);if(r(new zr(this.tileID.overscaledZ),c))for(var p=0;p<s.length;p++){var h=s[p];if(!(a&&a.indexOf(h)<0)){var d=o[h];if(d&&(!l||l(c,d))){var f=new Al(c,this.z,this.x,this.y);f.layer=d.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:i,feature:f})}}}}},zl.prototype.lookupSymbolFeatures=function(t,e,n,i,r,a){var o={};this.loadVTLayers();for(var l=_t(i),s=0,u=t;s<u.length;s+=1){this.loadMatchingFeature(o,e,n,u[s],l,r,a)}return o},zl.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},Ut("FeatureIndex",zl,{omit:["rawTileData","sourceLayerCoder"]});var Pl=function(t,e){this.tileID=t,this.uid=s(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Pl.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<Hn.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Pl.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Pl.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=0,r=t;i<r.length;i+=1){var a=r[i],o=a.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==o.length){a.layers=o,a.stateDependentLayers=o.filter(function(t){return t.isStateDependent()});for(var l=0,s=o;l<s.length;l+=1)n[s[l].id]=a}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof tl){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new _a},Pl.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Pl.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Pl.prototype.getBucket=function(t){return this.buckets[t.id]},Pl.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ml(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ml(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},Pl.prototype.queryRenderedFeatures=function(t,e,n,i,r,a,o,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:i,tileSize:this.tileSize,posMatrix:l,transform:a,params:r,queryPadding:this.queryPadding*o},t,e):{}},Pl.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),i=n._geojsonTileLayer||n[e?e.sourceLayer:""];if(i)for(var r=_t(e&&e.filter),a=this.tileID.canonical,o=a.z,l=a.x,s=a.y,u={z:o,x:l,y:s},c=0;c<i.length;c++){var p=i.feature(c);if(r(new zr(this.tileID.overscaledZ),p)){var h=new Al(p,o,l,s);h.tile=u,t.push(h)}}}},Pl.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Pl.prototype.setMask=function(t,e){if(!r(this.mask,t)&&(this.mask=t,this.clearMask(),!r(t,{0:!0}))){var n=new Kr,i=new ha;this.segments=new za,this.segments.prepareSegment(0,n,i);for(var a=Object.keys(t),o=0;o<a.length;o++){var l=t[a[o]],s=Xa>>l.z,u=new Nn(l.x*s,l.y*s),c=new Nn(u.x+s,u.y+s),p=this.segments.prepareSegment(4,n,i);n.emplaceBack(u.x,u.y,u.x,u.y),n.emplaceBack(c.x,u.y,c.x,u.y),n.emplaceBack(u.x,c.y,u.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var h=p.vertexLength;i.emplaceBack(h,h+1,h+2),i.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,Il.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},Pl.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Pl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Pl.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(e){var n={};if(t.cacheControl.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,e,i,r){var a=i||r;return n[e]=!a||a.toLowerCase(),""}),n["max-age"]){var i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}();n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var a=this.expirationTime-e;a?this.expirationTime=i+Math.max(a,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Pl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Pl.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets){var r=this.buckets[i],a=r.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],l=t[a];o&&l&&0!==Object.keys(l).length&&(r.update(l,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i).queryRadius(r))))}}},Pl.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Pl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Hn.now()},Pl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Pl.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=Hn.now()+t};var Dl={horizontal:1,vertical:2,horizontalOnly:3},Ml=function(){this.text="",this.sectionIndex=[],this.sections=[]};Ml.fromFeature=function(t,e){var n=new Ml;if(t instanceof xi)for(var i=0;i<t.sections.length;i++){var r=t.sections[i];n.sections.push({scale:r.scale||1,fontStack:r.fontStack||e}),n.text+=r.text;for(var a=0;a<r.text.length;a++)n.sectionIndex.push(i)}else{n.text=t,n.sections.push({scale:1,fontStack:e});for(var o=0;o<t.length;o++)n.sectionIndex.push(0)}return n},Ml.prototype.length=function(){return this.text.length},Ml.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Ml.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Ml.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;i&&Gt(i)&&!Ho[t[n+1]]||r&&Gt(r)&&!Ho[t[n-1]]||!Ho[t[n]]?e+=t[n]:e+=Ho[t[n]]}return e}(this.text)},Ml.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Fl[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=t&&Fl[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},Ml.prototype.substring=function(t,e){var n=new Ml;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},Ml.prototype.toString=function(){return this.text},Ml.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)};var Fl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ol={};Ol[10]=!0,Ol[32]=!0,Ol[38]=!0,Ol[40]=!0,Ol[41]=!0,Ol[43]=!0,Ol[45]=!0,Ol[47]=!0,Ol[173]=!0,Ol[183]=!0,Ol[8203]=!0,Ol[8208]=!0,Ol[8211]=!0,Ol[8231]=!0,t.createCommonjsModule=e,t.Point=Nn,t.window=self,t.browser=Hn,t.uuid=function(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()},t.validateUuid=function(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},t.storageAvailable=function(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}},t.warnOnce=f,t.postData=function(t,e,n){var i=y(l(t,{method:"POST"}));return i.onerror=function(){n(new Error(i.statusText))},i.onload=function(){i.status>=200&&i.status<300?n(null,i.response):n(new Kn(i.statusText,i.status,t.url))},i.send(e),{cancel:function(){return i.abort()}}},t.getJSON=function(t,e){var n=y(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&n.response){var i;try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i)}else 401===n.status&&t.url.match(/mapbox.com/)?e(new Kn(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url)):e(new Kn(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},t.getImage=function(t,e){return Jn(t,function(t,n){if(t)e(t);else if(n){var i=new self.Image,r=self.URL||self.webkitURL;i.onload=function(){e(null,i),r.revokeObjectURL(i.src)};var a=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});i.cacheControl=n.cacheControl,i.expires=n.expires,i.src=n.data.byteLength?r.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=Xn,t.RGBAImage=so,t.potpack=cn,t.ImagePosition=sl,t.Texture=ml,t.getArrayBuffer=Jn,t.parseGlyphPBF=function(t){return new _l(t).readFields(En,[])},t.isChar=kr,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),a=null;t.forEach(function(t,o){e(t,function(t,e){t&&(a=t),r[o]=e,0==--i&&n(a,r)})})},t.AlphaImage=lo,t.styleSpec=ni,t.endsWith=c,t.extend=l,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},t.Evented=ei,t.validateStyle=fr,t.validateLight=mr,t.emitValidationErrors=jt,t.Color=yi,t.number=D,t.Properties=qr,t.Transitionable=Mr,t.Transitioning=Or,t.PossiblyEvaluated=Br,t.DataConstantProperty=Ur,t.uniqueId=s,t.Actor=xl,t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n},t.wrap=function(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r},t.clamp=o,t.Event=Qn,t.ErrorEvent=ti,t.OverscaledTileID=Tl,t.EXTENT=Xa,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),i=Math.max(i,t[a].column),r=Math.max(r,t[a].row);var o=i-e,l=r-n,s=Math.max(o,l),u=Math.max(0,Math.floor(-Math.log(s)/Math.LN2));return new Un((e+i)/2,(n+r)/2,0).zoomTo(u)},t.CanonicalTileID=wl,t.StructArrayLayout4i8=Kr,t.rasterBoundsAttributes=Il,t.SegmentVector=za,t.getVideo=function(t,e){var n,i,r=self.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");n=t[a],i=void 0,(i=self.document.createElement("a")).href=n,(i.protocol!==self.document.location.protocol||i.host!==self.document.location.host)&&(r.crossOrigin="Anonymous"),o.src=t[a],r.appendChild(o)}return{cancel:function(){}}},t.ValidationError=ii,t.bindAll=u,t.deepEqual=r,t.Tile=Pl,t.Coordinate=Un,t.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},t.SourceFeatureState=Ll,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new to(16);return to!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],s=e[6],u=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=n*l-i*o,v=n*s-r*o,b=n*u-a*o,x=i*s-r*l,w=i*u-a*l,S=r*u-a*s,T=c*m-p*f,k=c*g-h*f,I=c*y-d*f,E=p*g-h*m,A=p*y-d*m,C=h*y-d*g,L=_*C-v*A+b*E+x*I-w*k+S*T;return L?(L=1/L,t[0]=(l*C-s*A+u*E)*L,t[1]=(r*A-i*C-a*E)*L,t[2]=(m*S-g*w+y*x)*L,t[3]=(h*w-p*S-d*x)*L,t[4]=(s*I-o*C-u*k)*L,t[5]=(n*C-r*I+a*k)*L,t[6]=(g*b-f*S-y*v)*L,t[7]=(c*S-h*b+d*v)*L,t[8]=(o*A-l*I+u*T)*L,t[9]=(i*I-n*A-a*T)*L,t[10]=(f*w-m*b+y*_)*L,t[11]=(p*b-c*w-d*_)*L,t[12]=(l*k-o*E-s*T)*L,t[13]=(n*E-i*k+r*T)*L,t[14]=(m*v-f*x-g*_)*L,t[15]=(c*x-p*v+h*_)*L,t):null},t.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],l=e[4],s=e[5],u=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],_=e[15],v=n[0],b=n[1],x=n[2],w=n[3];return t[0]=v*i+b*l+x*p+w*m,t[1]=v*r+b*s+x*h+w*g,t[2]=v*a+b*u+x*d+w*y,t[3]=v*o+b*c+x*f+w*_,v=n[4],b=n[5],x=n[6],w=n[7],t[4]=v*i+b*l+x*p+w*m,t[5]=v*r+b*s+x*h+w*g,t[6]=v*a+b*u+x*d+w*y,t[7]=v*o+b*c+x*f+w*_,v=n[8],b=n[9],x=n[10],w=n[11],t[8]=v*i+b*l+x*p+w*m,t[9]=v*r+b*s+x*h+w*g,t[10]=v*a+b*u+x*d+w*y,t[11]=v*o+b*c+x*f+w*_,v=n[12],b=n[13],x=n[14],w=n[15],t[12]=v*i+b*l+x*p+w*m,t[13]=v*r+b*s+x*h+w*g,t[14]=v*a+b*u+x*d+w*y,t[15]=v*o+b*c+x*f+w*_,t},t.translate=function(t,e,n){var i=n[0],r=n[1],a=n[2],o=void 0,l=void 0,s=void 0,u=void 0,c=void 0,p=void 0,h=void 0,d=void 0,f=void 0,m=void 0,g=void 0,y=void 0;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*a+e[12],t[13]=e[1]*i+e[5]*r+e[9]*a+e[13],t[14]=e[2]*i+e[6]*r+e[10]*a+e[14],t[15]=e[3]*i+e[7]*r+e[11]*a+e[15]):(o=e[0],l=e[1],s=e[2],u=e[3],c=e[4],p=e[5],h=e[6],d=e[7],f=e[8],m=e[9],g=e[10],y=e[11],t[0]=o,t[1]=l,t[2]=s,t[3]=u,t[4]=c,t[5]=p,t[6]=h,t[7]=d,t[8]=f,t[9]=m,t[10]=g,t[11]=y,t[12]=o*i+c*r+f*a+e[12],t[13]=l*i+p*r+m*a+e[13],t[14]=s*i+h*r+g*a+e[14],t[15]=u*i+d*r+y*a+e[15]),t},t.scale=function(t,e,n){var i=n[0],r=n[1],a=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[4],o=e[5],l=e[6],s=e[7],u=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+u*i,t[5]=o*r+c*i,t[6]=l*r+p*i,t[7]=s*r+h*i,t[8]=u*r-a*i,t[9]=c*r-o*i,t[10]=p*r-l*i,t[11]=h*r-s*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[0],o=e[1],l=e[2],s=e[3],u=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+u*i,t[1]=o*r+c*i,t[2]=l*r+p*i,t[3]=s*r+h*i,t[4]=u*r-a*i,t[5]=c*r-o*i,t[6]=p*r-l*i,t[7]=h*r-s*i,t},t.perspective=function(t,e,n,i,r){var a=1/Math.tan(e/2),o=void 0;return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.ortho=function(t,e,n,i,r,a,o){var l=1/(e-n),s=1/(i-r),u=1/(a-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*l,t[13]=(r+i)*s,t[14]=(o+a)*u,t[15]=1,t},t.create$1=ge,t.normalize=ye,t.transformMat4=_e,t.forEach=ro,t.getSizeData=ln,t.evaluateSizeForFeature=function(t,e,n){var i=e;return"source"===t.functionType?n.lowerSize/256:"composite"===t.functionType?D(n.lowerSize/256,n.upperSize/256,i.uSizeT):i.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var i=t.zoomRange,r=t.sizeRange,a=o(ct(t.propertyValue,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:r.min+a*(r.max-r.min)}}var l=t.zoomRange;return{uSizeT:o(ct(t.propertyValue,n.specification).interpolationFactor(e,l.min,l.max),0,1),uSize:0}},t.SIZE_PACK_FACTOR=256,t.addDynamicAttributes=un,t.properties=nl,t.WritingMode=Dl,t.multiPolygonIntersectsBufferedPoint=ee,t.multiPolygonIntersectsMultiPolygon=ne,t.multiPolygonIntersectsBufferedMultiLine=ie,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(se(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(se(t,e[i]))return!0;return!!re(t,e)},t.distToSegmentSquared=oe,t.SymbolInstanceArray=wa,t.StyleLayer=Gr,t.createStyleLayer=function(t){return new ll[t.type](t)},t.clone=d,t.filterObject=h,t.mapObject=p,t.registerForPluginAvailability=function(t){return Er?t({pluginURL:Er,completionCallback:Tr}):Cr.once("pluginAvailable",t),t},t.evented=Cr,t.ZoomHistory=Sr,t.createLayout=Ht,t.ProgramConfiguration=Ha,t.Uniform1i=Fa,t.Uniform1f=Oa,t.Uniform2f=Ra,t.Uniform4f=Ba,t.Uniform3f=ja,t.UniformMatrix4f=Za,t.create$2=he,t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=de,t.length=fe,t.fromValues=me,t.normalize$1=function(t,e){var n=e[0],i=e[1],r=e[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.cross=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],l=n[1],s=n[2];return t[0]=r*s-a*l,t[1]=a*o-i*s,t[2]=i*l-r*o,t},t.transformMat3=function(t,e,n){var i=e[0],r=e[1],a=e[2];return t[0]=i*n[0]+r*n[3]+a*n[6],t[1]=i*n[1]+r*n[4]+a*n[7],t[2]=i*n[2]+r*n[5]+a*n[8],t},t.len=no,t.forEach$1=io,t.UniformColor=Ua,t.StructArrayLayout2i4=Xr,t.StructArrayLayout2ui4=da,t.StructArrayLayout3ui6=ha,t.StructArrayLayout1ui2=fa,t.UnwrappedTileID=Sl,t.create$4=function(){var t=new to(4);return to!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],l=Math.sin(n),s=Math.cos(n);return t[0]=i*s+a*l,t[1]=r*s+o*l,t[2]=i*-l+a*s,t[3]=r*-l+o*s,t},t.ease=Zn,t.bezier=a,t.EvaluationParameters=zr,t.setRTLTextPlugin=function(t,e){if(Ir)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ir=!0,Er=Hn.resolveURL(t),Tr=function(t){t?(Ir=!1,Er=null,e&&e(t)):Ar=!0},Cr.fire(new Qn("pluginAvailable",{pluginURL:Er,completionCallback:Tr}))},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.featureFilter=_t,t.Anchor=$o,t.GLYPH_PBF_BORDER=bl,t.shapeText=function(t,e,n,i,r,a,o,l,s,u,c){var p=Ml.fromFeature(t,n);c===Dl.vertical&&p.verticalizePunctuation();var h,d=[],f={positionedGlyphs:d,text:p,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:c},m=Lr.processBidirectionalText,g=Lr.processStyledBidirectionalText;if(m&&1===p.sections.length){h=[];for(var y=0,_=m(p.toString(),On(p,l,i,e));y<_.length;y+=1){var v=_[y],b=new Ml;b.text=v,b.sections=p.sections;for(var x=0;x<v.length;x++)b.sectionIndex.push(0);h.push(b)}}else if(g){h=[];for(var w=0,S=g(p.text,p.sectionIndex,On(p,l,i,e));w<S.length;w+=1){var T=S[w],k=new Ml;k.text=T[0],k.sectionIndex=T[1],k.sections=p.sections,h.push(k)}}else h=function(t,e){for(var n=[],i=t.text,r=0,a=0,o=e;a<o.length;a+=1){var l=o[a];n.push(t.substring(r,l)),r=l}return r<i.length&&n.push(t.substring(r,i.length)),n}(p,On(p,l,i,e));return function(t,e,n,i,r,a,l,s,u){for(var c=0,p=-17,h=0,d=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,m=0,g=n;m<g.length;m+=1){var y=g[m];y.trim();var _=y.getMaxScale();if(y.length()){for(var v=d.length,b=0;b<y.length();b++){var x=y.getSection(b),w=y.getCharCode(b),S=24*(_-x.scale),T=e[x.fontStack],k=T&&T[w];k&&(qt(w)&&l!==Dl.horizontal?(d.push({glyph:w,x:c,y:S,vertical:!0,scale:x.scale,fontStack:x.fontStack}),c+=u*x.scale+s):(d.push({glyph:w,x:c,y:p+S,vertical:!1,scale:x.scale,fontStack:x.fontStack}),c+=k.metrics.advance*x.scale+s))}if(d.length!==v){var I=c-s;h=Math.max(I,h),jn(d,e,v,d.length-1,f)}c=0,p+=i*_}else p+=i}var E=Rn(r),A=E.horizontalAlign,C=E.verticalAlign;!function(t,e,r,a,o,l,s){for(var u=(f-A)*h,c=(-C*n.length+.5)*i,p=0;p<t.length;p++)t[p].x+=u,t[p].y+=c}(d);var L=p- -17;t.top+=-C*L,t.bottom=t.top+L,t.left+=-A*h,t.right=t.left+h}(f,e,h,r,a,0,c,l,u),!!d.length&&(f.text=f.text.toString(),f)},t.shapeIcon=function(t,e,n){var i=Rn(n),r=e[0]-t.displaySize[0]*i.horizontalAlign,a=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:a,bottom:a+t.displaySize[1],left:r,right:r+t.displaySize[0]}},t.allowsVerticalWritingMode=Yt,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Vt(n[e].charCodeAt(0)))return!1;return!0},t.classifyRings=Ze,t.SymbolBucket=tl,t.Formatted=xi,t.register=Ut,t.FeatureIndex=zl,t.CollisionBoxArray=_a,t.DictionaryCoder=El,t.LineBucket=jo,t.FillBucket=vo,t.FillExtrusionBucket=ko,t.ImageAtlas=cl,t.mvt=Po,t.Protobuf=_l,t.DEMData=kl,t.Point$1=Nn,t.pbf=_l,t.plugin=Lr}),t(0,function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",r=0,a=t;r<a.length;r+=1)i+=e(a[r])+",";return i+"]"}for(var o=Object.keys(t).sort(),l="{",s=0;s<o.length;s++)l+=JSON.stringify(o[s])+":"+e(t[o[s]])+",";return l+"}"}function n(n){for(var i="",r=0,a=t.refProperties;r<a.length;r+=1)i+="/"+e(n[a[r]]);return i}function i(t,e,n,i,r){if(void 0===e.segment)return!0;for(var a=e,o=e.segment+1,l=0;l>-n/2;){if(--o<0)return!1;l-=t[o].dist(a),a=t[o]}l+=t[o].dist(t[o+1]),o++;for(var s=[],u=0;l<n/2;){var c=t[o-1],p=t[o],h=t[o+1];if(!h)return!1;var d=c.angleTo(p)-p.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),s.push({distance:l,angleDelta:d}),u+=d;l-s[0].distance>i;)u-=s.shift().angleDelta;if(u>r)return!1;o++,l+=p.dist(h)}return!0}function r(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function a(t,e,n){return t?.6*e*n:0}function o(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function l(e,n,l,s,u,c){for(var p=a(l,u,c),h=o(l,s)*c,d=0,f=r(e)/2,m=0;m<e.length-1;m++){var g=e[m],y=e[m+1],_=g.dist(y);if(d+_>f){var v=(f-d)/_,b=t.number(g.x,y.x,v),x=t.number(g.y,y.y,v),w=new t.Anchor(b,x,y.angleTo(g),m);return w._round(),!p||i(e,w,h,p,n)?w:void 0}d+=_}}function s(e,n,l,s,u,c,p,h,d){var f=a(s,c,p),m=o(s,u),g=m*p,y=0===e[0].x||e[0].x===d||0===e[0].y||e[0].y===d;return n-g<n/4&&(n=g+n/4),function e(n,a,o,l,s,u,c,p,h){for(var d=u/2,f=r(n),m=0,g=a-o,y=[],_=0;_<n.length-1;_++){for(var v=n[_],b=n[_+1],x=v.dist(b),w=b.angleTo(v);g+o<m+x;){var S=((g+=o)-m)/x,T=t.number(v.x,b.x,S),k=t.number(v.y,b.y,S);if(T>=0&&T<h&&k>=0&&k<h&&g-d>=0&&g+d<=f){var I=new t.Anchor(T,k,w,_);I._round(),l&&!i(n,I,u,l,s)||y.push(I)}}m+=x}return p||y.length||c||(y=e(n,m/2,o,l,s,u,c,!0,h)),y}(e,y?n/2*h%n:(m/2+2*c)*p*h%n,n,f,l,g,y,!1,d)}function u(t,e){if(!(this instanceof u))return new u(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function c(e,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);for(var r=1/0,a=1/0,o=-1/0,l=-1/0,s=e[0],u=0;u<s.length;u++){var c=s[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<a)&&(a=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>l)&&(l=c.y)}var d=o-r,f=l-a,m=Math.min(d,f),g=m/2,y=new kt(null,p);if(0===m)return new t.Point(r,a);for(var _=r;_<o;_+=m)for(var v=a;v<l;v+=m)y.push(new h(_+g,v+g,g,e));for(var b=function(t){for(var e=0,n=0,i=0,r=t[0],a=0,o=r.length,l=o-1;a<o;l=a++){var s=r[a],u=r[l],c=s.x*u.y-u.x*s.y;n+=(s.x+u.x)*c,i+=(s.y+u.y)*c,e+=3*c}return new h(n/e,i/e,0,t)}(e),x=y.length;y.length;){var w=y.pop();(w.d>b.d||!b.d)&&(b=w,i&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,x)),w.max-b.d<=n||(g=w.h/2,y.push(new h(w.p.x-g,w.p.y-g,g,e)),y.push(new h(w.p.x+g,w.p.y-g,g,e)),y.push(new h(w.p.x-g,w.p.y+g,g,e)),y.push(new h(w.p.x+g,w.p.y+g,g,e)),x+=4)}return i&&(console.log("num probes: "+x),console.log("best distance: "+b.d)),b.p}function p(t,e){return e.max-t.max}function h(e,n,i,r){this.p=new t.Point(e,n),this.h=i,this.d=function(e,n){for(var i=!1,r=1/0,a=0;a<n.length;a++)for(var o=n[a],l=0,s=o.length,u=s-1;l<s;u=l++){var c=o[l],p=o[u];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(i=!i),r=Math.min(r,t.distToSegmentSquared(e,c,p))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}function d(e,n,i,r,a,o){e.createArrays();e.tilePixelRatio=t.EXTENT/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,p=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.functionType){var d=e.textSizeData.zoomRange,m=d.max;h.compositeTextSizes=[p["text-size"].possiblyEvaluate(new t.EvaluationParameters(d.min)),p["text-size"].possiblyEvaluate(new t.EvaluationParameters(m))]}if("composite"===e.iconSizeData.functionType){var g=e.iconSizeData.zoomRange,y=g.max;h.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new t.EvaluationParameters(g.min)),p["icon-size"].possiblyEvaluate(new t.EvaluationParameters(y))]}h.layoutTextSize=p["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),h.layoutIconSize=p["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),h.textMaxSize=p["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));for(var _=24*u.get("text-line-height"),v="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),b=u.get("text-keep-upright"),x=0,w=e.features;x<w.length;x+=1){var S=w[x],T=u.get("text-font").evaluate(S,{}).join(","),k=i,I={},E=S.text;if(E){var A=E instanceof t.Formatted?E.toString():E,C=u.get("text-offset").evaluate(S,{}).map(function(t){return 24*t}),L=24*u.get("text-letter-spacing").evaluate(S,{}),z=t.allowsLetterSpacing(A)?L:0,P=u.get("text-anchor").evaluate(S,{}),D=u.get("text-justify").evaluate(S,{}),M="point"===u.get("symbol-placement")?24*u.get("text-max-width").evaluate(S,{}):0;I.horizontal=t.shapeText(E,n,T,M,_,P,D,z,C,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(A)&&v&&b&&(I.vertical=t.shapeText(E,n,T,M,_,P,D,z,C,24,t.WritingMode.vertical))}var F=void 0;if(S.icon){var O=r[S.icon];O&&(F=t.shapeIcon(a[S.icon],u.get("icon-offset").evaluate(S,{}),u.get("icon-anchor").evaluate(S,{})),void 0===e.sdfIcons?e.sdfIcons=O.sdf:e.sdfIcons!==O.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),O.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(I.horizontal||F)&&function(e,n,i,r,a,o){var u=o.layoutTextSize.evaluate(n,{}),p=o.layoutIconSize.evaluate(n,{}),h=o.textMaxSize.evaluate(n,{});void 0===h&&(h=u);var d=e.layers[0].layout,m=d.get("text-offset").evaluate(n,{}),g=d.get("icon-offset").evaluate(n,{}),y=e.tilePixelRatio*(u/24),_=e.tilePixelRatio*h/24,v=e.tilePixelRatio*p,b=e.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*e.tilePixelRatio,w=d.get("icon-padding")*e.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,T="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),k="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),I=d.get("symbol-placement"),E=b/2,A=function(l,s){s.x<0||s.x>=t.EXTENT||s.y<0||s.y>=t.EXTENT||function(e,n,i,r,a,o,l,s,u,c,p,h,d,m,g,y,_,v,b,x,w){var S,T,k=e.addToLineVertexArray(n,i),I=0,E=0,A=0,C=At(r.horizontal?r.horizontal.text:""),L=[];if(r.horizontal){var z=o.layout.get("text-rotate").evaluate(b,{});S=new Tt(l,i,n,s,u,c,r.horizontal,p,h,d,e.overscaling,z),E+=f(e,n,r.horizontal,o,d,b,m,k,r.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,L,x,w),r.vertical&&(A+=f(e,n,r.vertical,o,d,b,m,k,t.WritingMode.vertical,L,x,w))}var P=S?S.boxStartIndex:e.collisionBoxArray.length,D=S?S.boxEndIndex:e.collisionBoxArray.length;if(a){var M=function(e,n,i,r,a,o){var l,s,u,c,p=n.image,h=i.layout,d=n.top-1/p.pixelRatio,f=n.left-1/p.pixelRatio,m=n.bottom+1/p.pixelRatio,g=n.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&a){var y=g-f,_=m-d,v=h.get("text-size").evaluate(o,{})/24,b=a.left*v,x=a.right*v,w=a.top*v,S=x-b,T=a.bottom*v-w,k=h.get("icon-text-fit-padding")[0],I=h.get("icon-text-fit-padding")[1],E=h.get("icon-text-fit-padding")[2],A=h.get("icon-text-fit-padding")[3],C="width"===h.get("icon-text-fit")?.5*(T-_):0,L="height"===h.get("icon-text-fit")?.5*(S-y):0,z="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?S:y,P="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?T:_;l=new t.Point(b+L-A,w+C-k),s=new t.Point(b+L+I+z,w+C-k),u=new t.Point(b+L+I+z,w+C+E+P),c=new t.Point(b+L-A,w+C+E+P)}else l=new t.Point(f,d),s=new t.Point(g,d),u=new t.Point(g,m),c=new t.Point(f,m);var D=i.layout.get("icon-rotate").evaluate(o,{})*Math.PI/180;if(D){var M=Math.sin(D),F=Math.cos(D),O=[F,-M,M,F];l._matMult(O),s._matMult(O),c._matMult(O),u._matMult(O)}return[{tl:l,tr:s,bl:c,br:u,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,a,o,0,r.horizontal,b),F=o.layout.get("icon-rotate").evaluate(b,{});T=new Tt(l,i,n,s,u,c,a,g,y,!1,e.overscaling,F),I=4*M.length;var O=e.iconSizeData,R=null;"source"===O.functionType?(R=[t.SIZE_PACK_FACTOR*o.layout.get("icon-size").evaluate(b,{})])[0]>zt&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===O.functionType&&((R=[t.SIZE_PACK_FACTOR*w.compositeIconSizes[0].evaluate(b,{}),t.SIZE_PACK_FACTOR*w.compositeIconSizes[1].evaluate(b,{})])[0]>zt||R[1]>zt)&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,M,R,v,_,b,!1,n,k.lineStartIndex,k.lineLength)}var j=T?T.boxStartIndex:e.collisionBoxArray.length,B=T?T.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=t.SymbolBucket.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(n.x,n.y,L.length>0?L[0]:-1,L.length>1?L[1]:-1,C,P,D,j,B,s,E,A,I,0)}(e,s,l,i,r,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,y,x,T,m,v,w,k,g,n,a,o)};if("line"===I)for(var C=0,L=function(e,n,i,r,a){for(var o=[],l=0;l<e.length;l++)for(var s=e[l],u=void 0,c=0;c<s.length-1;c++){var p=s[c],h=s[c+1];p.x<0&&h.x<0||(p.x<0?p=new t.Point(0,p.y+(0-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<0&&(h=new t.Point(0,p.y+(0-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<0&&h.y<0||(p.y<0?p=new t.Point(p.x+(0-p.y)/(h.y-p.y)*(h.x-p.x),0)._round():h.y<0&&(h=new t.Point(p.x+(0-p.y)/(h.y-p.y)*(h.x-p.x),0)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new t.Point(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=r&&(h=new t.Point(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=a&&h.y>=a||(p.y>=a?p=new t.Point(p.x+(a-p.y)/(h.y-p.y)*(h.x-p.x),a)._round():h.y>=a&&(h=new t.Point(p.x+(a-p.y)/(h.y-p.y)*(h.x-p.x),a)._round()),u&&p.equals(u[u.length-1])||(u=[p],o.push(u)),u.push(h)))))}return o}(n.geometry,0,0,t.EXTENT,t.EXTENT);C<L.length;C+=1)for(var z=L[C],P=0,D=s(z,b,S,i.vertical||i.horizontal,r,24,_,e.overscaling,t.EXTENT);P<D.length;P+=1){var M=D[P],F=i.horizontal;F&&function(t,e,n,i){var r=t.compareText;if(e in r){for(var a=r[e],o=a.length-1;o>=0;o--)if(i.dist(a[o])<n)return!0}else r[e]=[];return r[e].push(i),!1}(e,F.text,E,M)||A(z,M)}else if("line-center"===I)for(var O=0,R=n.geometry;O<R.length;O+=1){var j=R[O];if(j.length>1){var B=l(j,S,i.vertical||i.horizontal,r,24,_);B&&A(j,B)}}else if("Polygon"===n.type)for(var U=0,N=t.classifyRings(n.geometry,0);U<N.length;U+=1){var Z=N[U],Y=c(Z,16);A(Z[0],new t.Anchor(Y.x,Y.y,0))}else if("LineString"===n.type)for(var V=0,q=n.geometry;V<q.length;V+=1){var G=q[V];A(G,new t.Anchor(G[0].x,G[0].y,0))}else if("Point"===n.type)for(var W=0,H=n.geometry;W<H.length;W+=1)for(var $=0,X=H[W];$<X.length;$+=1){var K=X[$];A([K],new t.Anchor(K.x,K.y,0))}}(e,S,I,F,k,h)}o&&e.generateCollisionDebugBuffers()}function f(e,n,i,r,a,o,l,s,u,c,p,h){var d=function(e,n,i,r,a,o){for(var l=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,s=i.layout.get("text-offset").evaluate(a,{}).map(function(t){return 24*t}),u=n.positionedGlyphs,c=[],p=0;p<u.length;p++){var h=u[p],d=o[h.fontStack],f=d&&d[h.glyph];if(f){var m=f.rect;if(m){var g=t.GLYPH_PBF_BORDER+1,y=f.metrics.advance*h.scale/2,_=r?[h.x+y,h.y]:[0,0],v=r?[0,0]:[h.x+y+s[0],h.y+s[1]],b=(f.metrics.left-g)*h.scale-y+v[0],x=(-f.metrics.top-g)*h.scale+v[1],w=b+m.w*h.scale,S=x+m.h*h.scale,T=new t.Point(b,x),k=new t.Point(w,x),I=new t.Point(b,S),E=new t.Point(w,S);if(r&&h.vertical){var A=new t.Point(-y,y),C=-Math.PI/2,L=new t.Point(5,0);T._rotateAround(C,A)._add(L),k._rotateAround(C,A)._add(L),I._rotateAround(C,A)._add(L),E._rotateAround(C,A)._add(L)}if(l){var z=Math.sin(l),P=Math.cos(l),D=[P,-z,z,P];T._matMult(D),k._matMult(D),I._matMult(D),E._matMult(D)}c.push({tl:T,tr:k,bl:I,br:E,tex:m,writingMode:n.writingMode,glyphOffset:_})}}}return c}(0,i,r,a,o,p),f=e.textSizeData,m=null;return"source"===f.functionType?(m=[t.SIZE_PACK_FACTOR*r.layout.get("text-size").evaluate(o,{})])[0]>zt&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===f.functionType&&((m=[t.SIZE_PACK_FACTOR*h.compositeTextSizes[0].evaluate(o,{}),t.SIZE_PACK_FACTOR*h.compositeTextSizes[1].evaluate(o,{})])[0]>zt||m[1]>zt)&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,d,m,l,a,o,u,n,s.lineStartIndex,s.lineLength),c.push(e.text.placedSymbolArray.length-1),4*d.length}function m(e,n){for(var i=new t.EvaluationParameters(n),r=0,a=e;r<a.length;r+=1)a[r].recalculate(i)}function g(t){var e=0;if(t&&t.length>0){e+=Math.abs(y(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(y(t[n]))}return e}function y(t){var e,n,i,r,a,o,l=0,s=t.length;if(s>2){for(o=0;o<s;o++)o===s-2?(i=s-2,r=s-1,a=0):o===s-1?(i=s-1,r=0,a=1):(i=o,r=o+1,a=o+2),e=t[i],n=t[r],l+=(_(t[a][0])-_(e[0]))*Math.sin(_(n[1]));l=l*Bt.RADIUS*Bt.RADIUS/2}return l}function _(t){return t*Math.PI/180}function v(t,e){return function(n){return t(n,e)}}function b(t,e){t[0]=x(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=x(t[n],!e);return t}function x(t,e){return Ut.ring(t)>=0===e?t:t.reverse()}function w(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(S,this,e)}function S(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function T(t){for(var e,n,i=0,r=0,a=t.length,o=a-1;r<a;o=r++)e=t[r],i+=((n=t[o]).x-e.x)*(e.y+n.y);return i}function k(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(I,this,e),this.length=this._features.length}function I(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function E(t,e){this.options=e||{},this.features=t,this.length=t.length}function A(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function C(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,L,t.layers[n])}(e,n),n.finish()}function L(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,z,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var a=i.values;for(n=0;n<a.length;n++)e.writeMessage(4,O,a[n])}function z(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,P,t),e.writeVarintField(3,n.type),e.writeMessage(4,F,n)}function P(t,e){var n=t.feature,i=t.keys,r=t.values,a=t.keycache,o=t.valuecache;for(var l in n.properties){var s=a[l];void 0===s&&(i.push(l),s=i.length-1,a[l]=s),e.writeVarint(s);var u=n.properties[l],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=o[p];void 0===h&&(r.push(u),h=r.length-1,o[p]=h),e.writeVarint(h)}}function D(t,e){return(e<<3)+(7&t)}function M(t){return t<<1^t>>31}function F(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,a=0,o=n.length,l=0;l<o;l++){var s=n[l],u=1;1===i&&(u=s.length),e.writeVarint(D(1,u));for(var c=3===i?s.length-1:s.length,p=0;p<c;p++){1===p&&1!==i&&e.writeVarint(D(2,c-1));var h=s[p].x-r,d=s[p].y-a;e.writeVarint(M(h)),e.writeVarint(M(d)),r+=h,a+=d}3===i&&e.writeVarint(D(7,0))}}function O(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function R(t,e,n,i,r,a){if(!(r-i<=n)){var o=Math.floor((i+r)/2);!function t(e,n,i,r,a,o){for(;a>r;){if(a-r>600){var l=a-r+1,s=i-r+1,u=Math.log(l),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(l-c)/l)*(s-l/2<0?-1:1);t(e,n,i,Math.max(r,Math.floor(i-s*c/l+p)),Math.min(a,Math.floor(i+(l-s)*c/l+p)),o)}var h=n[2*i+o],d=r,f=a;for(j(e,n,r,i),n[2*a+o]>h&&j(e,n,r,a);d<f;){for(j(e,n,d,f),d++,f--;n[2*d+o]<h;)d++;for(;n[2*f+o]>h;)f--}n[2*r+o]===h?j(e,n,r,f):j(e,n,++f,a),f<=i&&(r=f+1),i<=f&&(a=f-1)}}(t,e,o,i,r,a%2),R(t,e,n,i,o-1,a+1),R(t,e,n,o+1,r,a+1)}}function j(t,e,n,i){B(t,n,i),B(e,2*n,2*i),B(e,2*n+1,2*i+1)}function B(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function U(t,e,n,i){var r=t-n,a=e-i;return r*r+a*a}function N(t,e,n,i,r){return new Z(t,e,n,i,r)}function Z(t,e,n,i,r){e=e||function(t){return t[0]},n=n||function(t){return t[1]},r=r||Array,this.nodeSize=i||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var a=0;a<t.length;a++)this.ids[a]=a,this.coords[2*a]=e(t[a]),this.coords[2*a+1]=n(t[a]);R(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function Y(t){this.options=$(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function V(t,e,n,i,r){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function q(t){return{type:"Feature",id:t.id,properties:G(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function G(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return $($({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function W(t){return t/360+.5}function H(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function $(t,e){for(var n in e)t[n]=e[n];return t}function X(t){return t.x}function K(t){return t.y}function J(t,e,n,i,r,a){var o=r-n,l=a-i;if(0!==o||0!==l){var s=((t-n)*o+(e-i)*l)/(o*o+l*l);s>1?(n=r,i=a):s>0&&(n+=o*s,i+=l*s)}return(o=t-n)*o+(l=e-i)*l}function Q(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)tt(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)tt(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)tt(t,e[i][r])}(r),r}function tt(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function et(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),l=[],s=e.id;if(n.promoteId?s=e.properties[n.promoteId]:n.generateId&&(s=i||0),"Point"===a)nt(r,l);else if("MultiPoint"===a)for(var u=0;u<r.length;u++)nt(r[u],l);else if("LineString"===a)it(r,l,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(u=0;u<r.length;u++)l=[],it(r[u],l,o,!1),t.push(Q(s,"LineString",l,e.properties));return}rt(r,l,o,!1)}else if("Polygon"===a)rt(r,l,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<e.geometry.geometries.length;u++)et(t,{id:s,geometry:e.geometry.geometries[u],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];rt(r[u],c,o,!0),l.push(c)}}t.push(Q(s,a,l,e.properties))}}function nt(t,e){e.push(at(t[0])),e.push(ot(t[1])),e.push(0)}function it(t,e,n,i){for(var r,a,o=0,l=0;l<t.length;l++){var s=at(t[l][0]),u=ot(t[l][1]);e.push(s),e.push(u),e.push(0),l>0&&(o+=i?(r*u-s*a)/2:Math.sqrt(Math.pow(s-r,2)+Math.pow(u-a,2))),r=s,a=u}var c=e.length-3;e[2]=1,function t(e,n,i,r){for(var a,o=r,l=i-n>>1,s=i-n,u=e[n],c=e[n+1],p=e[i],h=e[i+1],d=n+3;d<i;d+=3){var f=J(e[d],e[d+1],u,c,p,h);if(f>o)a=d,o=f;else if(f===o){var m=Math.abs(d-l);m<s&&(a=d,s=m)}}o>r&&(a-n>3&&t(e,n,a,r),e[a+2]=o,i-a>3&&t(e,a,i,r))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function rt(t,e,n,i){for(var r=0;r<t.length;r++){var a=[];it(t[r],a,n,i),e.push(a)}}function at(t){return t/360+.5}function ot(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function lt(t,e,n,i,r,a,o,l){if(i/=e,a>=(n/=e)&&o<i)return t;if(o<n||a>=i)return null;for(var s=[],u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(d>=n&&f<i)s.push(c);else if(!(f<n||d>=i)){var m=[];if("Point"===h||"MultiPoint"===h)!function(t,e,n,i,r){for(var a=0;a<t.length;a+=3){var o=t[a+r];o>=n&&o<=i&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}(p,m,n,i,r);else if("LineString"===h)st(p,m,n,i,r,!1,l.lineMetrics);else if("MultiLineString"===h)ct(p,m,n,i,r,!1);else if("Polygon"===h)ct(p,m,n,i,r,!0);else if("MultiPolygon"===h)for(var g=0;g<p.length;g++){var y=[];ct(p[g],y,n,i,r,!0),y.length&&m.push(y)}if(m.length){if(l.lineMetrics&&"LineString"===h){for(g=0;g<m.length;g++)s.push(Q(c.id,h,m[g],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),s.push(Q(c.id,h,m,c.tags))}}}return s.length?s:null}function st(t,e,n,i,r,a,o){for(var l,s,u=ut(t),c=0===r?ht:dt,p=t.start,h=0;h<t.length-3;h+=3){var d=t[h],f=t[h+1],m=t[h+2],g=t[h+3],y=t[h+4],_=0===r?d:f,v=0===r?g:y,b=!1;o&&(l=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),_<n?v>=n&&(s=c(u,d,f,g,y,n),o&&(u.start=p+l*s)):_>=i?v<i&&(s=c(u,d,f,g,y,i),o&&(u.start=p+l*s)):pt(u,d,f,m),v<n&&_>=n&&(s=c(u,d,f,g,y,n),b=!0),v>i&&_<=i&&(s=c(u,d,f,g,y,i),b=!0),!a&&b&&(o&&(u.end=p+l*s),e.push(u),u=ut(t)),o&&(p+=l)}var x=t.length-3;d=t[x],f=t[x+1],m=t[x+2],(_=0===r?d:f)>=n&&_<=i&&pt(u,d,f,m),x=u.length-3,a&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&pt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ut(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ct(t,e,n,i,r,a){for(var o=0;o<t.length;o++)st(t[o],e,n,i,r,a,!1)}function pt(t,e,n,i){t.push(e),t.push(n),t.push(i)}function ht(t,e,n,i,r,a){var o=(a-e)/(i-e);return t.push(a),t.push(n+(r-n)*o),t.push(1),o}function dt(t,e,n,i,r,a){var o=(a-n)/(r-n);return t.push(e+(i-e)*o),t.push(a),t.push(1),o}function ft(t,e){for(var n=[],i=0;i<t.length;i++){var r,a=t[i],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=mt(a.geometry,e);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var l=0;l<a.geometry.length;l++)r.push(mt(a.geometry[l],e))}else if("MultiPolygon"===o)for(r=[],l=0;l<a.geometry.length;l++){for(var s=[],u=0;u<a.geometry[l].length;u++)s.push(mt(a.geometry[l][u],e));r.push(s)}n.push(Q(a.id,o,r,a.tags))}return n}function mt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function gt(t,e){if(t.transformed)return t;var n,i,r,a=1<<t.z,o=t.x,l=t.y;for(n=0;n<t.features.length;n++){var s=t.features[n],u=s.geometry,c=s.type;if(s.geometry=[],1===c)for(i=0;i<u.length;i+=2)s.geometry.push(yt(u[i],u[i+1],e,a,o,l));else for(i=0;i<u.length;i++){var p=[];for(r=0;r<u[i].length;r+=2)p.push(yt(u[i][r],u[i][r+1],e,a,o,l));s.geometry.push(p)}}return t.transformed=!0,t}function yt(t,e,n,i,r,a){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-a))]}function _t(t,e,n,i,r){for(var a=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},l=0;l<t.length;l++){o.numFeatures++,function(t,e,n,i){var r=e.geometry,a=e.type,o=[];if("Point"===a||"MultiPoint"===a)for(var l=0;l<r.length;l+=3)o.push(r[l]),o.push(r[l+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)vt(o,r,t,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(l=0;l<r.length;l++)vt(o,r[l],t,n,"Polygon"===a,0===l);else if("MultiPolygon"===a)for(var s=0;s<r.length;s++){var u=r[s];for(l=0;l<u.length;l++)vt(o,u[l],t,n,!0,0===l)}if(o.length){var c=e.tags||null;if("LineString"===a&&i.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var h={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}(o,t[l],a,r);var s=t[l].minX,u=t[l].minY,c=t[l].maxX,p=t[l].maxY;s<o.minX&&(o.minX=s),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),p>o.maxY&&(o.maxY=p)}return o}function vt(t,e,n,i,r,a){var o=i*i;if(i>0&&e.size<(r?o:i))n.numPoints+=e.length/3;else{for(var l=[],s=0;s<e.length;s+=3)(0===i||e[s+2]>o)&&(n.numSimplified++,l.push(e[s]),l.push(e[s+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,a=r-2;i<r;a=i,i+=2)n+=(t[i]-t[a])*(t[i+1]+t[a+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var o=t[i],l=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=o,t[r-1-i]=l}}(l,a),t.push(l)}}function bt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)et(n,t.features[i],e,i);else et(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=lt(t,1,-1-n,n,0,-1,2,e),a=lt(t,1,1-n,2+n,0,-1,2,e);return(r||a)&&(i=lt(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=ft(r,1).concat(i)),a&&(i=i.concat(ft(a,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xt(t,e,n){return 32*((1<<t)*n+e)+t}function wt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);var r=new Yt(i.features),a=Wt(r);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:r,rawData:a.buffer})}var St=function(t){t&&this.replace(t)};St.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},St.prototype.update=function(e,i){for(var r=this,a=0,o=e;a<o.length;a+=1){var l=o[a];r._layerConfigs[l.id]=l;var s=r._layers[l.id]=t.createStyleLayer(l);s._featureFilter=t.featureFilter(s.filter)}for(var u=0,c=i;u<c.length;u+=1){var p=c[u];delete r._layerConfigs[p],delete r._layers[p]}this.familiesBySource={};for(var h=0,d=function(t){for(var e={},i=0;i<t.length;i++){var r=n(t[i]),a=e[r];a||(a=e[r]=[]),a.push(t[i])}var o=[];for(var l in e)o.push(e[l]);return o}(t.values(this._layerConfigs));h<d.length;h+=1){var f=d[h].map(function(t){return r._layers[t.id]}),m=f[0];if("none"!==m.visibility){var g=m.source||"",y=r.familiesBySource[g];y||(y=r.familiesBySource[g]={});var _=m.sourceLayer||"_geojsonTileLayer",v=y[_];v||(v=y[_]=[]),v.push(f)}}};var Tt=function(e,n,i,r,a,o,l,s,u,c,p,h){var d=l.top*s-u,f=l.bottom*s+u,m=l.left*s-u,g=l.right*s+u;if(this.boxStartIndex=e.length,c){var y=f-d,_=g-m;y>0&&(y=Math.max(10*s,y),this._addLineCollisionCircles(e,n,i,i.segment,_,y,r,a,o,p))}else{if(h){var v=new t.Point(m,d),b=new t.Point(g,d),x=new t.Point(m,f),w=new t.Point(g,f),S=h*Math.PI/180;v._rotate(S),b._rotate(S),x._rotate(S),w._rotate(S),m=Math.min(v.x,b.x,x.x,w.x),g=Math.max(v.x,b.x,x.x,w.x),d=Math.min(v.y,b.y,x.y,w.y),f=Math.max(v.y,b.y,x.y,w.y)}e.emplaceBack(i.x,i.y,m,d,g,f,r,a,o,0,0)}this.boxEndIndex=e.length};Tt.prototype._addLineCollisionCircles=function(t,e,n,i,r,a,o,l,s,u){var c=a/2,p=Math.floor(r/c)||1,h=1+.4*Math.log(u)/Math.LN2,d=Math.floor(p*h/2),f=-a/2,m=n,g=i+1,y=f,_=-r/2,v=_-r/4;do{if(--g<0){if(y>_)return;g=0;break}y-=e[g].dist(m),m=e[g]}while(y>v);for(var b=e[g].dist(e[g+1]),x=-d;x<p+d;x++){var w=x*c,S=_+w;if(w<0&&(S+=w),w>r&&(S+=w-r),!(S<y)){for(;y+b<S;){if(y+=b,++g+1>=e.length)return;b=e[g].dist(e[g+1])}var T=S-y,k=e[g],I=e[g+1].sub(k)._unit()._mult(T)._add(k)._round(),E=Math.abs(S-f)<c?0:.8*(S-f);t.emplaceBack(I.x,I.y,-a/2,-a/2,a/2,a/2,o,l,s,a/2,E)}}};var kt=u,It=u;u.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,a=e[r];if(n(i,a)>=0)break;e[t]=a,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var a=1+(t<<1),o=a+1,l=e[a];if(o<this.length&&n(e[o],l)<0&&(a=o,l=e[o]),n(l,r)>=0)break;e[t]=l,t=a}e[t]=r}},kt.default=It;var Et=t.createCommonjsModule(function(t){t.exports=function(t,e){var n,i,r,a,o,l,s;for(i=t.length-(n=3&t.length),r=e,o=3432918353,461845907,s=0;s<i;)l=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24,++s,r=27492+(65535&(a=5*(65535&(r=(r^=l=461845907*(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))+((461845907*(l>>>16)&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(s+2))<<16;case 2:l^=(255&t.charCodeAt(s+1))<<8;case 1:r^=l=461845907*(65535&(l=(l=(65535&(l^=255&t.charCodeAt(s)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))+((461845907*(l>>>16)&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}}),At=Et,Ct=Et,Lt=t.createCommonjsModule(function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,a=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++a;switch(i){case 3:r^=(255&t.charCodeAt(a+2))<<16;case 2:r^=(255&t.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}});At.murmur3=Ct,At.murmur2=Lt;var zt=65535,Pt=function(e){var n={},i=[];for(var r in e){var a=e[r],o=n[r]={};for(var l in a){var s=a[+l];if(s&&0!==s.bitmap.width&&0!==s.bitmap.height){var u={x:0,y:0,w:s.bitmap.width+2,h:s.bitmap.height+2};i.push(u),o[l]={rect:u,metrics:s.metrics}}}}var c=t.potpack(i),p=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var h in e){var d=e[h];for(var f in d){var m=d[+f];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var g=n[h][f].rect;t.AlphaImage.copy(m.bitmap,p,{x:0,y:0},{x:g.x+1,y:g.y+1},m.bitmap)}}}this.image=p,this.positions=n};t.register("GlyphAtlas",Pt);var Dt=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};Dt.prototype.parse=function(e,n,i,r){function a(){if(u)return r(u);if(c&&p&&h){var e=new Pt(c),n=new t.ImageAtlas(p,h);for(var i in f){var a=f[i];a instanceof t.SymbolBucket?(m(a.layers,this.zoom),d(a,c,e.positions,p,n.iconPositions,this.showCollisionBoxes)):a.hasPattern&&(a instanceof t.LineBucket||a instanceof t.FillBucket||a instanceof t.FillExtrusionBucket)&&(m(a.layers,this.zoom),a.addFeatures(g,n.patternPositions))}this.status="done",r(null,{buckets:t.values(f).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n})}}var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),s=new t.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var u,c,p,h,f={},g={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},y=n.familiesBySource[this.source];for(var _ in y){var v=e.layers[_];if(v){1===v.version&&t.warnOnce('Vector tile source "'+o.source+'" layer "'+_+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=l.encode(_),x=[],w=0;w<v.length;w++){var S=v.feature(w);x.push({feature:S,index:w,sourceLayerIndex:b})}for(var T=0,k=y[_];T<k.length;T+=1){var I=k[T],E=I[0];E.minzoom&&o.zoom<Math.floor(E.minzoom)||E.maxzoom&&o.zoom>=E.maxzoom||"none"!==E.visibility&&(m(I,o.zoom),(f[E.id]=E.createBucket({index:s.bucketLayerIDs.length,layers:I,zoom:o.zoom,pixelRatio:o.pixelRatio,overscaling:o.overscaling,collisionBoxArray:o.collisionBoxArray,sourceLayerIndex:b,sourceID:o.source})).populate(x,g),s.bucketLayerIDs.push(I.map(function(t){return t.id})))}}}var A=t.mapObject(g.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(A).length?i.send("getGlyphs",{uid:this.uid,stacks:A},function(t,e){u||(u=t,c=e,a.call(o))}):c={};var C=Object.keys(g.iconDependencies);C.length?i.send("getImages",{icons:C},function(t,e){u||(u=t,p=e,a.call(o))}):p={};var L=Object.keys(g.patternDependencies);L.length?i.send("getImages",{icons:L},function(t,e){u||(u=t,h=e,a.call(o))}):h={},a.call(this)};var Mt="undefined"!=typeof performance,Ft={getEntriesByName:function(t){return!!(Mt&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(Mt&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(Mt&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(Mt&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(Mt&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},Ot=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Ft.mark(this._marks.start)};Ot.prototype.finish=function(){Ft.mark(this._marks.end);var t=Ft.getEntriesByName(this._marks.measure);return 0===t.length&&(Ft.measure(this._marks.measure,this._marks.start,this._marks.end),t=Ft.getEntriesByName(this._marks.measure),Ft.clearMarks(this._marks.start),Ft.clearMarks(this._marks.end),Ft.clearMeasures(this._marks.measure)),t},Ft.Performance=Ot;var Rt=function(e,n,i){this.actor=e,this.layerIndex=n,this.loadVectorData=i||function(e,n){if(e.offline&&e.offline.status&&e.offline.data){var i=e.offline.data;return n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}),function(){n()}}var r=t.getArrayBuffer(e.request,function(e,i){e?n(e):i&&n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires})});return function(){r.cancel(),n()}},this.loading={},this.loaded={}};Rt.prototype.loadTile=function(e,n){var i=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new Ft.Performance(e.request),o=this.loading[r]=new Dt(e);o.abort=this.loadVectorData(e,function(e,l){if(delete i.loading[r],e||!l)return n(e);var s=l.rawData,u={};l.expires&&(u.expires=l.expires),l.cacheControl&&(u.cacheControl=l.cacheControl);var c={};if(a){var p=a.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}o.vectorTile=l.vectorTile,o.parse(l.vectorTile,i.layerIndex,i.actor,function(e,i){if(e||!i)return n(e);n(null,t.extend({rawTileData:s.slice(0)},i,u,c))}),i.loaded=i.loaded||{},i.loaded[r]=o})},Rt.prototype.reloadTile=function(t,e){var n=this.loaded,i=t.uid,r=this;if(n&&n[i]){var a=n[i];a.showCollisionBoxes=t.showCollisionBoxes;var o=function(t,n){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,r.layerIndex,r.actor,i)),e(t,n)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,o)}},Rt.prototype.abortTile=function(t,e){var n=this.loading,i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},Rt.prototype.removeTile=function(t,e){var n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()};var jt=function(){this.loaded={}};jt.prototype.loadTile=function(e,n){var i=e.uid,r=new t.DEMData(i,e.rawImageData,e.encoding);this.loaded=this.loaded||{},this.loaded[i]=r,n(null,r)},jt.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var Bt={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},Ut={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return g(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=g(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:y},Nt=t.mvt.VectorTileFeature.prototype.toGeoJSON,Zt=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};Zt.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,i=this._feature.geometry;n<i.length;n+=1){var r=i[n];e.push([new t.Point(r[0],r[1])])}return e}for(var a=[],o=0,l=this._feature.geometry;o<l.length;o+=1){for(var s=[],u=0,c=l[o];u<c.length;u+=1){var p=c[u];s.push(new t.Point(p[0],p[1]))}a.push(s)}return a},Zt.prototype.toGeoJSON=function(t,e,n){return Nt.call(this,t,e,n)};var Yt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};Yt.prototype.feature=function(t){return new Zt(this._features[t])};var Vt=w;w.types=["Unknown","Point","LineString","Polygon"],w.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var n,i=e.readVarint()+e.pos,r=1,a=0,o=0,l=0,s=[];e.pos<i;){if(!a){var u=e.readVarint();r=7&u,a=u>>3}if(a--,1===r||2===r)o+=e.readSVarint(),l+=e.readSVarint(),1===r&&(n&&s.push(n),n=[]),n.push(new t.Point$1(o,l));else{if(7!==r)throw new Error("unknown command "+r);n&&n.push(n[0].clone())}}return n&&s.push(n),s},w.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,a=0,o=1/0,l=-1/0,s=1/0,u=-1/0;t.pos<e;){if(!i){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)r+=t.readSVarint(),a+=t.readSVarint(),r<o&&(o=r),r>l&&(l=r),a<s&&(s=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,s,l,u]},w.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+s)/o;t[e]=[360*(n.x+l)/o-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var r,a,o=this.extent*Math.pow(2,n),l=this.extent*t,s=this.extent*e,u=this.loadGeometry(),c=w.types[this.type];switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];i(u=p);break;case 2:for(r=0;r<u.length;r++)i(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],a=0;a<e;a++){var o=T(t[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[t[a]]):n.push(t[a]))}return n&&r.push(n),r}(u),r=0;r<u.length;r++)for(a=0;a<u[r].length;a++)i(u[r][a])}1===u.length?u=u[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};k.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Vt(this._pbf,e,this.extent,this._keys,this._values)};var qt=Vt,Gt=E;E.prototype.feature=function(t){return new A(this.features[t],this.options.extent)},A.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],a=0;a<i.length;a++)r.push(new t.Point$1(i[a][0],i[a][1]));this.geometry.push(r)}return this.geometry},A.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,a=0;a<t.length;a++)for(var o=t[a],l=0;l<o.length;l++){var s=o[l];e=Math.min(e,s.x),n=Math.max(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.y)}return[e,i,n,r]},A.prototype.toGeoJSON=qt.prototype.toGeoJSON;var Wt=C,Ht=Gt;Wt.fromVectorTileJs=C,Wt.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new Gt(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return C({layers:n})},Wt.GeoJSONWrapper=Ht,Z.prototype={range:function(t,e,n,i){return function(t,e,n,i,r,a,o){for(var l,s,u=[0,t.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),d=u.pop();if(h-d<=o)for(var f=d;f<=h;f++)l=e[2*f],s=e[2*f+1],l>=n&&l<=r&&s>=i&&s<=a&&c.push(t[f]);else{var m=Math.floor((d+h)/2);s=e[2*m+1],(l=e[2*m])>=n&&l<=r&&s>=i&&s<=a&&c.push(t[m]);var g=(p+1)%2;(0===p?n<=l:i<=s)&&(u.push(d),u.push(m-1),u.push(g)),(0===p?r>=l:a>=s)&&(u.push(m+1),u.push(h),u.push(g))}}return c}(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return function(t,e,n,i,r,a){for(var o=[0,t.length-1,0],l=[],s=r*r;o.length;){var u=o.pop(),c=o.pop(),p=o.pop();if(c-p<=a)for(var h=p;h<=c;h++)U(e[2*h],e[2*h+1],n,i)<=s&&l.push(t[h]);else{var d=Math.floor((p+c)/2),f=e[2*d],m=e[2*d+1];U(f,m,n,i)<=s&&l.push(t[d]);var g=(u+1)%2;(0===u?n-r<=f:i-r<=m)&&(o.push(p),o.push(d-1),o.push(g)),(0===u?n+r>=f:i+r>=m)&&(o.push(d+1),o.push(c),o.push(g))}}return l}(this.ids,this.coords,t,e,n,this.nodeSize)}},Y.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var i,r,a,o=[],l=0;l<t.length;l++)t[l].geometry&&o.push((i=t[l],r=l,{x:W((a=i.geometry.coordinates)[0]),y:H(a[1]),zoom:1/0,index:r,parentId:-1}));this.trees[this.options.maxZoom+1]=N(o,X,K,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var s=this.options.maxZoom;s>=this.options.minZoom;s--){var u=+Date.now();o=this._cluster(o,s),this.trees[s]=N(o,X,K,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,o.length,+Date.now()-u)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){var o=this.getClusters([n,i,180,a],e),l=this.getClusters([-180,i,r,a],e);return o.concat(l)}for(var s=this.trees[this._limitZoom(e)],u=s.range(W(n),H(a),W(r),H(i)),c=[],p=0;p<u.length;p++){var h=s.points[u[p]];c.push(h.numPoints?q(h):this.points[h.index])}return c},getChildren:function(t){var e=t>>5,n=t%32,i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var a=r.points[e];if(!a)throw new Error(i);for(var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=r.within(a.x,a.y,o),s=[],u=0;u<l.length;u++){var c=r.points[l[u]];c.parentId===t&&s.push(c.numPoints?q(c):this.points[c.index])}if(0===s.length)throw new Error(i);return s},getLeaves:function(t,e,n){var i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),a=this.options.radius/this.options.extent,o=(n-a)/r,l=(n+1+a)/r,s={features:[]};return this._addTileFeatures(i.range((e-a)/r,o,(e+1+a)/r,l),i.points,e,n,r,s),0===e&&this._addTileFeatures(i.range(1-a/r,o,1,l),i.points,r,n,r,s),e===r-1&&this._addTileFeatures(i.range(0,o,a/r,l),i.points,-1,n,r,s),s.features.length?s:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,i,r){for(var a=this.getChildren(e),o=0;o<a.length;o++){var l=a[o].properties;if(l&&l.cluster?r+l.point_count<=i?r+=l.point_count:r=this._appendLeaves(t,l.cluster_id,n,i,r):r<i?r++:t.push(a[o]),t.length===n)break}return r},_addTileFeatures:function(t,e,n,i,r,a){for(var o=0;o<t.length;o++){var l=e[t[o]],s={type:1,geometry:[[Math.round(this.options.extent*(l.x*r-n)),Math.round(this.options.extent*(l.y*r-i))]],tags:l.numPoints?G(l):this.points[l.index].properties},u=l.numPoints?l.id:this.points[l.index].id;void 0!==u&&(s.id=u),a.features.push(s)}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var a=t[r];if(!(a.zoom<=e)){a.zoom=e;var o=this.trees[e+1],l=o.within(a.x,a.y,i),s=a.numPoints||1,u=a.x*s,c=a.y*s,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,a));for(var h=(r<<5)+(e+1),d=0;d<l.length;d++){var f=o.points[l[d]];if(!(f.zoom<=e)){f.zoom=e;var m=f.numPoints||1;u+=f.x*m,c+=f.y*m,s+=m,f.parentId=h,this.options.reduce&&this._accumulate(p,f)}}1===s?n.push(a):(a.parentId=h,n.push(V(u/s,c/s,h,s,p)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.index].properties);this.options.reduce(t,n)}},bt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},bt.prototype.splitTile=function(t,e,n,i,r,a,o){for(var l=[t,e,n,i],s=this.options,u=s.debug;l.length;){i=l.pop(),n=l.pop(),e=l.pop(),t=l.pop();var c=1<<e,p=xt(e,n,i),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=_t(t,e,n,i,s),this.tileCoords.push({z:e,x:n,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=t,r){if(e===s.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(a/f)||i!==Math.floor(o/f))continue}else if(e===s.indexMaxZoom||h.numPoints<=s.indexMaxPoints)continue;if(h.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,y,_,v,b,x=.5*s.buffer/s.extent,w=.5-x,S=.5+x,T=1+x;m=g=y=_=null,v=lt(t,c,n-x,n+S,0,h.minX,h.maxX,s),b=lt(t,c,n+w,n+T,0,h.minX,h.maxX,s),t=null,v&&(m=lt(v,c,i-x,i+S,1,h.minY,h.maxY,s),g=lt(v,c,i+w,i+T,1,h.minY,h.maxY,s),v=null),b&&(y=lt(b,c,i-x,i+S,1,h.minY,h.maxY,s),_=lt(b,c,i+w,i+T,1,h.minY,h.maxY,s),b=null),u>1&&console.timeEnd("clipping"),l.push(m||[],e+1,2*n,2*i),l.push(g||[],e+1,2*n,2*i+1),l.push(y||[],e+1,2*n+1,2*i),l.push(_||[],e+1,2*n+1,2*i+1)}}},bt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,a=i.debug;if(t<0||t>24)return null;var o=1<<t,l=xt(t,e=(e%o+o)%o,n);if(this.tiles[l])return gt(this.tiles[l],r);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var s,u=t,c=e,p=n;!s&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),s=this.tiles[xt(u,c,p)];return s&&s.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,p),a>1&&console.time("drilling down"),this.splitTile(s.source,u,c,p,t,e,n),a>1&&console.timeEnd("drilling down"),this.tiles[l]?gt(this.tiles[l],r):null):null};var $t=function(e){function n(t,n,i){e.call(this,t,n,wt),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(n&&n.request&&n.request.collectResourceTiming)&&new Ft.Performance(n.request);this.loadGeoJSON(n,function(r,a){if(r||!a)return e(r);if("object"!=typeof a)return e(new Error("Input data is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(v(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=b(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(v(b,e))),t}(e,n);default:return e}}(a,!0);try{t._geoJSONIndex=n.cluster?(o=n.superclusterOptions,new Y(o)).load(a.features):new bt(a,n.geojsonVtOptions)}catch(r){return e(r)}t.loaded={};var o,l={};if(i){var s=i.finish();s&&(l.resourceTiming={},l.resourceTiming[n.source]=JSON.parse(JSON.stringify(s)))}e(null,l)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var i=this.loaded;return i&&i[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(Rt),Xt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:Rt,geojson:$t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Xt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Xt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Xt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Xt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Xt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Xt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Xt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Xt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}},Xt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Xt.prototype.loadRTLTextPlugin=function(e,n,i){try{t.plugin.isLoaded()||(this.self.importScripts(n),i(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){i(t.toString())}},Xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new St),e},Xt.prototype.getWorkerSource=function(t,e,n){var i=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,r){i.actor.send(e,n,r,t)}},this.getLayerIndex(t))}return this.workerSources[t][e][n]},Xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new jt),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new Xt(self),Xt}),t(0,function(t){function e(t){if(!ht)return null;for(var e=0;e<t.length;e++)if(t[e]in ht)return t[e];return t[0]}function n(t,e){var n=r(_t.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!_t.REQUIRE_ACCESS_TOKEN)return a(t);if(!(e=e||_t.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+vt);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+vt);return t.params.push("access_token="+e),a(t)}function i(t){return 0===t.indexOf("mapbox:")}function r(t){var e=t.match(It);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function a(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function o(t,e,n,i,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function l(t,e,n,i,r,a,o){for(var l=0;l<e;l++){for(var u=0;u<n;u++)i[u]=t[u*e+l];for(s(i,r,a,o,n),u=0;u<n;u++)t[u*e+l]=r[u]}for(u=0;u<n;u++){for(l=0;l<e;l++)i[l]=t[u*e+l];for(s(i,r,a,o,e),l=0;l<e;l++)t[u*e+l]=Math.sqrt(r[l])}}function s(t,e,n,i,r){n[0]=0,i[0]=-Dt,i[1]=+Dt;for(var a=1,o=0;a<r;a++){for(var l=(t[a]+a*a-(t[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);l<=i[o];)o--,l=(t[a]+a*a-(t[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);n[++o]=a,i[o]=l,i[o+1]=+Dt}for(a=0,o=0;a<r;a++){for(;i[o+1]<a;)o++;e[a]=(a-n[o])*(a-n[o])+t[n[o]]}}function u(e,n,i){var r=function(e,n){if(e)return i(e);if(n){var r=t.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(r.vectorLayers=n.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),i(null,r)}};return e.url?t.getJSON(n(wt(e.url),t.ResourceType.Source),r):t.browser.frame(function(){return r(null,e)})}function c(t,e,n,i,r){var a=r.maxPitchScaleFactor(),o=t.tilesIn(n,a);o.sort(p);for(var l=[],s=0,u=o;s<u.length;s+=1){var c=u[s];l.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(e,t._state,c.queryGeometry,c.scale,i,r,a,t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var h=function(t){for(var e={},n={},i=0,r=l;i<r.length;i+=1){var a=r[i],o=a.queryResults,s=a.wrappedTileID,u=n[s]=n[s]||{};for(var c in o)for(var p=o[c],h=u[c]=u[c]||{},d=e[c]=e[c]||[],f=0,m=p;f<m.length;f+=1){var g=m[f];h[g.featureIndex]||(h[g.featureIndex]=!0,d.push(g.feature))}}return e}();for(var d in h)h[d].forEach(function(e){var n=t.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=n});return h}function p(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function h(e,n){var i=n.zoomTo(e.canonical.z);return new t.Point((i.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.EXTENT,(i.row-e.canonical.y)*t.EXTENT)}function d(t,e){return t%32-e%32||e-t}function f(t){return"raster"===t||"image"===t||"video"===t}function m(){return new t.window.Worker(Mi.workerUrl)}function g(e,n){var i={};for(var r in e)"ref"!==r&&(i[r]=e[r]);return t.refProperties.forEach(function(t){t in n&&(i[t]=n[t])}),i}function y(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=g(t[i],e[t[i].ref]));return t}function _(t,e,n){n.push({command:Be.addSource,args:[t,e[t]]})}function v(t,e,n){e.push({command:Be.removeSource,args:[t]}),n[t]=!0}function b(t,e,n,i){v(t,n,i),_(t,e,n)}function x(e,n,i){var r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function w(e,n,i,r,a,o){var l;for(l in e=e||{},n=n||{},e)e.hasOwnProperty(l)&&(t.deepEqual(e[l],n[l])||i.push({command:o,args:[r,l,n[l],a]}));for(l in n)n.hasOwnProperty(l)&&!e.hasOwnProperty(l)&&(t.deepEqual(e[l],n[l])||i.push({command:o,args:[r,l,n[l],a]}))}function S(t){return t.id}function T(t,e){return t[e.id]=e,t}function k(e,n,i,r,a){var o=t.identity(new Float32Array(16));return n?(t.identity(o),t.scale(o,o,[1/a,1/a,1]),i||t.rotateZ(o,o,r.angle)):(t.scale(o,o,[r.width/2,-r.height/2,1]),t.translate(o,o,[1,-1,0]),t.multiply(o,o,e)),o}function I(e,n,i,r,a){var o=t.identity(new Float32Array(16));return n?(t.multiply(o,o,e),t.scale(o,o,[a,a,1]),i||t.rotateZ(o,o,-r.angle)):(t.scale(o,o,[1,-1,1]),t.translate(o,o,[-1,-1,0]),t.scale(o,o,[2/r.width,2/r.height,1])),o}function E(e,n){var i=[e.x,e.y,0,1];O(i,i,n);var r=i[3];return{point:new t.Point(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function A(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function C(e,n,i,r,a,o,l,s){var u=r?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,i.transform.zoom,Ne.properties[r?"text-size":"icon-size"]),p=[256/i.width*2+1,256/i.height*2+1],h=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var d=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,g=!1,y=0;y<f.length;y++){var _=f.get(y);if(_.hidden||_.writingMode===t.WritingMode.vertical&&!g)F(_.numGlyphs,h);else{g=!1;var v=[_.anchorX,_.anchorY,0,1];if(t.transformMat4(v,v,n),A(v,p)){var b=.5+v[3]/i.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(u,c,_),w=l?x*b:x/b,S=new t.Point(_.anchorX,_.anchorY),T=E(S,a).point,k={},I=P(_,w,!1,s,n,a,o,e.glyphOffsetArray,d,h,T,S,k,m);g=I.useVertical,(I.notEnoughRoom||g||I.needsFlipping&&P(_,w,!0,s,n,a,o,e.glyphOffsetArray,d,h,T,S,k,m).notEnoughRoom)&&F(_.numGlyphs,h)}else F(_.numGlyphs,h)}}r?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function L(t,e,n,i,r,a,o,l,s,u,c,p){var h=l.glyphStartIndex+l.numGlyphs,d=l.lineStartIndex,f=l.lineStartIndex+l.lineLength,m=e.getoffsetX(l.glyphStartIndex),g=e.getoffsetX(h-1),y=M(t*m,n,i,r,a,o,l.segment,d,f,s,u,c,p);if(!y)return null;var _=M(t*g,n,i,r,a,o,l.segment,d,f,s,u,c,p);return _?{first:y,last:_}:null}function z(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function P(e,n,i,r,a,o,l,s,u,c,p,h,d,f){var m,g=n/24,y=e.lineOffsetX*n,_=e.lineOffsetY*n;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=L(g,s,y,_,i,p,h,e,u,o,d,!1);if(!w)return{notEnoughRoom:!0};var S=E(w.first.point,l).point,T=E(w.last.point,l).point;if(r&&!i){var k=z(e.writingMode,S,T,f);if(k)return k}m=[w.first];for(var I=e.glyphStartIndex+1;I<v-1;I++)m.push(M(g*s.getoffsetX(I),y,_,i,p,h,e.segment,b,x,u,o,d,!1));m.push(w.last)}else{if(r&&!i){var A=E(h,a).point,C=e.lineStartIndex+e.segment+1,P=new t.Point(u.getx(C),u.gety(C)),F=E(P,a),O=F.signedDistanceFromCamera>0?F.point:D(h,P,A,1,a),R=z(e.writingMode,A,O,f);if(R)return R}var j=M(g*s.getoffsetX(e.glyphStartIndex),y,_,i,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,o,d,!1);if(!j)return{notEnoughRoom:!0};m=[j]}for(var B=0,U=m;B<U.length;B+=1){var N=U[B];t.addDynamicAttributes(c,N.point,N.angle)}return{}}function D(t,e,n,i,r){var a=E(t.add(t.sub(e)._unit()),r).point,o=n.sub(a);return n.add(o._mult(i/o.mag()))}function M(e,n,i,r,a,o,l,s,u,c,p,h,d){var f=r?e-n:e+n,m=f>0?1:-1,g=0;r&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);for(var y=m>0?s+l:s+l+1,_=y,v=a,b=a,x=0,w=0,S=Math.abs(f);x+w<=S;){if((y+=m)<s||y>=u)return null;if(b=v,void 0===(v=h[y])){var T=new t.Point(c.getx(y),c.gety(y)),k=E(T,p);if(k.signedDistanceFromCamera>0)v=h[y]=k.point;else{var I=y-m;v=D(0===x?o:new t.Point(c.getx(I),c.gety(I)),T,b,S-x+1,p)}}x+=w,w=b.dist(v)}var A=(S-x)/w,C=v.sub(b),L=C.mult(A)._add(b);return L._add(C._unit()._perp()._mult(i*m)),{point:L,angle:g+Math.atan2(v.y-b.y,v.x-b.x),tileDistance:d?{prevTileDistance:y-m===_?0:c.gettileUnitDistanceFromAnchor(y-m),lastSegmentViewportDistance:S-x}:null}}function F(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(Ze,3*i)}}function O(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}function R(t,e,n){t[e+4]=n?1:0}function j(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}function B(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function U(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*$e+e*Xe+n*Ke+e*Je+n*Qe+e*tn+n*en+e}function N(e,n,i){var r=1/j(i,1,n.transform.tileZoom),a=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,n.transform.tileZoom)/a,l=o*(i.tileID.canonical.x+i.tileID.wrap*a),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[l>>16,s>>16],u_pixel_coord_lower:[65535&l,65535&s]}}function Z(t,e){return 1/j(t,1,e.tileZoom)}function Y(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function V(e,n){for(var i=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<i.length;r++){var a={},o=i[r],l=i.slice(r+1);q(o.tileID.wrapped(),o.tileID,l,new t.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),a),o.setMask(a,n)}}function q(e,n,i,r,a){for(var o=0;o<i.length;o++){var l=i[o];if(r.isLessThan(l.tileID))break;if(n.key===l.tileID.key)return;if(l.tileID.isChildOf(n)){for(var s=n.children(1/0),u=0;u<s.length;u++)q(e,s[u],i.slice(o),r,a);return}}var c=n.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));a[p.key]=a[p.key]||p}function G(t,e,n,i,r){for(var a=t.context,o=a.gl,l=t.useProgram(r?"collisionCircle":"collisionBox"),s=0;s<i.length;s++){var u=i[s],c=e.getTile(u),p=c.getBucket(n);if(p){var h=r?p.collisionCircle:p.collisionBox;h&&l.draw(a,r?o.TRIANGLES:o.LINES,Pe.disabled,De.disabled,t.colorModeForRenderPass(),Ln(u.posMatrix,t.transform,c),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,t.transform.zoom,null,null,h.collisionVertexBuffer)}}}function W(e,n,i,r,a,o,l,s,u,c,p,h){for(var d,f,m=e.context,g=m.gl,y=e.transform,_="map"===s,v="map"===u,b=_&&"point"!==i.layout.get("symbol-placement"),x=_&&!v&&!b,w=v?e.depthModeForSublayer(0,Pe.ReadOnly):Pe.disabled,S=0,T=r;S<T.length;S+=1){var E=T[S],A=n.getTile(E),L=A.getBucket(i);if(L){var z=a?L.text:L.icon;if(z&&z.segments.get().length){var P=z.programConfigurations.get(i.id),D=a||L.sdfIcons,M=a?L.textSizeData:L.iconSizeData;d||(d=e.useProgram(D?"symbolSDF":"symbolIcon",P),f=t.evaluateSizeForZoom(M,y.zoom,Wn.properties[a?"text-size":"icon-size"])),m.activeTexture.set(g.TEXTURE0);var F=void 0;if(a)A.glyphAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),F=A.glyphAtlasTexture.size;else{var O=1!==i.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear;A.imageAtlasTexture.bind(D||e.options.rotating||e.options.zooming||O||(v||0!==y.pitch)?g.LINEAR:g.NEAREST,g.CLAMP_TO_EDGE),F=A.imageAtlasTexture.size}var R=j(A,1,e.transform.zoom),B=k(E.posMatrix,v,_,e.transform,R),U=I(E.posMatrix,v,_,e.transform,R);b&&C(L,E.posMatrix,e,a,B,U,v,c);var N=e.translatePosMatrix(E.posMatrix,A,o,l),Z=b?Gn:B,Y=e.translatePosMatrix(U,A,o,l,!0),V=void 0;if(D){var q=0!==i.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);V=Zn(M.functionType,f,x,v,e,N,Z,Y,a,F,!0),q&&H(z,i,e,d,w,p,h,V),V.u_is_halo=0}else V=Nn(M.functionType,f,x,v,e,N,Z,Y,a,F);H(z,i,e,d,w,p,h,V)}}}}function H(t,e,n,i,r,a,o,l){var s=n.context;i.draw(s,s.gl.TRIANGLES,r,a,o,l,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,e.paint,n.transform.zoom,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function $(t,e,n,i,r,a,o){var l,s,u,c,p,h=t.context.gl,d=n.paint.get("fill-pattern"),f=d&&d.constantOr(1),m=n.getCrossfadeParameters();o?(s=f&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=h.LINES):(s=f?"fillPattern":"fill",l=h.TRIANGLES);for(var g=0,y=i;g<y.length;g+=1){var _=y[g],v=e.getTile(_);if(!f||v.patternsLoaded()){var b=v.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=t.useProgram(s,x);f&&(t.context.activeTexture.set(h.TEXTURE0),v.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(m));var S=d.constantOr(null);if(S&&v.imageAtlas){var T=v.imageAtlas.patternPositions[S.to],k=v.imageAtlas.patternPositions[S.from];T&&k&&x.setConstantPatternPositions(T,k)}var I=t.translatePosMatrix(_.posMatrix,v,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){c=b.indexBuffer2,p=b.segments2;var E=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===s&&f?En(I,t,m,v,E):In(I,E)}else c=b.indexBuffer,p=b.segments,u=f?kn(I,t,m,v):Tn(I);w.draw(t.context,l,r,t.stencilModeForClipping(_),a,u,n.id,b.layoutVertexBuffer,c,p,n.paint,t.transform.zoom,x)}}}}function X(t,e,n,i,r,a){var o=t.context,l=o.gl,s=e.fbo;if(s){var u=t.useProgram("hillshade");o.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,s.colorAttachment.get());var c=Mn(t,e,n);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?u.draw(o,l.TRIANGLES,i,r,a,c,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):u.draw(o,l.TRIANGLES,i,r,a,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function K(e,n,i,r,a,o,l){var s=e.context,u=s.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,p=n.dem.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(n.tileSize),n.demTexture){var h=n.demTexture;h.update(p,{premultiply:!1}),h.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(s,p,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var f=new t.Texture(s,{width:c,height:c,data:null},u.RGBA);f.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(c,c)).colorAttachment.set(f.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,a,o,l,Fn(n,r),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function J(e,n,i,r,a){var o=r.paint.get("raster-fade-duration");if(o>0){var l=t.browser.now(),s=(l-e.timeAdded)/o,u=n?(l-n.timeAdded)/o:-1,c=i.getSource(),p=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-u,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function Q(e,n,i){var r=e.context,a=r.gl,o=i.posMatrix,l=e.useProgram("debug"),s=Pe.disabled,u=De.disabled,c=e.colorModeForRenderPass();l.draw(r,a.LINE_STRIP,s,u,c,zn(o,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=function(t,e,n,i){i=i||1;var r,a,o,l,s,u,c,p,h=[];for(r=0,a=t.length;r<a;r++)if(s=Hn[t[r]]){for(p=null,o=0,l=s[1].length;o<l;o+=2)-1===s[1][o]&&-1===s[1][o+1]?p=null:(u=e+s[1][o]*i,c=200-s[1][o+1]*i,p&&h.push(p.x,p.y,u,c),p={x:u,y:c});e+=s[0]*i}return h}(i.toString(),50,0,5),h=new t.StructArrayLayout2i4,d=new t.StructArrayLayout2ui4,f=0;f<p.length;f+=2)h.emplaceBack(p[f],p[f+1]),d.emplaceBack(f,f+1);for(var m=r.createVertexBuffer(h,fn.members),g=r.createIndexBuffer(d),y=t.SegmentVector.simpleSegment(0,0,h.length/2,h.length/2),_=n.getTile(i).tileSize,v=t.EXTENT/(Math.pow(2,e.transform.zoom-i.overscaledZ)*_),b=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<b.length;x++){var w=b[x];l.draw(r,a.LINES,s,u,c,zn(t.translate([],o,[v*w[0],v*w[1],0]),t.Color.white),"$debug",m,g,y)}l.draw(r,a.LINES,s,u,c,zn(o,t.Color.black),"$debug",m,g,y)}function tt(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function et(t,e,n,i,r){var a=Math.max(n,Math.floor(e.y0)),o=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var l=t;t=e,e=l}for(var s=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=a;h<o;h++){var d=s*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,f=u*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;r(Math.floor(f),Math.ceil(d),h)}}function nt(t,e,n,i,r,a){var o,l=tt(t,e),s=tt(e,n),u=tt(n,t);l.dy>s.dy&&(o=l,l=s,s=o),l.dy>u.dy&&(o=l,l=u,u=o),s.dy>u.dy&&(o=s,s=u,u=o),l.dy&&et(u,l,i,r,a),s.dy&&et(u,s,i,r,a)}function it(t){return t*(2-t)}function rt(t){t.parentNode&&t.parentNode.removeChild(t)}function at(t,e,n){if(t=new Ut(t.lng,t.lat),e){var i=new Ut(t.lng-360,t.lat),r=new Ut(t.lng+360,t.lat),a=n.locationPoint(t).distSqr(e);n.locationPoint(i).distSqr(e)<a?t=i:n.locationPoint(r).distSqr(e)<a&&(t=r)}for(;Math.abs(t.lng-n.center.lng)>180;){var o=n.locationPoint(t);if(o.x>=0&&o.y>=0&&o.x<=n.width&&o.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}function ot(t,e,n){var i=t.classList;for(var r in ki)i.remove("mapboxgl-"+n+"-anchor-"+r);i.add("mapboxgl-"+n+"-anchor-"+e)}function lt(t,e,n){var i,r,a,o,l,s,u=n&&n.maxWidth||100,c=t._container.clientHeight/2,p=(i=t.unproject([0,c]),r=t.unproject([u,c]),a=Math.PI/180,o=i.lat*a,l=r.lat*a,s=Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos((r.lng-i.lng)*a),6371e3*Math.acos(Math.min(s,1)));if(n&&"imperial"===n.unit){var h=3.2808*p;h>5280?st(e,u,h/5280,"mi"):st(e,u,h,"ft")}else n&&"nautical"===n.unit?st(e,u,p/1852,"nm"):st(e,u,p,"m")}function st(t,e,n,i){var r,a,o,l=(r=n,(a=Math.pow(10,(""+Math.floor(r)).length-1))*(o=(o=r/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:1)),s=l/n;"m"===i&&l>=1e3&&(l/=1e3,i="km"),t.style.width=e*s+"px",t.innerHTML=l+i}var ut,ct=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),pt={create:function(e,n,i){var r=t.window.document.createElement(e);return n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},ht=t.window.document?t.window.document.documentElement.style:null,dt=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);pt.disableDrag=function(){ht&&dt&&(ut=ht[dt],ht[dt]="none")},pt.enableDrag=function(){ht&&dt&&(ht[dt]=ut)};var ft=e(["transform","WebkitTransform"]);pt.setTransform=function(t,e){t.style[ft]=e};var mt=!1;try{var gt=Object.defineProperty({},"passive",{get:function(){mt=!0}});t.window.addEventListener("test",gt,gt),t.window.removeEventListener("test",gt,gt)}catch(t){mt=!1}pt.addEventListener=function(t,e,n,i){void 0===i&&(i={}),t.addEventListener(e,n,"passive"in i&&mt?i:i.capture)},pt.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),t.removeEventListener(e,n,"passive"in i&&mt?i:i.capture)};var yt=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",yt,!0)};pt.suppressClick=function(){t.window.addEventListener("click",yt,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",yt,!0)},0)},pt.mousePos=function(e,n){var i=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},pt.touchPos=function(e,n){for(var i=e.getBoundingClientRect(),r=[],a="touchend"===n.type?n.changedTouches:n.touches,o=0;o<a.length;o++)r.push(new t.Point(a[o].clientX-i.left-e.clientLeft,a[o].clientY-i.top-e.clientTop));return r},pt.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},pt.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var _t={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},vt="See https://www.mapbox.com/api-documentation/#access-tokens",bt=function(t,e){if(!i(t))return t;var a=r(t);return a.path="/styles/v1"+a.path,n(a,e)},xt=function(t,e){if(!i(t))return t;var a=r(t);return a.path="/fonts/v1"+a.path,n(a,e)},wt=function(t,e){if(!i(t))return t;var a=r(t);return a.path="/v4/"+a.authority+".json",a.params.push("secure"),n(a,e)},St=function(t,e,o,l){var s=r(t);return i(t)?(s.path="/styles/v1"+s.path+"/sprite"+e+o,n(s,l)):(s.path+=""+e+o,a(s))},Tt=/(\.(png|jpg)\d*)(?=$)/,kt=function(e,n,o){if(!n||!i(n))return e;var l=r(e);return l.path=l.path.replace(Tt,""+(t.browser.devicePixelRatio>=2||512===o?"@2x":"")+(t.browser.supportsWebp?".webp":"$1")),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(_t.ACCESS_TOKEN||""))}(l.params),a(l)},It=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,Et=function(){this.eventData={anonId:null,lastSuccess:null,accessToken:_t.ACCESS_TOKEN},this.queue=[],this.pending=!1,this.pendingRequest=null};Et.prototype.postTurnstileEvent=function(e){_t.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(t){return/(mapbox\.c)(n|om)/i.test(t)})&&this.queueRequest(t.browser.now())},Et.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()},Et.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n="mapbox.turnstileEventData:"+(_t.ACCESS_TOKEN||""),i=t.storageAvailable("localStorage"),o=!!this.eventData.accessToken&&this.eventData.accessToken!==_t.ACCESS_TOKEN;if(o&&(this.eventData.anonId=this.eventData.lastSuccess=null),(!this.eventData.anonId||!this.eventData.lastSuccess)&&i)try{var l=t.window.localStorage.getItem(n);l&&(this.eventData=JSON.parse(l))}catch(e){t.warnOnce("Unable to read from LocalStorage")}t.validateUuid(this.eventData.anonId)||(this.eventData.anonId=t.uuid(),o=!0);var s=this.queue.shift();if(this.eventData.lastSuccess){var u=new Date(this.eventData.lastSuccess),c=new Date(s),p=(s-this.eventData.lastSuccess)/864e5;o=o||p>=1||p<-1||u.getDate()!==c.getDate()}if(!o)return this.processRequests();var h=r(_t.EVENTS_URL);h.params.push("access_token="+(_t.ACCESS_TOKEN||""));var d={url:a(h),headers:{"Content-Type":"text/plain"}},f=JSON.stringify([{event:"appUserTurnstile",created:new Date(s).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.49.0","enabled.telemetry":!1,userId:this.eventData.anonId}]);this.pendingRequest=t.postData(d,f,function(r){if(e.pendingRequest=null,!r){if(e.eventData.lastSuccess=s,e.eventData.accessToken=_t.ACCESS_TOKEN,i)try{t.window.localStorage.setItem(n,JSON.stringify(e.eventData))}catch(e){t.warnOnce("Unable to write to LocalStorage")}e.processRequests()}})}};var At=new Et,Ct=At.postTurnstileEvent.bind(At),Lt=Object.freeze({isMapboxURL:i,normalizeStyleURL:bt,normalizeGlyphsURL:xt,normalizeSourceURL:wt,normalizeSpriteURL:St,normalizeTileURL:kt,TurnstileEvent:Et,postTurnstileEvent:Ct}),zt=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};zt.prototype.isLoaded=function(){return this.loaded},zt.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e];this._notify(i.ids,i.callback)}this.requestors=[]}},zt.prototype.getImage=function(t){return this.images[t]},zt.prototype.addImage=function(t,e){this.images[t]=e},zt.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},zt.prototype.listImages=function(){return Object.keys(this.images)},zt.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1){this.images[r[i]]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},zt.prototype._notify=function(t,e){for(var n={},i=0,r=t;i<r.length;i+=1){var a=r[i],o=this.images[a];o&&(n[a]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf})}e(null,n)},zt.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},zt.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var i=this.getImage(e);if(!i)return null;var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},a=new t.ImagePosition(r,i);return this.patterns[e]={bin:r,position:a},this._updatePatternAtlas(),a},zt.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},zt.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var i=t.potpack(e),r=i.w,a=i.h,o=this.atlasImage;for(var l in o.resize({width:r||1,height:a||1}),this.patterns){var s=this.patterns[l].bin,u=s.x+1,c=s.y+1,p=this.images[l].data,h=p.width,d=p.height;t.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c},{width:h,height:d}),t.RGBAImage.copy(p,o,{x:0,y:d-1},{x:u,y:c-1},{width:h,height:1}),t.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c+d},{width:h,height:1}),t.RGBAImage.copy(p,o,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:d}),t.RGBAImage.copy(p,o,{x:0,y:0},{x:u+h,y:c},{width:1,height:d})}this.dirty=!0};var Pt=o,Dt=1e20;o.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?Dt:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?Dt:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(l(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),l(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var a=this.gridOuter[i]-this.gridInner[i];n[i]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return n};var Mt=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};Mt.prototype.setURL=function(t){this.url=t},Mt.prototype.getGlyphs=function(e,n){var i=this,r=[];for(var a in e)for(var o=0,l=e[a];o<l.length;o+=1){r.push({stack:a,id:l[o]})}t.asyncAll(r,function(t,e){var n=t.stack,r=t.id,a=i.entries[n];a||(a=i.entries[n]={glyphs:{},requests:{}});var o=a.glyphs[r];if(void 0===o)if(o=i._tinySDF(a,n,r))e(null,{stack:n,id:r,glyph:o});else{var l=Math.floor(r/256);if(256*l>65535)e(new Error("glyphs > 65535 not supported"));else{var s=a.requests[l];s||(s=a.requests[l]=[],Mt.loadGlyphRange(n,l,i.url,i.requestTransform,function(t,e){if(e)for(var n in e)a.glyphs[+n]=e[+n];for(var i=0,r=s;i<r.length;i+=1)(0,r[i])(t,e);delete a.requests[l]})),s.push(function(t,i){t?e(t):i&&e(null,{stack:n,id:r,glyph:i[r]||null})})}}else e(null,{stack:n,id:r,glyph:o})},function(t,e){if(t)n(t);else if(e){for(var i={},r=0,a=e;r<a.length;r+=1){var o=a[r],l=o.stack,s=o.id,u=o.glyph;(i[l]||(i[l]={}))[s]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,i)}})},Mt.prototype._tinySDF=function(e,n,i){var r=this.localIdeographFontFamily;if(r&&(t.isChar["CJK Unified Ideographs"](i)||t.isChar["Hangul Syllables"](i))){var a=e.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),a=e.tinySDF=new Mt.TinySDF(24,3,8,.25,r,o)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Mt.loadGlyphRange=function(e,n,i,r,a){var o=256*n,l=o+255,s=r(xt(i).replace("{fontstack}",e).replace("{range}",o+"-"+l),t.ResourceType.Glyphs);t.getArrayBuffer(s,function(e,n){if(e)a(e);else if(n){for(var i={},r=0,o=t.parseGlyphPBF(n.data);r<o.length;r+=1){var l=o[r];i[l.id]=l}a(null,i)}})},Mt.TinySDF=Pt;var Ft=function(){this.specification=t.styleSpec.light.position};Ft.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},Ft.prototype.interpolate=function(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i)}};var Ot=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new Ft,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),Rt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(Ot),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var n in e){var i=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),i):this._transitionable.setValue(n,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),jt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};jt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},jt.prototype.addDash=function(e,n){var i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,o=0;o<e.length;o++)a+=e[o];for(var l=this.width/a,s=l/2,u=e.length%2==1,c=-i;c<=i;c++)for(var p=this.nextRow+i+c,h=this.width*p,d=u?-e[e.length-1]:0,f=e[0],m=1,g=0;g<this.width;g++){for(;f<g/l;)d=f,f+=e[m],u&&m===e.length-1&&(f+=e[0]),m++;var y=Math.abs(g-d*l),_=Math.abs(g-f*l),v=Math.min(y,_),b=m%2==1,x=void 0;if(n){var w=i?c/i*(s+1):0;if(b){var S=s-Math.abs(w);x=Math.sqrt(v*v+S*S)}else x=s-Math.sqrt(v*v+w*w)}else x=(b?1:-1)*v;this.data[3+4*(h+g)]=Math.max(0,Math.min(255,x+128))}var T={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=r,this.dirty=!0,T},jt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var Bt=function e(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var o=new e.Actor(r[a],i,this.id);o.name="Worker "+a,this.actors.push(o)}};Bt.prototype.broadcast=function(e,n,i){t.asyncAll(this.actors,function(t,i){t.send(e,n,i)},i=i||function(){})},Bt.prototype.send=function(t,e,n,i){return("number"!=typeof i||isNaN(i))&&(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,n),i},Bt.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},Bt.Actor=t.Actor;var Ut=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ut.prototype.wrap=function(){return new Ut(t.wrap(this.lng,-180,180),this.lat)},Ut.prototype.toArray=function(){return[this.lng,this.lat]},Ut.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ut.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Nt(new Ut(this.lng-n,this.lat-e),new Ut(this.lng+n,this.lat+e))},Ut.convert=function(t){if(t instanceof Ut)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ut(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ut(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Nt=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Nt.prototype.setNorthEast=function(t){return this._ne=t instanceof Ut?new Ut(t.lng,t.lat):Ut.convert(t),this},Nt.prototype.setSouthWest=function(t){return this._sw=t instanceof Ut?new Ut(t.lng,t.lat):Ut.convert(t),this},Nt.prototype.extend=function(t){var e,n,i=this._sw,r=this._ne;if(t instanceof Ut)e=t,n=t;else{if(!(t instanceof Nt))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Nt.convert(t)):this.extend(Ut.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return i||r?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new Ut(e.lng,e.lat),this._ne=new Ut(n.lng,n.lat)),this},Nt.prototype.getCenter=function(){return new Ut((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Nt.prototype.getSouthWest=function(){return this._sw},Nt.prototype.getNorthEast=function(){return this._ne},Nt.prototype.getNorthWest=function(){return new Ut(this.getWest(),this.getNorth())},Nt.prototype.getSouthEast=function(){return new Ut(this.getEast(),this.getSouth())},Nt.prototype.getWest=function(){return this._sw.lng},Nt.prototype.getSouth=function(){return this._sw.lat},Nt.prototype.getEast=function(){return this._ne.lng},Nt.prototype.getNorth=function(){return this._ne.lat},Nt.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Nt.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Nt.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Nt.convert=function(t){return!t||t instanceof Nt?t:new Nt(t)};var Zt=function(t,e,n){this.bounds=Nt.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};Zt.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Zt.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),i=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),r=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<i&&t.y>=n&&t.y<r},Zt.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},Zt.prototype.latY=function(e,n){var i=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+i)/(1-i))*-r},window.resolveLocalFileSystemURL=window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL;var Yt=function(e){function n(n,i,r,a){if(e.call(this),this.id=n,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(i,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=u(this._options,this.map._transformRequest,function(n,i){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new Zt(i.bounds,e.minzoom,e.maxzoom)),Ct(i.tiles),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n,i){function r(t,i){return e.aborted?n(null):t&&404!==t.status?n(t):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var a=this,o=(e.tileID.overscaleFactor(),kt(e.tileID.canonical.url(this.tiles,this.scheme),this.url)),l={request:this.map._transformRequest(o,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,offline:i};l.request.collectResourceTiming=this._collectResourceTiming;var s=function(){void 0===e.workerID||"expired"===e.state?e.workerID=a.dispatcher.send("loadTile",l,r.bind(a)):"loading"===e.state?e.reloadCallback=n:a.dispatcher.send("reloadTile",l,r.bind(a),e.workerID)};if(i&&i.status){var u=e.tileID.canonical.y,c=[i.rootDirectory,this.id,e.tileID.canonical.z,e.tileID.canonical.x].join("/"),p=u.toString();window.resolveLocalFileSystemURL(c,function(t){t.getFile(p,{create:!1,exclusive:!1},function(t){t.file(function(t){var e=new FileReader;e.onloadend=function(){l.offline.data={data:this.result,cacheControl:"max-age=43200,s-maxage=300",expires:null},s(),l.offline.data=null},e.readAsArrayBuffer(t)},function(t){s()})},function(t){s()})},function(t){s()})}else s()},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented);window.resolveLocalFileSystemURL=window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL;var Vt=function(e){function n(n,i,r,a){e.call(this),this.id=n,this.dispatcher=r,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=u(this._options,this.map._transformRequest,function(n,i){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new Zt(i.bounds,e.minzoom,e.maxzoom)),Ct(i.tiles),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n,i){var r=this,a=kt(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize),o=function(i){r.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=r.map.painter.context,o=a.gl;e.texture=r.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new t.Texture(a,i,o.RGBA,{useMipmap:!0}),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),o.generateMipmap(o.TEXTURE_2D),e.state="loaded",n(null)};if(i&&i.status){var l=e.tileID.canonical.x,s=e.tileID.canonical.y,u=e.tileID.canonical.z;window.resolveLocalFileSystemURL([i.rootDirectory,this.id,u,l].join("/"),function(i){i.getFile(s.toString(),{create:!1,exclusive:!1},function(i){i.file(function(t){var e=new FileReader;e.onloadend=function(){var t={data:this.result,cacheControl:null,expires:null},e=new window.Image,i=window.URL||window.webkitURL;e.onload=function(){o(e),i.revokeObjectURL(e.src),n(null)};var r=new window.Blob([new Uint8Array(t.data)],{type:"image/png"});e.cacheControl=t.cacheControl,e.expires=t.expires,e.src=t.data.byteLength?i.createObjectURL(r):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="},e.readAsArrayBuffer(t)},function(i){e.request=t.getImage(r.map._transformRequest(a,t.ResourceType.Tile),function(t,i){delete e.request,e.aborted?(e.state="unloaded",n(null)):t?(e.state="errored",n(t)):i&&o(i)})})},function(i){e.request=t.getImage(r.map._transformRequest(a,t.ResourceType.Tile),function(t,i){delete e.request,e.aborted?(e.state="unloaded",n(null)):t?(e.state="errored",n(t)):i&&o(i)})})},function(i){e.request=t.getImage(r.map._transformRequest(a,t.ResourceType.Tile),function(t,i){delete e.request,e.aborted?(e.state="unloaded",n(null)):t?(e.state="errored",n(t)):i&&o(i)})})}else e.request=t.getImage(this.map._transformRequest(a,t.ResourceType.Tile),function(t,i){delete e.request,e.aborted?(e.state="unloaded",n(null)):t?(e.state="errored",n(t)):i&&o(i)})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),qt=function(e){function n(n,i,r,a){e.call(this,n,i,r,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},i),this.encoding=i.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var i=kt(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,r){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=t.browser.getImageData(r);e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",{uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding},function(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,a=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+i)%i,l=n.x+1===i?e.wrap+1:e.wrap,s={};return s[new t.OverscaledTileID(e.overscaledZ,a,n.z,r,n.y).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,l,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(s[new t.OverscaledTileID(e.overscaledZ,a,n.z,r,n.y-1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,l,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<i&&(s[new t.OverscaledTileID(e.overscaledZ,a,n.z,r,n.y+1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,l,n.z,o,n.y+1).key]={backfilled:!1}),s},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(Vt),Gt=function(e){function n(n,i,r,a){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(a),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution);var o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(i.clusterRadius||50)*o,log:!1}},i.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(i.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",i))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,i){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",i,function(t,r){n._removed||r&&r.abandoned||(n._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[n.id]&&(n._resourceTiming=r.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:i.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var i=this,r=void 0===e.workerID?"loadTile":"reloadTile";e.workerID=this.dispatcher.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes},function(t,a){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(a,i.map.painter,"reloadTile"===r),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Wt=function(e){function n(t,n,i,r){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(n,i){n?e.fire(new t.ErrorEvent(n)):i&&(e.image=t.browser.getImageData(i),e._finishLoading())})},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){this.coordinates=e;var n=this.map,i=e.map(function(t){return n.transform.locationCoordinate(Ut.convert(t)).zoomTo(0)}),r=this.centerCoord=t.getCoordinatesCenter(i);r.column=Math.floor(r.column),r.row=Math.floor(r.row),this.tileID=new t.CanonicalTileID(r.zoom,r.column,r.row),this.minzoom=this.maxzoom=r.zoom;var a=i.map(function(e){var n=e.zoomTo(r.zoom);return new t.Point(Math.round((n.column-r.column)*t.EXTENT),Math.round((n.row-r.row)*t.EXTENT))});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Ht=function(e){function n(t,n,i,r){e.call(this,t,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var i=0,r=n.urls;i<r.length;i+=1){e.urls.push(e.map._transformRequest(r[i],t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,i){n?e.fire(new t.ErrorEvent(n)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(Wt),$t=function(e){function n(n,i,r,a){e.call(this,n,i,r,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.canvas)):(this.texture=new t.Texture(n,this.canvas,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(Wt),Xt={vector:Yt,raster:Vt,"raster-dem":qt,geojson:Gt,video:Ht,image:Wt,canvas:$t},Kt=function(e,n,i,r){var a=new Xt[n.type](e,n,i,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a},Jt=function(t,e){this.max=t,this.onRemove=e,this.reset()};Jt.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},Jt.prototype.add=function(t,e,n){var i=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout(function(){i.remove(t,a)},n)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},Jt.prototype.has=function(t){return t.wrapped().key in this.data},Jt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Jt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Jt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Jt.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this},Jt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var Qt=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Qt.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},Qt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Qt.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ee=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};ee.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ee.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},ee.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}},ee.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[te[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}},ee.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne=function(e){this.context=e,this.current=t.Color.transparent};ne.prototype.get=function(){return this.current},ne.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var ie=function(t){this.context=t,this.current=1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var re=function(t){this.context=t,this.current=0};re.prototype.get=function(){return this.current},re.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var ae=function(t){this.context=t,this.current=[!0,!0,!0,!0]};ae.prototype.get=function(){return this.current},ae.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var oe=function(t){this.context=t,this.current=!0};oe.prototype.get=function(){return this.current},oe.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var le=function(t){this.context=t,this.current=255};le.prototype.get=function(){return this.current},le.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var se=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};se.prototype.get=function(){return this.current},se.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var ue=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};ue.prototype.get=function(){return this.current},ue.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var ce=function(t){this.context=t,this.current=!1};ce.prototype.get=function(){return this.current},ce.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var pe=function(t){this.context=t,this.current=[0,1]};pe.prototype.get=function(){return this.current},pe.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var he=function(t){this.context=t,this.current=!1};he.prototype.get=function(){return this.current},he.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var de=function(t){this.context=t,this.current=t.gl.LESS};de.prototype.get=function(){return this.current},de.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var fe=function(t){this.context=t,this.current=!1};fe.prototype.get=function(){return this.current},fe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var me=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};me.prototype.get=function(){return this.current},me.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var ge=function(e){this.context=e,this.current=t.Color.transparent};ge.prototype.get=function(){return this.current},ge.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var ye=function(t){this.context=t,this.current=null};ye.prototype.get=function(){return this.current},ye.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var _e=function(t){this.context=t,this.current=t.gl.TEXTURE0};_e.prototype.get=function(){return this.current},_e.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var ve=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};ve.prototype.get=function(){return this.current},ve.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var be=function(t){this.context=t,this.current=null};be.prototype.get=function(){return this.current},be.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var xe=function(t){this.context=t,this.current=null};xe.prototype.get=function(){return this.current},xe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var we=function(t){this.context=t,this.current=null};we.prototype.get=function(){return this.current},we.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var Se=function(t){this.context=t,this.current=null};Se.prototype.get=function(){return this.current},Se.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var Te=function(t){this.context=t,this.current=null};Te.prototype.get=function(){return this.current},Te.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var ke=function(t){this.context=t,this.current=null};ke.prototype.get=function(){return this.current},ke.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var Ie=function(t){this.context=t,this.current=4};Ie.prototype.get=function(){return this.current},Ie.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var Ee=function(t){this.context=t,this.current=!1};Ee.prototype.get=function(){return this.current},Ee.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var Ae=function(t,e){this.context=t,this.current=null,this.parent=e};Ae.prototype.get=function(){return this.current};var Ce=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(Ae),Le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(Ae),ze=function(t,e,n){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Ce(t,i),this.depthAttachment=new Le(t,i)};ze.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Pe=function(t,e,n){this.func=t,this.mask=e,this.range=n};Pe.ReadOnly=!1,Pe.ReadWrite=!0,Pe.disabled=new Pe(519,Pe.ReadOnly,[0,1]);var De=function(t,e,n,i,r,a){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=a};De.disabled=new De({func:519,mask:0},0,0,7680,7680,7680);var Me=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Me.disabled=new Me(Me.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Me.unblended=new Me(Me.Replace,t.Color.transparent,[!0,!0,!0,!0]),Me.alphaBlended=new Me([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Fe=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ne(this),this.clearDepth=new ie(this),this.clearStencil=new re(this),this.colorMask=new ae(this),this.depthMask=new oe(this),this.stencilMask=new le(this),this.stencilFunc=new se(this),this.stencilOp=new ue(this),this.stencilTest=new ce(this),this.depthRange=new pe(this),this.depthTest=new he(this),this.depthFunc=new de(this),this.blend=new fe(this),this.blendFunc=new me(this),this.blendColor=new ge(this),this.program=new ye(this),this.activeTexture=new _e(this),this.viewport=new ve(this),this.bindFramebuffer=new be(this),this.bindRenderbuffer=new xe(this),this.bindTexture=new we(this),this.bindVertexBuffer=new Se(this),this.bindElementBuffer=new Te(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ke(this),this.pixelStoreUnpack=new Ie(this),this.pixelStoreUnpackPremultiplyAlpha=new Ee(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Fe.prototype.createIndexBuffer=function(t,e){return new Qt(this,t,e)},Fe.prototype.createVertexBuffer=function(t,e,n){return new ee(this,t,e,n)},Fe.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},Fe.prototype.createFramebuffer=function(t,e){return new ze(this,t,e)},Fe.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(r|=i.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(r)},Fe.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Fe.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Fe.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Me.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)};var Oe=function(e){function n(n,i,r){var a=this;e.call(this),this.id=n,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))}),this.on("error",function(){a._sourceErrored=!0}),this._source=Kt(n,i,r,this),this._tiles={},this._cache=new Jt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e,this.style.stylesheet.offline)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(d)},n.prototype.getRenderableIds=function(e){var n=this,i=[];for(var r in n._tiles)n._isIdRenderable(+r,e)&&i.push(+r);return i.sort(e?function(e,i){var r=n._tiles[e].tileID,a=n._tiles[i].tileID,o=new t.Point(r.canonical.x,r.canonical.y)._rotate(n.transform.angle),l=new t.Point(a.canonical.x,a.canonical.y)._rotate(n.transform.angle);return r.overscaledZ-a.overscaledZ||l.y-o.y||l.x-o.x}:d)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,i,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}for(var n=this.getRenderableIds(),i=0;i<n.length;i++){var r=n[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var a=this.getTileByID(r);e(t,a),e(a,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(t,e,n,i){for(var r in this._tiles){var a=this._tiles[r];if(!(i[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>e+1;){var l=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[l.key])&&a.hasData()&&(o=l)}for(var s=o;s.overscaledZ>e;)if(t[(s=s.scaledTo(s.overscaledZ-1)).key]){i[o.key]=o;break}}}},n.prototype.findLoadedParent=function(t,e){for(var n=t.overscaledZ-1;n>=e;n--){var i=t.scaledTo(n);if(!i)return;var r=String(i.key),a=this._tiles[r];if(a&&a.hasData())return a;if(this._cache.has(i))return this._cache.get(i)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var i={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+n),i[a.tileID.key]=a}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var l in this._tiles){this._setTileReloadTimer(l,this._tiles[l])}}},n.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return i._source.hasTile(t)}))):r=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),o=Math.max(a-n.maxOverzooming,this._source.minzoom),l=Math.max(a+n.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(r,a);if(f(this._source.type)){for(var u={},c={},p=0,h=Object.keys(s);p<h.length;p+=1){var d=h[p],m=s[d],g=i._tiles[d];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var y=i.findLoadedParent(m,o);y&&(i._addTile(y.tileID),u[y.tileID.key]=y.tileID),c[d]=m}}for(var _ in this._retainLoadedChildren(c,a,l,s),u)s[_]||(i._coveredTiles[_]=!0,s[_]=u[_])}for(var v in s)i._tiles[v].clearFadeHold();for(var b=0,x=t.keysDifference(this._tiles,s);b<x.length;b+=1){var w=x[b],S=i._tiles[w];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(i.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||i._removeTile(w)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},a=Math.max(e-n.maxOverzooming,this._source.minzoom),o=Math.max(e+n.maxUnderzooming,this._source.minzoom),l={},s=0,u=t;s<u.length;s+=1){var c=u[s],p=this._addTile(c);i[c.key]=c,p.hasData()||e<this._source.maxzoom&&(l[c.key]=c)}this._retainLoadedChildren(l,e,o,i);for(var h=0,d=t;h<d.length;h+=1){var f=d[h],m=this._tiles[f.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var g=f.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){i[g.key]=g;continue}}else{var _=f.children(this._source.maxzoom);if(i[_[0].key]&&i[_[1].key]&&i[_[2].key]&&i[_[3].key])continue}for(var v=m.wasRequested(),b=f.overscaledZ-1;b>=a;--b){var x=f.scaledTo(b);if(r[x.key])break;if(r[x.key]=!0,!(m=this.getTile(x))&&v&&(m=this._addTile(x)),m&&(i[x.key]=x,v=m.wasRequested(),m.hasData()))break}}}return i},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var i=Boolean(n);return i||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},i))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n){for(var i=[],r=this.getIds(),a=1/0,o=1/0,l=-1/0,s=-1/0,u=e[0].zoom,c=0;c<e.length;c++){var p=e[c];a=Math.min(a,p.column),o=Math.min(o,p.row),l=Math.max(l,p.column),s=Math.max(s,p.row)}for(var d=0;d<r.length;d++){var f=this._tiles[r[d]];if(!f.holdingForFade()){var m=f.tileID,g=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),y=n*f.queryPadding*t.EXTENT/f.tileSize/g,_=[h(m,new t.Coordinate(a,o,u)),h(m,new t.Coordinate(l,s,u))];if(_[0].x-y<t.EXTENT&&_[0].y-y<t.EXTENT&&_[1].x+y>=0&&_[1].y+y>=0){for(var v=[],b=0;b<e.length;b++)v.push(h(m,e[b]));i.push({tile:f,tileID:m,queryGeometry:[v],scale:g})}}}return i},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),i=0,r=n;i<r.length;i+=1){var a=r[i];a.posMatrix=e.transform.calculatePosMatrix(a.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(f(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},n}(t.Evented);Oe.maxOverzooming=10,Oe.maxUnderzooming=3;var Re,je=function(){this.active={}};je.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<je.workerCount;)this.workers.push(new m);return this.active[t]=!0,this.workers.slice()},je.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},je.workerCount=Math.max(Math.floor(t.browser.hardwareConcurrency/2),1);var Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Ue=function(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Ue.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ue.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Ue.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},Ue.prototype._insertBoxCell=function(t,e,n,i,r,a){this.boxCells[r].push(a)},Ue.prototype._insertCircleCell=function(t,e,n,i,r,a){this.circleCells[r].push(a)},Ue.prototype._query=function(t,e,n,i,r,a){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var o=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var l=0;l<this.boxKeys.length;l++)o.push({key:this.boxKeys[l],x1:this.bboxes[4*l],y1:this.bboxes[4*l+1],x2:this.bboxes[4*l+2],y2:this.bboxes[4*l+3]});for(var s=0;s<this.circleKeys.length;s++){var u=this.circles[3*s],c=this.circles[3*s+1],p=this.circles[3*s+2];o.push({key:this.circleKeys[s],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return a?o.filter(a):o}return this._forEachCell(t,e,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?o.length>0:o},Ue.prototype._queryCircle=function(t,e,n,i,r){var a=t-n,o=t+n,l=e-n,s=e+n;if(o<0||a>this.width||s<0||l>this.height)return!i&&[];var u=[];return this._forEachCell(a,l,o,s,this._queryCellCircle,u,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?u.length>0:u},Ue.prototype.query=function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)},Ue.prototype.hitTest=function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)},Ue.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},Ue.prototype._queryCell=function(t,e,n,i,r,a,o,l){var s=o.seenUids,u=this.boxCells[r];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var d=h[p];if(!s.box[d]){s.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&i>=c[f+1]&&(!l||l(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,y=0,_=m;y<_.length;y+=1){var v=_[y];if(!s.circle[v]){s.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,n,i)&&(!l||l(this.circleKeys[v]))){if(o.hitTest)return a.push(!0),!0;var x=g[b],w=g[b+1],S=g[b+2];a.push({key:this.circleKeys[v],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},Ue.prototype._queryCellCircle=function(t,e,n,i,r,a,o,l){var s=o.circle,u=o.seenUids,c=this.boxCells[r];if(null!==c)for(var p=this.bboxes,h=0,d=c;h<d.length;h+=1){var f=d[h];if(!u.box[f]){u.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(s.x,s.y,s.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!l||l(this.boxKeys[f])))return a.push(!0),!0}}var g=this.circleCells[r];if(null!==g)for(var y=this.circles,_=0,v=g;_<v.length;_+=1){var b=v[_];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],s.x,s.y,s.radius)&&(!l||l(this.circleKeys[b])))return a.push(!0),!0}}},Ue.prototype._forEachCell=function(t,e,n,i,r,a,o,l){for(var s=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(i),h=s;h<=c;h++)for(var d=u;d<=p;d++){if(r.call(this,t,e,n,i,this.xCellCount*d+h,a,o,l))return}},Ue.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Ue.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Ue.prototype._circlesCollide=function(t,e,n,i,r,a){var o=i-t,l=r-e,s=n+a;return s*s>o*o+l*l},Ue.prototype._circleAndRectCollide=function(t,e,n,i,r,a,o){var l=(a-i)/2,s=Math.abs(t-(i+l));if(s>l+n)return!1;var u=(o-r)/2,c=Math.abs(e-(r+u));if(c>u+n)return!1;if(s<=l||c<=u)return!0;var p=s-l,h=c-u;return p*p+h*h<=n*n};var Ne=t.properties.layout,Ze=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ye=function(t,e,n){void 0===e&&(e=new Ue(t.width+200,t.height+200,25)),void 0===n&&(n=new Ue(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};Ye.prototype.placeCollisionBox=function(t,e,n,i,r){var a=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),o=n*a.perspectiveRatio,l=t.x1*o+a.point.x,s=t.y1*o+a.point.y,u=t.x2*o+a.point.x,c=t.y2*o+a.point.y;return!this.isInsideGrid(l,s,u,c)||!e&&this.grid.hitTest(l,s,u,c,r)?{box:[],offscreen:!1}:{box:[l,s,u,c],offscreen:this.isOffscreen(l,s,u,c)}},Ye.prototype.approximateTileDistance=function(t,e,n,i,r){var a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+((r?1:i/this.pitchfactor)-1)*a*Math.abs(Math.sin(e))},Ye.prototype.placeCollisionCircles=function(e,n,i,r,a,o,l,s,u,c,p,h,d){var f=[],m=this.projectAnchor(u,a.anchorX,a.anchorY),g=s/24,y=a.lineOffsetX*s,_=a.lineOffsetY*s,v=new t.Point(a.anchorX,a.anchorY),b=L(g,l,y,_,!1,E(v,c).point,v,a,o,c,{},!0),x=!1,w=!1,S=!0,T=m.perspectiveRatio*r,k=1/(r*i),I=0,A=0;b&&(I=this.approximateTileDistance(b.first.tileDistance,b.first.angle,k,m.cameraDistance,h),A=this.approximateTileDistance(b.last.tileDistance,b.last.angle,k,m.cameraDistance,h));for(var C=0;C<e.length;C+=5){var z=e[C],P=e[C+1],D=e[C+2],M=e[C+3];if(!b||M<-I||M>A)R(e,C,!1);else{var F=this.projectPoint(u,z,P),O=D*T;if(f.length>0){var j=F.x-f[f.length-4],B=F.y-f[f.length-3];if(O*O*2>j*j+B*B&&C+8<e.length){var U=e[C+8];if(U>-I&&U<A){R(e,C,!1);continue}}}f.push(F.x,F.y,O,C/5),R(e,C,!0);var N=F.x-O,Z=F.y-O,Y=F.x+O,V=F.y+O;if(S=S&&this.isOffscreen(N,Z,Y,V),w=w||this.isInsideGrid(N,Z,Y,V),!n&&this.grid.hitTestCircle(F.x,F.y,O,d)){if(!p)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:f,offscreen:S}},Ye.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],i=1/0,r=1/0,a=-1/0,o=-1/0,l=0,s=e;l<s.length;l+=1){var u=s[l],c=new t.Point(u.x+100,u.y+100);i=Math.min(i,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),n.push(c)}for(var p={},h={},d=0,f=this.grid.query(i,r,a,o).concat(this.ignoredGrid.query(i,r,a,o));d<f.length;d+=1){var m=f[d],g=m.key;if(void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]={}),!p[g.bucketInstanceId][g.featureIndex]){var y=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(n,y)&&(p[g.bucketInstanceId][g.featureIndex]=!0,void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]=[]),h[g.bucketInstanceId].push(g.featureIndex))}}return h},Ye.prototype.insertCollisionBox=function(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])},Ye.prototype.insertCollisionCircles=function(t,e,n,i,r){for(var a=e?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},l=0;l<t.length;l+=4)a.insertCircle(o,t[l],t[l+1],t[l+2])},Ye.prototype.projectAnchor=function(t,e,n){var i=[e,n,0,1];return O(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},Ye.prototype.projectPoint=function(e,n,i){var r=[n,i,0,1];return O(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},Ye.prototype.projectAndGetPerspectiveRatio=function(e,n,i){var r=[n,i,0,1];return O(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},Ye.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},Ye.prototype.isInsideGrid=function(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary};var Ve=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};Ve.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var qe=function(t,e,n,i,r){this.text=new Ve(t?t.text:null,e,n,r),this.icon=new Ve(t?t.icon:null,e,i,r)};qe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ge=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},We=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};We.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var He=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new Ye(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new We(n)};He.prototype.placeLayerTile=function(e,n,i,r){var a=n.getBucket(e),o=n.latestFeatureIndex;if(a&&o&&e.id===a.layerIds[0]){var l=n.collisionBoxArray,s=a.layers[0].layout,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=k(p,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,j(n,1,this.transform.zoom)),d=k(p,"map"===s.get("icon-pitch-alignment"),"map"===s.get("icon-rotation-alignment"),this.transform,j(n,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new function(t,e,n,i,r){this.bucketInstanceId=a.bucketInstanceId,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}(0,o,a.sourceLayerIndex,a.index,n.tileID),this.placeLayerBucket(a,p,h,d,u,c,i,n.holdingForFade(),r,l)}},He.prototype.placeLayerBucket=function(e,n,i,r,a,o,l,s,u,c){var p=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),d=p.get("text-optional"),f=p.get("icon-optional"),m=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var g=0;g<e.symbolInstances.length;g++){var y=e.symbolInstances.get(g);if(!u[y.crossTileID]){if(s){this.placements[y.crossTileID]=new Ge(!1,!1,!1);continue}var _=!1,v=!1,b=!0,x=null,w=null,S=null,T=0,k=0,I=e.collisionArrays[g];I.textFeatureIndex&&(T=I.textFeatureIndex),I.textBox&&(_=(x=this.collisionIndex.placeCollisionBox(I.textBox,p.get("text-allow-overlap"),o,n,m.predicate)).box.length>0,b=b&&x.offscreen);var E=I.textCircles;if(E){var A=e.text.placedSymbolArray.get(y.horizontalPlacedTextSymbolIndex),C=t.evaluateSizeForFeature(e.textSizeData,h,A);w=this.collisionIndex.placeCollisionCircles(E,p.get("text-allow-overlap"),a,o,A,e.lineVertexArray,e.glyphOffsetArray,C,n,i,l,"map"===p.get("text-pitch-alignment"),m.predicate),_=p.get("text-allow-overlap")||w.circles.length>0,b=b&&w.offscreen}I.iconFeatureIndex&&(k=I.iconFeatureIndex),I.iconBox&&(v=(S=this.collisionIndex.placeCollisionBox(I.iconBox,p.get("icon-allow-overlap"),o,n,m.predicate)).box.length>0,b=b&&S.offscreen);var L=d||0===y.numGlyphVertices&&0===y.numVerticalGlyphVertices,z=f||0===y.numIconVertices;L||z?z?L||(v=v&&_):_=v&&_:v=_=v&&_,_&&x&&this.collisionIndex.insertCollisionBox(x.box,p.get("text-ignore-placement"),e.bucketInstanceId,T,m.ID),v&&S&&this.collisionIndex.insertCollisionBox(S.box,p.get("icon-ignore-placement"),e.bucketInstanceId,k,m.ID),_&&w&&this.collisionIndex.insertCollisionCircles(w.circles,p.get("text-ignore-placement"),e.bucketInstanceId,T,m.ID),this.placements[y.crossTileID]=new Ge(_,v,b||e.justReloaded),u[y.crossTileID]=!0}}e.justReloaded=!1},He.prototype.commit=function(t,e){this.commitTime=e;var n=!1,i=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,r=t?t.opacities:{};for(var a in this.placements){var o=this.placements[a],l=r[a];l?(this.opacities[a]=new qe(l,i,o.text,o.icon),n=n||o.text!==l.text.placed||o.icon!==l.icon.placed):(this.opacities[a]=new qe(null,i,o.text,o.icon,o.skipFade),n=n||o.text||o.icon)}for(var s in r){var u=r[s];if(!this.opacities[s]){var c=new qe(u,i,!1,!1);c.isHidden()||(this.opacities[s]=c,n=n||u.text.placed||u.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},He.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var a=r[i],o=a.getBucket(t);o&&a.latestFeatureIndex&&t.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,a.collisionBoxArray)}},He.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var i=t.layers[0].layout,r=new qe(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),o=i.get("icon-allow-overlap"),l=new qe(null,0,a&&(o||!t.hasIconData()||i.get("icon-optional")),o&&(a||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(n);for(var s=0;s<t.symbolInstances.length;s++){var u=t.symbolInstances.get(s),c=e[u.crossTileID],p=this.opacities[u.crossTileID];c?p=r:p||(p=l,this.opacities[u.crossTileID]=p),e[u.crossTileID]=!0;var h=u.numIconVertices>0;if(u.numGlyphVertices>0||u.numVerticalGlyphVertices>0){for(var d=U(p.text),f=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,m=0;m<f;m++)t.text.opacityVertexArray.emplaceBack(d);t.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden=p.text.isHidden(),u.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden=p.text.isHidden())}if(h){for(var g=U(p.icon),y=0;y<u.numIconVertices/4;y++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(s).hidden=p.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var _=t.collisionArrays[s];if(_){_.textBox&&B(t.collisionBox.collisionVertexArray,p.text.placed,!1),_.iconBox&&B(t.collisionBox.collisionVertexArray,p.icon.placed,!1);var v=_.textCircles;if(v&&t.hasCollisionCircleData())for(var b=0;b<v.length;b+=5){B(t.collisionCircle.collisionVertexArray,p.text.placed,c||0===v[b+4])}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},He.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},He.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},He.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},He.prototype.setStale=function(){this.stale=!0};var $e=Math.pow(2,25),Xe=Math.pow(2,24),Ke=Math.pow(2,17),Je=Math.pow(2,16),Qe=Math.pow(2,9),tn=Math.pow(2,8),en=Math.pow(2,1),nn=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};nn.prototype.continuePlacement=function(t,e,n,i,r){for(;this._currentTileIndex<t.length;){if(e.placeLayerTile(i,t[this._currentTileIndex],n,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};var rn=function(t,e,n,i,r,a){this.placement=new He(t,r,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};rn.prototype.isDone=function(){return this._done},rn.prototype.continuePlacement=function(e,n,i){for(var r=this,a=t.browser.now(),o=function(){var e=t.browser.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var l=n[e[r._currentPlacementIndex]],s=r.placement.collisionIndex.transform.zoom;if("symbol"===l.type&&(!l.minzoom||l.minzoom<=s)&&(!l.maxzoom||l.maxzoom>s)){if(r._inProgressLayer||(r._inProgressLayer=new nn),r._inProgressLayer.continuePlacement(i[l.source],r.placement,r._showCollisionBoxes,l,o))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},rn.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var an=512/t.EXTENT/2,on=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<e.length;i++){var r=e.get(i),a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};on.prototype.getScaledCoordinates=function(e,n){var i=n.canonical.z-this.tileID.canonical.z,r=an/Math.pow(2,i);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},on.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var l=this.getScaledCoordinates(a,e),s=0,u=o;s<u.length;s+=1){var c=u[s];if(Math.abs(c.coord.x-l.x)<=i&&Math.abs(c.coord.y-l.y)<=i&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var ln=function(){this.maxCrossTileID=0};ln.prototype.generate=function(){return++this.maxCrossTileID};var sn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};sn.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i=this.indexes[n],r={};for(var a in i){var o=i[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+e),r[o.tileID.key]=o}this.indexes[n]=r}this.lng=t},sn.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>t.overscaledZ)for(var l in o){var s=o[l];s.tileID.isChildOf(t)&&s.findMatches(e.symbolInstances,t,r)}else{var u=o[t.scaledTo(Number(a)).key];u&&u.findMatches(e.symbolInstances,t,r)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=n.generate(),r[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new on(t,e.symbolInstances,e.bucketInstanceId),!0},sn.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1){delete this.usedCrossTileIDs[t][r[i].crossTileID]}},sn.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e};var un=function(){this.layerIndexes={},this.crossTileIDs=new ln,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};un.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new sn);var r=!1,a={};i.handleWrapJump(n);for(var o=0,l=e;o<l.length;o+=1){var s=l[o],u=s.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,u,this.crossTileIDs)&&(r=!0),a[u.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(r=!0),r},un.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var cn=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},pn=t.pick(Be,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hn=t.pick(Be,["setCenter","setZoom","setBearing","setPitch"]),dn=function(e){function n(i,r){var a=this;void 0===r&&(r={}),e.call(this),this.map=i,this.dispatcher=new Bt((Re||(Re=new je),Re),this),this.imageManager=new zt,this.glyphManager=new Mt(i._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new jt(256,512),this.crossTileSymbolIndex=new un,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates();var o=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(t){for(var e in o.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),o.sourceCaches)o.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in a._layers){var r=a._layers[i];r.source===n.id&&a._validateLayer(r)}}}})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var a="boolean"==typeof n.validate?n.validate:!i(e);e=bt(e,n.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,a)})},n.prototype.loadJSON=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){i._request=null,i._load(e,!1!==n.validate)})},n.prototype._load=function(e,n){var i=this;if(!n||!cn(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)i.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=function(e,n,i){function r(){if(l)i(l);else if(a&&o){var e=t.browser.getImageData(o),n={};for(var r in a){var s=a[r],u=s.width,c=s.height,p=s.x,h=s.y,d=s.sdf,f=s.pixelRatio,m=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,m,{x:p,y:h},{x:0,y:0},{width:u,height:c}),n[r]={data:m,pixelRatio:f,sdf:d}}i(null,n)}}var a,o,l,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n(St(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){u=null,l||(l=t,a=e,r())}),c=t.getImage(n(St(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,l||(l=t,o=e,r())});return{cancel:function(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(n)for(var r in n)i.imageManager.addImage(r,n[r]);i.imageManager.setLoaded(!0),i.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=y(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var o=0,l=a;o<l.length;o+=1){var s=l[o];(s=t.createStyleLayer(s)).setEventedParent(i,{layer:{id:s.id}}),i._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Rt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var i=e.sourceLayer;if(i){var r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var r in(n.length||i.length)&&this._updateWorkerLayers(n,i),this._updatedSources){var a=this._updatedSources[r];"reload"===a?this._reloadSource(r):"clear"===a&&this._clearSource(r)}for(var o in this._updatedPaintProps)this._layers[o].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}))}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var s=0,u=this._order;s<u.length;s+=1){var c=this._layers[u[s]];c.recalculate(e),!c.isHidden(e.zoom)&&c.source&&(this.sourceCaches[c.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),cn(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=y(e.layers);var i=function(e,n){if(!e)return[{command:Be.setStyle,args:[n]}];var i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Be.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Be.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Be.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Be.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Be.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Be.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Be.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Be.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Be.setLight,args:[n.light]});var r={},a=[];!function(e,n,i,r){var a;for(a in e=e||{},n=n||{},e)e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||v(a,i,r));for(a in n)n.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],n[a])||("geojson"===e[a].type&&"geojson"===n[a].type&&x(e,n,a)?i.push({command:Be.setGeoJSONSourceData,args:[a,n[a].data]}):b(a,n,i,r)):_(a,n,i))}(e.sources,n.sources,a,r);var o=[];e.layers&&e.layers.forEach(function(t){r[t.source]?i.push({command:Be.removeLayer,args:[t.id]}):o.push(t)}),i=i.concat(a),function(e,n,i){e=e||[],n=n||[];var r,a,o,l,s,u,c,p=e.map(S),h=n.map(S),d=e.reduce(T,{}),f=n.reduce(T,{}),m=p.slice(),g=Object.create(null);for(r=0,a=0;r<p.length;r++)o=p[r],f.hasOwnProperty(o)?a++:(i.push({command:Be.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(r=0,a=0;r<h.length;r++)o=h[h.length-1-r],m[m.length-1-r]!==o&&(d.hasOwnProperty(o)?(i.push({command:Be.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,u=m[m.length-r],i.push({command:Be.addLayer,args:[f[o],u]}),m.splice(m.length-r,0,o),g[o]=!0);for(r=0;r<h.length;r++)if(l=d[o=h[r]],s=f[o],!g[o]&&!t.deepEqual(l,s))if(t.deepEqual(l.source,s.source)&&t.deepEqual(l["source-layer"],s["source-layer"])&&t.deepEqual(l.type,s.type)){for(c in w(l.layout,s.layout,i,o,null,Be.setLayoutProperty),w(l.paint,s.paint,i,o,null,Be.setPaintProperty),t.deepEqual(l.filter,s.filter)||i.push({command:Be.setFilter,args:[o,s.filter]}),t.deepEqual(l.minzoom,s.minzoom)&&t.deepEqual(l.maxzoom,s.maxzoom)||i.push({command:Be.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),l)l.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?w(l[c],s[c],i,o,c.slice(6),Be.setPaintProperty):t.deepEqual(l[c],s[c])||i.push({command:Be.setLayerProperty,args:[o,c,s[c]]}));for(c in s)s.hasOwnProperty(c)&&!l.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?w(l[c],s[c],i,o,c.slice(6),Be.setPaintProperty):t.deepEqual(l[c],s[c])||i.push({command:Be.setLayerProperty,args:[o,c,s[c]]}))}else i.push({command:Be.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],i.push({command:Be.addLayer,args:[s,u]})}(o,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Be.setStyle,args:[n]}]}return i}(this.serialize(),e).filter(function(t){return!(t.command in hn)});if(0===i.length)return this.stylesheet.offline=e.offline,!1;var r=i.filter(function(t){return!(t.command in pn)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return i.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,i){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Oe(e,n,this.dispatcher);a.style=this,a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}}),a.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,i){this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone(e),e=t.extend(e,{source:r})),!this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},i)){var a=t.createStyleLayer(e);this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}});var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source){var l=this._removedLayers[r];delete this._removedLayers[r],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var i=this._order.indexOf(e);this._order.splice(i,1);var r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.setLayerZoomRange=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n){this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null===n||void 0===n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n)||(i.filter=t.clone(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?t.deepEqual(r.getLayoutProperty(n),i)||(r.setLayoutProperty(n,i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},n.prototype.setPaintProperty=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?t.deepEqual(r.getPaintProperty(n),i)||(r.setPaintProperty(n,i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=e.sourceLayer,a=this.sourceCaches[i],o=parseInt(e.id,10);void 0!==a?"vector"!==a.getSource().type||r?isNaN(o)||o<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(r,o,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,i=e.sourceLayer,r=this.sourceCaches[n],a=parseInt(e.id,10);if(void 0!==r)if("vector"!==r.getSource().type||i){if(!(isNaN(a)||a<0))return r.getFeatureState(i,a);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){var e=this;return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()}),offline:this.stylesheet.offline},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var i=this._order[n],r=0,a=t;r<a.length;r+=1){var o=a[r][i];if(o)for(var l=0,s=o;l<s.length;l+=1){e.push(s[l])}}return e},n.prototype.queryRenderedFeatures=function(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,o=n.layers;a<o.length;a+=1){var l=o[a],s=this._layers[l];if(!s)return this.fire(new t.ErrorEvent(new Error("The layer '"+l+"' does not exist in the map's style and cannot be queried for features."))),[];r[s.source]=!0}}var u=[],h=e.map(function(t){return i.pointCoordinate(t)});for(var d in this.sourceCaches)n.layers&&!r[d]||u.push(c(this.sourceCaches[d],this._layers,h,n,i));return this.placement&&u.push(function(t,n,i,r,a,o){for(var l={},s=a.queryRenderedSymbols(e),u=[],c=0,h=Object.keys(s).map(Number);c<h.length;c+=1){u.push(o[h[c]])}u.sort(p);for(var d=function(){var e=m[f],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var a=l[i]=l[i]||[],o=n[i];o.sort(function(t,n){var i=e.featureSortOrder;if(i){var r=i.indexOf(t.featureIndex);return i.indexOf(n.featureIndex)-r}return n.featureIndex-t.featureIndex});for(var u=0,c=o;u<c.length;u+=1){a.push(c[u].feature)}}},f=0,m=u;f<m.length;f+=1)d();var g=function(e){l[e].forEach(function(i){var r=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r})};for(var y in l)g(y);return l}(this._layers,this.sourceCaches,0,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(u)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var i=this.sourceCaches[e];return i?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],r={},a=0;a<n.length;a++){var o=n[a],l=o.tileID.canonical.key;r[l]||(r[l]=!0,o.querySourceFeatures(i,e))}return i}(i,n):[]},n.prototype.addSourceType=function(t,e,i){return n.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e){this._checkLoaded();var n=this.light.getLight(),i=!1;for(var r in e)if(!t.deepEqual(e[r],n[r])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,i,r,a){return(!a||!1!==a.validate)&&cn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.styleSpec},r)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].style.stylesheet.offline=this.stylesheet.offline,this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,i,r){for(var a=!1,o=!1,l={},s=0,u=this._order;s<u.length;s+=1){var c=this._layers[u[s]];if("symbol"===c.type){if(!l[c.source]){var p=this.sourceCaches[c.source];l[c.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=this.crossTileSymbolIndex.addLayer(c,l[c.source],e.center.lng);a=a||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new rn(e,this._order,d,n,i,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),o=!0),a&&this.pauseablePlacement.placement.setStale()),o||a)for(var f=0,m=this._order;f<m.length;f+=1){var g=this._layers[m[f]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,l[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n}(t.Evented);dn.getSourceType=function(t){return Xt[t]},dn.setSourceType=function(t,e){Xt[t]=e},dn.registerForPluginAvailability=t.registerForPluginAvailability;var fn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),mn={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_fade) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_fade) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_fade);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec4 u_scale;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec4 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_a.y + 2.0) / 2.0) / pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_b.y + 2.0) / 2.0) / pattern_size_b.y);\n    vec2 pos_a = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n    // float tileRatio = u_scale.y;\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},gn=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,yn=function(t){var e=mn[t],n={};e.fragmentSource=e.fragmentSource.replace(gn,function(t,e,i,r,a){return n[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(gn,function(t,e,i,r,a){var o="float"===r?"vec2":"vec4",l=a.match(/color/)?"color":o;return n[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+l+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = unpack_mix_"+l+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})};for(var _n in mn)yn(_n);var vn=mn,bn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};bn.prototype.bind=function(t,e,n,i,r,a,o,l){this.context=t;for(var s=this.boundPaintVertexBuffers.length!==i.length,u=0;!s&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(s=!0);!t.extVertexArrayObject||(!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||s||this.boundIndexBuffer!==r||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==l)?this.freshBind(e,n,i,r,a,o,l):(t.bindVertexArrayOES.set(this.vao),o&&o.bind(),r&&r.dynamicDraw&&r.bind(),l&&l.bind())},bn.prototype.freshBind=function(t,e,n,i,r,a,o){var l,s=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{l=u.currentNumAttributes||0;for(var p=s;p<l;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,d=n;h<d.length;h+=1)d[h].enableAttributes(c,t);a&&a.enableAttributes(c,t),o&&o.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var f=0,m=n;f<m.length;f+=1){var g=m[f];g.bind(),g.setVertexAttribPointers(c,t,r)}a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),i&&i.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=s},bn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xn=function(e,n,i,r,a){var o=e.gl;this.program=o.createProgram();var l=i.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));a&&l.push("#define OVERDRAW_INSPECTOR;");var s=l.concat(vn.prelude.fragmentSource,n.fragmentSource).join("\n"),u=l.concat(vn.prelude.vertexSource,n.vertexSource).join("\n"),c=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(c,s),o.compileShader(c),o.attachShader(this.program,c);var p=o.createShader(o.VERTEX_SHADER);o.shaderSource(p,u),o.compileShader(p),o.attachShader(this.program,p);for(var h=i.layoutAttributes||[],d=0;d<h.length;d++)o.bindAttribLocation(this.program,d,h[d].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var f={},m=0;m<this.numAttributes;m++){var g=o.getActiveAttrib(this.program,m);g&&(this.attributes[g.name]=o.getAttribLocation(this.program,g.name))}for(var y=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),_=0;_<y;_++){var v=o.getActiveUniform(this.program,_);v&&(f[v.name]=o.getUniformLocation(this.program,v.name))}this.fixedUniforms=r(e,f),this.binderUniforms=i.getUniforms(e,f)};xn.prototype.draw=function(t,e,n,i,r,a,o,l,s,u,c,p,h,d,f){var m,g=t.gl;for(var y in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);h&&h.setUniforms(t,this.binderUniforms,c,{zoom:p});for(var _=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],v=0,b=u.get();v<b.length;v+=1){var x=b[v],w=x.vaos||(x.vaos={});(w[o]||(w[o]=new bn)).bind(t,this,l,h?h.getPaintVertexBuffers():[],s,x.vertexOffset,d,f),g.drawElements(e,x.primitiveLength*_,g.UNSIGNED_SHORT,x.primitiveOffset*_*2)}};var wn=function(e,n){var i=n.style.light,r=i.properties.get("position"),a=[r.x,r.y,r.z],o=t.create$2();"viewport"===i.properties.get("anchor")&&t.fromRotation(o,-n.transform.angle),t.transformMat3(a,a,o);var l=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b]}},Sn=function(e,n,i,r,a){return t.extend(wn(e,n),N(r,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},Tn=function(t){return{u_matrix:t}},kn=function(e,n,i,r){return t.extend(Tn(e),N(i,n,r))},In=function(t,e){return{u_matrix:t,u_world:e}},En=function(e,n,i,r,a){return t.extend(kn(e,n,i,r),{u_world:a})},An=function(t,e,n,i){var r,a,o=t.transform;if("map"===i.paint.get("circle-pitch-alignment")){var l=j(n,1,o.zoom);r=!0,a=[l,l]}else r=!1,a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+r,u_extrude_scale:a}},Cn=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},Ln=function(t,e,n){var i=j(n,1,e.zoom),r=Math.pow(2,e.zoom-n.tileID.overscaledZ),a=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*r),e.pixelsToGLUnits[1]/(i*r)],u_overscale_factor:a}},zn=function(t,e){return{u_matrix:t,u_color:e}},Pn=function(t){return{u_matrix:t}},Dn=function(t,e,n,i){return{u_matrix:t,u_extrude_scale:j(e,1,n),u_intensity:i}},Mn=function(e,n,i){var r=i.paint.get("hillshade-shadow-color"),a=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),l=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);return"viewport"===i.paint.get("hillshade-illumination-anchor")&&(l-=e.transform.angle),{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0),u_image:0,u_latrange:function(e,i){var r=n.tileID.toCoordinate(),a=new t.Coordinate(r.column,r.row+1,r.zoom);return[e.transform.coordinateLocation(r).lat,e.transform.coordinateLocation(a).lat]}(e),u_light:[i.paint.get("hillshade-exaggeration"),l],u_shadow:r,u_highlight:a,u_accent:o}},Fn=function(e,n){var i=e.dem.dim,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[2*i,2*i],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}},On=function(t,e,n){var i=t.transform;return{u_matrix:Y(t,e,n),u_ratio:1/j(e,1,i.zoom),u_gl_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Rn=function(e,n,i){return t.extend(On(e,n,i),{u_image:0})},jn=function(e,n,i,r){var a=e.transform,o=Z(n,a);return{u_matrix:Y(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:1/j(n,1,a.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,o,r.fromScale,r.toScale],u_fade:r.t,u_gl_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Bn=function(e,n,i,r,a){var o=e.lineAtlas,l=Z(n,e.transform),s="round"===i.layout.get("line-cap"),u=o.getDash(r.from,s),c=o.getDash(r.to,s),p=u.width*a.fromScale,h=c.width*a.toScale;return t.extend(On(e,n,i),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/h,-c.height/2],u_sdfgamma:o.width/(256*Math.min(p,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:a.t})},Un=function(t,e,n,i,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(o=r.paint.get("raster-saturation"))>0?1-1/(1.001-o):-o,u_contrast_factor:(a=r.paint.get("raster-contrast"))>0?1/(1-a):1+a,u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(r.paint.get("raster-hue-rotate"))};var a,o},Nn=function(t,e,n,i,r,a,o,l,s,u){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_gl_coord_matrix:l,u_is_text:+s,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},Zn=function(e,n,i,r,a,o,l,s,u,c,p){var h=a.transform;return t.extend(Nn(e,n,i,r,a,o,l,s,u,c),{u_gamma_scale:r?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_is_halo:+p})},Yn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Vn=function(e,n,i,r,a,o){return t.extend(function(t,e,n,i){var r=n.imageManager.getPattern(t.from),a=n.imageManager.getPattern(t.to),o=n.imageManager.getPixelSize(),l=o.width,s=o.height,u=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/u,p=c*(i.tileID.canonical.x+i.tileID.wrap*u),h=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[l,s],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/j(i,1,n.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(r,o,i,a),{u_matrix:e,u_opacity:n})},qn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:Cn,collisionCircle:Cn,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}},Gn=t.identity(new Float32Array(16)),Wn=t.properties.layout,Hn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},$n={symbol:function(t,e,n,i){if("translucent"===t.renderPass){var r=De.disabled,a=t.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&W(t,e,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),r,a),0!==n.paint.get("text-opacity").constantOr(1)&&W(t,e,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),r,a),e.map.showCollisionBoxes&&function(t,e,n,i){G(t,e,n,i,!1),G(t,e,n,i,!0)}(t,e,n,i)}},circle:function(t,e,n,i){if("translucent"===t.renderPass){var r=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==o.constantOr(1))for(var l=t.context,s=l.gl,u=t.depthModeForSublayer(0,Pe.ReadOnly),c=De.disabled,p=t.colorModeForRenderPass(),h=0;h<i.length;h++){var d=i[h],f=e.getTile(d),m=f.getBucket(n);if(m){var g=m.programConfigurations.get(n.id);t.useProgram("circle",g).draw(l,s.TRIANGLES,u,c,p,An(t,d,f,n),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,g)}}}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,o=a.gl,l=e.depthModeForSublayer(0,Pe.ReadOnly),s=De.disabled,u=new Me([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),function t(e,n,i,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n.width/4,n.height/4,0,a.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(i),e.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,n,i,r))}(t,e,a,r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4))}}(a,e,i),a.clear({color:t.Color.transparent});for(var c=0;c<r.length;c++){var p=r[c];if(!n.hasRenderableParent(p)){var h=n.getTile(p),d=h.getBucket(i);if(d){var f=d.programConfigurations.get(i.id);e.useProgram("heatmap",f).draw(a,o.TRIANGLES,l,s,u,Dn(p.posMatrix,h,e.transform.zoom,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,f)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var i=e.context,r=i.gl,a=n.heatmapFbo;if(a){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,Pe.disabled,De.disabled,e.colorModeForRenderPass(),function(e,n,i,r){var a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:i,u_color_ramp:r,u_opacity:n.paint.get("heatmap-opacity")}}(e,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},line:function(e,n,i,r){if("translucent"===e.renderPass){var a=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var l=e.depthModeForSublayer(0,Pe.ReadOnly),s=e.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),p=c.constantOr(1),h=i.paint.get("line-gradient"),d=i.getCrossfadeParameters(),f=u?"lineSDF":p?"linePattern":h?"lineGradient":"line",m=e.context,g=m.gl,y=!0;if(h){m.activeTexture.set(g.TEXTURE0);var _=i.gradientTexture;if(!i.gradient)return;_||(_=i.gradientTexture=new t.Texture(m,i.gradient,g.RGBA)),_.bind(g.LINEAR,g.CLAMP_TO_EDGE)}for(var v=0,b=r;v<b.length;v+=1){var x=b[v],w=n.getTile(x);if(!p||w.patternsLoaded()){var S=w.getBucket(i);if(S){var T=S.programConfigurations.get(i.id),k=e.context.program.get(),I=e.useProgram(f,T),E=y||I.program!==k,A=c.constantOr(null);if(A&&w.imageAtlas){var C=w.imageAtlas.patternPositions[A.to],L=w.imageAtlas.patternPositions[A.from];C&&L&&T.setConstantPatternPositions(C,L)}var z=u?Bn(e,w,i,u,d):p?jn(e,w,i,d):h?Rn(e,w,i):On(e,w,i);u&&(E||e.lineAtlas.dirty)?(m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m)):p&&(m.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),T.updatePatternPaintBuffers(d)),I.draw(m,g.TRIANGLES,l,e.stencilModeForClipping(x),s,z,i.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,i.paint,e.transform.zoom,T),y=!1}}}}}},fill:function(e,n,i,r){var a=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var l=e.colorModeForRenderPass(),s=i.paint.get("fill-pattern").constantOr(1)||1!==a.constantOr(t.Color.transparent).a||1!==o.constantOr(0)?"translucent":"opaque";e.renderPass===s&&$(e,n,i,r,e.depthModeForSublayer(1,"opaque"===e.renderPass?Pe.ReadWrite:Pe.ReadOnly),l,!1),"translucent"===e.renderPass&&i.paint.get("fill-antialias")&&$(e,n,i,r,e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Pe.ReadOnly),l,!0)}},"fill-extrusion":function(e,n,i,r){0!==i.paint.get("fill-extrusion-opacity")&&("offscreen"===e.renderPass?(function(e,n){var i=e.context,r=i.gl,a=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!a){var o=new t.Texture(i,{width:e.width,height:e.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),(a=n.viewportFrame=i.createFramebuffer(e.width,e.height)).colorAttachment.set(o.texture)}i.bindFramebuffer.set(a.framebuffer),a.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(i.clear({depth:1}),e.depthRboNeedsClear=!1),i.clear({color:t.Color.transparent})}(e,i),function(t,e,n,i,r,a,o){for(var l=t.context,s=l.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=n.getCrossfadeParameters(),h=0,d=i;h<d.length;h+=1){var f=d[h],m=e.getTile(f),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(s.TEXTURE0),m.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(p));var v=u.constantOr(null);if(v&&m.imageAtlas){var b=m.imageAtlas.patternPositions[v.to],x=m.imageAtlas.patternPositions[v.from];b&&x&&y.setConstantPatternPositions(b,x)}var w=t.translatePosMatrix(f.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),S=c?Sn(w,t,f,p,m):wn(w,t);_.draw(l,l.gl.TRIANGLES,r,a,o,S,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,y)}}}(e,n,i,r,new Pe(e.context.gl.LEQUAL,Pe.ReadWrite,[0,1]),De.disabled,e.colorModeForRenderPass())):"translucent"===e.renderPass&&function(e,n){var i=n.viewportFrame;if(i){var r=e.context,a=r.gl;r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i.colorAttachment.get()),e.useProgram("extrusionTexture").draw(r,a.TRIANGLES,Pe.disabled,De.disabled,e.colorModeForRenderPass(),function(e,n,i){var r=t.create();t.ortho(r,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:r,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_opacity:n.paint.get("fill-extrusion-opacity")}}(e,n,0),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,a=e.getSource().maxzoom,o=t.depthModeForSublayer(0,Pe.ReadOnly),l=De.disabled,s=t.colorModeForRenderPass(),u=0,c=i;u<c.length;u+=1){var p=e.getTile(c[u]);p.needsHillshadePrepare&&"offscreen"===t.renderPass?K(t,p,n,a,o,l,s):"translucent"===t.renderPass&&X(t,p,n,o,l,s)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity"))for(var r=t.context,a=r.gl,o=e.getSource(),l=t.useProgram("raster"),s=De.disabled,u=t.colorModeForRenderPass(),c=i.length&&i[0].overscaledZ,p=0,h=i;p<h.length;p+=1){var d=h[p],f=t.depthModeForSublayer(d.overscaledZ-c,1===n.paint.get("raster-opacity")?Pe.ReadWrite:Pe.ReadOnly,a.LESS),m=e.getTile(d),g=t.transform.calculatePosMatrix(d.toUnwrapped(),!0);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var y=e.findLoadedParent(d,0),_=J(m,y,e,n,t.transform),v=void 0,b=void 0,x="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),m.texture.bind(x,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),y?(y.texture.bind(x,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),v=Math.pow(2,y.tileID.overscaledZ-m.tileID.overscaledZ),b=[m.tileID.canonical.x*v%1,m.tileID.canonical.y*v%1]):m.texture.bind(x,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var w=Un(g,b||[0,0],v||1,_,n);o instanceof Wt?l.draw(r,a.TRIANGLES,f,s,u,w,n.id,o.boundsBuffer,t.quadTriangleIndexBuffer,o.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?l.draw(r,a.TRIANGLES,f,s,u,w,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,t.transform.zoom):l.draw(r,a.TRIANGLES,f,s,u,w,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var i=n.paint.get("background-color"),r=n.paint.get("background-opacity");if(0!==r){var a=t.context,o=a.gl,l=t.transform,s=l.tileSize,u=n.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=u||1!==i.a||1!==r?"translucent":"opaque";if(t.renderPass===c){var p=De.disabled,h=t.depthModeForSublayer(0,"opaque"===c?Pe.ReadWrite:Pe.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),m=l.coveringTiles({tileSize:s});u&&(a.activeTexture.set(o.TEXTURE0),t.imageManager.bind(t.context));for(var g=n.getCrossfadeParameters(),y=0,_=m;y<_.length;y+=1){var v=_[y],b=t.transform.calculatePosMatrix(v.toUnwrapped()),x=u?Vn(b,r,t,u,{tileID:v,tileSize:s},g):Yn(b,r,i);f.draw(a,o.TRIANGLES,h,p,d,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)Q(t,e,n[i])}},Xn=function(e,n){this.context=new Fe(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Oe.maxUnderzooming+Oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new un};Xn.prototype.resize=function(e,n){var i=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1){this.style._layers[a[r]].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Xn.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,fn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,fn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,fn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);var l=new t.StructArrayLayout3ui6;l.emplaceBack(0,1,2),l.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(l);var s=this.context.gl;this.stencilClearMode=new De({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},Xn.prototype.clearStencil=function(){var e=this.context,n=e.gl,i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Pe.disabled,this.stencilClearMode,Me.disabled,Pn(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Xn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(Me.disabled),e.setDepthMode(Pe.disabled);var i=this.useProgram("clippingMask"),r=1;this._tileClippingMaskIDs={};for(var a=0,o=t;a<o.length;a+=1){var l=o[a],s=this._tileClippingMaskIDs[l.key]=r++;i.draw(e,n.TRIANGLES,Pe.disabled,new De({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE),Me.disabled,Pn(l.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Xn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new De({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Xn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Me([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Me.unblended:Me.alphaBlended},Xn.prototype.depthModeForSublayer=function(t,e,n){var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Pe(n||this.context.gl.LEQUAL,e,[i-1+this.depthRange,i])},Xn.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var i=this.style._order,r=this.style.sourceCaches;for(var a in r){var o=r[a];o.used&&o.prepare(this.context)}var l,s={},u={},c={};for(var p in r){var h=r[p];s[p]=h.getVisibleCoordinates(),u[p]=s[p].slice().reverse(),c[p]=h.getVisibleCoordinates(!0).reverse()}for(var d in r){var f=r[d],m=f.getSource();if("raster"===m.type||"raster-dem"===m.type){for(var g=[],y=0,_=s[d];y<_.length;y+=1){g.push(f.getTile(_[y]))}V(g,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var v=0,b=i;v<b.length;v+=1){var x=this.style._layers[b[v]];if(x.hasOffscreenPass()&&!x.isHidden(this.transform.zoom)){var w=u[x.source];w.length&&this.renderLayer(this,r[x.source],x,w)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[i[this.currentLayer]],T=r[S.source],k=s[S.source];S.source!==l&&T&&(this.clearStencil(),T.getSource().isTileClipped&&this._renderTileClippingMasks(k)),this.renderLayer(this,T,S,k),l=S.source}for(this.renderPass="translucent",this.currentLayer=0,l=null;this.currentLayer<i.length;this.currentLayer++){var I=this.style._layers[i[this.currentLayer]],E=r[I.source],A=("symbol"===I.type?c:u)[I.source];I.source!==l&&E&&(this.clearStencil(),E.getSource().isTileClipped&&this._renderTileClippingMasks(s[I.source])),this.renderLayer(this,E,I,A),l=I.source}if(this.options.showTileBoundaries)for(var C in r){$n.debug(this,r[C],s[C]);break}},Xn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},Xn.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||i.length)&&(this.id=n.id,$n[n.type](t,e,n,i))},Xn.prototype.translatePosMatrix=function(e,n,i,r,a){if(!i[0]&&!i[1])return e;var o=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var l=Math.sin(o),s=Math.cos(o);i=[i[0]*s-i[1]*l,i[0]*l+i[1]*s]}var u=[a?i[0]:j(n,i[0],this.transform.zoom),a?i[1]:j(n,i[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},Xn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Xn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Xn.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),n=this.imageManager.getPattern(t.to);return!e||!n},Xn.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new xn(this.context,vn[t],e,qn[t],this._showOverdrawInspector)),this.cache[n]};var Kn=function(t,e,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ut(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Kn.prototype.clone=function(){var t=new Kn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Jn.minZoom.get=function(){return this._minZoom},Jn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Jn.maxZoom.get=function(){return this._maxZoom},Jn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Jn.renderWorldCopies.get=function(){return this._renderWorldCopies},Jn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Jn.worldSize.get=function(){return this.tileSize*this.scale},Jn.centerPoint.get=function(){return this.size._div(2)},Jn.size.get=function(){return new t.Point(this.width,this.height)},Jn.bearing.get=function(){return-this.angle/Math.PI*180},Jn.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$4(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jn.pitch.get=function(){return this._pitch/Math.PI*180},Jn.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Jn.fov.get=function(){return this._fov/Math.PI*180},Jn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Jn.zoom.get=function(){return this._zoom},Jn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Jn.center.get=function(){return this._center},Jn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Kn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Kn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0),0),r=this.pointCoordinate(new t.Point(this.width,0),0),a=this.pointCoordinate(new t.Point(this.width,this.height),0),o=this.pointCoordinate(new t.Point(0,this.height),0),l=Math.floor(Math.min(i.column,r.column,a.column,o.column)),s=Math.floor(Math.max(i.column,r.column,a.column,o.column)),u=l-1;u<=s+1;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e));return n},Kn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),i=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,n),a=new t.Point(r.column-.5,r.row-.5);return function(e,n,i,r){function a(n,a,s){var u,c,p,h;if(s>=0&&s<=o)for(u=n;u<a;u++)c=Math.floor(u/o),p=(u%o+o)%o,0!==c&&!0!==r||(h=new t.OverscaledTileID(i,c,e,p,s),l[h.key]=h)}void 0===r&&(r=!0);var o=1<<e,l={};return nt(n[0],n[1],n[2],0,o,a),nt(n[2],n[3],n[0],0,o,a),Object.keys(l).map(function(t){return l[t]})}(n,[this.pointCoordinate(new t.Point(0,0),n),this.pointCoordinate(new t.Point(this.width,0),n),this.pointCoordinate(new t.Point(this.width,this.height),n),this.pointCoordinate(new t.Point(0,this.height),n)],e.reparseOverscaled?i:n,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},Kn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Jn.unmodified.get=function(){return this._unmodified},Kn.prototype.zoomScale=function(t){return Math.pow(2,t)},Kn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Kn.prototype.project=function(e){return new t.Point(this.lngX(e.lng),this.latY(e.lat))},Kn.prototype.unproject=function(t){return new Ut(this.xLng(t.x),this.yLat(t.y))},Jn.x.get=function(){return this.lngX(this.center.lng)},Jn.y.get=function(){return this.latY(this.center.lat)},Jn.point.get=function(){return new t.Point(this.x,this.y)},Kn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Kn.prototype.latY=function(e){return e=t.clamp(e,-this.maxValidLatitude,this.maxValidLatitude),(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},Kn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Kn.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Kn.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Kn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Kn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Kn.prototype.locationCoordinate=function(e){return new t.Coordinate(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Kn.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new Ut(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Kn.prototype.pointCoordinate=function(e,n){void 0===n&&(n=this.tileZoom);var i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var a=i[3],o=r[3],l=i[1]/a,s=r[1]/o,u=i[2]/a,c=r[2]/o,p=u===c?0:(0-u)/(c-u);return new t.Coordinate(t.number(i[0]/a,r[0]/o,p)/this.tileSize,t.number(l,s,p)/this.tileSize,this.zoom)._zoomTo(n)},Kn.prototype.coordinatePoint=function(e){var n=e.zoomTo(this.zoom),i=[n.column*this.tileSize,n.row*this.tileSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},Kn.prototype.getBounds=function(){return(new Nt).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Kn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Nt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Kn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Kn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var a=e.canonical,o=this.worldSize/this.zoomScale(a.z),l=a.x+Math.pow(2,a.z)*e.wrap,s=t.identity(new Float64Array(16));return t.translate(s,s,[l*o,a.y*o,0]),t.scale(s,s,[o/t.EXTENT,o/t.EXTENT,1]),t.multiply(s,n?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]},Kn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,i,r,a=-90,o=90,l=-180,s=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;a=this.latY(p[1]),e=(o=this.latY(p[0]))-a<u.y?u.y/(o-a):0}if(this.lngRange){var h=this.lngRange;l=this.lngX(h[0]),n=(s=this.lngX(h[1]))-l<u.x?u.x/(s-l):0}var d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(s+l)/2:this.x,e?(o+a)/2:this.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var f=this.y,m=u.y/2;f-m<a&&(r=a+m),f+m>o&&(r=o-m)}if(this.lngRange){var g=this.x,y=u.x/2;g-y<l&&(i=l+y),g+y>s&&(i=s-y)}void 0===i&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==i?i:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},Kn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,i=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),r=this.x,a=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,1,o),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-r,-a,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));t.scale(l,l,[1,1,s,1]),this.projMatrix=l;var u=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),d=r-Math.round(r)+p*u+h*c,f=a-Math.round(a)+p*c+h*u,m=new Float64Array(l);if(t.translate(m,m,[d>.5?d-1:d,f>.5?f-1:f,0]),this.alignedProjMatrix=m,l=t.create(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),l,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Kn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)).zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Kn.prototype,Jn);var Qn=function(){var e,n,i,r;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),300,n=!1,i=0,r=function(){i=0,n&&(e(),i=setTimeout(r,300),n=!1)},function(){return n=!0,i||r(),i})};Qn.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Qn.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Qn.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),a=Math.round(e.lng*r)/r,o=Math.round(e.lat*r)/r,l=this._map.getBearing(),s=this._map.getPitch(),u="";return u+=t?"#/"+a+"/"+o+"/"+n:"#"+n+"/"+o+"/"+a,(l||s)&&(u+="/"+Math.round(10*l)/10),s&&(u+="/"+Math.round(s)),u},Qn.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},Qn.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.window.history.replaceState(t.window.history.state,"",e)};var ti=function(e){function n(n,i,r,a){void 0===a&&(a={});var o=pt.mousePos(i.getCanvasContainer(),r),l=i.unproject(o);e.call(this,n,t.extend({point:o,lngLat:l,originalEvent:r},a)),this._defaultPrevented=!1,this.target=i}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(t.Event),ei=function(e){function n(n,i,r){var a=pt.touchPos(i.getCanvasContainer(),r),o=a.map(function(t){return i.unproject(t)}),l=a.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new t.Point(0,0)),s=i.unproject(l);e.call(this,n,{points:a,point:l,lngLats:o,lngLat:s,originalEvent:r}),this._defaultPrevented=!1}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(t.Event),ni=function(t){function e(e,n,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),ii=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ii.prototype.isEnabled=function(){return!!this._enabled},ii.prototype.isActive=function(){return!!this._active},ii.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},ii.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ii.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},ii.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},ii.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=pt.mousePos(this._el,e);this._around=Ut.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},ii.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:n.zoom,l=this._startZoom,s=this._easing,u=!1;if("wheel"===this._type&&l&&s){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=s(c);n.zoom=t.number(l,o,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else n.zoom=o,u=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},ii.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var i=this._prevEase,r=(t.browser.now()-i.start)/i.duration,a=i.easing(r+.01)-i.easing(r),o=.27/Math.sqrt(a*a+1e-4)*.01,l=Math.sqrt(.0729-o*o);n=t.bezier(o,l,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var ri=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};ri.prototype.isEnabled=function(){return!!this._enabled},ri.prototype.isActive=function(){return!!this._active},ri.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ri.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ri.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),pt.disableDrag(),this._startPos=this._lastPos=pt.mousePos(this._el,e),this._active=!0)},ri.prototype._onMouseMove=function(t){var e=pt.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=pt.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(n.x,e.x),r=Math.max(n.x,e.x),a=Math.min(n.y,e.y),o=Math.max(n.y,e.y);pt.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=r-i+"px",this._box.style.height=o-a+"px"}},ri.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,i=pt.mousePos(this._el,e);this._finish(),pt.suppressClick(),n.x===i.x&&n.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(n,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},ri.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},ri.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(pt.remove(this._box),this._box=null),pt.enableDrag(),delete this._startPos,delete this._lastPos},ri.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var ai=t.bezier(0,0,.25,1),oi=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};oi.prototype.isEnabled=function(){return"disabled"!==this._state},oi.prototype.isActive=function(){return"active"===this._state},oi.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},oi.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},oi.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=pt.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==pt.mouseButton(e))return;this._eventButton=0}pt.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=pt.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},oi.prototype._onMouseMove=function(t){var e=pt.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},oi.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,i=this._startPos,r=this._lastPos,a=n.bearing-.8*(i.x-r.x),o=n.pitch- -.5*(i.y-r.y),l=this._inertia,s=l[l.length-1];this._drainInertiaBuffer(),l.push([t.browser.now(),this._map._normalizeBearing(a,s[1])]),n.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=o),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},oi.prototype._onMouseUp=function(t){if(pt.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",pt.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},oi.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},oi.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),pt.enableDrag()},oi.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},oi.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),r=this._inertia,a=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)a();else{var o=r[0],l=r[r.length-1],s=n._normalizeBearing(i,r[r.length-2][1]),u=l[1]-o[1],c=u<0?-1:1,p=(l[0]-o[0])/1e3;if(0!==u&&0!==p){var h=Math.abs(u*(.25/p));h>180&&(h=180);var d=h/180;s+=c*h*(d/2),Math.abs(n._normalizeBearing(s,0))<this._bearingSnap&&(s=n._normalizeBearing(0,s)),n.rotateTo(s,{duration:1e3*d,easing:ai,noMoveStart:!0},{originalEvent:t})}else a()}},oi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},oi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var li=t.bezier(0,0,.3,1),si=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};si.prototype.isEnabled=function(){return"disabled"!==this._state},si.prototype.isActive=function(){return"active"===this._state},si.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},si.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},si.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==pt.mouseButton(e)||(pt.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),pt.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},si.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(pt.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),pt.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},si.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=pt.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},si.prototype._onMove=function(e){e.preventDefault();var n=pt.mousePos(this._el,e);this._lastPos.equals(n)||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},si.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},si.prototype._onMouseUp=function(t){if(0===pt.mouseButton(t))switch(this._state){case"active":this._state="enabled",pt.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},si.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},si.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},si.prototype._unbind=function(){pt.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),pt.removeEventListener(t.window.document,"touchend",this._onTouchEnd),pt.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),pt.removeEventListener(t.window.document,"mouseup",this._onMouseUp),pt.removeEventListener(t.window,"blur",this._onBlur)},si.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},si.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],i=e[0],r=n[1].sub(i[1]),a=(n[0]-i[0])/1e3;if(0===a||n[1].equals(i[1]))this._fireEvent("moveend",t);else{var o=r.mult(.3/a),l=o.mag();l>1400&&(l=1400,o._unit()._mult(l));var s=l/750,u=o.mult(-s/2);this._map.panBy(u,{duration:1e3*s,easing:li,noMoveStart:!0},{originalEvent:t})}}},si.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},si.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var ui=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};ui.prototype.isEnabled=function(){return!!this._enabled},ui.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},ui.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},ui.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(a=1,t.preventDefault());break;default:return}var o=this._map,l=o.getZoom(),s={duration:300,delayEndEvents:500,easing:it,zoom:e?Math.round(l)+e*(t.shiftKey?2:1):l,bearing:o.getBearing()+15*n,pitch:o.getPitch()+10*i,offset:[100*-r,100*-a],center:o.getCenter()};o.easeTo(s,{originalEvent:t})}};var ci=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};ci.prototype.isEnabled=function(){return!!this._enabled},ci.prototype.isActive=function(){return!!this._active},ci.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ci.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ci.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},ci.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},ci.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},ci.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var pi=t.bezier(0,0,.15,1),hi=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};hi.prototype.isEnabled=function(){return!!this._enabled},hi.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},hi.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},hi.prototype.disableRotation=function(){this._rotationDisabled=!0},hi.prototype.enableRotation=function(){this._rotationDisabled=!1},hi.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=pt.mousePos(this._el,e.touches[0]),i=pt.mousePos(this._el,e.touches[1]),r=n.add(i).div(2);this._startVec=n.sub(i),this._startAround=this._map.transform.pointLocation(r),this._gestureIntent=void 0,this._inertia=[],pt.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),pt.addEventListener(t.window.document,"touchend",this._onEnd)}},hi.prototype._getTouchEventData=function(t){var e=pt.mousePos(this._el,t.touches[0]),n=pt.mousePos(this._el,t.touches[1]),i=e.sub(n);return{vec:i,center:e.add(n).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},hi.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),i=n.vec,r=n.scale,a=n.bearing;if(!this._gestureIntent){var o=Math.abs(1-r)>.15;Math.abs(a)>10?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=i)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},hi.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var i=this._getTouchEventData(this._lastTouchEvent),r=i.center,a=i.bearing,o=i.scale,l=n.pointLocation(r),s=n.locationPoint(l);"rotate"===e&&(n.bearing=this._startBearing+a),n.zoom=n.scaleZoom(this._startScale*o),n.setLocationAtPoint(this._startAround,s),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),o,r])}},hi.prototype._onEnd=function(e){pt.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),pt.removeEventListener(t.window.document,"touchend",this._onEnd);var n=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var r=this._inertia,a=this._map;if(r.length<2)a.snapToNorth({},{originalEvent:e});else{var o=r[r.length-1],l=r[0],s=a.transform.scaleZoom(i*o[1]),u=a.transform.scaleZoom(i*l[1]),c=(o[0]-l[0])/1e3,p=o[2];if(0!==c&&s!==u){var h=.15*(s-u)/c;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var d=1e3*Math.abs(h/(12*.15)),f=s+h*d/2e3;f<0&&(f=0),a.easeTo({zoom:f,duration:d,easing:pi,around:this._aroundCenter?a.getCenter():a.unproject(p),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},hi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var di={scrollZoom:ii,boxZoom:ri,dragRotate:oi,dragPan:si,keyboard:ui,doubleClickZoom:ci,touchZoomRotate:hi},fi=function(e){function n(n,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)},n.prototype.panTo=function(e,n,i){return this.easeTo(t.extend({center:e},n),i)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(t,e){return t=Nt.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},n.prototype._cameraForBoxAndBearing=function(e,n,i,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}if(t.deepEqual(Object.keys(r.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var o=[(r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2],l=Math.min(r.padding.right,r.padding.left),s=Math.min(r.padding.top,r.padding.bottom);r.offset=[r.offset[0]+o[0],r.offset[1]+o[1]];var u=this.transform,c=u.project(Ut.convert(e)),p=u.project(Ut.convert(n)),h=c.rotate(-i*Math.PI/180),d=p.rotate(-i*Math.PI/180),f=new t.Point(Math.max(h.x,d.x),Math.max(h.y,d.y)),m=new t.Point(Math.min(h.x,d.x),Math.min(h.y,d.y)),g=t.Point.convert(r.offset),y=f.sub(m),_=(u.width-2*l-2*Math.abs(g.x))/y.x,v=(u.height-2*s-2*Math.abs(g.y))/y.y;if(!(v<0||_<0))return r.center=u.unproject(c.add(p).div(2)),r.zoom=Math.min(u.scaleZoom(u.scale*Math.min(_,v)),r.maxZoom),r.bearing=i,r;t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,i,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),i,r),r,a)},n.prototype._fitInternal=function(e,n,i){return e?(n=t.extend(e,n)).linear?this.easeTo(n,i):this.flyTo(n,i):this},n.prototype.jumpTo=function(e,n){this.stop();var i=this.transform,r=!1,a=!1,o=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=Ut.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(a=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(o=!0,i.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),a&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),o&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var i=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var r=this.transform,a=this.getZoom(),o=this.getBearing(),l=this.getPitch(),s="zoom"in e?+e.zoom:a,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:l,p=r.centerPoint.add(t.Point.convert(e.offset)),h=r.pointLocation(p),d=Ut.convert(e.center||h);this._normalizeCenter(d);var f,m,g=r.project(h),y=r.project(d).sub(g),_=r.zoomScale(s-a);return e.around&&(f=Ut.convert(e.around),m=r.locationPoint(f)),this._zooming=s!==a,this._rotating=o!==u,this._pitching=c!==l,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(i._zooming&&(r.zoom=t.number(a,s,e)),i._rotating&&(r.bearing=t.number(o,u,e)),i._pitching&&(r.pitch=t.number(l,c,e)),f)r.setLocationAtPoint(f,m);else{var h=r.zoomScale(r.zoom-a),d=s>a?Math.min(2,_):Math.max(.5,_),v=Math.pow(d,1-e),b=r.unproject(g.add(y.mult(e*v)).mult(h));r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,p)}i._fireMoveEvents(n)},function(){e.delayEndEvents?i._easeEndTimeoutID=setTimeout(function(){return i._afterEase(n)},e.delayEndEvents):i._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,i=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){function i(t){var e=(w*w-x*x+(t?-1:1)*I*I*S*S)/(2*(t?w:x)*I*S);return Math.log(Math.sqrt(e*e+1)-e)}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}var o=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var l=this.transform,s=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in e?t.clamp(+e.zoom,l.minZoom,l.maxZoom):s,h="bearing"in e?this._normalizeBearing(e.bearing,u):u,d="pitch"in e?+e.pitch:c,f=l.zoomScale(p-s),m=l.centerPoint.add(t.Point.convert(e.offset)),g=l.pointLocation(m),y=Ut.convert(e.center||g);this._normalizeCenter(y);var _=l.project(g),v=l.project(y).sub(_),b=e.curve,x=Math.max(l.width,l.height),w=x/f,S=v.mag();if("minZoom"in e){var T=t.clamp(Math.min(e.minZoom,s,p),l.minZoom,l.maxZoom),k=x/l.zoomScale(T-s);b=Math.sqrt(k/S*2)}var I=b*b,E=i(0),A=function(t){return a(E)/a(E+b*t)},C=function(t){return x*((a(E)*(r(e=E+b*t)/a(e))-r(E))/I)/S;var e},L=(i(1)-E)/b;if(Math.abs(S)<1e-6||!isFinite(L)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var z=w<x?-1:1;L=Math.abs(Math.log(w/x))/b,C=function(){return 0},A=function(t){return Math.exp(z*b*t)}}if("duration"in e)e.duration=+e.duration;else{e.duration=1e3*L/("screenSpeed"in e?+e.screenSpeed/b:+e.speed)}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=u!==h,this._pitching=d!==c,this._prepareEase(n,!1),this._ease(function(e){var i=e*L,r=1/A(i);l.zoom=1===e?p:s+l.scaleZoom(r),o._rotating&&(l.bearing=t.number(u,h,e)),o._pitching&&(l.pitch=t.number(c,d,e));var a=1===e?y:l.unproject(_.add(v.mult(C(i))).mult(r));l.setLocationAtPoint(l.renderWorldCopies?a.wrap():a,m),o._fireMoveEvents(n)},function(){return o._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),mi=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};mi.prototype.getDefaultPosition=function(){return"bottom-right"},mi.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=pt.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},mi.prototype.onRemove=function(){pt.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},mi.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:_t.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,i){return n.value&&(t+=n.key+"="+n.value+(i<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},mi.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},mi.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var r=n[i].getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},mi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var gi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};gi.prototype.onAdd=function(t){this._map=t,this._container=pt.create("div","mapboxgl-ctrl");var e=pt.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},gi.prototype.onRemove=function(){pt.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},gi.prototype.getDefaultPosition=function(){return"bottom-left"},gi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},gi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},gi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var yi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};yi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},yi.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var r=i[n];if(r.id===t)return void(r.cancelled=!0)}},yi.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},yi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var _i=t.window.HTMLImageElement,vi=t.window.HTMLElement,bi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xi=function(e){function n(n){var i=this;if(null!=(n=t.extend({},bi,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Kn(n.minZoom,n.maxZoom,n.renderWorldCopies);e.call(this,r,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new yi,this._controls=[];var a=n.transformRequest;if(this._transformRequest=a?function(t,e){return a(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof n.container){if(this._container=t.window.document.getElementById(n.container),!this._container)throw new Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof vi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),i=null,r=!1,a=null;for(var o in di)t[o]=new di[o](t,e),e.interactive&&e[o]&&t[o].enable(e[o]);pt.addEventListener(n,"mouseout",function(e){t.fire(new ti("mouseout",t,e))}),pt.addEventListener(n,"mousedown",function(i){r=!0,a=pt.mousePos(n,i);var o=new ti("mousedown",t,i);t.fire(o),o.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}),pt.addEventListener(n,"mouseup",function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new ti("contextmenu",t,i)),i=null,r=!1,t.fire(new ti("mouseup",t,e))}),pt.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==n;)i=i.parentNode;i===n&&t.fire(new ti("mousemove",t,e))}}),pt.addEventListener(n,"mouseover",function(e){for(var i=e.target;i&&i!==n;)i=i.parentNode;i===n&&t.fire(new ti("mouseover",t,e))}),pt.addEventListener(n,"touchstart",function(n){var i=new ei("touchstart",t,n);t.fire(i),i.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(i))},{passive:!1}),pt.addEventListener(n,"touchmove",function(e){t.fire(new ei("touchmove",t,e))},{passive:!1}),pt.addEventListener(n,"touchend",function(e){t.fire(new ei("touchend",t,e))}),pt.addEventListener(n,"touchcancel",function(e){t.fire(new ei("touchcancel",t,e))}),pt.addEventListener(n,"click",function(i){var r=pt.mousePos(n,i);(r.equals(a)||r.dist(a)<e.clickTolerance)&&t.fire(new ti("click",t,i))}),pt.addEventListener(n,"dblclick",function(e){var n=new ti("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),pt.addEventListener(n,"contextmenu",function(e){var n=t.dragRotate.isActive();r||n?r&&(i=e):t.fire(new ti("contextmenu",t,e)),e.preventDefault()}),pt.addEventListener(n,"wheel",function(n){e.interactive&&t.stop();var i=new ni("wheel",t,n);t.fire(i),i.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,n),this._hash=n.hash&&(new Qn).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),this.resize(),n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new mi({customAttribution:n.customAttribution})),this.addControl(new gi,n.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){i.fire(new t.Event(e.dataType+"dataloading",e))})}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var i={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return n.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},n.prototype.resize=function(e){var n=this._containerDimensions(),i=n[0],r=n[1];return this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(Nt.convert(t)),this._update()},n.prototype.setMinZoom=function(t){if((t=null===t||void 0===t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.project=function(t){return this.transform.locationPoint(Ut.convert(t))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype.on=function(t,n,i){var r,a=this;if(void 0===i)return e.prototype.on.call(this,t,n);var o=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:i,delegates:{mousemove:function(r){var o=a.getLayer(n)?a.queryRenderedFeatures(r.point,{layers:[n]}):[];o.length?e||(e=!0,i.call(a,new ti(t,a,r.originalEvent,{features:o}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var o=!1;return{layer:n,listener:i,delegates:{mousemove:function(e){(a.getLayer(n)?a.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?o=!0:o&&(o=!1,i.call(a,new ti(t,a,e.originalEvent)))},mouseout:function(e){o&&(o=!1,i.call(a,new ti(t,a,e.originalEvent)))}}}}return{layer:n,listener:i,delegates:(r={},r[t]=function(t){var e=a.getLayer(n)?a.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&(t.features=e,i.call(a,t),delete t.features)},r)}}();for(var l in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)a.on(l,o.delegates[l]);return this},n.prototype.off=function(t,n,i){if(void 0===i)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],a=0;a<r.length;a++){var o=r[a];if(o.layer===n&&o.listener===i){for(var l in o.delegates)this.off(l,o.delegates[l]);return r.splice(a,1),this}}return this},n.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var i;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),a=t.Point.convert(e[1]);i=[r,new t.Point(a.x,r.y),a,new t.Point(r.x,a.y),r]}return this.style.queryRenderedFeatures(i,n,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new dn(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var a=i.sdf;if(void 0===a&&(a=!1),n instanceof _i){var o=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:o.width,height:o.height},o.data),pixelRatio:r,sdf:a})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(l)),pixelRatio:r,sdf:a})}},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0)},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=pt.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=pt.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=pt.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var i=this._controlContainer=pt.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=pt.create("div","mapboxgl-ctrl-"+t,i)})},n.prototype._resizeCanvas=function(e,n){var i=t.window.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},ct.webGLContextAttributes),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?this.painter=new Xn(n,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,i=t.browser.now();this.style.zoomHistory.update(n,i);var r=new t.EvaluationParameters(n,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=r.crossFadingFactor();1===a&&a===this._crossFadingFactor||(e=!0,this._crossFadingFactor=a),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},n.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[];var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),rt(this._canvasContainer),rt(this._controlContainer),rt(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype._rerender=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(t){this._repaint=t,this._update()},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(n.prototype,i),n}(fi),wi={showCompass:!0,showZoom:!0},Si=function(e){var n=this;this.options=t.extend({},wi,e),this._container=pt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=pt.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};Si.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Si.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oi(t,{button:"left",element:this._compass}),pt.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Si.prototype.onRemove=function(){pt.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),pt.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Si.prototype._createButton=function(t,e,n){var i=pt.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",n),i};var Ti,ki={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Ii=function(e){function n(n){if(e.call(this),(arguments[0]instanceof t.window.HTMLElement||2===arguments.length)&&(n=t.extend({element:n},arguments[1])),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=pt.create("div");var i=pt.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var r=pt.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var a=pt.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var o=pt.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var l=0,s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<s.length;l+=1){var u=s[l],c=pt.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",u.rx),c.setAttributeNS(null,"ry",u.ry),o.appendChild(c)}var p=pt.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var h=pt.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(h);var d=pt.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var f=pt.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(f);var m=pt.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var g=pt.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=pt.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var _=pt.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),g.appendChild(y),g.appendChild(_),a.appendChild(o),a.appendChild(p),a.appendChild(d),a.appendChild(m),a.appendChild(g),i.appendChild(a),this._element.appendChild(i),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),pt.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Ut.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=at(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),pt.setTransform(this._element,ki[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),ot(this._element,this._anchor,"marker"))},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n}(t.Evented),Ei={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Ai=function(e){function n(n){e.call(this),this.options=t.extend({},Ei,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=pt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Ti?n(Ti):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){n(Ti="denied"!==t.state)}):(Ti=!!t.window.navigator.geolocation,n(Ti)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),pt.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(t){var e=new Ut(t.coords.longitude,t.coords.latitude);this._map.fitBounds(e.toBounds(t.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=pt.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=pt.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ii(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Ci={maxWidth:100,unit:"metric"},Li=function(e){this.options=t.extend({},Ci,e),t.bindAll(["_onMove","setUnit"],this)};Li.prototype.getDefaultPosition=function(){return"bottom-left"},Li.prototype._onMove=function(){lt(this._map,this._container,this.options)},Li.prototype.onAdd=function(t){return this._map=t,this._container=pt.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Li.prototype.onRemove=function(){pt.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Li.prototype.setUnit=function(t){this.options.unit=t,lt(this._map,this._container,this.options)};var zi=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};zi.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=pt.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},zi.prototype.onRemove=function(){pt.remove(this._container),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},zi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},zi.prototype._setupUI=function(){var e=this._fullscreenButton=pt.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},zi.prototype._isFullscreen=function(){return this._fullscreen},zi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},zi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Pi={closeButton:!0,closeOnClick:!0,className:""},Di=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(Pi),n),t.bindAll(["_update","_onClickClose"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&pt.remove(this._content),this._container&&(pt.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Ut.convert(t),this._pos=null,this._update(),this},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,i=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&pt.remove(this._content),this._content=pt.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=pt.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=pt.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=pt.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=at(this._lngLat,this._pos,this._map.transform));var n=this._pos=this._map.project(this._lngLat),i=this.options.anchor,r=function e(n){if(n){if("number"==typeof n){var i=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-n),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var r=t.Point.convert(n);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,o=this._container.offsetWidth,l=this._container.offsetHeight;a=n.y+r.bottom.y<l?["top"]:n.y>this._map.transform.height-l?["bottom"]:[],n.x<o/2?a.push("left"):n.x>this._map.transform.width-o/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var s=n.add(r[i]).round();pt.setTransform(this._container,ki[i]+" translate("+s.x+"px,"+s.y+"px)"),ot(this._container,i,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented),Mi={version:"0.49.0",supported:ct,setRTLTextPlugin:t.setRTLTextPlugin,Map:xi,NavigationControl:Si,GeolocateControl:Ai,AttributionControl:mi,ScaleControl:Li,FullscreenControl:zi,Popup:Di,Marker:Ii,Style:dn,LngLat:Ut,LngLatBounds:Nt,Point:t.Point,Evented:t.Evented,config:_t,mapbox:Lt,get accessToken(){return _t.ACCESS_TOKEN},set accessToken(t){_t.ACCESS_TOKEN=t},get workerCount(){return je.workerCount},set workerCount(t){je.workerCount=t},workerUrl:""};return Mi}),i})},274:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){function t(){this.property=[]}return t.prototype.getProperty=function(){return this.property},t.prototype.getFilter=function(){return this.filter},t.prototype.setFilter=function(t){this.filter=t},t}()},275:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(118),r=function(){function t(){}return t.prototype.initFeature=function(t,e,n){this.feature=new i.a(t,e,n)},t.prototype.initFeatureLayers=function(t,e,n,i,r){this.feature.addLayer(t,e,n,i,r)},t.prototype.getFeature=function(){return this.feature},t.prototype.getFilter=function(){return this.filter},t.prototype.setFilter=function(t){this.filter=t},t}()},276:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return FetchableDataset});var __WEBPACK_IMPORTED_MODULE_0_rxjs_observable_forkJoin__=__webpack_require__(172),__WEBPACK_IMPORTED_MODULE_0_rxjs_observable_forkJoin___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_rxjs_observable_forkJoin__),FetchableDataset=function(){function FetchableDataset(t,e){this.providers=t,this.fetchServ=e}return FetchableDataset.prototype.fetch=function(){var _this=this;return new Promise(function(resolve,reject){if(0==_this.providers.length)return console.log("No data provider"),void reject();for(var observables=[],i=0;i<_this.providers.length;i++){var provider=_this.providers[i],obs=_this.fetchServ.fetchData(provider.url,provider.httpMethod,provider.body,provider.timeout);observables.push(obs)}_this.observable=Object(__WEBPACK_IMPORTED_MODULE_0_rxjs_observable_forkJoin__.forkJoin)(observables).subscribe(function(res){try{for(var resCollection=[],i=0;i<res.length;i++){var formatter=_this.providers[i].formatter;if(formatter){var formatterFunc=eval(formatter);res[i]=formatterFunc(res[i]),res[i]?resCollection=resCollection.concat(res[i]):console.log(_this.providers[i].id,"Requested data is undefined after formatter")}}resolve(resCollection)}catch(t){console.log(t),reject()}},function(t){reject()})})},FetchableDataset.prototype.stopFetch=function(){this.observable&&this.observable.unsubscribe()},FetchableDataset.prototype.getRawData=function(){return this.rawData},FetchableDataset}()}},[220]);